window.__require=function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({AbilityConfig:[function(t,e,n){"use strict";cc._RF.push(e,"45e0fazgstH9Ij7dgwMHcUT","AbilityConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.BuffType=n.AbilityRangeType=void 0,function(t){t[t.Single=0]="Single",t[t.Area=1]="Area"}(n.AbilityRangeType||(n.AbilityRangeType={})),function(t){t[t.Freeze=0]="Freeze",t[t.MoveSpeed=1]="MoveSpeed",t[t.Attack=2]="Attack",t[t.AttackSpeed=3]="AttackSpeed"}(n.BuffType||(n.BuffType={})),cc._RF.pop()},{}],Ability:[function(t,e,n){"use strict";cc._RF.push(e,"447e7xmzA5CsJl0Y1MYTcj6","Ability");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Ability=void 0;var s=a(t("../../Component/Gameplay/CollisionWrapper")),c=a(t("../../Component/Gameplay/EntityTag")),u=t("../../Module/ConfigManager"),l=a(t("../../Utils/Path")),f=a(t("../../Utils/Utils")),p=t("./BaseEntity"),h=t("./Enemy"),d=function(t){function e(e,n){var r,o,i=t.call(this,e,n)||this;return i._tick=0,i._isInEffect=!1,i.config=u.ConfigManager.instance.getAbilityConfig(n),i._totalDuration=i.config.damageDelay+Math.max((null===(r=i.config.buff)||void 0===r?void 0:r.duration)||0,(null===(o=i.config.dot)||void 0===o?void 0:o.duration)||0),i}return o(e,t),e.prototype.onAvatarReady=function(){var t=f.default.getComponentInChildren(this.avatar,cc.Collider);t.enabled=!0,f.default.getOrAddComponent(t.node,c.default).entity=this;var e=f.default.getOrAddComponent(t.node,s.default);e.onEnter.clear(),e.onEnter.add(this.onCollisionEnter,this),e.onExit.clear(),e.onExit.add(this.onCollisionExit,this),this._tick=0,this._enemyUids=new Set},e.prototype.getAssetPath=function(){return l.default.getEntityPath(this.config.asset)},e.prototype.update=function(t){var e,n,r,o,a,s,c,u;if(this.avatar){var l=this._tick;if(this._tick+=t,!this._isInEffect&&this._tick>=this.config.damageDelay){this._isInEffect=!0,this._affectEnemy=[];try{for(var p=i(this._enemyUids),h=p.next();!h.done;h=p.next()){var d=h.value,_=this._entityContext.getEnemy(d);this._affectEnemy.push(_)}}catch(P){e={error:P}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var y=i(this._affectEnemy),g=y.next();!g.done;g=y.next()){_=g.value;var v=f.default.randomRangeInt(this.config.damageRange[0],this.config.damageRange[1]);_.hurt(v,this.owner),this.config.buff&&_.addBuff(this.config.buff)}}catch(O){r={error:O}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}if(this._isInEffect){if(!this.config.buff&&!this.config.dot)return void this._entityContext.removeAbility(this.uid);if(this.config.buff&&this._tick>=this._totalDuration)try{for(var m=i(this._affectEnemy),b=m.next();!b.done;b=m.next())(_=b.value).removeBuff(this.config.buff)}catch(R){a={error:R}}finally{try{b&&!b.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(this.config.dot){var C=this.config.dot,S=Math.floor((l-this.config.damageDelay)/(C.duration/C.count)),w=Math.floor((this._tick-this.config.damageDelay)/(C.duration/C.count));if(w>S&&w<=C.count&&w>0)for(var A=S;A<w;++A)try{for(var E=(c=void 0,i(this._affectEnemy)),M=E.next();!M.done;M=E.next())(_=M.value).hurt(C.dph,this.owner)}catch(x){c={error:x}}finally{try{M&&!M.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}this._tick>=this._totalDuration&&this._entityContext.removeAbility(this.uid)}}},e.prototype.onCollisionEnter=function(t){if(!this._isInEffect){var e=t.node.getComponent(c.default);if(null!=e.entity)if(e.entity instanceof h.Enemy){var n=e.entity;this._enemyUids.add(n.uid)}else cc.error("[Ability] onCollision, other entity is not Enemy: "+e.entity);else cc.error("[Ability] onCollision, other entity is null")}},e.prototype.onCollisionExit=function(t){if(!this._isInEffect){var e=t.node.getComponent(c.default);if(null!=e.entity)if(e.entity instanceof h.Enemy){var n=e.entity;this._enemyUids.delete(n.uid)}else cc.error("[Ability] onCollision, other entity is not Enemy: "+e.entity);else cc.error("[Ability] onCollision, other entity is null")}},e.prototype.toString=function(){return"Ability: "+this.config.name+"["+this.uid+"]"},e}(p.BaseEntity);n.Ability=d,cc._RF.pop()},{"../../Component/Gameplay/CollisionWrapper":"CollisionWrapper","../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./BaseEntity":"BaseEntity","./Enemy":"Enemy"}],AchievementStatus:[function(t,e,n){"use strict";cc._RF.push(e,"377c8p9LOZCEagSm3Gw9KEk","AchievementStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.AchievementStatus=void 0,function(t){t[t.New=0]="New",t[t.Finish=1]="Finish",t[t.GetReward=2]="GetReward"}(n.AchievementStatus||(n.AchievementStatus={})),cc._RF.pop()},{}],Action:[function(t,e,n){"use strict";cc._RF.push(e,"75033kg3tJHrbYe4hNpS6Tm","Action");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.Action3=n.Action2=n.Action1=n.Action=n.CallBack=void 0;var s=function(){function t(t,e){this.dirty=!1,this.fun=t,this.thisArg=e}return t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.dirty){if(null!=this.thisArg)return(t=this.fun).call.apply(t,a([this.thisArg],e));this.fun.apply(this,a(e))}},t.prototype.isOriginFrom=function(t,e){return this.fun==t&&this.thisArg==e},Object.defineProperty(t.prototype,"originFun",{get:function(){return this.fun},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originThisArg",{get:function(){return this.thisArg},enumerable:!1,configurable:!0}),t}();n.CallBack=s;var c=function(){function t(){this.callBackList=[],this.callingRemNum=-1}return t.prototype.add=function(t,e){null!=t&&-1==this.getFunIndex(t,e)&&this.callBackList.push(new s(t,e))},t.prototype.remove=function(t,e){if(null!=t)if(this.callingRemNum>=0){this.callingRemNum++;var n=this.getCallBack(t,e);null!=n&&(n.dirty=!0)}else{var r=this.getFunIndex(t,e);-1!=r&&this.callBackList.splice(r,1)}},t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0!=this.callBackList.length){this.callingRemNum=0;for(var r=0;r<this.callBackList.length;r++)(t=this.callBackList[r]).call.apply(t,a(e));if(this.callingRemNum>0)for(r=0;r<this.callBackList.length;)this.callBackList[r].dirty?this.callBackList.splice(r,1):r++;this.callingRemNum=-1}},t.prototype.includes=function(t,e){return null!=t&&-1!=this.getFunIndex(t,e)},t.prototype.clear=function(){this.callBackList.length>0&&(this.callBackList.length=0)},Object.defineProperty(t.prototype,"count",{get:function(){return this.callBackList.length},enumerable:!1,configurable:!0}),t.prototype.getFunIndex=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return n;return-1},t.prototype.getCallBack=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return this.callBackList[n];return null},t}();n.Action=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e){t.prototype.call.call(this,e)},e}(c);n.Action1=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n){t.prototype.call.call(this,e,n)},e}(c);n.Action2=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n,r){t.prototype.call.call(this,e,n,r)},e}(c);n.Action3=f,cc._RF.pop()},{}],AdData:[function(t,e,n){"use strict";cc._RF.push(e,"2e756a0UeREqZ7cWriiZTfq","AdData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],AdSystem:[function(t,e,n){"use strict";cc._RF.push(e,"714a0rBS+BD1JDEbTURyGDY","AdSystem");var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.AdSystem=void 0;var a,s,c=i(t("../../Component/View/BusyView/BusyView")),u=t("../../Enum/WatchAdStatus"),l=t("../../Module/Statistics"),f=i(t("../../Utils/Platform")),p=i(t("../../Utils/Utils")),h=i(t("../Game")),d=window.wx||window.qq||window.tt;(function(t){t[t.Bottom=0]="Bottom",t[t.Top=1]="Top"})(a||(a={})),function(t){t[t.LeftTop=0]="LeftTop",t[t.RightTop=1]="RightTop",t[t.LeftBottom=2]="LeftBottom",t[t.RightBottom=3]="RightBottom"}(s||(s={}));var _=["adunit-cb64c7519047bf9b","adunit-d9ba532529f7253a","adunit-28a93ffd22f5e0b6"],y=["d9298a9cda8267bb8c992362f3fa725b"],g=["t3rfli7j2e11521gk7"],v=function(){function t(){this._currentAdIdPlayCount=0,this._userAdData=null,this._tooFreqVideoTimes=0,this._banVideo=!1,this._banSec=0,this._insertAd=null,this._insertAdReady=!1,this.name="AdSystem"}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){return o(this,function(){return this._videoCloseCallbacks=[],f.default.isWx()?(this.AD_UNIT_IDS=_,this.BANNER_UNIT_ID="adunit-718b1ee1ee29d4de",this.INSERT_UNIT_ID="adunit-5c469a4740b245a2"):f.default.isQQ()?(this.AD_UNIT_IDS=y,this.BANNER_UNIT_ID="b267d396b718f42e17a170fb179d5ae4",this.INSERT_UNIT_ID="f801dc59ee5188231adad844e50dee6c"):f.default.isBytedance()?(this.AD_UNIT_IDS=g,this.BANNER_UNIT_ID="422789hidi56439b7k",this.INSERT_UNIT_ID="27eb4hji0ek5jnkeef"):this.AD_UNIT_IDS=[],this.supportVideoAd()&&(this.prepareVideoAd(),this.prepareBannerAd()),this.supportInsertAd&&this.prepareInsertAd(),this._initInsertAd(),[2]})})},t.prototype._initInsertAd=function(){var t=this;this.supportInsertAd()&&cc.game.on(cc.game.EVENT_SHOW,function(){t.showInsertAd()},this)},t.prototype.logicUpdate=function(t){this._banVideo&&(this._banSec-=t,this._banSec<=0&&(this._banSec=0,this._banVideo=!1))},t.prototype.destroy=function(){this._videoAd&&(this._videoAd.destroy(),this._videoAd=null),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null),this._customAd&&(this._customAd.destroy(),this._customAd=null),t._instance=null},t.prototype.supportVideoAd=function(){return!!f.default.isTest()||(f.default.isMiniGame()?null!=d.createRewardedVideoAd:!!f.default.isMobile())},t.prototype.supportInsertAd=function(){return!1},t.prototype.supportBannerAd=function(){return!!f.default.isTest()||(f.default.isMiniGame()?null!=d.createBannerAd&&!f.default.isBytedance():!!f.default.isMobile())},t.prototype.supportCustomAd=function(){return!!f.default.isWx()&&null!=wx.createCustomAd},t.prototype.getVideoAdId=function(){return this.AD_UNIT_IDS[this._videoAdIdIndex]},t.prototype.prepareVideoAd=function(){var t=this;if(this.supportVideoAd())if(f.default.isTest())this._videoReady=!0;else if(f.default.isWx()||f.default.isBytedance()){this._videoAd&&(console.warn("[AdSystem] video ad already exists, id '"+this.getVideoAdId()+"', destroy it"),this._videoAd.destroy()),null==this._videoAdIdIndex?this._videoAdIdIndex=Math.floor(Math.random()*this.AD_UNIT_IDS.length):this._videoAdIdIndex=(this._videoAdIdIndex+1)%this.AD_UNIT_IDS.length;var e=this.getVideoAdId();this._currentAdIdPlayCount=0,this._videoReady=!1,this._videoAd=d.createRewardedVideoAd({adUnitId:e}),this._videoAd.onLoad(function(){t._videoReady=!0}),this._videoAd.onError(function(e){console.warn("[AdSystem] video '"+t.getVideoAdId()+"' load failed! errMsg: "+e.errMsg+", errCode: "+e.errCode)}),this._videoAd.onClose(function(e){e&&e.isEnded||void 0===e?t.dispatchVideoClose(u.WatchAdStatus.Success):t.dispatchVideoClose(u.WatchAdStatus.Cancel)})}},t.prototype.onVideoClose=function(t){this._videoCloseCallbacks.push(t)},t.prototype.dispatchVideoClose=function(t){this._videoCloseCallbacks.forEach(function(e){return e(t)}),this._videoCloseCallbacks.splice(0)},t.prototype.isVideoAdReady=function(){return f.default.isWx()||f.default.isBytedance()?this._videoReady:!!f.default.isMobile()||!!f.default.isQQ()},t.prototype.showVideoAd=function(t,e){var n=this;return void 0===e&&(e=!1),this._videoCloseCallbacks.length=0,new Promise(function(i){return r(n,void 0,void 0,function(){var n=this;return o(this,function(){return!e&&this._banVideo?(p.default.formatTimeText(1e3*this._banSec),i(u.WatchAdStatus.TooFreq),[2]):(c.default.show(),this.onVideoClose(function(r){if(c.default.hide(),r===u.WatchAdStatus.Success){l.Statistic.instance.addLog(l.LogEvent.WATCH_AD,{area:t,result:l.AD_RESULT.SUCCESS},!0);var o=h.default.instance.time();n._lastVideoTs?(o-n._lastVideoTs<15e3&&(e||n._tooFreqVideoTimes++,n._tooFreqVideoTimes>=10&&(n._banVideo=!0,n._tooFreqVideoTimes=0)),n._lastVideoTs=o):n._lastVideoTs=o}else r===u.WatchAdStatus.Cancel?l.Statistic.instance.addLog(l.LogEvent.WATCH_AD,{area:t,result:l.AD_RESULT.CANCEL},!0):r===u.WatchAdStatus.Failed&&l.Statistic.instance.addLog(l.LogEvent.WATCH_AD,{area:t,result:l.AD_RESULT.FAILED},!0);i(r)}),this.isVideoAdReady()&&(f.default.isTest()?this.dispatchVideoClose(u.WatchAdStatus.Success):f.default.isWx()||f.default.isBytedance()?this._videoAd.show().catch(function(t){console.warn("[AdSystem] showVideoAd: '"+n.getVideoAdId()+"', failed first time, retry, errMsg: "+t.errMsg+", errCode: "+t.errCode),n._videoAd.load().then(function(){return n._videoAd.show()}).catch(function(t){console.warn("[AdSystem] showVideoAd: '"+n.getVideoAdId()+"', failed second time, errMsg: "+t.errMsg+", errCode: "+t.errCode),n.dispatchVideoClose(u.WatchAdStatus.Failed),n.prepareVideoAd()})}):f.default.isMobile()||f.default.isQQ()),[2])})})})},t.prototype.prepareInsertAd=function(){var t=this;if(this.supportInsertAd()&&f.default.isMiniGame()){this._insertAd&&this._insertAd.destroy();var e=this.INSERT_UNIT_ID;if(this._insertAdReady=!1,this._insertAd=d.createInterstitialAd({adUnitId:e}),!this._insertAd)return;this._insertAd.onLoad(function(){t._insertAdReady=!0,console.log("[AdSystem] insertad load success")}),this._insertAd.onError(function(e){console.warn("[AdSystem] video '"+t.getVideoAdId()+"' load failed! errMsg: "+e.errMsg+", errCode: "+e.errCode)}),this._insertAd.onClose(function(e){e&&e.isEnded||void 0===e?t.dispatchVideoClose(u.WatchAdStatus.Success):t.dispatchVideoClose(u.WatchAdStatus.Cancel)})}},t.prototype.prepareBannerAd=function(){var t=this;if(this.supportBannerAd()&&f.default.isMiniGame()){this._bannerAd&&(this._bannerAd.hide(),this._bannerAd.destroy()),this._bannerShowing=!1,this._bannerSize=null;var e=d.getSystemInfoSync(),n=e.screenWidth,r=e.screenHeight,o=n;this._bannerAd=d.createBannerAd({adUnitId:this.BANNER_UNIT_ID,style:{left:0,top:r,width:o,height:void 0}}),this._bannerAd.onResize(function(e){t._bannerSize=e}),this._bannerAd.onLoad(function(){}),this._bannerAd.onError(function(t){t.errMsg,t.errCode})}},t.prototype.showInsertAd=function(){var t=this;if(this.isMainGuideDone())return new Promise(function(e){t.supportInsertAd()?(t._insertAdShowing&&t.prepareInsertAd(),t._insertAdShowing=!0,t._insertAd&&t._insertAd.show().then(function(){l.Statistic.instance.addLog(l.LogEvent.SHOW_INSERT_AD,{area:"area_insertAd",result:l.AD_RESULT.SUCCESS},!0),e(u.WatchAdStatus.Success)}).catch(function(){l.Statistic.instance.addLog(l.LogEvent.SHOW_INSERT_AD,{area:"area_insertAd",result:l.AD_RESULT.FAILED},!0),e(u.WatchAdStatus.Failed)})):e(u.WatchAdStatus.NotSupported)})},t.prototype.hideInsertAd=function(){this._insertAd&&(this._insertAdShowing=!1,f.default.isMiniGame()&&this.prepareInsertAd())},t.prototype.showBannerAd=function(t,e){var n=this;if(this.isMainGuideDone())return new Promise(function(t){if(n.supportBannerAd())if(n._bannerShowing&&n.prepareBannerAd(),n._bannerShowing=!0,f.default.isMiniGame()){if(e===a.Bottom){var r=d.getSystemInfoSync().screenHeight;n._bannerSize?n._bannerAd.style.top=r-n._bannerSize.height:n._bannerAd.onResize(function(t){n._bannerAd.style.top=r-t.height})}else n._bannerAd.style.top=0;n._bannerAd.show().then(function(){l.Statistic.instance.addLog(l.LogEvent.SHOW_BANNER_AD),t(u.WatchAdStatus.Success)}).catch(function(){return t(u.WatchAdStatus.Failed)})}else cc.sys.platform,cc.sys.ANDROID;else t(u.WatchAdStatus.NotSupported)})},t.prototype.isMainGuideDone=function(){return!0},t.prototype.hideBannerAd=function(){this._bannerShowing&&(this._bannerShowing=!1,f.default.isMiniGame()?this.prepareBannerAd():cc.sys.platform===cc.sys.ANDROID&&SDKBridge.getInstance().hideBannerAd())},t.prototype.showCustomAd=function(t){var e=this;return new Promise(function(n){if(e.supportCustomAd()){e.hideCustomAd();var r=30,o=50,i=wx.getSystemInfoSync(),a=i.screenWidth,c=i.screenHeight;switch(t){case s.LeftTop:r=30,o=50;break;case s.RightTop:r=a-68-30,o=50;break;case s.LeftBottom:r=30,o=c-106-50;break;case s.RightBottom:r=a-68-30,o=c-106-50}e._customAd=wx.createCustomAd({adUnitId:"adunit-e4da9a81c84b239a",adIntervals:30,style:{left:r,top:o,fixed:!1}}),e._customAd.onLoad(function(){console.log("[AdSystem] custom load success")}),e._customAd.onError(function(t){var e=t.errMsg,n=t.errCode;console.warn("[AdSystem] custom load failed! errMsg: "+e+", errCode: "+n)}),e._customAd.show().then(function(){return n(u.WatchAdStatus.Success)}).catch(function(){return n(u.WatchAdStatus.Failed)})}else n(u.WatchAdStatus.NotSupported)})},t.prototype.hideCustomAd=function(){f.default.isWx()&&this._customAd&&(this._customAd.destroy(),this._customAd=null)},t.prototype.showSplashAd=function(){cc.sys.platform===cc.sys.ANDROID&&SDKBridge.getInstance().showSplashAd(function(t,e){if(console.log("splash",t,e),0===t){var n=e.status;l.Statistic.instance.addLog(l.LogEvent.SHOW_SPLASH_AD,{status:n},!0)}})},t.prototype.showSplashIfNotFirstTime=function(){cc.sys.platform,cc.sys.ANDROID},t._instance=null,t.BannerLayoutType=a,t.CustomAdLayoutType=s,t.WatchAdStatus=u.WatchAdStatus,t}();n.AdSystem=v,cc._RF.pop()},{"../../Component/View/BusyView/BusyView":"BusyView","../../Enum/WatchAdStatus":"WatchAdStatus","../../Module/Statistics":"Statistics","../../Utils/Platform":"Platform","../../Utils/Utils":"Utils","../Game":"Game"}],AdType:[function(t,e,n){"use strict";cc._RF.push(e,"e66abjYpu5HuJkAV9BtaBp0","AdType"),Object.defineProperty(n,"__esModule",{value:!0}),n.AdType=void 0,function(t){t[t.AdStore=0]="AdStore"}(n.AdType||(n.AdType={})),cc._RF.pop()},{}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"1e35aOjGm5Iv54Fk3OYkaFq","Audio");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("../Utils/Path")),i=r(t("./Loader")),a=function(){function t(){this._audioClipCache=[],this.musicMap={},this.stopEffects=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){cc.audioEngine.setMaxAudioInstance(4)},t.prototype.play=function(t,e,n){e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?i.default.loadRes(t,cc.AudioClip,function(t){cc.audioEngine.play(t,e,n)},null):cc.audioEngine.play(t,e,n)},t.prototype.playEffect=function(t,e,n,r){var o,a=this;e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?(t=this.getRealAudioPath(t,r),i.default.loadRes(t,cc.AudioClip,function(t){a._audioClipCache.push(t.nativeUrl),cc.audioEngine.play(t,e,n)},null)):(o=t,a._audioClipCache.push(o.nativeUrl),cc.audioEngine.play(o,e,n))},t.prototype.playMusic=function(t,e,n,r){var o=this;if(null==n&&(n=!0),"string"==typeof t)t=this.getRealAudioPath(t,e),i.default.loadRes(t,cc.AudioClip,function(t){var e=cc.audioEngine.playMusic(t,n);o.musicMap[e]||(o.musicMap[e]=!0),r&&cc.audioEngine.setFinishCallback(e,function(){setTimeout(function(){r()},100)})},null);else{var a=cc.audioEngine.playMusic(t,n);this.musicMap[a]||(this.musicMap[a]=!0)}},t.prototype.getRealAudioPath=function(t,e){return e||(e=o.default.AUDIO_BUNDLE),e&&(t=o.default.getBundlePath(t,e)),t},t.prototype.stopMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.stop(e),this.musicMap[t]=!1)}},t.prototype.musicVolume=function(){return cc.audioEngine.getMusicVolume()},t.prototype.effectsVolume=function(){return cc.audioEngine.getEffectsVolume()},t.prototype.setMusicVolume=function(t){this.musicVolume()!=t&&cc.audioEngine.setMusicVolume(t)},t.prototype.setEffectsVolume=function(t){this.effectsVolume()!==t&&cc.audioEngine.setEffectsVolume(t)},t.prototype.pauseMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.pause(e),this.musicMap[t]=!1)}},t.prototype.resumeMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]||(cc.audioEngine.resume(e),this.musicMap[t]=!0)}},t.prototype.pauseEffects=function(){this.stopEffects=!0},t.prototype.resumeEffects=function(){this.stopEffects=!1},t._instance=null,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./Loader":"Loader"}],AutoRelease:[function(t,e,n){"use strict";cc._RF.push(e,"f36c6VWTpFCpoymRUusi9x9","AutoRelease");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.prefab=t},e.prototype.onDestroy=function(){},i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],BagData:[function(t,e,n){"use strict";cc._RF.push(e,"b9ff8vwDqxFtJoJgtXMSy2b","BagData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BagSystem:[function(t,e,n){"use strict";cc._RF.push(e,"fe8813fX39D86IoBJ+ddCHw","BagSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BagSystem=void 0;var c=s(t("../../Module/Database/Db")),u=t("./Common/DataSaver"),l={ItemChanged:"ItemChanged"},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BagSystem",e._saver=new u.DataSaver,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return this._data=c.default.instance.getData("bag"),this._data||(this._data={version:1,magic:1,items:{}},this.setDirty()),this._saver.init("bag",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(){},e.prototype.getItemCount=function(t){var e=this._data.items[t];return e?e.count:0},e.prototype.setItemCount=function(t,e){var n=this._data.items[t];n?n.count=e:this._data.items[t]={count:e},this.setDirty(),this.emit(l.ItemChanged,t,e)},e.prototype.addItemCount=function(t,e){var n=this.getItemCount(t),r=Math.max(0,n+e);this.setItemCount(t,r)},e.prototype.getItem=function(t){return this._data.items[t]},e._instance=null,e.Events=l,e}(cc.EventTarget);n.BagSystem=f,cc._RF.pop()},{"../../Module/Database/Db":"Db","./Common/DataSaver":"DataSaver"}],BaseEntity:[function(t,e,n){"use strict";cc._RF.push(e,"a7d56TwhqxPZZEwLIpp0ZKp","BaseEntity");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseEntity=void 0;var c=s(t("../../Module/Loader")),u=t("../../Utils/NodePool"),l=s(t("../../Utils/Utils")),f=function(t){function e(e,n){var r=t.call(this)||this;return r._animSpeed=1,r.uid=e,r.id=n,r}return o(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._avatar.getPosition(cc.v2())},set:function(t){this._avatar.setPosition(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anim",{get:function(){return this._anim},enumerable:!1,configurable:!0}),e.prototype.setInitPos=function(t){this._initPos=t},e.prototype.createAvatar=function(t){return i(this,void 0,void 0,function(){var e,n,r,o;return a(this,function(i){switch(i.label){case 0:return e=this.getAssetPath(),n=u.NodePool.instance,(r=n.getNode(e))?(this._avatar=r,[3,3]):[3,1];case 1:return[4,c.default.loadResAsync(e,cc.Prefab,null)];case 2:o=i.sent(),n.tryCreatePool(e,o),this._avatar=n.getNode(e),i.label=3;case 3:return t&&t.parent&&(this._avatar.parent=t.parent),this._initPos&&this._avatar.setPosition(this._initPos),this._anim=l.default.getComponentInChildren(this.avatar,cc.Animation),this._animState=null,this.onAvatarReady(),[2]}})})},e.prototype.destroy=function(){null!=this._avatar&&(u.NodePool.instance.putNode(this._avatar),this._avatar=null,this._anim=null,this._animState=null)},e.prototype.setContext=function(t){var e=this;this._context=t,this._entityContext=t.entityManager,this._context.battleSpeed.onValueChange.add(function(t){e._animState&&(e._animState.speed=e._animSpeed*t)})},e.prototype.playAnim=function(t,e,n){void 0===e&&(e=1),this._anim?(this._animState=this._anim.play(t),this._animSpeed=e,this._animState.speed=e*this._context.battleSpeed.value,n&&this._anim.on("finished",function(){n&&n()})):n&&n()},e.prototype.stopAnim=function(){this._anim&&(this._anim.stop(),this._animState=null)},e}(cc.EventTarget);n.BaseEntity=f,cc._RF.pop()},{"../../Module/Loader":"Loader","../../Utils/NodePool":"NodePool","../../Utils/Utils":"Utils"}],BaseSystem:[function(t,e,n){"use strict";cc._RF.push(e,"45fd9d1EhtJZqiy+D6TwR6T","BaseSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseSystem=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInitData=function(t,e){return void 0===e&&(e=1),t.version=e,t.magic=1,t},e}(cc.EventTarget);n.BaseSystem=i,cc._RF.pop()},{}],BattleData:[function(t,e,n){"use strict";cc._RF.push(e,"c0a30UQTc5LPIDIfrq1srdv","BattleData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BattleEndView:[function(t,e,n){"use strict";cc._RF.push(e,"3255fysJppGGpyIfnMkJ0fS","BattleEndView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Module/Loader")),u=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),f=a(t("../Module/ViewHandler")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelTime=null,e.labelRefresh=null,e.labelScore=null,e.labelConfirm=null,e.rewardNodes=null,e.rewardNode=null,e.dpsNodes=null,e.dpsNode=null,e._callback=null,e._gurads=null,e._rewards=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.battleResult,n=t.cb;this._callback=n,this._gurads=e.damageStats,this._rewards=e.rewards;var r=s.ConfigManager.instance.getLanConfig("ui_success"),o=s.ConfigManager.instance.getLanConfig("ui_failed"),i=s.ConfigManager.instance.getLanConfig("ui_confirm");this.labelTitle.string=1==e.success?r:o,this.labelConfirm.string=i,this.labelScore.string=""+e.score,this.labelTime.string=""+e.timeSec,this.initGuardNode(),this.initRewardNode()},e.prototype.initGuardNode=function(){this.dpsNodes.removeAllChildren();for(var t=Math.min(3,this._gurads.length),e=function(t){var e=n._gurads[t].id,r=cc.instantiate(n.dpsNode);r.parent=n.dpsNodes;var o="guard_"+e+"_name";r.getChildByName("labelName").getComponent(cc.Label).string=s.ConfigManager.instance.getLanConfig(o),r.getChildByName("labelDps").getComponent(cc.Label).string=""+n._gurads[t].damage;var i=r.getChildByName("img").getComponent(cc.Sprite),a=u.default.guardImgPath(e);c.default.loadRes(a,cc.SpriteFrame,function(t){i.spriteFrame=t,l.default.scaleImg(i.node,t,150)},n)},n=this,r=0;r<t;r++)e(r)},e.prototype.initRewardNode=function(){this.rewardNodes.removeAllChildren();for(var t=function(t){var n=e._rewards[t],r=cc.instantiate(e.rewardNode);r.parent=e.rewardNodes,r.getChildByName("labelNum").getComponent(cc.Label).string=""+n.count;var o=r.getChildByName("img").getComponent(cc.Sprite),i=r.getChildByName("imgOutline").getComponent(cc.Sprite),a=u.default.getItemPath(n.id),s=u.default.getItemOutlinePath(n.quality);c.default.loadRes(a,cc.SpriteFrame,function(t){o.spriteFrame=t,l.default.scaleImg(o.node,t,60)},e),c.default.loadRes(s,cc.SpriteFrame,function(t){i.spriteFrame=t,l.default.scaleImg(i.node,t,100)},e)},e=this,n=0;n<this._rewards.length;n++)t(n)},e.prototype.onConfirm=function(){this.close(),this._callback()},i([d(cc.Label)],e.prototype,"labelTitle",void 0),i([d(cc.Label)],e.prototype,"labelTime",void 0),i([d(cc.Label)],e.prototype,"labelRefresh",void 0),i([d(cc.Label)],e.prototype,"labelScore",void 0),i([d(cc.Label)],e.prototype,"labelConfirm",void 0),i([d(cc.Node)],e.prototype,"rewardNodes",void 0),i([d(cc.Prefab)],e.prototype,"rewardNode",void 0),i([d(cc.Node)],e.prototype,"dpsNodes",void 0),i([d(cc.Prefab)],e.prototype,"dpsNode",void 0),i([h],e)}(f.default);n.default=_,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleFlow:[function(t,e,n){"use strict";cc._RF.push(e,"31da3gE7f5Jma2feLKjHQ3X","BattleFlow");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleFlow=void 0;var o=r(t("lodash")),i=t("../Module/ConfigManager"),a=r(t("../Utils/Utils")),s=function(){function t(t,e){this.tick=0,this.delay=0,this.waveDuration=0,this.totalDuration=0,this.totalSpawnCount=0,this.currentSpawnCount=0,this.config=t,this.flowConfig=i.ConfigManager.instance.getLevelFlowConfig(t.waves[e]),this.delay=t.waveDelay[e],this.waveDuration=t.waveDuration[e],this.totalDuration=this.delay+this.waveDuration,this.totalSpawnCount=this.flowConfig.idArray.reduce(function(t,e){return t+e.enemyCount},0),this.toSpawnEnemys=o.default.cloneDeep(this.flowConfig.idArray)}return t.prototype.tickToGetGenerateEnemy=function(t){return this.tick+=t,this.tick>this.delay&&this.currentSpawnCount<this.totalSpawnCount&&this.tick-this.delay>=this.currentSpawnCount/this.totalSpawnCount*this.waveDuration?this.getRandEnemyId():0},t.prototype.getRandEnemyId=function(){var t=a.default.randomRangeInt(0,this.toSpawnEnemys.length),e=this.toSpawnEnemys[t],n=e.enemyId;return e.enemyCount-=1,e.enemyCount<=0&&this.toSpawnEnemys.splice(t,1),this.currentSpawnCount++,n},t.prototype.isFinish=function(){return this.tick>=this.totalDuration},t}();n.BattleFlow=s,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Utils/Utils":"Utils",lodash:10}],BattleStats:[function(t,e,n){"use strict";cc._RF.push(e,"75e5cy7MapP4obU3fFjbg8F","BattleStats");var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleStats=void 0;var i=function(){function t(){this._id2damage=new Map,this._score=0}return t.prototype.addScore=function(t){this._score+=t},t.prototype.getScore=function(){return this._score},t.prototype.recordDamage=function(t,e){var n=this._id2damage.get(t)||0;n+=e,this._id2damage.set(t,n)},t.prototype.clear=function(){this._score=0,this._id2damage.clear()},t.prototype.getDamage=function(t){return this._id2damage.get(t)||0},t.prototype.getAllDamages=function(){var t,e,n=[];try{for(var i=r(this._id2damage.entries()),a=i.next();!a.done;a=i.next()){var s=o(a.value,2),c=s[0],u=s[1];n.push({id:c,damage:u})}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t}();n.BattleStats=i,cc._RF.pop()},{}],BattleSystem:[function(t,e,n){"use strict";cc._RF.push(e,"55aedCHnDZOKblLTS9rkiyl","BattleSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleSystem=void 0;var c=t("../../Module/ConfigManager"),u=s(t("../../Module/Database/Db")),l=s(t("../../Module/ViewModule")),f=s(t("../../Utils/Path")),p=t("../Battle"),h=t("./Common/DataSaver"),d={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BattleSystem",e._curLevel=1,e._saver=new h.DataSaver,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return this._data=u.default.instance.getData("battle"),this._data||(this._data={magic:1,version:1,curLevel:1,levelData:{}},this.setDirty()),this._saver.init("battle",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(t){this._battle&&this._battle.update(t)},e.prototype.getBattle=function(){return this._battle},e.prototype.getCurrentLevel=function(){return this._data.curLevel},e.prototype.setCurrentLevel=function(t){this._data.curLevel!=t&&(this._data.curLevel=t,this.setDirty())},e.prototype.startBattle=function(t){return i(this,void 0,void 0,function(){var e;return a(this,function(){return this._battle&&this._battle.destroy(),this._curLevel=t,e=c.ConfigManager.instance.getLevelConfig(this._curLevel),this._battle=new p.Battle(e),this._battle.on(p.Battle.Events.BattleEnd,this.onBattleEnd,this),l.default.instance.pushView("BattleView",this._battle,{bundle:f.default.BATTLE_BUNDLE,onLoaded:this.onBattleViewLoaded.bind(this)}),[2]})})},e.prototype.onBattleViewLoaded=function(t){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.emit(d.BattleStart,this._curLevel),this._battleView=t,this._battle.setView(t),[4,this._battle.load()];case 1:return e.sent(),this._battle.startBattle(),[2]}})})},e.prototype.onBattleEnd=function(t){this._battleView&&(this._battleView.close(),this._battleView=null),this._battle&&(this._battle.destroy(),this._battle=null),this.emit(d.BattleEnd);var e=this._data.levelData[this._curLevel];e?t.score>e.maxScore&&(e.maxScore=t.score,this.setDirty()):(this._data.levelData[this._curLevel]={level:this._curLevel,maxScore:t.score},this.setDirty())},e._instance=null,e.Events=d,e}(cc.EventTarget);n.BattleSystem=_,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Module/Database/Db":"Db","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../Battle":"Battle","./Common/DataSaver":"DataSaver"}],BattleUI:[function(t,e,n){"use strict";cc._RF.push(e,"b7d567lHMFEsJYlLRg3HeIz","BattleUI");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Gameplay/Entity/EntityManager"),c=t("../Gameplay/Entity/Player"),u=a(t("../Module/Loader")),l=a(t("../Utils/Path")),f=a(t("../Utils/Utils")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSpeedUp=null,e.hpBar=null,e.hpLabel=null,e.expBar=null,e.expLabel=null,e.labelSpeed=null,e.rightInfoNode=null,e.guardNode=null,e._guardNode={},e}return o(e,t),e.prototype.init=function(t){var e=this;this.battleContext=t,this.entityManager=t.entityManager;var n=this.entityManager.getPlayer();this.hpBar.progress=1,this.hpLabel.string=n.hp+"/"+n.maxHp,n.on(c.Player.Events.Hp,function(t,n){e.hpBar.progress=cc.misc.clamp01(t/n),e.hpLabel.string=t+"/"+n}),this.expBar.progress=0,this.expLabel.string=n.exp+"/"+n.upgradeExp,n.on(c.Player.Events.Exp,function(t,n){e.expBar.progress=cc.misc.clamp01(t/n),e.expLabel.string=t+"/"+n}),this.btnSpeedUp.node.targetOff(this),this.btnSpeedUp.node.on("click",function(){var t=e.battleContext.battleSpeed.value;(t+=1)>3&&(t=1),e.battleContext.battleSpeed.value=t,e.labelSpeed.string="x"+t},this),this.entityManager.on(s.EntityManager.Events.GuardCreate,this.onGuardCreate,this),this.entityManager.on(s.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this)},e.prototype.onGuardCreate=function(t){var e={count:1,type:t.type,node:null};this._guardNode[t.id]?this._guardNode[t.id].count++:this._guardNode[t.id]=e;var n=this._guardNode[t.id],r=null;if(n.node)r=this._guardNode[t.id].node;else{(r=cc.instantiate(this.guardNode)).parent=this.rightInfoNode,n.node=r;var o=l.default.guardImgPath(t.id),i=r.getChildByName("img").getComponent(cc.Sprite);u.default.loadRes(o,cc.SpriteFrame,function(t){i.spriteFrame=t,f.default.scaleImg(i.node,t,40)},this)}var a=r.getChildByName("num");a.active=n.count>0,n.count>0&&(a.getComponent(cc.Label).string="x"+n.count)},e.prototype.onGuardDestroy=function(t){this._guardNode[t.id].count--,this._guardNode[t.id].count<=0?(this._guardNode[t.id].node.removeFromParent(),this._guardNode[t.id].node.destroy(),delete this._guardNode[t.id]):this._guardNode[t.id].node.getChildByName("num").getComponent(cc.Label).string="x"+this._guardNode[t.id].count},i([d(cc.Button)],e.prototype,"btnSpeedUp",void 0),i([d(cc.ProgressBar)],e.prototype,"hpBar",void 0),i([d(cc.Label)],e.prototype,"hpLabel",void 0),i([d(cc.ProgressBar)],e.prototype,"expBar",void 0),i([d(cc.Label)],e.prototype,"expLabel",void 0),i([d(cc.Label)],e.prototype,"labelSpeed",void 0),i([d(cc.Node)],e.prototype,"rightInfoNode",void 0),i([d(cc.Prefab)],e.prototype,"guardNode",void 0),i([h],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../Gameplay/Entity/EntityManager":"EntityManager","../Gameplay/Entity/Player":"Player","../Module/Loader":"Loader","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleView:[function(t,e,n){"use strict";cc._RF.push(e,"1fee5/11r9LKLgHc96Xh8Ju","BattleView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Enum/ViewType")),c=a(t("../../Module/ViewHandler")),u=a(t("../../Module/ViewModule")),l=a(t("../../UI/BattleUI")),f=a(t("../../Utils/Path")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=s.default.Normal,e.battleRoot=null,e.battleUI=null,e.btnPause=null,e.effectRoot=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.initiateView=function(t){this.battle=t,this.btnPause.targetOff(this),this.btnPause.on("click",this.onPause,this)},e.prototype.showBattleEndView=function(t,e){u.default.instance.pushView("BattleEndView",{battleResult:t,cb:e},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.showUpgradeView=function(t,e){u.default.instance.pushView("UpgradeView",{battle:this.battle,upgradeConfig:t,onClose:e},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.onPause=function(){var t=this;this.battle.pause(),u.default.instance.pushView("SettingView",{cb:function(){t.battle.resume()}},{bundle:f.default.BATTLE_BUNDLE})},i([d(cc.Node)],e.prototype,"battleRoot",void 0),i([d(l.default)],e.prototype,"battleUI",void 0),i([d(cc.Node)],e.prototype,"btnPause",void 0),i([d(cc.Node)],e.prototype,"effectRoot",void 0),i([h],e)}(c.default);n.default=_,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Module/ViewHandler":"ViewHandler","../../Module/ViewModule":"ViewModule","../../UI/BattleUI":"BattleUI","../../Utils/Path":"Path"}],Battle:[function(t,e,n){"use strict";cc._RF.push(e,"06a7fEU4HxFHYDug+xd+cR1","Battle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Battle=void 0;var f=l(t("../Component/Terrain/Terrain")),p=t("../Module/ConfigManager"),h=t("../Interface/Config/UpgradeConfig"),d=l(t("../Module/Loader")),_=l(t("../Utils/Utils")),y=l(t("../Utils/Path")),g=t("./BattleFlow"),v=t("./Entity/EntityManager"),m=t("../Utils/Property"),b=l(t("./GameDefine")),C=t("./BattleStats"),S=t("../Utils/NodePool"),w={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},A=function(t){function e(e){var n=t.call(this)||this;return n.battleSpeed=new m.ReactNumber(1),n.isPlaying=!1,n.battleTick=0,n.enemyFlowIndex=0,n.config=e,n}return o(e,t),e.prototype.setView=function(t){this.battleView=t},e.prototype.load=function(){return i(this,void 0,void 0,function(){var t,e,n,r;return a(this,function(o){switch(o.label){case 0:return[4,d.default.loadResAsync(y.default.getLevelPath(this.config.asset),cc.Prefab,null)];case 1:return t=o.sent(),(e=cc.instantiate(t)).parent=this.battleView.battleRoot,this.terrain=e.getComponent(f.default),this.terrain.init(),this.battleStats=new C.BattleStats,(n=this.entityManager=new v.EntityManager(this)).on(v.EntityManager.Events.GuardCreate,this.onGuardCreate,this),n.on(v.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this),r={hp:100,maxLevel:10,upgradeExp:[1,20,50,100,200,200,200,200,200,200]},[4,(this.player=this.entityManager.createPlayer(r,{pos:this.terrain.playerPosition})).createAvatar({parent:e})];case 2:return o.sent(),[4,this.initHurtNodePool()];case 3:return o.sent(),this.battleView.battleUI.init(this),[2]}})})},e.prototype.startBattle=function(){this.emit(w.BattleStart),cc.director.getCollisionManager().enabled=!0,this.isPlaying=!0,this.battleTick=0,this.enemyFlowIndex=0,this.createFlow(),this.entityManager.createGuard(b.default.InitGuardId,{pos:this.getGuardSpawnPos()})},e.prototype.createFlow=function(){this.currentFlow=new g.BattleFlow(this.config,this.enemyFlowIndex),cc.log("\u5f00\u59cb\u65b0\u6ce2\u6b21\uff1a "+this.enemyFlowIndex)},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.resume=function(){this.isPlaying=!0},e.prototype.update=function(t){if(this.isPlaying&&null!=this.player){if(this.player.canUpgrade()&&(this.player.upgrade(),this.showUpgradeAndPause()),t*=this.battleSpeed.value,this.battleTick+=t,this.currentFlow){var e=this.currentFlow.tickToGetGenerateEnemy(t);if(e>0){var n=this.entityManager.createEnemy(e,{pos:this.terrain.getRandEnemyPos()});n.setConfigFactors(this.config.hpFactor,this.config.atkFactor,this.config.speedFactor),n.createAvatar({parent:this.terrain.node})}this.currentFlow.isFinish()&&(this.enemyFlowIndex+=1,this.enemyFlowIndex<this.config.waves.length?this.createFlow():this.currentFlow=null)}if(this.entityManager.update(t),!this.player.isAlive()||!this.currentFlow&&0===this.entityManager.getAllEnemies().size){var r=this.battleStats.getAllDamages();r.sort(function(t,e){return e.damage-t.damage});var o=this.player.isPerfect,i=this.config.rewards;o&&i.push(this.config.extraReward);var a={success:this.player.isAlive(),timeSec:Math.ceil(this.battleTick),score:this.battleStats.getScore(),damageStats:r,rewards:i};this.finishBattle(a)}}},e.prototype.showUpgradeAndPause=function(){this.pause(),this.battleView.showUpgradeView(this.randomUpgradeOptions(),this.resume.bind(this))},e.prototype.randomUpgradeOptions=function(){var t,e,n,r,o,i,a,c,l=[],f=Array.from(this.entityManager.getAllGuards().values()),d=_.default.createMultiMap(f,function(t){return[t.id,t]}),y=_.default.createMultiMap(f,function(t){return[t.type,t]}),g=[],v=[],m=p.ConfigManager.instance.getGuardConfigs();try{for(var b=s(m.values()),C=b.next();!C.done;C=b.next()){var S=C.value;if(null==S.summonCondition)g.push(S);else{var w=!0;try{for(var A=(n=void 0,s(S.summonCondition)),E=A.next();!E.done;E=A.next()){var M=E.value,P=M.guardId,O=M.guardType,R=M.count;if(P){if(d.has(P)&&d.get(P).length>=R)continue;w=!1;break}if(!(y.has(O)&&y.get(O).length>=R)){w=!1;break}}}catch(V){n={error:V}}finally{try{E&&!E.done&&(r=A.return)&&r.call(A)}finally{if(n)throw n.error}}w&&v.push(S)}}}catch(H){t={error:H}}finally{try{C&&!C.done&&(e=b.return)&&e.call(b)}finally{if(t)throw t.error}}var x=g.concat(v),B=[];if(3==x.length)B=x;else if(x.length>3)for(var I=0;I<3;I++){var N=_.default.randomRangeInt(0,x.length);B.push(x[N]),x.splice(N,1)}else for(B=x;B.length<3;)B.push(_.default.randomSelect(g));try{for(var T=s(B),D=T.next();!D.done;D=T.next()){var L=D.value;if(null==L.summonCondition)l.push({type:h.UpgradeType.SummonGuard,guardId:L.id});else{var j=[];try{for(var U=(a=void 0,s(L.summonCondition)),k=U.next();!k.done;k=U.next()){var F=k.value,G=(P=F.guardId,O=F.guardType,R=F.count,P?d.get(P):y.get(O));if(R===G.length)j.push.apply(j,u(G));else for(I=0;I<R;++I)N=_.default.randomRangeInt(0,G.length),j.push(G[N]),G.splice(N,1)}}catch(z){a={error:z}}finally{try{k&&!k.done&&(c=U.return)&&c.call(U)}finally{if(a)throw a.error}}l.push({type:h.UpgradeType.UpgradeGuard,guardId:L.id,destroyUids:j.map(function(t){return t.uid})})}}}catch(W){o={error:W}}finally{try{D&&!D.done&&(i=T.return)&&i.call(T)}finally{if(o)throw o.error}}return{upgradeOptions:l}},e.prototype.finishBattle=function(t){var e=this;this.pause(),cc.director.getCollisionManager().enabled=!1,this.battleView.showBattleEndView(t,function(){e.emit(w.BattleEnd,t)})},e.prototype.destroy=function(){this.entityManager.clear(),this.terrain&&(this.terrain.node.destroy(),this.terrain=null),cc.director.getCollisionManager().enabled=!1},e.prototype.onGuardCreate=function(t){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,t.createAvatar({parent:this.terrain.node})];case 1:return e.sent(),[2]}})})},e.prototype.getGuardSpawnPos=function(){var t=this.terrain.guardSpawnPosition;return t.addSelf(cc.v2(_.default.randomRange(-200,200),0)),t},e.prototype.initHurtNodePool=function(){return i(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return t=y.default.getHurtNodePath(),[4,d.default.loadResAsync(t,cc.Prefab,null)];case 1:return e=n.sent(),S.NodePool.instance.tryCreatePool(t,e),[2]}})})},e.prototype.showFloatDamage=function(t,e){var n=S.NodePool.instance.getNode(y.default.getHurtNodePath());n.parent=this.battleView.effectRoot,_.default.setWorldPosition(n,t),n.getChildByName("labelHurt").getComponent(cc.Label).string="-"+e,cc.tween(n).by(.5,{y:50}).call(function(){S.NodePool.instance.putNode(n)}).start()},e.prototype.onGuardDestroy=function(){},e.prototype.onPlayerCreate=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.onEnemyCreate=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.Events=w,e}(cc.EventTarget);n.Battle=A,cc._RF.pop()},{"../Component/Terrain/Terrain":"Terrain","../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Utils/NodePool":"NodePool","../Utils/Path":"Path","../Utils/Property":"Property","../Utils/Utils":"Utils","./BattleFlow":"BattleFlow","./BattleStats":"BattleStats","./Entity/EntityManager":"EntityManager","./GameDefine":"GameDefine"}],BulletConfig:[function(t,e,n){"use strict";cc._RF.push(e,"35cb5TnC3RFGrK0IXJpphOd","BulletConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"8a46162XRFEuZAPPyC17BFo","Bullet");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Bullet=void 0;var a=i(t("../../Component/Gameplay/CollisionWrapper")),s=i(t("../../Component/Gameplay/EntityTag")),c=t("../../Module/ConfigManager"),u=i(t("../../Utils/Path")),l=i(t("../../Utils/Utils")),f=t("./BaseEntity"),p=t("./Enemy"),h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.config=c.ConfigManager.instance.getBulletConfig(r.id),r}return o(e,t),e.prototype.onAvatarReady=function(){var t=this.avatar.getComponent(cc.Collider);l.default.getOrAddComponent(t.node,s.default).entity=this;var e=l.default.getOrAddComponent(t.node,a.default);e.onEnter.clear(),e.onEnter.add(this.onCollisionEnter,this),this.avatar.zIndex=3e3},e.prototype.getAssetPath=function(){return u.default.getEntityPath(this.config.asset)},e.prototype.update=function(t){if(this.avatar){if(this.trackTarget){var n=this.direction=this.trackTarget.avatar.getPosition(cc.v2()).sub(this.position);n.normalizeSelf(),n.mulSelf(t),n.addSelf(this.position),this.position=n}else{var r=this.direction.mul(t*this.config.moveSpeed);r.addSelf(this.position),this.position=r}var o=l.default.directionToAngle(this.direction);this.avatar.angle=o-e.BulletInitRotation;var i=this.position;(Math.abs(i.x)>500||Math.abs(i.y)>800)&&this._context.entityManager.removeBullet(this.uid)}},e.prototype.onCollisionEnter=function(t){var e=t.node.getComponent(s.default);null!=e.entity?e.entity instanceof p.Enemy?(e.entity.hurt(this.config.attack,this.owner),this._context.entityManager.removeBullet(this.uid)):cc.error("[Bullet] onCollision, other entity is not Enemy: "+e.entity):cc.error("[Bullet] onCollision, other entity is null")},e.prototype.toString=function(){return"Bullet: "+this.config.name+"["+this.uid+"]"},e.BulletInitRotation=90,e}(f.BaseEntity);n.Bullet=h,cc._RF.pop()},{"../../Component/Gameplay/CollisionWrapper":"CollisionWrapper","../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./BaseEntity":"BaseEntity","./Enemy":"Enemy"}],BusyCircle:[function(t,e,n){"use strict";cc._RF.push(e,"f4b47t7xEdBQbt6zGoOWzCc","BusyCircle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstTile=null,e.tiles=12,e.minOpacity=120,e.startColor=cc.Color.GRAY,e.endColor=cc.Color.WHITE,e}return o(e,t),e.prototype.onLoad=function(){var t=360/this.tiles,e=this.firstTile.parent,n=this.firstTile;n.angle=0,n.opacity=255;for(var r=[n],o=n.getPosition(),i=1;i<this.tiles;++i)(a=cc.instantiate(this.firstTile)).parent=e,a.setPosition(o),a.angle=i*t,r.push(a);for(i=0;i<r.length;++i){var a=r[i],s=i/r.length,c=1*(1-s),u=cc.Color.lerp(cc.color(),this.startColor,this.endColor,s);a.color=u,cc.tween(a).to(c,{color:this.endColor}).sequence(cc.tween().set({color:this.startColor}),cc.tween().to(1,{color:this.endColor})).repeatForever().start()}},i([c(cc.Node)],e.prototype,"firstTile",void 0),i([c],e.prototype,"tiles",void 0),i([c],e.prototype,"minOpacity",void 0),i([c(cc.Color)],e.prototype,"startColor",void 0),i([c(cc.Color)],e.prototype,"endColor",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],BusyView:[function(t,e,n){"use strict";cc._RF.push(e,"d1a76Dp/xdNSqN/w5aQFq3Z","BusyView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var u=c(t("../../../Module/Loader")),l=c(t("../../../Utils/Path")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circlePrefab=null,e}var n;return o(e,t),n=e,e.show=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(r){switch(r.label){case 0:return this._isLoading?(this._show=!0,[2]):(this._show=!0,cc.isValid(this._node)?[3,2]:(this._isLoading=!0,[4,u.default.loadPrefabAsync(l.default.viewPath("BusyView"),null)]));case 1:t=r.sent(),this._isLoading=!1,this._node=cc.instantiate(t),e=cc.Canvas.instance,this._node.parent=e.node,r.label=2;case 2:return this._show?this._node.getComponent(n).show():this._node.getComponent(n).hide(),[2]}})})},e.hide=function(){this._isLoading?this._show=!1:cc.isValid(this._node)&&this._node.getComponent(n).hide()},e.prototype.show=function(){this.node.active=!0,this._circle||(this._circle=cc.instantiate(this.circlePrefab),this._circle.parent=this.node)},e.prototype.hide=function(){this._circle&&(this._circle.destroy(),this._circle=null),this.node.active=!1},e._isLoading=!1,e._show=!1,i([h(cc.Prefab)],e.prototype,"circlePrefab",void 0),n=i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Module/Loader":"Loader","../../../Utils/Path":"Path"}],ClawGuideType:[function(t,e,n){"use strict";cc._RF.push(e,"1a2a5jnX8RGx64Tpo4mUf2Q","ClawGuideType"),Object.defineProperty(n,"__esModule",{value:!0}),n.ClawGuideType=void 0,function(t){t[t.TREASURE_PROGRESS=0]="TREASURE_PROGRESS",t[t.NPC_PROGRESS=1]="NPC_PROGRESS",t[t.COOK_SPEED_UP=2]="COOK_SPEED_UP",t[t.BUILDING_UPGRADE=3]="BUILDING_UPGRADE",t[t.HUNGRY_SALE=4]="HUNGRY_SALE",t[t.BUILDING_SKIN=5]="BUILDING_SKIN",t[t.GUEST_ORDER=6]="GUEST_ORDER",t[t.TIME_RESEARCH_SUCCESS_RATE=7]="TIME_RESEARCH_SUCCESS_RATE",t[t.OPEN_STATUE=8]="OPEN_STATUE"}(n.ClawGuideType||(n.ClawGuideType={})),cc._RF.pop()},{}],CollisionWrapper:[function(t,e,n){"use strict";cc._RF.push(e,"2b006x3fI5HCI8wS6ie8LKH","CollisionWrapper");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Utils/Action"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onEnter=new a.Action2,e.onStay=new a.Action2,e.onExit=new a.Action2,e}return o(e,t),e.prototype.onCollisionEnter=function(t,e){this.onEnter.call(t,e)},e.prototype.onCollisionStay=function(t,e){this.onStay.call(t,e)},e.prototype.onCollisionExit=function(t,e){this.onExit.call(t,e)},i([c],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Utils/Action":"Action"}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"a9839GlDRJEL6lLAOb/Ez4w","Common"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ConfigManager:[function(t,e,n){"use strict";cc._RF.push(e,"4233ecUPplERpCUvnSrTMTZ","ConfigManager");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigManager=void 0;var o=r(t("./Loader")),i=r(t("../Utils/Path")),a=t("../Interface/Config/LanConfig"),s=t("../Interface/Config/AbilityConfig"),c=function(){function t(){this._allConfigMap=null,this._guardMap=new Map,this._bulletMap=new Map,this._enemyMap=new Map,this._abilityMap=new Map,this._levelMap=new Map,this._levelFlowMap=new Map,this._lanMap=new Map,this._lanType=a.LanType.cn}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;return new Promise(function(e){o.default.loadRes(i.default.getConfigPath(),cc.JsonAsset,function(n){t._allConfigMap=n.json,t.initConfig("Guard",t._guardMap),t.initConfig("Bullet",t._bulletMap),t.initConfig("Enemy",t._enemyMap),t.initConfig("Level",t._levelMap),t.initConfig("LevelFlow",t._levelFlowMap),t.initLanConfig("Lan",t._lanMap),t.initTestConfig(),e()},null)})},t.prototype.initLanConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var r in n){var o=r;e.set(o,n[r])}}},t.prototype.initConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var r in n){var o=+r;e.set(o,n[r])}}},t.prototype.getConfig=function(t){return this._allConfigMap[t]},t.prototype.addGuardConfig=function(t){this._guardMap.set(t.id,t)},t.prototype.addEnemyConfig=function(t){this._enemyMap.set(t.id,t)},t.prototype.getGuardConfigs=function(){return this._guardMap},t.prototype.getGuardConfig=function(t){return this._guardMap.get(t)},t.prototype.getBulletConfig=function(t){return this._bulletMap.get(t)},t.prototype.getEnemyConfig=function(t){return this._enemyMap.get(t)},t.prototype.getAbilityConfig=function(t){return this._abilityMap.get(t)},t.prototype.getLanConfig=function(t){var e=this._lanMap.get(t);return e?e[this._lanType]:"null"},t.prototype.getLevelConfigs=function(){return this._levelMap},t.prototype.getLevelConfig=function(t){return this._levelMap.get(t)},t.prototype.getLevelFlowConfig=function(t){return this._levelFlowMap.get(t)},t.prototype.initTestConfig=function(){this._abilityMap.set(1,{id:1,name:"\u9668\u77f3\u5929\u964d",rangeType:s.AbilityRangeType.Area,asset:"Ability/StoneFall",damageDelay:1,damageRange:[10,20],dot:{dph:1,count:10,duration:3},buff:{type:s.BuffType.Freeze,value:0,duration:1}})},t}();n.ConfigManager=c,cc._RF.pop()},{"../Interface/Config/AbilityConfig":"AbilityConfig","../Interface/Config/LanConfig":"LanConfig","../Utils/Path":"Path","./Loader":"Loader"}],CryptoJsMini:[function(t,e,n){"use strict";cc._RF.push(e,"be65azbMBxNgqaDC+gP74Or","CryptoJsMini");var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),t("crypto-js/aes"),t("crypto-js/md5");var a=i(t("crypto-js/core"));n.default=a,cc._RF.pop()},{"crypto-js/aes":1,"crypto-js/core":3,"crypto-js/md5":7}],1:[function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.BlockCipher,r=e.algo,o=[],i=[],a=[],s=[],c=[],u=[],l=[],f=[],p=[],h=[];(function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var d=r^r<<1^r<<2^r<<3^r<<4;d=d>>>8^255&d^99,o[n]=d,i[d]=n;var _=t[n],y=t[_],g=t[y],v=257*t[d]^16843008*d;a[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,u[n]=v,v=16843009*g^65537*y^257*_^16843008*n,l[d]=v<<24|v>>>8,f[d]=v<<16|v>>>16,p[d]=v<<8|v>>>24,h[d]=v,n?(n=_^t[t[t[g^_]]],r^=t[t[r]]):n=r=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],_=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)a<n?i[a]=e[a]:(u=i[a-1],a%n?n>6&&a%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=d[a/n|0]<<24),i[a]=i[a-n]^u);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var u=i[a];else u=i[a-4];s[c]=c<4||a<=4?u:l[o[u>>>24]]^f[o[u>>>16&255]]^p[o[u>>>8&255]]^h[o[255&u]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,c,u,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,f,p,h,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,a,s){for(var c=this._nRounds,u=t[e]^n[0],l=t[e+1]^n[1],f=t[e+2]^n[2],p=t[e+3]^n[3],h=4,d=1;d<c;d++){var _=r[u>>>24]^o[l>>>16&255]^i[f>>>8&255]^a[255&p]^n[h++],y=r[l>>>24]^o[f>>>16&255]^i[p>>>8&255]^a[255&u]^n[h++],g=r[f>>>24]^o[p>>>16&255]^i[u>>>8&255]^a[255&l]^n[h++],v=r[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^a[255&f]^n[h++];u=_,l=y,f=g,p=v}_=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^n[h++],y=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^n[h++],g=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[h++],v=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[h++],t[e]=_,t[e+1]=y,t[e+2]=g,t[e+3]=v},keySize:8});e.AES=n._createHelper(_)}(),t.AES},"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(this.CryptoJS)},{"./cipher-core":2,"./core":3,"./enc-base64":4,"./evpkdf":5,"./md5":7}],2:[function(t,e,n){var r;r=function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,o=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),u=n.algo.EvpKDF,l=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?m:g}return function(e){return{encrypt:function(n,r,o){return t(r).encrypt(e,n,r,o)},decrypt:function(n,r,o){return t(r).decrypt(e,n,r,o)}}}}()}),f=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),h=f.CBC=function(){var t=p.extend();function n(t,n,r){var o,i=this._iv;i?(o=i,this._iv=e):o=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize;n.call(this,t,e,o),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+o)}}),t.Decryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize,i=t.slice(e,e+o);r.decryptBlock(t,e),n.call(this,t,e,o),this._prevBlock=i}}),t}(),d=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var c=i.create(a,r);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},_=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:d}),reset:function(){var t;l.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),y=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(e):e).toString(c)},parse:function(t){var e,n=c.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),_.create({ciphertext:n,salt:e})}},g=r.SerializableCipher=o.extend({cfg:o.extend({format:y}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r),i=o.finalize(e),a=o.cfg;return _.create({ciphertext:i,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),v=(n.kdf={}).OpenSSL={execute:function(t,e,n,r,o){if(r||(r=i.random(8)),o)a=u.create({keySize:e+n,hasher:o}).compute(t,r);else var a=u.create({keySize:e+n}).compute(t,r);var s=i.create(a.words.slice(e),4*n);return a.sigBytes=4*e,_.create({key:a,iv:s,salt:r})}},m=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(t,e,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize,r.salt,r.hasher);r.iv=o.iv;var i=g.encrypt.call(this,t,e,o.key,r);return i.mixIn(o),i},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var o=r.kdf.execute(n,t.keySize,t.ivSize,e.salt,r.hasher);return r.iv=o.iv,g.decrypt.call(this,t,e,o.key,r)}})}()},"object"==typeof n?e.exports=n=r(t("./core"),t("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],r):r(this.CryptoJS)},{"./core":3,"./evpkdf":5}],3:[function(t,e,n){(function(r){var o;o=function(){var e=e||function(e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r&&r.crypto&&(n=r.crypto),!n&&"function"==typeof t)try{n=t("crypto")}catch(y){}var o=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var s=0;s<o;s+=4)e[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(o());return new u.init(e,t)}}),l=a.enc={},f=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(n,e/2)}},p=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},d=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,i);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(o,f);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),_=(s.Hasher=d.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new _.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math);return e},"object"==typeof n?e.exports=n=o():"function"==typeof define&&define.amd?define([],o):this.CryptoJS=o()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:11}],4:[function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.WordArray;function r(t,e,r){for(var o=[],i=0,a=0;a<e;a++)if(a%4){var s=r[t.charCodeAt(a-1)]<<a%4*2|r[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=s<<24-i%4*8,i++}return n.create(o,i)}e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return r(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],5:[function(t,e,n){var r;r=function(t){var e,n,r,o,i,a,s;return r=(n=(e=t).lib).Base,o=n.WordArray,a=(i=e.algo).MD5,s=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),a=o.create(),s=a.words,c=r.keySize,u=r.iterations;s.length<c;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*c,a}}),e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)},t.EvpKDF},"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(this.CryptoJS)},{"./core":3,"./hmac":6,"./sha1":8}],6:[function(t,e,n){var r;r=function(t){var e,n,r;n=(e=t).lib.Base,r=e.enc.Utf8,e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,o=4*n;e.sigBytes>o&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],7:[function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[];(function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0})();var c=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,o=t[r];t[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=t[e+0],c=t[e+1],h=t[e+2],d=t[e+3],_=t[e+4],y=t[e+5],g=t[e+6],v=t[e+7],m=t[e+8],b=t[e+9],C=t[e+10],S=t[e+11],w=t[e+12],A=t[e+13],E=t[e+14],M=t[e+15],P=i[0],O=i[1],R=i[2],x=i[3];P=u(P,O,R,x,a,7,s[0]),x=u(x,P,O,R,c,12,s[1]),R=u(R,x,P,O,h,17,s[2]),O=u(O,R,x,P,d,22,s[3]),P=u(P,O,R,x,_,7,s[4]),x=u(x,P,O,R,y,12,s[5]),R=u(R,x,P,O,g,17,s[6]),O=u(O,R,x,P,v,22,s[7]),P=u(P,O,R,x,m,7,s[8]),x=u(x,P,O,R,b,12,s[9]),R=u(R,x,P,O,C,17,s[10]),O=u(O,R,x,P,S,22,s[11]),P=u(P,O,R,x,w,7,s[12]),x=u(x,P,O,R,A,12,s[13]),R=u(R,x,P,O,E,17,s[14]),P=l(P,O=u(O,R,x,P,M,22,s[15]),R,x,c,5,s[16]),x=l(x,P,O,R,g,9,s[17]),R=l(R,x,P,O,S,14,s[18]),O=l(O,R,x,P,a,20,s[19]),P=l(P,O,R,x,y,5,s[20]),x=l(x,P,O,R,C,9,s[21]),R=l(R,x,P,O,M,14,s[22]),O=l(O,R,x,P,_,20,s[23]),P=l(P,O,R,x,b,5,s[24]),x=l(x,P,O,R,E,9,s[25]),R=l(R,x,P,O,d,14,s[26]),O=l(O,R,x,P,m,20,s[27]),P=l(P,O,R,x,A,5,s[28]),x=l(x,P,O,R,h,9,s[29]),R=l(R,x,P,O,v,14,s[30]),P=f(P,O=l(O,R,x,P,w,20,s[31]),R,x,y,4,s[32]),x=f(x,P,O,R,m,11,s[33]),R=f(R,x,P,O,S,16,s[34]),O=f(O,R,x,P,E,23,s[35]),P=f(P,O,R,x,c,4,s[36]),x=f(x,P,O,R,_,11,s[37]),R=f(R,x,P,O,v,16,s[38]),O=f(O,R,x,P,C,23,s[39]),P=f(P,O,R,x,A,4,s[40]),x=f(x,P,O,R,a,11,s[41]),R=f(R,x,P,O,d,16,s[42]),O=f(O,R,x,P,g,23,s[43]),P=f(P,O,R,x,b,4,s[44]),x=f(x,P,O,R,w,11,s[45]),R=f(R,x,P,O,M,16,s[46]),P=p(P,O=f(O,R,x,P,h,23,s[47]),R,x,a,6,s[48]),x=p(x,P,O,R,v,10,s[49]),R=p(R,x,P,O,E,15,s[50]),O=p(O,R,x,P,y,21,s[51]),P=p(P,O,R,x,w,6,s[52]),x=p(x,P,O,R,d,10,s[53]),R=p(R,x,P,O,C,15,s[54]),O=p(O,R,x,P,c,21,s[55]),P=p(P,O,R,x,m,6,s[56]),x=p(x,P,O,R,M,10,s[57]),R=p(R,x,P,O,g,15,s[58]),O=p(O,R,x,P,A,21,s[59]),P=p(P,O,R,x,_,6,s[60]),x=p(x,P,O,R,S,10,s[61]),R=p(R,x,P,O,h,15,s[62]),O=p(O,R,x,P,b,21,s[63]),i[0]=i[0]+P|0,i[1]=i[1]+O|0,i[2]=i[2]+R|0,i[3]=i[3]+x|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function u(t,e,n,r,o,i,a){var s=t+(e&n|~e&r)+o+a;return(s<<i|s>>>32-i)+e}function l(t,e,n,r,o,i,a){var s=t+(e&r|n&~r)+o+a;return(s<<i|s>>>32-i)+e}function f(t,e,n,r,o,i,a){var s=t+(e^n^r)+o+a;return(s<<i|s>>>32-i)+e}function p(t,e,n,r,o,i,a){var s=t+(n^(e|~r))+o+a;return(s<<i|s>>>32-i)+e}n.MD5=i._createHelper(c),n.HmacMD5=i._createHmacHelper(c)}(Math),t.MD5},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],8:[function(t,e,n){var r;r=function(t){var e,n,r,o,i,a,s;return n=(e=t).lib,r=n.WordArray,o=n.Hasher,i=e.algo,a=[],s=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)a[u]=0|t[e+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+c+a[u];f+=u<20?1518500249+(o&i|~o&s):u<40?1859775393+(o^i^s):u<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,c=s,s=i,i=o<<30|o>>>2,o=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=o._createHelper(s),e.HmacSHA1=o._createHmacHelper(s),t.SHA1},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],9:[function(t,e){"use strict";function n(t,e){e=e||{},this._capacity=e.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}n.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var n=this.size();if(!(e>=n||e<-n))return e<0&&(e+=n),e=this._head+e&this._capacityMask,this._list[e]}},n.prototype.get=function(t){return this.peekAt(t)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(t){if(0===arguments.length)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},n.prototype.push=function(t){if(0===arguments.length)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),n}},n.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(e>=n||e<-n)){e<0&&(e+=n),e=this._head+e&this._capacityMask;var o,i=this._list[e];if(t<n/2){for(o=t;o>0;o--)this._list[e]=this._list[e=e-1+r&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(o=n-1-t;o>0;o--)this._list[e]=this._list[e=e+1+r&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+r&this._capacityMask}return i}}},n.prototype.remove=function(t,e){var n,r=t,o=e;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),a=this._list.length;if(!(r>=i||r<-i||e<1)){if(r<0&&(r+=i),1===e||!e)return(n=new Array(1))[0]=this.removeOne(r),n;if(0===r&&r+e>=i)return n=this.toArray(),this.clear(),n;var s;for(r+e>i&&(e=i-r),n=new Array(e),s=0;s<e;s++)n[s]=this._list[this._head+r+s&this._capacityMask];if(r=this._head+r&this._capacityMask,t+e===i){for(this._tail=this._tail-e+a&this._capacityMask,s=e;s>0;s--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(0===t){for(this._head=this._head+e+a&this._capacityMask,s=e-1;s>0;s--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(r<i/2){for(this._head=this._head+t+e+a&this._capacityMask,s=t;s>0;s--)this.unshift(this._list[r=r-1+a&this._capacityMask]);for(r=this._head-1+a&this._capacityMask;o>0;)this._list[r=r-1+a&this._capacityMask]=void 0,o--;t<0&&(this._tail=r)}else{for(this._tail=r,r=r+e+a&this._capacityMask,s=i-(e+t);s>0;s--)this.push(this._list[r++]);for(r=this._tail;o>0;)this._list[r=r+1+a&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}},n.prototype.splice=function(t,e){var n=t;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var o,i,a,s=arguments.length,c=this._list.length,u=2;if(!r||n<r/2){for(i=new Array(n),o=0;o<n;o++)i[o]=this._list[this._head+o&this._capacityMask];for(0===e?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,e),this._head=this._head+n+c&this._capacityMask);s>u;)this.unshift(arguments[--s]);for(o=n;o>0;o--)this.unshift(i[o-1])}else{var l=(i=new Array(r-(n+e))).length;for(o=0;o<l;o++)i[o]=this._list[this._head+n+e+o&this._capacityMask];for(0===e?(a=[],n!=r&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,e),this._tail=this._tail-l+c&this._capacityMask);u<s;)this.push(arguments[u++]);for(o=0;o<l;o++)this.push(i[o])}return a}return this.remove(n,e)}}},n.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(t){var e=t.length,n=this._nextPowerOf2(e);this._list=new Array(n),this._capacityMask=n-1,this._tail=e;for(var r=0;r<e;r++)this._list[r]=t[r]},n.prototype._copyArray=function(t,e){var n=this._list,r=n.length,o=this.length;if((e|=o)==o&&this._head<this._tail)return this._list.slice(this._head,this._tail);var i,a=new Array(e),s=0;if(t||this._head>this._tail){for(i=this._head;i<r;i++)a[s++]=n[i];for(i=0;i<this._tail;i++)a[s++]=n[i]}else for(i=this._head;i<this._tail;i++)a[s++]=n[i];return a},n.prototype._growArray=function(){if(0!=this._head){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},n.prototype._nextPowerOf2=function(t){var e=1<<Math.log(t)/Math.log(2)+1;return Math.max(e,4)},e.exports=n},{}],10:[function(t,e,n){(function(t){(function(){var r,o=200,i="Expected a function",a="__lodash_placeholder__",s=1,c=2,u=4,l=1,f=2,p=1,h=2,d=4,_=8,y=16,g=32,v=64,m=128,b=256,C=512,S=800,w=16,A=1/0,E=9007199254740991,M=17976931348623157e292,P=NaN,O=4294967295,R=O-1,x=O>>>1,B=[["ary",m],["bind",p],["bindKey",h],["curry",_],["curryRight",y],["flip",C],["partial",g],["partialRight",v],["rearg",b]],I="[object Arguments]",N="[object Array]",T="[object AsyncFunction]",D="[object Boolean]",L="[object Date]",j="[object DOMException]",U="[object Error]",k="[object Function]",F="[object GeneratorFunction]",G="[object Map]",V="[object Number]",H="[object Null]",z="[object Object]",W="[object Proxy]",q="[object RegExp]",K="[object Set]",Y="[object String]",X="[object Symbol]",J="[object Undefined]",Q="[object WeakMap]",Z="[object ArrayBuffer]",$="[object DataView]",tt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",rt="[object Int16Array]",ot="[object Int32Array]",it="[object Uint8Array]",at="[object Uint8ClampedArray]",st="[object Uint16Array]",ct="[object Uint32Array]",ut=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,ht=/[&<>"']/g,dt=RegExp(pt.source),_t=RegExp(ht.source),yt=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,wt=RegExp(St.source),At=/^\s+/,Et=/\s/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,Rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xt=/[()=,{}\[\]\/\s]/,Bt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Tt=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,Lt=/^\[object .+?Constructor\]$/,jt=/^0o[0-7]+$/i,Ut=/^(?:0|[1-9]\d*)$/,kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ft=/($^)/,Gt=/['\n\r\u2028\u2029\\]/g,Vt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ht="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="["+Ht+"]",Wt="["+Vt+"]",qt="\\d+",Kt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Yt="[^\\ud800-\\udfff"+Ht+qt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Xt="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Zt="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",te="(?:"+Kt+"|"+Yt+")",ee="(?:"+$t+"|"+Yt+")",ne="(?:"+Wt+"|"+Xt+")?",re="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[Jt,Qt,Zt].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",oe="(?:"+["[\\u2700-\\u27bf]",Qt,Zt].join("|")+")"+re,ie="(?:"+[Jt+Wt+"?",Wt,Qt,Zt,"[\\ud800-\\udfff]"].join("|")+")",ae=RegExp("['\u2019]","g"),se=RegExp(Wt,"g"),ce=RegExp(Xt+"(?="+Xt+")|"+ie+re,"g"),ue=RegExp([$t+"?"+Kt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[zt,$t,"$"].join("|")+")",ee+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[zt,$t+te,"$"].join("|")+")",$t+"?"+te+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$t+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qt,oe].join("|"),"g"),le=RegExp("[\\u200d\\ud800-\\udfff"+Vt+"\\ufe0e\\ufe0f]"),fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],he=-1,de={};de[tt]=de[et]=de[nt]=de[rt]=de[ot]=de[it]=de[at]=de[st]=de[ct]=!0,de[I]=de[N]=de[Z]=de[D]=de[$]=de[L]=de[U]=de[k]=de[G]=de[V]=de[z]=de[q]=de[K]=de[Y]=de[Q]=!1;var _e={};_e[I]=_e[N]=_e[Z]=_e[$]=_e[D]=_e[L]=_e[tt]=_e[et]=_e[nt]=_e[rt]=_e[ot]=_e[G]=_e[V]=_e[z]=_e[q]=_e[K]=_e[Y]=_e[X]=_e[it]=_e[at]=_e[st]=_e[ct]=!0,_e[U]=_e[k]=_e[Q]=!1;var ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ge=parseFloat,ve=parseInt,me="object"==typeof t&&t&&t.Object===Object&&t,be="object"==typeof self&&self&&self.Object===Object&&self,Ce=me||be||Function("","return this")(),Se="object"==typeof n&&n&&!n.nodeType&&n,we=Se&&"object"==typeof e&&e&&!e.nodeType&&e,Ae=we&&we.exports===Se,Ee=Ae&&me.process,Me=function(){try{return we&&we.require&&we.require("util").types||Ee&&Ee.binding&&Ee.binding("util")}catch(t){}}(),Pe=Me&&Me.isArrayBuffer,Oe=Me&&Me.isDate,Re=Me&&Me.isMap,xe=Me&&Me.isRegExp,Be=Me&&Me.isSet,Ie=Me&&Me.isTypedArray;function Ne(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Te(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function De(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ue(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function ke(t,e){return!(null==t||!t.length)&&Qe(t,e,0)>-1}function Fe(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Ge(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ve(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function He(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function ze(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function We(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var qe=en("length");function Ke(t){return t.split("")}function Ye(t){return t.match(Rt)||[]}function Xe(t,e,n){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=n,!1}),r}function Je(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Qe(t,e,n){return e==e?On(t,e,n):Je(t,$e,n)}function Ze(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function $e(t){return t!=t}function tn(t,e){var n=null==t?0:t.length;return n?an(t,e)/n:P}function en(t){return function(e){return null==e?r:e[t]}}function nn(t){return function(e){return null==t?r:t[e]}}function rn(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function on(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function an(t,e){for(var n,o=-1,i=t.length;++o<i;){var a=e(t[o]);a!==r&&(n=n===r?a:n+a)}return n}function sn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function cn(t,e){return Ge(e,function(e){return[e,t[e]]})}function un(t){return t?t.slice(0,In(t)+1).replace(At,""):t}function ln(t){return function(e){return t(e)}}function fn(t,e){return Ge(e,function(e){return t[e]})}function pn(t,e){return t.has(e)}function hn(t,e){for(var n=-1,r=t.length;++n<r&&Qe(e,t[n],0)>-1;);return n}function dn(t,e){for(var n=t.length;n--&&Qe(e,t[n],0)>-1;);return n}function _n(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var yn=nn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),gn=nn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function vn(t){return"\\"+ye[t]}function mn(t,e){return null==t?r:t[e]}function bn(t){return le.test(t)}function Cn(t){return fe.test(t)}function Sn(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function wn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function An(t,e){return function(n){return t(e(n))}}function En(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,i[o++]=n)}return i}function Mn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function On(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function Rn(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function xn(t){return bn(t)?Tn(t):qe(t)}function Bn(t){return bn(t)?Dn(t):Ke(t)}function In(t){for(var e=t.length;e--&&Et.test(t.charAt(e)););return e}var Nn=nn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function Tn(t){for(var e=ce.lastIndex=0;ce.test(t);)++e;return e}function Dn(t){return t.match(ce)||[]}function Ln(t){return t.match(ue)||[]}var jn=function t(e){var n,Et=(e=null==e?Ce:jn.defaults(Ce.Object(),e,jn.pick(Ce,pe))).Array,Rt=e.Date,Vt=e.Error,Ht=e.Function,zt=e.Math,Wt=e.Object,qt=e.RegExp,Kt=e.String,Yt=e.TypeError,Xt=Et.prototype,Jt=Ht.prototype,Qt=Wt.prototype,Zt=e["__core-js_shared__"],$t=Jt.toString,te=Qt.hasOwnProperty,ee=0,ne=(n=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",re=Qt.toString,oe=$t.call(Wt),ie=Ce._,ce=qt("^"+$t.call(te).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=Ae?e.Buffer:r,le=e.Symbol,fe=e.Uint8Array,ye=ue?ue.allocUnsafe:r,me=An(Wt.getPrototypeOf,Wt),be=Wt.create,Se=Qt.propertyIsEnumerable,we=Xt.splice,Ee=le?le.isConcatSpreadable:r,Me=le?le.iterator:r,qe=le?le.toStringTag:r,Ke=function(){try{var t=oa(Wt,"defineProperty");return t({},"",{}),t}catch(e){}}(),nn=e.clearTimeout!==Ce.clearTimeout&&e.clearTimeout,On=Rt&&Rt.now!==Ce.Date.now&&Rt.now,Tn=e.setTimeout!==Ce.setTimeout&&e.setTimeout,Dn=zt.ceil,Un=zt.floor,kn=Wt.getOwnPropertySymbols,Fn=ue?ue.isBuffer:r,Gn=e.isFinite,Vn=Xt.join,Hn=An(Wt.keys,Wt),zn=zt.max,Wn=zt.min,qn=Rt.now,Kn=e.parseInt,Yn=zt.random,Xn=Xt.reverse,Jn=oa(e,"DataView"),Qn=oa(e,"Map"),Zn=oa(e,"Promise"),$n=oa(e,"Set"),tr=oa(e,"WeakMap"),er=oa(Wt,"create"),nr=tr&&new tr,rr={},or=Fa(Jn),ir=Fa(Qn),ar=Fa(Zn),sr=Fa($n),cr=Fa(tr),ur=le?le.prototype:r,lr=ur?ur.valueOf:r,fr=ur?ur.toString:r;function pr(t){if(oc(t)&&!Ks(t)&&!(t instanceof yr)){if(t instanceof _r)return t;if(te.call(t,"__wrapped__"))return Va(t)}return new _r(t)}var hr=function(){function t(){}return function(e){if(!rc(e))return{};if(be)return be(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function dr(){}function _r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function yr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=O,this.__views__=[]}function gr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new mr;++e<n;)this.add(t[e])}function Cr(t){var e=this.__data__=new vr(t);this.size=e.size}function Sr(t,e){var n=Ks(t),r=!n&&qs(t),o=!n&&!r&&Qs(t),i=!n&&!r&&!o&&pc(t),a=n||r||o||i,s=a?sn(t.length,Kt):[],c=s.length;for(var u in t)!e&&!te.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ga(u,c))||s.push(u);return s}function wr(t){var e=t.length;return e?t[xo(0,e-1)]:r}function Ar(t,e){return ja(_i(t),Tr(e,0,t.length))}function Er(t){return ja(_i(t))}function Mr(t,e,n){(n===r||Hs(t[e],n))&&(n!==r||e in t)||Ir(t,e,n)}function Pr(t,e,n){var o=t[e];te.call(t,e)&&Hs(o,n)&&(n!==r||e in t)||Ir(t,e,n)}function Or(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function Rr(t,e,n,r){return Fr(t,function(t,o,i){e(r,t,n(t),i)}),r}function xr(t,e){return t&&yi(e,Tc(e),t)}function Br(t,e){return t&&yi(e,Dc(e),t)}function Ir(t,e,n){"__proto__"==e&&Ke?Ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Nr(t,e){for(var n=-1,o=e.length,i=Et(o),a=null==t;++n<o;)i[n]=a?r:Rc(t,e[n]);return i}function Tr(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Dr(t,e,n,o,i,a){var l,f=e&s,p=e&c,h=e&u;if(n&&(l=i?n(t,o,i,a):n(t)),l!==r)return l;if(!rc(t))return t;var d=Ks(t);if(d){if(l=pa(t),!f)return _i(t,l)}else{var _=ca(t),y=_==k||_==F;if(Qs(t))return ai(t,f);if(_==z||_==I||y&&!i){if(l=p||y?{}:ha(t),!f)return p?vi(t,Br(l,t)):gi(t,xr(l,t))}else{if(!_e[_])return i?t:{};l=da(t,_,f)}}a||(a=new Cr);var g=a.get(t);if(g)return g;a.set(t,l),uc(t)?t.forEach(function(r){l.add(Dr(r,e,n,r,t,a))}):ic(t)&&t.forEach(function(r,o){l.set(o,Dr(r,e,n,o,t,a))});var v=d?r:(h?p?Qi:Ji:p?Dc:Tc)(t);return De(v||t,function(r,o){v&&(r=t[o=r]),Pr(l,o,Dr(r,e,n,o,t,a))}),l}function Lr(t){var e=Tc(t);return function(n){return jr(n,t,e)}}function jr(t,e,n){var o=n.length;if(null==t)return!o;for(t=Wt(t);o--;){var i=n[o],a=e[i],s=t[i];if(s===r&&!(i in t)||!a(s))return!1}return!0}function Ur(t,e,n){if("function"!=typeof t)throw new Yt(i);return Na(function(){t.apply(r,n)},e)}function kr(t,e,n,r){var i=-1,a=ke,s=!0,c=t.length,u=[],l=e.length;if(!c)return u;n&&(e=Ge(e,ln(n))),r?(a=Fe,s=!1):e.length>=o&&(a=pn,s=!1,e=new br(e));t:for(;++i<c;){var f=t[i],p=null==n?f:n(f);if(f=r||0!==f?f:0,s&&p==p){for(var h=l;h--;)if(e[h]===p)continue t;u.push(f)}else a(e,p,r)||u.push(f)}return u}pr.templateSettings={escape:yt,evaluate:gt,interpolate:vt,variable:"",imports:{_:pr}},pr.prototype=dr.prototype,pr.prototype.constructor=pr,_r.prototype=hr(dr.prototype),_r.prototype.constructor=_r,yr.prototype=hr(dr.prototype),yr.prototype.constructor=yr,gr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},gr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return"__lodash_hash_undefined__"===n?r:n}return te.call(e,t)?e[t]:r},gr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==r:te.call(e,t)},gr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===r?"__lodash_hash_undefined__":e,this},vr.prototype.clear=function(){this.__data__=[],this.size=0},vr.prototype.delete=function(t){var e=this.__data__,n=Or(e,t);return!(n<0||(n==e.length-1?e.pop():we.call(e,n,1),--this.size,0))},vr.prototype.get=function(t){var e=this.__data__,n=Or(e,t);return n<0?r:e[n][1]},vr.prototype.has=function(t){return Or(this.__data__,t)>-1},vr.prototype.set=function(t,e){var n=this.__data__,r=Or(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},mr.prototype.clear=function(){this.size=0,this.__data__={hash:new gr,map:new(Qn||vr),string:new gr}},mr.prototype.delete=function(t){var e=na(this,t).delete(t);return this.size-=e?1:0,e},mr.prototype.get=function(t){return na(this,t).get(t)},mr.prototype.has=function(t){return na(this,t).has(t)},mr.prototype.set=function(t,e){var n=na(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},br.prototype.add=br.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},br.prototype.has=function(t){return this.__data__.has(t)},Cr.prototype.clear=function(){this.__data__=new vr,this.size=0},Cr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Cr.prototype.get=function(t){return this.__data__.get(t)},Cr.prototype.has=function(t){return this.__data__.has(t)},Cr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vr){var r=n.__data__;if(!Qn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mr(r)}return n.set(t,e),this.size=n.size,this};var Fr=Ci(Xr),Gr=Ci(Jr,!0);function Vr(t,e){var n=!0;return Fr(t,function(t,r,o){return n=!!e(t,r,o)}),n}function Hr(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=e(a);if(null!=s&&(c===r?s==s&&!fc(s):n(s,c)))var c=s,u=a}return u}function zr(t,e,n,o){var i=t.length;for((n=gc(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:gc(o))<0&&(o+=i),o=n>o?0:vc(o);n<o;)t[n++]=e;return t}function Wr(t,e){var n=[];return Fr(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function qr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=ya),o||(o=[]);++i<a;){var s=t[i];e>0&&n(s)?e>1?qr(s,e-1,n,r,o):Ve(o,s):r||(o[o.length]=s)}return o}var Kr=Si(),Yr=Si(!0);function Xr(t,e){return t&&Kr(t,e,Tc)}function Jr(t,e){return t&&Yr(t,e,Tc)}function Qr(t,e){return Ue(e,function(e){return tc(t[e])})}function Zr(t,e){for(var n=0,o=(e=ni(e,t)).length;null!=t&&n<o;)t=t[ka(e[n++])];return n&&n==o?t:r}function $r(t,e,n){var r=e(t);return Ks(t)?r:Ve(r,n(t))}function to(t){return null==t?t===r?J:H:qe&&qe in Wt(t)?ia(t):Pa(t)}function eo(t,e){return t>e}function no(t,e){return null!=t&&te.call(t,e)}function ro(t,e){return null!=t&&e in Wt(t)}function oo(t,e,n){return t>=Wn(e,n)&&t<zn(e,n)}function io(t,e,n){for(var o=n?Fe:ke,i=t[0].length,a=t.length,s=a,c=Et(a),u=1/0,l=[];s--;){var f=t[s];s&&e&&(f=Ge(f,ln(e))),u=Wn(f.length,u),c[s]=!n&&(e||i>=120&&f.length>=120)?new br(s&&f):r}f=t[0];var p=-1,h=c[0];t:for(;++p<i&&l.length<u;){var d=f[p],_=e?e(d):d;if(d=n||0!==d?d:0,!(h?pn(h,_):o(l,_,n))){for(s=a;--s;){var y=c[s];if(!(y?pn(y,_):o(t[s],_,n)))continue t}h&&h.push(_),l.push(d)}}return l}function ao(t,e,n,r){return Xr(t,function(t,o,i){e(r,n(t),o,i)}),r}function so(t,e,n){var o=null==(t=Ra(t,e=ni(e,t)))?t:t[ka($a(e))];return null==o?r:Ne(o,t,n)}function co(t){return oc(t)&&to(t)==I}function uo(t,e,n,r,o){return t===e||(null==t||null==e||!oc(t)&&!oc(e)?t!=t&&e!=e:lo(t,e,n,r,uo,o))}function lo(t,e,n,r,o,i){var a=Ks(t),s=Ks(e),c=a?N:ca(t),u=s?N:ca(e),f=(c=c==I?z:c)==z,p=(u=u==I?z:u)==z,h=c==u;if(h&&Qs(t)){if(!Qs(e))return!1;a=!0,f=!1}if(h&&!f)return i||(i=new Cr),a||pc(t)?qi(t,e,n,r,o,i):Ki(t,e,c,n,r,o,i);if(!(n&l)){var d=f&&te.call(t,"__wrapped__"),_=p&&te.call(e,"__wrapped__");if(d||_){var y=d?t.value():t,g=_?e.value():e;return i||(i=new Cr),o(y,g,n,r,i)}}return!!h&&(i||(i=new Cr),Yi(t,e,n,r,o,i))}function fo(t,e,n,o){var i=n.length,a=i,s=!o;if(null==t)return!a;for(t=Wt(t);i--;){var c=n[i];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<a;){var u=(c=n[i])[0],p=t[u],h=c[1];if(s&&c[2]){if(p===r&&!(u in t))return!1}else{var d=new Cr;if(o)var _=o(p,h,u,t,e,d);if(!(_===r?uo(h,p,l|f,o,d):_))return!1}}return!0}function po(t){return!(!rc(t)||(e=t,ne&&ne in e))&&(tc(t)?ce:Lt).test(Fa(t));var e}function ho(t){return"function"==typeof t?t:null==t?au:"object"==typeof t?Ks(t)?bo(t[0],t[1]):mo(t):_u(t)}function _o(t){if(!Sa(t))return Hn(t);var e=[];for(var n in Wt(t))te.call(t,n)&&"constructor"!=n&&e.push(n);return e}function yo(t){if(!rc(t))return Ma(t);var e=Sa(t),n=[];for(var r in t)("constructor"!=r||!e&&te.call(t,r))&&n.push(r);return n}function go(t,e){return t<e}function vo(t,e){var n=-1,r=Xs(t)?Et(t.length):[];return Fr(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function mo(t){var e=ra(t);return 1==e.length&&e[0][2]?Aa(e[0][0],e[0][1]):function(n){return n===t||fo(n,t,e)}}function bo(t,e){return ma(t)&&wa(e)?Aa(ka(t),e):function(n){var o=Rc(n,t);return o===r&&o===e?xc(n,t):uo(e,o,l|f)}}function Co(t,e,n,o,i){t!==e&&Kr(e,function(a,s){if(i||(i=new Cr),rc(a))So(t,e,s,n,Co,o,i);else{var c=o?o(Ba(t,s),a,s+"",t,e,i):r;c===r&&(c=a),Mr(t,s,c)}},Dc)}function So(t,e,n,o,i,a,s){var c=Ba(t,n),u=Ba(e,n),l=s.get(u);if(l)Mr(t,n,l);else{var f=a?a(c,u,n+"",t,e,s):r,p=f===r;if(p){var h=Ks(u),d=!h&&Qs(u),_=!h&&!d&&pc(u);f=u,h||d||_?Ks(c)?f=c:Js(c)?f=_i(c):d?(p=!1,f=ai(u,!0)):_?(p=!1,f=li(u,!0)):f=[]:sc(u)||qs(u)?(f=c,qs(c)?f=bc(c):rc(c)&&!tc(c)||(f=ha(u))):p=!1}p&&(s.set(u,f),i(f,u,o,a,s),s.delete(u)),Mr(t,n,f)}}function wo(t,e){var n=t.length;if(n)return ga(e+=e<0?n:0,n)?t[e]:r}function Ao(t,e,n){e=e.length?Ge(e,function(t){return Ks(t)?function(e){return Zr(e,1===t.length?t[0]:t)}:t}):[au];var r=-1;return e=Ge(e,ln(ea())),on(vo(t,function(t){return{criteria:Ge(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return pi(t,e,n)})}function Eo(t,e){return Mo(t,e,function(e,n){return xc(t,n)})}function Mo(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],s=Zr(t,a);n(s,a)&&Lo(i,ni(a,t),s)}return i}function Po(t){return function(e){return Zr(e,t)}}function Oo(t,e,n,r){var o=r?Ze:Qe,i=-1,a=e.length,s=t;for(t===e&&(e=_i(e)),n&&(s=Ge(t,ln(n)));++i<a;)for(var c=0,u=e[i],l=n?n(u):u;(c=o(s,l,c,r))>-1;)s!==t&&we.call(s,c,1),we.call(t,c,1);return t}function Ro(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;ga(o)?we.call(t,o,1):Yo(t,o)}}return t}function xo(t,e){return t+Un(Yn()*(e-t+1))}function Bo(t,e,n,r){for(var o=-1,i=zn(Dn((e-t)/(n||1)),0),a=Et(i);i--;)a[r?i:++o]=t,t+=n;return a}function Io(t,e){var n="";if(!t||e<1||e>E)return n;do{e%2&&(n+=t),(e=Un(e/2))&&(t+=t)}while(e);return n}function No(t,e){return Ta(Oa(t,e,au),t+"")}function To(t){return wr(Hc(t))}function Do(t,e){var n=Hc(t);return ja(n,Tr(e,0,n.length))}function Lo(t,e,n,o){if(!rc(t))return t;for(var i=-1,a=(e=ni(e,t)).length,s=a-1,c=t;null!=c&&++i<a;){var u=ka(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=s){var f=c[u];(l=o?o(f,u,c):r)===r&&(l=rc(f)?f:ga(e[i+1])?[]:{})}Pr(c,u,l),c=c[u]}return t}var jo=nr?function(t,e){return nr.set(t,e),t}:au,Uo=Ke?function(t,e){return Ke(t,"toString",{configurable:!0,enumerable:!1,value:ru(e),writable:!0})}:au;function ko(t){return ja(Hc(t))}function Fo(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Et(o);++r<o;)i[r]=t[r+e];return i}function Go(t,e){var n;return Fr(t,function(t,r,o){return!(n=e(t,r,o))}),!!n}function Vo(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=x){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!fc(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return Ho(t,e,au,n)}function Ho(t,e,n,o){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,c=null===e,u=fc(e),l=e===r;i<a;){var f=Un((i+a)/2),p=n(t[f]),h=p!==r,d=null===p,_=p==p,y=fc(p);if(s)var g=o||_;else g=l?_&&(o||h):c?_&&h&&(o||!d):u?_&&h&&!d&&(o||!y):!d&&!y&&(o?p<=e:p<e);g?i=f+1:a=f}return Wn(a,R)}function zo(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Hs(s,c)){var c=s;i[o++]=0===a?0:a}}return i}function Wo(t){return"number"==typeof t?t:fc(t)?P:+t}function qo(t){if("string"==typeof t)return t;if(Ks(t))return Ge(t,qo)+"";if(fc(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-A?"-0":e}function Ko(t,e,n){var r=-1,i=ke,a=t.length,s=!0,c=[],u=c;if(n)s=!1,i=Fe;else if(a>=o){var l=e?null:Fi(t);if(l)return Mn(l);s=!1,i=pn,u=new br}else u=e?[]:c;t:for(;++r<a;){var f=t[r],p=e?e(f):f;if(f=n||0!==f?f:0,s&&p==p){for(var h=u.length;h--;)if(u[h]===p)continue t;e&&u.push(p),c.push(f)}else i(u,p,n)||(u!==c&&u.push(p),c.push(f))}return c}function Yo(t,e){return null==(t=Ra(t,e=ni(e,t)))||delete t[ka($a(e))]}function Xo(t,e,n,r){return Lo(t,e,n(Zr(t,e)),r)}function Jo(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Fo(t,r?0:i,r?i+1:o):Fo(t,r?i+1:0,r?o:i)}function Qo(t,e){var n=t;return n instanceof yr&&(n=n.value()),He(e,function(t,e){return e.func.apply(e.thisArg,Ve([t],e.args))},n)}function Zo(t,e,n){var r=t.length;if(r<2)return r?Ko(t[0]):[];for(var o=-1,i=Et(r);++o<r;)for(var a=t[o],s=-1;++s<r;)s!=o&&(i[o]=kr(i[o]||a,t[s],e,n));return Ko(qr(i,1),e,n)}function $o(t,e,n){for(var o=-1,i=t.length,a=e.length,s={};++o<i;){var c=o<a?e[o]:r;n(s,t[o],c)}return s}function ti(t){return Js(t)?t:[]}function ei(t){return"function"==typeof t?t:au}function ni(t,e){return Ks(t)?t:ma(t,e)?[t]:Ua(Cc(t))}var ri=No;function oi(t,e,n){var o=t.length;return n=n===r?o:n,!e&&n>=o?t:Fo(t,e,n)}var ii=nn||function(t){return Ce.clearTimeout(t)};function ai(t,e){if(e)return t.slice();var n=t.length,r=ye?ye(n):new t.constructor(n);return t.copy(r),r}function si(t){var e=new t.constructor(t.byteLength);return new fe(e).set(new fe(t)),e}function ci(t,e){var n=e?si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function ui(t){var e=new t.constructor(t.source,Nt.exec(t));return e.lastIndex=t.lastIndex,e}function li(t,e){var n=e?si(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fi(t,e){if(t!==e){var n=t!==r,o=null===t,i=t==t,a=fc(t),s=e!==r,c=null===e,u=e==e,l=fc(e);if(!c&&!l&&!a&&t>e||a&&s&&u&&!c&&!l||o&&s&&u||!n&&u||!i)return 1;if(!o&&!a&&!l&&t<e||l&&n&&i&&!o&&!a||c&&n&&i||!s&&i||!u)return-1}return 0}function pi(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,s=n.length;++r<a;){var c=fi(o[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}function hi(t,e,n,r){for(var o=-1,i=t.length,a=n.length,s=-1,c=e.length,u=zn(i-a,0),l=Et(c+u),f=!r;++s<c;)l[s]=e[s];for(;++o<a;)(f||o<i)&&(l[n[o]]=t[o]);for(;u--;)l[s++]=t[o++];return l}function di(t,e,n,r){for(var o=-1,i=t.length,a=-1,s=n.length,c=-1,u=e.length,l=zn(i-s,0),f=Et(l+u),p=!r;++o<l;)f[o]=t[o];for(var h=o;++c<u;)f[h+c]=e[c];for(;++a<s;)(p||o<i)&&(f[h+n[a]]=t[o++]);return f}function _i(t,e){var n=-1,r=t.length;for(e||(e=Et(r));++n<r;)e[n]=t[n];return e}function yi(t,e,n,o){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],u=o?o(n[c],t[c],c,n,t):r;u===r&&(u=t[c]),i?Ir(n,c,u):Pr(n,c,u)}return n}function gi(t,e){return yi(t,aa(t),e)}function vi(t,e){return yi(t,sa(t),e)}function mi(t,e){return function(n,r){var o=Ks(n)?Te:Rr,i=e?e():{};return o(n,t,ea(r,2),i)}}function bi(t){return No(function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(i--,a):r,s&&va(n[0],n[1],s)&&(a=i<3?r:a,i=1),e=Wt(e);++o<i;){var c=n[o];c&&t(e,c,o,a)}return e})}function Ci(t,e){return function(n,r){if(null==n)return n;if(!Xs(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Wt(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Si(t){return function(e,n,r){for(var o=-1,i=Wt(e),a=r(e),s=a.length;s--;){var c=a[t?s:++o];if(!1===n(i[c],c,i))break}return e}}function wi(t,e,n){var r=e&p,o=Mi(t);return function e(){return(this&&this!==Ce&&this instanceof e?o:t).apply(r?n:this,arguments)}}function Ai(t){return function(e){var n=bn(e=Cc(e))?Bn(e):r,o=n?n[0]:e.charAt(0),i=n?oi(n,1).join(""):e.slice(1);return o[t]()+i}}function Ei(t){return function(e){return He(tu(qc(e).replace(ae,"")),t,"")}}function Mi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=hr(t.prototype),r=t.apply(n,e);return rc(r)?r:n}}function Pi(t,e,n){var o=Mi(t);return function i(){for(var a=arguments.length,s=Et(a),c=a,u=ta(i);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==u&&s[a-1]!==u?[]:En(s,u);return(a-=l.length)<n?Ui(t,e,xi,i.placeholder,r,s,l,r,r,n-a):Ne(this&&this!==Ce&&this instanceof i?o:t,this,s)}}function Oi(t){return function(e,n,o){var i=Wt(e);if(!Xs(e)){var a=ea(n,3);e=Tc(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,o);return s>-1?i[a?e[s]:s]:r}}function Ri(t){return Xi(function(e){var n=e.length,o=n,a=_r.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new Yt(i);if(a&&!c&&"wrapper"==$i(s))var c=new _r([],!0)}for(o=c?o:n;++o<n;){var u=$i(s=e[o]),l="wrapper"==u?Zi(s):r;c=l&&ba(l[0])&&l[1]==(m|_|g|b)&&!l[4].length&&1==l[9]?c[$i(l[0])].apply(c,l[3]):1==s.length&&ba(s)?c[u]():c.thru(s)}return function(){var t=arguments,r=t[0];if(c&&1==t.length&&Ks(r))return c.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function xi(t,e,n,o,i,a,s,c,u,l){var f=e&m,d=e&p,g=e&h,v=e&(_|y),b=e&C,S=g?r:Mi(t);return function r(){for(var p=arguments.length,h=Et(p),_=p;_--;)h[_]=arguments[_];if(v)var y=ta(r),m=_n(h,y);if(o&&(h=hi(h,o,i,v)),a&&(h=di(h,a,s,v)),p-=m,v&&p<l){var C=En(h,y);return Ui(t,e,xi,r.placeholder,n,h,C,c,u,l-p)}var w=d?n:this,A=g?w[t]:t;return p=h.length,c?h=xa(h,c):b&&p>1&&h.reverse(),f&&u<p&&(h.length=u),this&&this!==Ce&&this instanceof r&&(A=S||Mi(A)),A.apply(w,h)}}function Bi(t,e){return function(n,r){return ao(n,t,e(r),{})}}function Ii(t,e){return function(n,o){var i;if(n===r&&o===r)return e;if(n!==r&&(i=n),o!==r){if(i===r)return o;"string"==typeof n||"string"==typeof o?(n=qo(n),o=qo(o)):(n=Wo(n),o=Wo(o)),i=t(n,o)}return i}}function Ni(t){return Xi(function(e){return e=Ge(e,ln(ea())),No(function(n){var r=this;return t(e,function(t){return Ne(t,r,n)})})})}function Ti(t,e){var n=(e=e===r?" ":qo(e)).length;if(n<2)return n?Io(e,t):e;var o=Io(e,Dn(t/xn(e)));return bn(e)?oi(Bn(o),0,t).join(""):o.slice(0,t)}function Di(t,e,n,r){var o=e&p,i=Mi(t);return function e(){for(var a=-1,s=arguments.length,c=-1,u=r.length,l=Et(u+s),f=this&&this!==Ce&&this instanceof e?i:t;++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++a];return Ne(f,o?n:this,l)}}function Li(t){return function(e,n,o){return o&&"number"!=typeof o&&va(e,n,o)&&(n=o=r),e=yc(e),n===r?(n=e,e=0):n=yc(n),Bo(e,n,o=o===r?e<n?1:-1:yc(o),t)}}function ji(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=mc(e),n=mc(n)),t(e,n)}}function Ui(t,e,n,o,i,a,s,c,u,l){var f=e&_;e|=f?g:v,(e&=~(f?v:g))&d||(e&=~(p|h));var y=[t,e,i,f?a:r,f?s:r,f?r:a,f?r:s,c,u,l],m=n.apply(r,y);return ba(t)&&Ia(m,y),m.placeholder=o,Da(m,t,e)}function ki(t){var e=zt[t];return function(t,n){if(t=mc(t),(n=null==n?0:Wn(gc(n),292))&&Gn(t)){var r=(Cc(t)+"e").split("e");return+((r=(Cc(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Fi=$n&&1/Mn(new $n([,-0]))[1]==A?function(t){return new $n(t)}:fu;function Gi(t){return function(e){var n=ca(e);return n==G?wn(e):n==K?Pn(e):cn(e,t(e))}}function Vi(t,e,n,o,a,s,c,u){var l=e&h;if(!l&&"function"!=typeof t)throw new Yt(i);var f=o?o.length:0;if(f||(e&=~(g|v),o=a=r),c=c===r?c:zn(gc(c),0),u=u===r?u:gc(u),f-=a?a.length:0,e&v){var d=o,m=a;o=a=r}var b=l?r:Zi(t),C=[t,e,n,o,a,d,m,s,c,u];if(b&&Ea(C,b),t=C[0],e=C[1],n=C[2],o=C[3],a=C[4],!(u=C[9]=C[9]===r?l?0:t.length:zn(C[9]-f,0))&&e&(_|y)&&(e&=~(_|y)),e&&e!=p)S=e==_||e==y?Pi(t,e,u):e!=g&&e!=(p|g)||a.length?xi.apply(r,C):Di(t,e,n,o);else var S=wi(t,e,n);return Da((b?jo:Ia)(S,C),t,e)}function Hi(t,e,n,o){return t===r||Hs(t,Qt[n])&&!te.call(o,n)?e:t}function zi(t,e,n,o,i,a){return rc(t)&&rc(e)&&(a.set(e,t),Co(t,e,r,zi,a),a.delete(e)),t}function Wi(t){return sc(t)?r:t}function qi(t,e,n,o,i,a){var s=n&l,c=t.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;var p=a.get(t),h=a.get(e);if(p&&h)return p==e&&h==t;var d=-1,_=!0,y=n&f?new br:r;for(a.set(t,e),a.set(e,t);++d<c;){var g=t[d],v=e[d];if(o)var m=s?o(v,g,d,e,t,a):o(g,v,d,t,e,a);if(m!==r){if(m)continue;_=!1;break}if(y){if(!We(e,function(t,e){if(!pn(y,e)&&(g===t||i(g,t,n,o,a)))return y.push(e)})){_=!1;break}}else if(g!==v&&!i(g,v,n,o,a)){_=!1;break}}return a.delete(t),a.delete(e),_}function Ki(t,e,n,r,o,i,a){switch(n){case $:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z:return!(t.byteLength!=e.byteLength||!i(new fe(t),new fe(e)));case D:case L:case V:return Hs(+t,+e);case U:return t.name==e.name&&t.message==e.message;case q:case Y:return t==e+"";case G:var s=wn;case K:var c=r&l;if(s||(s=Mn),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=f,a.set(t,e);var p=qi(s(t),s(e),r,o,i,a);return a.delete(t),p;case X:if(lr)return lr.call(t)==lr.call(e)}return!1}function Yi(t,e,n,o,i,a){var s=n&l,c=Ji(t),u=c.length;if(u!=Ji(e).length&&!s)return!1;for(var f=u;f--;){var p=c[f];if(!(s?p in e:te.call(e,p)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var _=!0;a.set(t,e),a.set(e,t);for(var y=s;++f<u;){var g=t[p=c[f]],v=e[p];if(o)var m=s?o(v,g,p,e,t,a):o(g,v,p,t,e,a);if(!(m===r?g===v||i(g,v,n,o,a):m)){_=!1;break}y||(y="constructor"==p)}if(_&&!y){var b=t.constructor,C=e.constructor;b!=C&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof C&&C instanceof C)&&(_=!1)}return a.delete(t),a.delete(e),_}function Xi(t){return Ta(Oa(t,r,Ya),t+"")}function Ji(t){return $r(t,Tc,aa)}function Qi(t){return $r(t,Dc,sa)}var Zi=nr?function(t){return nr.get(t)}:fu;function $i(t){for(var e=t.name+"",n=rr[e],r=te.call(rr,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function ta(t){return(te.call(pr,"placeholder")?pr:t).placeholder}function ea(){var t=pr.iteratee||su;return t=t===su?ho:t,arguments.length?t(arguments[0],arguments[1]):t}function na(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ra(t){for(var e=Tc(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,wa(o)]}return e}function oa(t,e){var n=mn(t,e);return po(n)?n:r}function ia(t){var e=te.call(t,qe),n=t[qe];try{t[qe]=r;var o=!0}catch(a){}var i=re.call(t);return o&&(e?t[qe]=n:delete t[qe]),i}var aa=kn?function(t){return null==t?[]:(t=Wt(t),Ue(kn(t),function(e){return Se.call(t,e)}))}:vu,sa=kn?function(t){for(var e=[];t;)Ve(e,aa(t)),t=me(t);return e}:vu,ca=to;function ua(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wn(e,t+a);break;case"takeRight":t=zn(t,e-a)}}return{start:t,end:e}}function la(t){var e=t.match(Pt);return e?e[1].split(Ot):[]}function fa(t,e,n){for(var r=-1,o=(e=ni(e,t)).length,i=!1;++r<o;){var a=ka(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&nc(o)&&ga(a,o)&&(Ks(t)||qs(t))}function pa(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&te.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ha(t){return"function"!=typeof t.constructor||Sa(t)?{}:hr(me(t))}function da(t,e,n){var r,o=t.constructor;switch(e){case Z:return si(t);case D:case L:return new o(+t);case $:return ci(t,n);case tt:case et:case nt:case rt:case ot:case it:case at:case st:case ct:return li(t,n);case G:return new o;case V:case Y:return new o(t);case q:return ui(t);case K:return new o;case X:return r=t,lr?Wt(lr.call(r)):{}}}function _a(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Mt,"{\n/* [wrapped with "+e+"] */\n")}function ya(t){return Ks(t)||qs(t)||!!(Ee&&t&&t[Ee])}function ga(t,e){var n=typeof t;return!!(e=null==e?E:e)&&("number"==n||"symbol"!=n&&Ut.test(t))&&t>-1&&t%1==0&&t<e}function va(t,e,n){if(!rc(n))return!1;var r=typeof e;return!!("number"==r?Xs(n)&&ga(e,n.length):"string"==r&&e in n)&&Hs(n[e],t)}function ma(t,e){if(Ks(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fc(t))||bt.test(t)||!mt.test(t)||null!=e&&t in Wt(e)}function ba(t){var e=$i(t),n=pr[e];if("function"!=typeof n||!(e in yr.prototype))return!1;if(t===n)return!0;var r=Zi(n);return!!r&&t===r[0]}(Jn&&ca(new Jn(new ArrayBuffer(1)))!=$||Qn&&ca(new Qn)!=G||Zn&&"[object Promise]"!=ca(Zn.resolve())||$n&&ca(new $n)!=K||tr&&ca(new tr)!=Q)&&(ca=function(t){var e=to(t),n=e==z?t.constructor:r,o=n?Fa(n):"";if(o)switch(o){case or:return $;case ir:return G;case ar:return"[object Promise]";case sr:return K;case cr:return Q}return e});var Ca=Zt?tc:mu;function Sa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function wa(t){return t==t&&!rc(t)}function Aa(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Wt(n))}}function Ea(t,e){var n=t[1],r=e[1],o=n|r,i=o<(p|h|m),s=r==m&&n==_||r==m&&n==b&&t[7].length<=e[8]||r==(m|b)&&e[7].length<=e[8]&&n==_;if(!i&&!s)return t;r&p&&(t[2]=e[2],o|=n&p?0:d);var c=e[3];if(c){var u=t[3];t[3]=u?hi(u,c,e[4]):c,t[4]=u?En(t[3],a):e[4]}return(c=e[5])&&(u=t[5],t[5]=u?di(u,c,e[6]):c,t[6]=u?En(t[5],a):e[6]),(c=e[7])&&(t[7]=c),r&m&&(t[8]=null==t[8]?e[8]:Wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Ma(t){var e=[];if(null!=t)for(var n in Wt(t))e.push(n);return e}function Pa(t){return re.call(t)}function Oa(t,e,n){return e=zn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=zn(r.length-e,0),a=Et(i);++o<i;)a[o]=r[e+o];o=-1;for(var s=Et(e+1);++o<e;)s[o]=r[o];return s[e]=n(a),Ne(t,this,s)}}function Ra(t,e){return e.length<2?t:Zr(t,Fo(e,0,-1))}function xa(t,e){for(var n=t.length,o=Wn(e.length,n),i=_i(t);o--;){var a=e[o];t[o]=ga(a,n)?i[a]:r}return t}function Ba(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ia=La(jo),Na=Tn||function(t,e){return Ce.setTimeout(t,e)},Ta=La(Uo);function Da(t,e,n){var r=e+"";return Ta(t,_a(r,Ga(la(r),n)))}function La(t){var e=0,n=0;return function(){var o=qn(),i=w-(o-n);if(n=o,i>0){if(++e>=S)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ja(t,e){var n=-1,o=t.length,i=o-1;for(e=e===r?o:e;++n<e;){var a=xo(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ua=function(){var t=js(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ct,function(t,n,r,o){e.push(r?o.replace(Bt,"$1"):n||t)}),e},function(t){return 500===e.size&&e.clear(),t}),e=t.cache;return t}();function ka(t){if("string"==typeof t||fc(t))return t;var e=t+"";return"0"==e&&1/t==-A?"-0":e}function Fa(t){if(null!=t){try{return $t.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ga(t,e){return De(B,function(n){var r="_."+n[0];e&n[1]&&!ke(t,r)&&t.push(r)}),t.sort()}function Va(t){if(t instanceof yr)return t.clone();var e=new _r(t.__wrapped__,t.__chain__);return e.__actions__=_i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ha=No(function(t,e){return Js(t)?kr(t,qr(e,1,Js,!0)):[]}),za=No(function(t,e){var n=$a(e);return Js(n)&&(n=r),Js(t)?kr(t,qr(e,1,Js,!0),ea(n,2)):[]}),Wa=No(function(t,e){var n=$a(e);return Js(n)&&(n=r),Js(t)?kr(t,qr(e,1,Js,!0),r,n):[]});function qa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gc(n);return o<0&&(o=zn(r+o,0)),Je(t,ea(e,3),o)}function Ka(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=o-1;return n!==r&&(i=gc(n),i=n<0?zn(o+i,0):Wn(i,o-1)),Je(t,ea(e,3),i,!0)}function Ya(t){return null!=t&&t.length?qr(t,1):[]}function Xa(t){return t&&t.length?t[0]:r}var Ja=No(function(t){var e=Ge(t,ti);return e.length&&e[0]===t[0]?io(e):[]}),Qa=No(function(t){var e=$a(t),n=Ge(t,ti);return e===$a(n)?e=r:n.pop(),n.length&&n[0]===t[0]?io(n,ea(e,2)):[]}),Za=No(function(t){var e=$a(t),n=Ge(t,ti);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?io(n,r,e):[]});function $a(t){var e=null==t?0:t.length;return e?t[e-1]:r}var ts=No(es);function es(t,e){return t&&t.length&&e&&e.length?Oo(t,e):t}var ns=Xi(function(t,e){var n=null==t?0:t.length,r=Nr(t,e);return Ro(t,Ge(e,function(t){return ga(t,n)?+t:t}).sort(fi)),r});function rs(t){return null==t?t:Xn.call(t)}var os=No(function(t){return Ko(qr(t,1,Js,!0))}),is=No(function(t){var e=$a(t);return Js(e)&&(e=r),Ko(qr(t,1,Js,!0),ea(e,2))}),as=No(function(t){var e=$a(t);return e="function"==typeof e?e:r,Ko(qr(t,1,Js,!0),r,e)});function ss(t){if(!t||!t.length)return[];var e=0;return t=Ue(t,function(t){if(Js(t))return e=zn(t.length,e),!0}),sn(e,function(e){return Ge(t,en(e))})}function cs(t,e){if(!t||!t.length)return[];var n=ss(t);return null==e?n:Ge(n,function(t){return Ne(e,r,t)})}var us=No(function(t,e){return Js(t)?kr(t,e):[]}),ls=No(function(t){return Zo(Ue(t,Js))}),fs=No(function(t){var e=$a(t);return Js(e)&&(e=r),Zo(Ue(t,Js),ea(e,2))}),ps=No(function(t){var e=$a(t);return e="function"==typeof e?e:r,Zo(Ue(t,Js),r,e)}),hs=No(ss),ds=No(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,cs(t,n)});function _s(t){var e=pr(t);return e.__chain__=!0,e}function ys(t,e){return e(t)}var gs=Xi(function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,i=function(e){return Nr(e,t)};return!(e>1||this.__actions__.length)&&o instanceof yr&&ga(n)?((o=o.slice(n,+n+(e?1:0))).__actions__.push({func:ys,args:[i],thisArg:r}),new _r(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(i)}),vs=mi(function(t,e,n){te.call(t,n)?++t[n]:Ir(t,n,1)}),ms=Oi(qa),bs=Oi(Ka);function Cs(t,e){return(Ks(t)?De:Fr)(t,ea(e,3))}function Ss(t,e){return(Ks(t)?Le:Gr)(t,ea(e,3))}var ws=mi(function(t,e,n){te.call(t,n)?t[n].push(e):Ir(t,n,[e])}),As=No(function(t,e,n){var r=-1,o="function"==typeof e,i=Xs(t)?Et(t.length):[];return Fr(t,function(t){i[++r]=o?Ne(e,t,n):so(t,e,n)}),i}),Es=mi(function(t,e,n){Ir(t,n,e)});function Ms(t,e){return(Ks(t)?Ge:vo)(t,ea(e,3))}var Ps=mi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Os=No(function(t,e){if(null==t)return[];var n=e.length;return n>1&&va(t,e[0],e[1])?e=[]:n>2&&va(e[0],e[1],e[2])&&(e=[e[0]]),Ao(t,qr(e,1),[])}),Rs=On||function(){return Ce.Date.now()};function xs(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Vi(t,m,r,r,r,r,e)}function Bs(t,e){var n;if("function"!=typeof e)throw new Yt(i);return t=gc(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Is=No(function(t,e,n){var r=p;if(n.length){var o=En(n,ta(Is));r|=g}return Vi(t,r,e,n,o)}),Ns=No(function(t,e,n){var r=p|h;if(n.length){var o=En(n,ta(Ns));r|=g}return Vi(e,r,t,n,o)});function Ts(t,e,n){var o,a,s,c,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Yt(i);function _(e){var n=o,i=a;return o=a=r,f=e,c=t.apply(i,n)}function y(t){return f=t,u=Na(m,e),p?_(t):c}function g(t){var n=e-(t-l);return h?Wn(n,s-(t-f)):n}function v(t){var n=t-l;return l===r||n>=e||n<0||h&&t-f>=s}function m(){var t=Rs();if(v(t))return b(t);u=Na(m,g(t))}function b(t){return u=r,d&&o?_(t):(o=a=r,c)}function C(){var t=Rs(),n=v(t);if(o=arguments,a=this,l=t,n){if(u===r)return y(l);if(h)return ii(u),u=Na(m,e),_(l)}return u===r&&(u=Na(m,e)),c}return e=mc(e)||0,rc(n)&&(p=!!n.leading,s=(h="maxWait"in n)?zn(mc(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),C.cancel=function(){u!==r&&ii(u),f=0,o=l=a=u=r},C.flush=function(){return u===r?c:b(Rs())},C}var Ds=No(function(t,e){return Ur(t,1,e)}),Ls=No(function(t,e,n){return Ur(t,mc(e)||0,n)});function js(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Yt(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(js.Cache||mr),n}function Us(t){if("function"!=typeof t)throw new Yt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}js.Cache=mr;var ks=ri(function(t,e){var n=(e=1==e.length&&Ks(e[0])?Ge(e[0],ln(ea())):Ge(qr(e,1),ln(ea()))).length;return No(function(r){for(var o=-1,i=Wn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return Ne(t,this,r)})}),Fs=No(function(t,e){var n=En(e,ta(Fs));return Vi(t,g,r,e,n)}),Gs=No(function(t,e){var n=En(e,ta(Gs));return Vi(t,v,r,e,n)}),Vs=Xi(function(t,e){return Vi(t,b,r,r,r,e)});function Hs(t,e){return t===e||t!=t&&e!=e}var zs=ji(eo),Ws=ji(function(t,e){return t>=e}),qs=co(function(){return arguments}())?co:function(t){return oc(t)&&te.call(t,"callee")&&!Se.call(t,"callee")},Ks=Et.isArray,Ys=Pe?ln(Pe):function(t){return oc(t)&&to(t)==Z};function Xs(t){return null!=t&&nc(t.length)&&!tc(t)}function Js(t){return oc(t)&&Xs(t)}var Qs=Fn||mu,Zs=Oe?ln(Oe):function(t){return oc(t)&&to(t)==L};function $s(t){if(!oc(t))return!1;var e=to(t);return e==U||e==j||"string"==typeof t.message&&"string"==typeof t.name&&!sc(t)}function tc(t){if(!rc(t))return!1;var e=to(t);return e==k||e==F||e==T||e==W}function ec(t){return"number"==typeof t&&t==gc(t)}function nc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}function rc(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function oc(t){return null!=t&&"object"==typeof t}var ic=Re?ln(Re):function(t){return oc(t)&&ca(t)==G};function ac(t){return"number"==typeof t||oc(t)&&to(t)==V}function sc(t){if(!oc(t)||to(t)!=z)return!1;var e=me(t);if(null===e)return!0;var n=te.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$t.call(n)==oe}var cc=xe?ln(xe):function(t){return oc(t)&&to(t)==q},uc=Be?ln(Be):function(t){return oc(t)&&ca(t)==K};function lc(t){return"string"==typeof t||!Ks(t)&&oc(t)&&to(t)==Y}function fc(t){return"symbol"==typeof t||oc(t)&&to(t)==X}var pc=Ie?ln(Ie):function(t){return oc(t)&&nc(t.length)&&!!de[to(t)]},hc=ji(go),dc=ji(function(t,e){return t<=e});function _c(t){if(!t)return[];if(Xs(t))return lc(t)?Bn(t):_i(t);if(Me&&t[Me])return Sn(t[Me]());var e=ca(t);return(e==G?wn:e==K?Mn:Hc)(t)}function yc(t){return t?(t=mc(t))===A||t===-A?(t<0?-1:1)*M:t==t?t:0:0===t?t:0}function gc(t){var e=yc(t),n=e%1;return e==e?n?e-n:e:0}function vc(t){return t?Tr(gc(t),0,O):0}function mc(t){if("number"==typeof t)return t;if(fc(t))return P;if(rc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=un(t);var n=Dt.test(t);return n||jt.test(t)?ve(t.slice(2),n?2:8):Tt.test(t)?P:+t}function bc(t){return yi(t,Dc(t))}function Cc(t){return null==t?"":qo(t)}var Sc=bi(function(t,e){if(Sa(e)||Xs(e))yi(e,Tc(e),t);else for(var n in e)te.call(e,n)&&Pr(t,n,e[n])}),wc=bi(function(t,e){yi(e,Dc(e),t)}),Ac=bi(function(t,e,n,r){yi(e,Dc(e),t,r)}),Ec=bi(function(t,e,n,r){yi(e,Tc(e),t,r)}),Mc=Xi(Nr),Pc=No(function(t,e){t=Wt(t);var n=-1,o=e.length,i=o>2?e[2]:r;for(i&&va(e[0],e[1],i)&&(o=1);++n<o;)for(var a=e[n],s=Dc(a),c=-1,u=s.length;++c<u;){var l=s[c],f=t[l];(f===r||Hs(f,Qt[l])&&!te.call(t,l))&&(t[l]=a[l])}return t}),Oc=No(function(t){return t.push(r,zi),Ne(jc,r,t)});function Rc(t,e,n){var o=null==t?r:Zr(t,e);return o===r?n:o}function xc(t,e){return null!=t&&fa(t,e,ro)}var Bc=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=re.call(e)),t[e]=n},ru(au)),Ic=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=re.call(e)),te.call(t,e)?t[e].push(n):t[e]=[n]},ea),Nc=No(so);function Tc(t){return Xs(t)?Sr(t):_o(t)}function Dc(t){return Xs(t)?Sr(t,!0):yo(t)}var Lc=bi(function(t,e,n){Co(t,e,n)}),jc=bi(function(t,e,n,r){Co(t,e,n,r)}),Uc=Xi(function(t,e){var n={};if(null==t)return n;var r=!1;e=Ge(e,function(e){return e=ni(e,t),r||(r=e.length>1),e}),yi(t,Qi(t),n),r&&(n=Dr(n,s|c|u,Wi));for(var o=e.length;o--;)Yo(n,e[o]);return n}),kc=Xi(function(t,e){return null==t?{}:Eo(t,e)});function Fc(t,e){if(null==t)return{};var n=Ge(Qi(t),function(t){return[t]});return e=ea(e),Mo(t,n,function(t,n){return e(t,n[0])})}var Gc=Gi(Tc),Vc=Gi(Dc);function Hc(t){return null==t?[]:fn(t,Tc(t))}var zc=Ei(function(t,e,n){return e=e.toLowerCase(),t+(n?Wc(e):e)});function Wc(t){return $c(Cc(t).toLowerCase())}function qc(t){return(t=Cc(t))&&t.replace(kt,yn).replace(se,"")}var Kc=Ei(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yc=Ei(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xc=Ai("toLowerCase"),Jc=Ei(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qc=Ei(function(t,e,n){return t+(n?" ":"")+$c(e)}),Zc=Ei(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),$c=Ai("toUpperCase");function tu(t,e,n){return t=Cc(t),(e=n?r:e)===r?Cn(t)?Ln(t):Ye(t):t.match(e)||[]}var eu=No(function(t,e){try{return Ne(t,r,e)}catch(n){return $s(n)?n:new Vt(n)}}),nu=Xi(function(t,e){return De(e,function(e){e=ka(e),Ir(t,e,Is(t[e],t))}),t});function ru(t){return function(){return t}}var ou=Ri(),iu=Ri(!0);function au(t){return t}function su(t){return ho("function"==typeof t?t:Dr(t,s))}var cu=No(function(t,e){return function(n){return so(n,t,e)}}),uu=No(function(t,e){return function(n){return so(t,n,e)}});function lu(t,e,n){var r=Tc(e),o=Qr(e,r);null!=n||rc(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Qr(e,Tc(e)));var i=!(rc(n)&&"chain"in n&&!n.chain),a=tc(t);return De(o,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=_i(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ve([this.value()],arguments))})}),t}function fu(){}var pu=Ni(Ge),hu=Ni(je),du=Ni(We);function _u(t){return ma(t)?en(ka(t)):Po(t)}var yu=Li(),gu=Li(!0);function vu(){return[]}function mu(){return!1}var bu,Cu=Ii(function(t,e){return t+e},0),Su=ki("ceil"),wu=Ii(function(t,e){return t/e},1),Au=ki("floor"),Eu=Ii(function(t,e){return t*e},1),Mu=ki("round"),Pu=Ii(function(t,e){return t-e},0);return pr.after=function(t,e){if("function"!=typeof e)throw new Yt(i);return t=gc(t),function(){if(--t<1)return e.apply(this,arguments)}},pr.ary=xs,pr.assign=Sc,pr.assignIn=wc,pr.assignInWith=Ac,pr.assignWith=Ec,pr.at=Mc,pr.before=Bs,pr.bind=Is,pr.bindAll=nu,pr.bindKey=Ns,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ks(t)?t:[t]},pr.chain=_s,pr.chunk=function(t,e,n){e=(n?va(t,e,n):e===r)?1:zn(gc(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var i=0,a=0,s=Et(Dn(o/e));i<o;)s[a++]=Fo(t,i,i+=e);return s},pr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Et(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ve(Ks(n)?_i(n):[n],qr(e,1))},pr.cond=function(t){var e=null==t?0:t.length,n=ea();return t=e?Ge(t,function(t){if("function"!=typeof t[1])throw new Yt(i);return[n(t[0]),t[1]]}):[],No(function(n){for(var r=-1;++r<e;){var o=t[r];if(Ne(o[0],this,n))return Ne(o[1],this,n)}})},pr.conforms=function(t){return Lr(Dr(t,s))},pr.constant=ru,pr.countBy=vs,pr.create=function(t,e){var n=hr(t);return null==e?n:xr(n,e)},pr.curry=function t(e,n,o){var i=Vi(e,_,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},pr.curryRight=function t(e,n,o){var i=Vi(e,y,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},pr.debounce=Ts,pr.defaults=Pc,pr.defaultsDeep=Oc,pr.defer=Ds,pr.delay=Ls,pr.difference=Ha,pr.differenceBy=za,pr.differenceWith=Wa,pr.drop=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,(e=n||e===r?1:gc(e))<0?0:e,o):[]},pr.dropRight=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,0,(e=o-(e=n||e===r?1:gc(e)))<0?0:e):[]},pr.dropRightWhile=function(t,e){return t&&t.length?Jo(t,ea(e,3),!0,!0):[]},pr.dropWhile=function(t,e){return t&&t.length?Jo(t,ea(e,3),!0):[]},pr.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&va(t,e,n)&&(n=0,r=o),zr(t,e,n,r)):[]},pr.filter=function(t,e){return(Ks(t)?Ue:Wr)(t,ea(e,3))},pr.flatMap=function(t,e){return qr(Ms(t,e),1)},pr.flatMapDeep=function(t,e){return qr(Ms(t,e),A)},pr.flatMapDepth=function(t,e,n){return n=n===r?1:gc(n),qr(Ms(t,e),n)},pr.flatten=Ya,pr.flattenDeep=function(t){return null!=t&&t.length?qr(t,A):[]},pr.flattenDepth=function(t,e){return null!=t&&t.length?qr(t,e=e===r?1:gc(e)):[]},pr.flip=function(t){return Vi(t,C)},pr.flow=ou,pr.flowRight=iu,pr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},pr.functions=function(t){return null==t?[]:Qr(t,Tc(t))},pr.functionsIn=function(t){return null==t?[]:Qr(t,Dc(t))},pr.groupBy=ws,pr.initial=function(t){return null!=t&&t.length?Fo(t,0,-1):[]},pr.intersection=Ja,pr.intersectionBy=Qa,pr.intersectionWith=Za,pr.invert=Bc,pr.invertBy=Ic,pr.invokeMap=As,pr.iteratee=su,pr.keyBy=Es,pr.keys=Tc,pr.keysIn=Dc,pr.map=Ms,pr.mapKeys=function(t,e){var n={};return e=ea(e,3),Xr(t,function(t,r,o){Ir(n,e(t,r,o),t)}),n},pr.mapValues=function(t,e){var n={};return e=ea(e,3),Xr(t,function(t,r,o){Ir(n,r,e(t,r,o))}),n},pr.matches=function(t){return mo(Dr(t,s))},pr.matchesProperty=function(t,e){return bo(t,Dr(e,s))},pr.memoize=js,pr.merge=Lc,pr.mergeWith=jc,pr.method=cu,pr.methodOf=uu,pr.mixin=lu,pr.negate=Us,pr.nthArg=function(t){return t=gc(t),No(function(e){return wo(e,t)})},pr.omit=Uc,pr.omitBy=function(t,e){return Fc(t,Us(ea(e)))},pr.once=function(t){return Bs(2,t)},pr.orderBy=function(t,e,n,o){return null==t?[]:(Ks(e)||(e=null==e?[]:[e]),Ks(n=o?r:n)||(n=null==n?[]:[n]),Ao(t,e,n))},pr.over=pu,pr.overArgs=ks,pr.overEvery=hu,pr.overSome=du,pr.partial=Fs,pr.partialRight=Gs,pr.partition=Ps,pr.pick=kc,pr.pickBy=Fc,pr.property=_u,pr.propertyOf=function(t){return function(e){return null==t?r:Zr(t,e)}},pr.pull=ts,pr.pullAll=es,pr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Oo(t,e,ea(n,2)):t},pr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Oo(t,e,r,n):t},pr.pullAt=ns,pr.range=yu,pr.rangeRight=gu,pr.rearg=Vs,pr.reject=function(t,e){return(Ks(t)?Ue:Wr)(t,Us(ea(e,3)))},pr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ea(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Ro(t,o),n},pr.rest=function(t,e){if("function"!=typeof t)throw new Yt(i);return No(t,e=e===r?e:gc(e))},pr.reverse=rs,pr.sampleSize=function(t,e,n){return e=(n?va(t,e,n):e===r)?1:gc(e),(Ks(t)?Ar:Do)(t,e)},pr.set=function(t,e,n){return null==t?t:Lo(t,e,n)},pr.setWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:Lo(t,e,n,o)},pr.shuffle=function(t){return(Ks(t)?Er:ko)(t)},pr.slice=function(t,e,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&va(t,e,n)?(e=0,n=o):(e=null==e?0:gc(e),n=n===r?o:gc(n)),Fo(t,e,n)):[]},pr.sortBy=Os,pr.sortedUniq=function(t){return t&&t.length?zo(t):[]},pr.sortedUniqBy=function(t,e){return t&&t.length?zo(t,ea(e,2)):[]},pr.split=function(t,e,n){return n&&"number"!=typeof n&&va(t,e,n)&&(e=n=r),(n=n===r?O:n>>>0)?(t=Cc(t))&&("string"==typeof e||null!=e&&!cc(e))&&!(e=qo(e))&&bn(t)?oi(Bn(t),0,n):t.split(e,n):[]},pr.spread=function(t,e){if("function"!=typeof t)throw new Yt(i);return e=null==e?0:zn(gc(e),0),No(function(n){var r=n[e],o=oi(n,0,e);return r&&Ve(o,r),Ne(t,this,o)})},pr.tail=function(t){var e=null==t?0:t.length;return e?Fo(t,1,e):[]},pr.take=function(t,e,n){return t&&t.length?Fo(t,0,(e=n||e===r?1:gc(e))<0?0:e):[]},pr.takeRight=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,(e=o-(e=n||e===r?1:gc(e)))<0?0:e,o):[]},pr.takeRightWhile=function(t,e){return t&&t.length?Jo(t,ea(e,3),!1,!0):[]},pr.takeWhile=function(t,e){return t&&t.length?Jo(t,ea(e,3)):[]},pr.tap=function(t,e){return e(t),t},pr.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Yt(i);return rc(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ts(t,e,{leading:r,maxWait:e,trailing:o})},pr.thru=ys,pr.toArray=_c,pr.toPairs=Gc,pr.toPairsIn=Vc,pr.toPath=function(t){return Ks(t)?Ge(t,ka):fc(t)?[t]:_i(Ua(Cc(t)))},pr.toPlainObject=bc,pr.transform=function(t,e,n){var r=Ks(t),o=r||Qs(t)||pc(t);if(e=ea(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:rc(t)&&tc(i)?hr(me(t)):{}}return(o?De:Xr)(t,function(t,r,o){return e(n,t,r,o)}),n},pr.unary=function(t){return xs(t,1)},pr.union=os,pr.unionBy=is,pr.unionWith=as,pr.uniq=function(t){return t&&t.length?Ko(t):[]},pr.uniqBy=function(t,e){return t&&t.length?Ko(t,ea(e,2)):[]},pr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Ko(t,r,e):[]},pr.unset=function(t,e){return null==t||Yo(t,e)},pr.unzip=ss,pr.unzipWith=cs,pr.update=function(t,e,n){return null==t?t:Xo(t,e,ei(n))},pr.updateWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:Xo(t,e,ei(n),o)},pr.values=Hc,pr.valuesIn=function(t){return null==t?[]:fn(t,Dc(t))},pr.without=us,pr.words=tu,pr.wrap=function(t,e){return Fs(ei(e),t)},pr.xor=ls,pr.xorBy=fs,pr.xorWith=ps,pr.zip=hs,pr.zipObject=function(t,e){return $o(t||[],e||[],Pr)},pr.zipObjectDeep=function(t,e){return $o(t||[],e||[],Lo)},pr.zipWith=ds,pr.entries=Gc,pr.entriesIn=Vc,pr.extend=wc,pr.extendWith=Ac,lu(pr,pr),pr.add=Cu,pr.attempt=eu,pr.camelCase=zc,pr.capitalize=Wc,pr.ceil=Su,pr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=mc(n))==n?n:0),e!==r&&(e=(e=mc(e))==e?e:0),Tr(mc(t),e,n)},pr.clone=function(t){return Dr(t,u)},pr.cloneDeep=function(t){return Dr(t,s|u)},pr.cloneDeepWith=function(t,e){return Dr(t,s|u,e="function"==typeof e?e:r)},pr.cloneWith=function(t,e){return Dr(t,u,e="function"==typeof e?e:r)},pr.conformsTo=function(t,e){return null==e||jr(t,e,Tc(e))},pr.deburr=qc,pr.defaultTo=function(t,e){return null==t||t!=t?e:t},pr.divide=wu,pr.endsWith=function(t,e,n){t=Cc(t),e=qo(e);var o=t.length,i=n=n===r?o:Tr(gc(n),0,o);return(n-=e.length)>=0&&t.slice(n,i)==e},pr.eq=Hs,pr.escape=function(t){return(t=Cc(t))&&_t.test(t)?t.replace(ht,gn):t},pr.escapeRegExp=function(t){return(t=Cc(t))&&wt.test(t)?t.replace(St,"\\$&"):t},pr.every=function(t,e,n){var o=Ks(t)?je:Vr;return n&&va(t,e,n)&&(e=r),o(t,ea(e,3))},pr.find=ms,pr.findIndex=qa,pr.findKey=function(t,e){return Xe(t,ea(e,3),Xr)},pr.findLast=bs,pr.findLastIndex=Ka,pr.findLastKey=function(t,e){return Xe(t,ea(e,3),Jr)},pr.floor=Au,pr.forEach=Cs,pr.forEachRight=Ss,pr.forIn=function(t,e){return null==t?t:Kr(t,ea(e,3),Dc)},pr.forInRight=function(t,e){return null==t?t:Yr(t,ea(e,3),Dc)},pr.forOwn=function(t,e){return t&&Xr(t,ea(e,3))},pr.forOwnRight=function(t,e){return t&&Jr(t,ea(e,3))},pr.get=Rc,pr.gt=zs,pr.gte=Ws,pr.has=function(t,e){return null!=t&&fa(t,e,no)},pr.hasIn=xc,pr.head=Xa,pr.identity=au,pr.includes=function(t,e,n,r){t=Xs(t)?t:Hc(t),n=n&&!r?gc(n):0;var o=t.length;return n<0&&(n=zn(o+n,0)),lc(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Qe(t,e,n)>-1},pr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gc(n);return o<0&&(o=zn(r+o,0)),Qe(t,e,o)},pr.inRange=function(t,e,n){return e=yc(e),n===r?(n=e,e=0):n=yc(n),oo(t=mc(t),e,n)},pr.invoke=Nc,pr.isArguments=qs,pr.isArray=Ks,pr.isArrayBuffer=Ys,pr.isArrayLike=Xs,pr.isArrayLikeObject=Js,pr.isBoolean=function(t){return!0===t||!1===t||oc(t)&&to(t)==D},pr.isBuffer=Qs,pr.isDate=Zs,pr.isElement=function(t){return oc(t)&&1===t.nodeType&&!sc(t)},pr.isEmpty=function(t){if(null==t)return!0;if(Xs(t)&&(Ks(t)||"string"==typeof t||"function"==typeof t.splice||Qs(t)||pc(t)||qs(t)))return!t.length;var e=ca(t);if(e==G||e==K)return!t.size;if(Sa(t))return!_o(t).length;for(var n in t)if(te.call(t,n))return!1;return!0},pr.isEqual=function(t,e){return uo(t,e)},pr.isEqualWith=function(t,e,n){var o=(n="function"==typeof n?n:r)?n(t,e):r;return o===r?uo(t,e,r,n):!!o},pr.isError=$s,pr.isFinite=function(t){return"number"==typeof t&&Gn(t)},pr.isFunction=tc,pr.isInteger=ec,pr.isLength=nc,pr.isMap=ic,pr.isMatch=function(t,e){return t===e||fo(t,e,ra(e))},pr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,fo(t,e,ra(e),n)},pr.isNaN=function(t){return ac(t)&&t!=+t},pr.isNative=function(t){if(Ca(t))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return po(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=ac,pr.isObject=rc,pr.isObjectLike=oc,pr.isPlainObject=sc,pr.isRegExp=cc,pr.isSafeInteger=function(t){return ec(t)&&t>=-E&&t<=E},pr.isSet=uc,pr.isString=lc,pr.isSymbol=fc,pr.isTypedArray=pc,pr.isUndefined=function(t){return t===r},pr.isWeakMap=function(t){return oc(t)&&ca(t)==Q},pr.isWeakSet=function(t){return oc(t)&&"[object WeakSet]"==to(t)},pr.join=function(t,e){return null==t?"":Vn.call(t,e)},pr.kebabCase=Kc,pr.last=$a,pr.lastIndexOf=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=o;return n!==r&&(i=(i=gc(n))<0?zn(o+i,0):Wn(i,o-1)),e==e?Rn(t,e,i):Je(t,$e,i,!0)},pr.lowerCase=Yc,pr.lowerFirst=Xc,pr.lt=hc,pr.lte=dc,pr.max=function(t){return t&&t.length?Hr(t,au,eo):r},pr.maxBy=function(t,e){return t&&t.length?Hr(t,ea(e,2),eo):r},pr.mean=function(t){return tn(t,au)},pr.meanBy=function(t,e){return tn(t,ea(e,2))},pr.min=function(t){return t&&t.length?Hr(t,au,go):r},pr.minBy=function(t,e){return t&&t.length?Hr(t,ea(e,2),go):r},pr.stubArray=vu,pr.stubFalse=mu,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Eu,pr.nth=function(t,e){return t&&t.length?wo(t,gc(e)):r},pr.noConflict=function(){return Ce._===this&&(Ce._=ie),this},pr.noop=fu,pr.now=Rs,pr.pad=function(t,e,n){t=Cc(t);var r=(e=gc(e))?xn(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Ti(Un(o),n)+t+Ti(Dn(o),n)},pr.padEnd=function(t,e,n){t=Cc(t);var r=(e=gc(e))?xn(t):0;return e&&r<e?t+Ti(e-r,n):t},pr.padStart=function(t,e,n){t=Cc(t);var r=(e=gc(e))?xn(t):0;return e&&r<e?Ti(e-r,n)+t:t},pr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Kn(Cc(t).replace(At,""),e||0)},pr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&va(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=yc(t),e===r?(e=t,t=0):e=yc(e)),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var i=Yn();return Wn(t+i*(e-t+ge("1e-"+((i+"").length-1))),e)}return xo(t,e)},pr.reduce=function(t,e,n){var r=Ks(t)?He:rn,o=arguments.length<3;return r(t,ea(e,4),n,o,Fr)},pr.reduceRight=function(t,e,n){var r=Ks(t)?ze:rn,o=arguments.length<3;return r(t,ea(e,4),n,o,Gr)},pr.repeat=function(t,e,n){return e=(n?va(t,e,n):e===r)?1:gc(e),Io(Cc(t),e)},pr.replace=function(){var t=arguments,e=Cc(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pr.result=function(t,e,n){var o=-1,i=(e=ni(e,t)).length;for(i||(i=1,t=r);++o<i;){var a=null==t?r:t[ka(e[o])];a===r&&(o=i,a=n),t=tc(a)?a.call(t):a}return t},pr.round=Mu,pr.runInContext=t,pr.sample=function(t){return(Ks(t)?wr:To)(t)},pr.size=function(t){if(null==t)return 0;if(Xs(t))return lc(t)?xn(t):t.length;var e=ca(t);return e==G||e==K?t.size:_o(t).length},pr.snakeCase=Jc,pr.some=function(t,e,n){var o=Ks(t)?We:Go;return n&&va(t,e,n)&&(e=r),o(t,ea(e,3))},pr.sortedIndex=function(t,e){return Vo(t,e)},pr.sortedIndexBy=function(t,e,n){return Ho(t,e,ea(n,2))},pr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Vo(t,e);if(r<n&&Hs(t[r],e))return r}return-1},pr.sortedLastIndex=function(t,e){return Vo(t,e,!0)},pr.sortedLastIndexBy=function(t,e,n){return Ho(t,e,ea(n,2),!0)},pr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Vo(t,e,!0)-1;if(Hs(t[n],e))return n}return-1},pr.startCase=Qc,pr.startsWith=function(t,e,n){return t=Cc(t),n=null==n?0:Tr(gc(n),0,t.length),e=qo(e),t.slice(n,n+e.length)==e},pr.subtract=Pu,pr.sum=function(t){return t&&t.length?an(t,au):0},pr.sumBy=function(t,e){return t&&t.length?an(t,ea(e,2)):0},pr.template=function(t,e,n){var o=pr.templateSettings;n&&va(t,e,n)&&(e=r),t=Cc(t),e=Ac({},e,o,Hi);var i,a,s=Ac({},e.imports,o.imports,Hi),c=Tc(s),u=fn(s,c),l=0,f=e.interpolate||Ft,p="__p += '",h=qt((e.escape||Ft).source+"|"+f.source+"|"+(f===vt?It:Ft).source+"|"+(e.evaluate||Ft).source+"|$","g"),d="//# sourceURL="+(te.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++he+"]")+"\n";t.replace(h,function(e,n,r,o,s,c){return r||(r=o),p+=t.slice(l,c).replace(Gt,vn),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+e.length,e}),p+="';\n";var _=te.call(e,"variable")&&e.variable;if(_){if(xt.test(_))throw new Vt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(ut,""):p).replace(lt,"$1").replace(ft,"$1;"),p="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=eu(function(){return Ht(c,d+"return "+p).apply(r,u)});if(y.source=p,$s(y))throw y;return y},pr.times=function(t,e){if((t=gc(t))<1||t>E)return[];var n=O,r=Wn(t,O);e=ea(e),t-=O;for(var o=sn(r,e);++n<t;)e(n);return o},pr.toFinite=yc,pr.toInteger=gc,pr.toLength=vc,pr.toLower=function(t){return Cc(t).toLowerCase()},pr.toNumber=mc,pr.toSafeInteger=function(t){return t?Tr(gc(t),-E,E):0===t?t:0},pr.toString=Cc,pr.toUpper=function(t){return Cc(t).toUpperCase()},pr.trim=function(t,e,n){if((t=Cc(t))&&(n||e===r))return un(t);if(!t||!(e=qo(e)))return t;var o=Bn(t),i=Bn(e);return oi(o,hn(o,i),dn(o,i)+1).join("")},pr.trimEnd=function(t,e,n){if((t=Cc(t))&&(n||e===r))return t.slice(0,In(t)+1);if(!t||!(e=qo(e)))return t;var o=Bn(t);return oi(o,0,dn(o,Bn(e))+1).join("")},pr.trimStart=function(t,e,n){if((t=Cc(t))&&(n||e===r))return t.replace(At,"");if(!t||!(e=qo(e)))return t;var o=Bn(t);return oi(o,hn(o,Bn(e))).join("")},pr.truncate=function(t,e){var n=30,o="...";if(rc(e)){var i="separator"in e?e.separator:i;n="length"in e?gc(e.length):n,o="omission"in e?qo(e.omission):o}var a=(t=Cc(t)).length;if(bn(t)){var s=Bn(t);a=s.length}if(n>=a)return t;var c=n-xn(o);if(c<1)return o;var u=s?oi(s,0,c).join(""):t.slice(0,c);if(i===r)return u+o;if(s&&(c+=u.length-c),cc(i)){if(t.slice(c).search(i)){var l,f=u;for(i.global||(i=qt(i.source,Cc(Nt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var p=l.index;u=u.slice(0,p===r?c:p)}}else if(t.indexOf(qo(i),c)!=c){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+o},pr.unescape=function(t){return(t=Cc(t))&&dt.test(t)?t.replace(pt,Nn):t},pr.uniqueId=function(t){var e=++ee;return Cc(t)+e},pr.upperCase=Zc,pr.upperFirst=$c,pr.each=Cs,pr.eachRight=Ss,pr.first=Xa,lu(pr,(bu={},Xr(pr,function(t,e){te.call(pr.prototype,e)||(bu[e]=t)}),bu),{chain:!1}),pr.VERSION="4.17.21",De(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),De(["drop","take"],function(t,e){yr.prototype[t]=function(n){n=n===r?1:zn(gc(n),0);var o=this.__filtered__&&!e?new yr(this):this.clone();return o.__filtered__?o.__takeCount__=Wn(n,o.__takeCount__):o.__views__.push({size:Wn(n,O),type:t+(o.__dir__<0?"Right":"")}),o},yr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),De(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;yr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ea(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),De(["head","last"],function(t,e){var n="take"+(e?"Right":"");yr.prototype[t]=function(){return this[n](1).value()[0]}}),De(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");yr.prototype[t]=function(){return this.__filtered__?new yr(this):this[n](1)}}),yr.prototype.compact=function(){return this.filter(au)},yr.prototype.find=function(t){return this.filter(t).head()},yr.prototype.findLast=function(t){return this.reverse().find(t)},yr.prototype.invokeMap=No(function(t,e){return"function"==typeof t?new yr(this):this.map(function(n){return so(n,t,e)})}),yr.prototype.reject=function(t){return this.filter(Us(ea(t)))},yr.prototype.slice=function(t,e){t=gc(t);var n=this;return n.__filtered__&&(t>0||e<0)?new yr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=gc(e))<0?n.dropRight(-e):n.take(e-t)),n)},yr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},yr.prototype.toArray=function(){return this.take(O)},Xr(yr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),i=pr[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);i&&(pr.prototype[e]=function(){var e=this.__wrapped__,s=o?[1]:arguments,c=e instanceof yr,u=s[0],l=c||Ks(e),f=function(t){var e=i.apply(pr,Ve([t],s));return o&&p?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=a&&!p,_=c&&!h;if(!a&&l){e=_?e:new yr(this);var y=t.apply(e,s);return y.__actions__.push({func:ys,args:[f],thisArg:r}),new _r(y,p)}return d&&_?t.apply(this,s):(y=this.thru(f),d?o?y.value()[0]:y.value():y)})}),De(["pop","push","shift","sort","splice","unshift"],function(t){var e=Xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Ks(o)?o:[],t)}return this[n](function(n){return e.apply(Ks(n)?n:[],t)})}}),Xr(yr.prototype,function(t,e){var n=pr[e];if(n){var r=n.name+"";te.call(rr,r)||(rr[r]=[]),rr[r].push({name:e,func:n})}}),rr[xi(r,h).name]=[{name:"wrapper",func:r}],yr.prototype.clone=function(){var t=new yr(this.__wrapped__);return t.__actions__=_i(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=_i(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=_i(this.__views__),t},yr.prototype.reverse=function(){if(this.__filtered__){var t=new yr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},yr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ks(t),r=e<0,o=n?t.length:0,i=ua(0,o,this.__views__),a=i.start,s=i.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,f=l.length,p=0,h=Wn(c,this.__takeCount__);if(!n||!r&&o==c&&h==c)return Qo(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var _=-1,y=t[u+=e];++_<f;){var g=l[_],v=g.iteratee,m=g.type,b=v(y);if(2==m)y=b;else if(!b){if(1==m)continue t;break t}}d[p++]=y}return d},pr.prototype.at=gs,pr.prototype.chain=function(){return _s(this)},pr.prototype.commit=function(){return new _r(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===r&&(this.__values__=_c(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var e,n=this;n instanceof dr;){var o=Va(n);o.__index__=0,o.__values__=r,e?i.__wrapped__=o:e=o;var i=o;n=n.__wrapped__}return i.__wrapped__=t,e},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof yr){var e=t;return this.__actions__.length&&(e=new yr(this)),(e=e.reverse()).__actions__.push({func:ys,args:[rs],thisArg:r}),new _r(e,this.__chain__)}return this.thru(rs)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Qo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Me&&(pr.prototype[Me]=function(){return this}),pr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ce._=jn,define(function(){return jn})):we?((we.exports=jn)._=jn,Se._=jn):Ce._=jn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(){},{}],DataSaver:[function(t,e,n){"use strict";cc._RF.push(e,"f220cId5rdEFKR8X1qhmDT5","DataSaver");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataSaver=void 0;var o=r(t("../../../Module/Database/Db")),i=function(){function t(){this._dirty=!1,this._saveInterval=5,this._saveHandle=0}return t.prototype.init=function(t,e,n){void 0===n&&(n=5),this._key=t,this._data=e,this._saveInterval=n},t.prototype.setDirty=function(){this._dirty=!0,this._saveHandle||(this._saveHandle=setTimeout(this.save.bind(this),1e3*this._saveInterval))},t.prototype.save=function(){this._dirty&&(this._dirty=!1,this._saveHandle&&(clearTimeout(this._saveHandle),this._saveHandle=0),this._key&&this._data?o.default.instance.setData(this._key,this._data):cc.error("save data error, key: "+this._key))},t}();n.DataSaver=i,cc._RF.pop()},{"../../../Module/Database/Db":"Db"}],DbMap:[function(t,e,n){"use strict";cc._RF.push(e,"bcb2agHxHBDnLQAXiVH1tDO","DbMap"),Object.defineProperty(n,"__esModule",{value:!0}),n.CLEAR_USER_DATA_EXCEPT_KEYS=n.NO_ENCRYPT_KEYS=n.ENABLE_ENCRYPT=n.LOAD_KEYS=void 0,n.LOAD_KEYS=["local","bag","battle","userInfo","home"],n.ENABLE_ENCRYPT=!1,n.NO_ENCRYPT_KEYS=["local"],n.CLEAR_USER_DATA_EXCEPT_KEYS=["local"],cc._RF.pop()},{}],Db:[function(t,e,n){"use strict";cc._RF.push(e,"e97ecKewSlMh5TYYopGNbCJ","Db");var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=t("./LocalStorage"),u=t("./DbMap"),l=function(){function t(){this._saveRequests=[],this._maxQueryPerFrame=5,this._maxTimePerFrame=5,this._nextTaskId=0,this._dataMap=cc.js.createMap(!0),this._pendingSaveTasks=cc.js.createMap(!0)}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._saveHandle||(this._saveHandle=setInterval(this.update.bind(this),16)),this.loadAll()},t.prototype.update=function(){if(0!==this._saveRequests.length){var t=Date.now(),e=0;do{var n=this._saveRequests.shift();this._handlerSaveRequest(n),e++}while(this._saveRequests.length>0&&e<this._maxQueryPerFrame&&Date.now()-t<this._maxTimePerFrame)}},t.prototype.isUpdating=function(){return!!this._saveHandle},t.prototype._handlerSaveRequest=function(t){var e=this.getData(t.key);this.saveData(t.key,e),t.callbacks&&t.callbacks.forEach(function(t){return t&&t()})},t.prototype.loadAll=function(){var t=this;u.LOAD_KEYS.forEach(function(e){return t.loadData(e)})},t.prototype.saveAll=function(){return r(this,void 0,void 0,function(){var t;return o(this,function(){return this._saveRequests.forEach(this._handlerSaveRequest.bind(this)),this._saveRequests.length=0,t=Object.values(this._pendingSaveTasks),[2,Promise.all(t)]})})},t.prototype.clearUserData=function(){var t,e;try{for(var n=i(u.LOAD_KEYS),r=n.next();!r.done;r=n.next()){var o=r.value;u.CLEAR_USER_DATA_EXCEPT_KEYS.includes(o)||(this._dataMap[o]=null,c.LocalStorage.removeItem(o))}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.destroy=function(){this._saveRequests.length=0,this._dataMap=null,this._pendingSaveTasks=null,this._saveHandle&&(clearInterval(this._saveHandle),this._saveHandle=null)},t.prototype.getAllData=function(){return this._dataMap},t.prototype.getData=function(t){return this._dataMap[t]},t.prototype.setData=function(t,e,n){"magic"in e&&(e.magic=(e.magic||0)+1),this._dataMap[t]=e;var r=this._saveRequests.findIndex(function(e){return e.key===t});if(r>=0){if(n){var o=this._saveRequests[r];o.callbacks=o.callbacks||[],o.callbacks.push(n)}}else n?this._saveRequests.push({key:t,callbacks:[n]}):this._saveRequests.push({key:t})},t.prototype.loadData=function(t){var e=c.LocalStorage.getItem(t);if(e){var n=this.decodeObj(t,e);return this._dataMap[t]=n,n}return null},t.prototype.loadDataAsync=function(t,e){var n=this;if(!e)return c.LocalStorage.getItemAsync(t).then(function(e){if(e){var r=n.decodeObj(t,e);return n._dataMap[t]=r,r}return null});this.loadDataAsync(t).then(e)},t.prototype.saveData=function(t,e){var n=this.encodeObj(t,e);c.LocalStorage.setItem(t,n)},t.prototype.saveDataAsync=function(t,e){var n=this;if(!e){var r=this.getData(t),o=this.encodeObj(t,r),i=this._nextTaskId++,a=!1,s=c.LocalStorage.setItemAsync(t,o).then(function(t){return delete n._pendingSaveTasks[i],a=!0,t});return a||(this._pendingSaveTasks[i]=s),s}this.saveDataAsync(t).then(e)},t.prototype.encodeObj=function(t,e){var n=JSON.stringify(e);return u.ENABLE_ENCRYPT&&!u.NO_ENCRYPT_KEYS.includes(t)&&(n=s.default.encode(n)),n},t.prototype.decodeObj=function(t,e){return u.ENABLE_ENCRYPT&&!u.NO_ENCRYPT_KEYS.includes(t)&&(e=s.default.decode(e)),JSON.parse(e)},t._instance=null,t}();n.default=l,cc._RF.pop()},{"../../Utils/Utils":"Utils","./DbMap":"DbMap","./LocalStorage":"LocalStorage"}],EnemyConfig:[function(t,e,n){"use strict";cc._RF.push(e,"3b4baekK7BCxZhfktdqys2i","EnemyConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],EnemyStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"2bad5EVIphDsahstBaHct8c","EnemyStateMachine");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EnemyStateMachine=n.EnemyStatus=void 0;var i,a=t("../../../Utils/StateMachine"),s=t("../../../Interface/Config/AbilityConfig");(function(t){t[t.Move=0]="Move",t[t.Attack=1]="Attack",t[t.Die=2]="Die"})(i=n.EnemyStatus||(n.EnemyStatus={}));var c=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return o(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),e}(a.BaseState),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Move,e}return o(e,t),e.prototype.onEnter=function(){var t=this.avatar.getChildByName("img").getComponent(cc.Animation),e="enemy_"+this.context.id+"_walk";t.play(e)},e.prototype.update=function(t){if(!this.context.hasBuff(s.BuffType.Freeze)){var e=this.context.position,n=this.entityContext.getPlayer().avatar.y;if(e.y<n)e.y=n;else{var r=Math.min(this.context.moveSpeed*t,e.y-n);e.y-=r,e.y<n&&(e.y=n)}this.context.position=e,e.y<=n&&this.changeState(i.Attack)}},e}(c),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Attack,e}return o(e,t),e.prototype.onEnter=function(){this._attackCd=0},e.prototype.update=function(t){if(!this.context.hasBuff(s.BuffType.Freeze)){this._attackCd-=t;for(var e=this.entityContext.getPlayer();this._attackCd<=0&&(this._attackCd+=Math.max(this.config.attackInterval,.01),e.hurt(this.context.attack),e.isAlive()););}},e}(c),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Die,e}return o(e,t),e.prototype.onEnter=function(){var t=this;this.context.playAnim("enemy_death",1,function(){t.entityContext.removeEnemy(t.context.uid)})},e}(c),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.addInitState(new u(n)),r.addState(new l(n)),r.addState(new f(n)),r}return o(e,t),e}(a.StateMachine);n.EnemyStateMachine=p,cc._RF.pop()},{"../../../Interface/Config/AbilityConfig":"AbilityConfig","../../../Utils/StateMachine":"StateMachine"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"4951bvgGoVA7YqNzcaKeiQ5","Enemy");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Enemy=void 0;var a=i(t("../../Component/Gameplay/EntityTag")),s=t("../../Module/ConfigManager"),c=i(t("../../Utils/Path")),u=i(t("../../Utils/Utils")),l=t("./AI/EnemyStateMachine"),f=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._buffs=[],r.config=s.ConfigManager.instance.getEnemyConfig(r.id),r._hp=r._maxHp=r.config.hp,r._attack=r.config.attack,r._moveSpeed=r.config.moveSpeed,r}return o(e,t),Object.defineProperty(e.prototype,"attack",{get:function(){return this._attack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moveSpeed",{get:function(){return this._moveSpeed},enumerable:!1,configurable:!0}),e.prototype.setConfigFactors=function(t,e,n){this._hp=this._maxHp=Math.floor(this.config.hp*t),this._attack=Math.floor(this.config.attack*e),this._moveSpeed=Math.floor(this.config.moveSpeed*n)},e.prototype.getName=function(){var t="enemy_"+this.id+"_name";return s.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}var n=this.avatar.getComponent(cc.Collider);u.default.getOrAddComponent(n.node,a.default).entity=this,this.anim.node.y=0,this.anim.node.opacity=255},e.prototype.getAssetPath=function(){return c.default.getEntityPath(this.config.asset)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new l.EnemyStateMachine(this,this._context)},e.prototype.isAlive=function(){return this._hp>0},e.prototype.hurt=function(t,e){if(!(t<=0)){var n=Math.min(t,this._hp);if(this._hp-=n,this._context.battleStats.recordDamage(e.id,n),this._hp<=0)this._context.battleStats.addScore(this.config.score),this.die();else{var r=this._anim.node,o=.5*r.width,i=.7*r.height,a=u.default.absPosToAnchorPos(r,cc.v2(o,i)),s=r.convertToWorldSpaceAR(a);this._context.showFloatDamage(s,n)}}},e.prototype.heal=function(t){t<=0||(this._hp=Math.min(this._hp+t,this.config.hp))},e.prototype.die=function(){this._entityContext.getPlayer().addExp(this.config.exp),this._sm.changeState(l.EnemyStatus.Die)},e.prototype.addBuff=function(t){this._buffs.push(t)},e.prototype.removeBuff=function(t){u.default.arrayRemove(this._buffs,t)},e.prototype.hasBuff=function(t){return this._buffs.some(function(e){return e.type===t})},e.prototype.update=function(t){this._sm.update(t),this._avatar&&this.isAlive()&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Enemy: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Enemy=f,cc._RF.pop()},{"../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./AI/EnemyStateMachine":"EnemyStateMachine","./BaseEntity":"BaseEntity"}],EntityManager:[function(t,e,n){"use strict";cc._RF.push(e,"d9fdcWlC35K05kBcN2kW7WF","EntityManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityManager=void 0;var s=t("./Bullet"),c=t("./Enemy"),u=t("./Guard"),l=t("./Player"),f=a(t("../../Utils/Utils")),p=t("./Ability"),h={GuardCreate:"GuardCreate",GuardDestroy:"GuardDestroy",AbilityCreate:"AbilityCreate",AbilityDestroy:"AbilityDestroy",BulletCreate:"BulletCreate",BulletDestroy:"BulletDestroy",EnemyCreate:"EnemyCreate",EnemyDestroy:"EnemyDestroy",PlayerCreate:"PlayerCreate"},d=function(t){function e(e){var n=t.call(this)||this;return n._guards=new Map,n._abilities=new Map,n._bullets=new Map,n._enemies=new Map,n._nextUid=1,n.battleContext=e,n}return o(e,t),e.prototype.createGuard=function(t,e){var n=this._nextUid++,r=new u.Guard(n,t);return r.setContext(this.battleContext),this.setEntityCreateInfo(r,e),this._guards.set(n,r),this.emit(h.GuardCreate,r),r},e.prototype.createAbility=function(t,e){var n=this._nextUid++,r=new p.Ability(n,t);return r.setContext(this.battleContext),this.setEntityCreateInfo(r,e),this._abilities.set(n,r),this.emit(h.AbilityCreate,r),r},e.prototype.createBullet=function(t,e){var n=this._nextUid++,r=new s.Bullet(n,t);return r.setContext(this.battleContext),this.setEntityCreateInfo(r,e),this._bullets.set(n,r),this.emit(h.BulletCreate,r),r},e.prototype.createEnemy=function(t,e){var n=this._nextUid++,r=new c.Enemy(n,t);return r.setContext(this.battleContext),this.setEntityCreateInfo(r,e),this._enemies.set(n,r),this.emit(h.EnemyCreate,r),r},e.prototype.setEntityCreateInfo=function(t,e){t&&e&&t.setInitPos(e.pos)},e.prototype.createPlayer=function(t,e){return this._player=new l.Player(t),this.setEntityCreateInfo(this._player,e),this.emit(h.PlayerCreate,this._player),this._player},e.prototype.upgradeGuard=function(t,e){var n=this;if(e.every(function(t){return null!=n._guards.get(t)})){var r=this.getGuard(f.default.randomSelect(e)).position;e.forEach(function(t){return n.removeGuard(t)}),this.createGuard(t,{pos:r})}},e.prototype.removeGuard=function(t){var e=this._guards.get(t);null!=e&&(e.destroy(),this._guards.delete(t),this.emit(h.GuardDestroy,e))},e.prototype.removeAbility=function(t){var e=this._abilities.get(t);null!=e&&(e.destroy(),this._abilities.delete(t),this.emit(h.AbilityDestroy,e))},e.prototype.removeBullet=function(t){var e=this._bullets.get(t);null!=e&&(e.destroy(),this._bullets.delete(t),this.emit(h.BulletDestroy,e))},e.prototype.removeEnemy=function(t){var e=this._enemies.get(t);null!=e&&(e.destroy(),this._enemies.delete(t),this.emit(h.EnemyDestroy,e))},e.prototype.getGuard=function(t){return this._guards.get(t)},e.prototype.getAllGuards=function(){return this._guards},e.prototype.getBullet=function(t){return this._bullets.get(t)},e.prototype.getAllBullets=function(){return this._bullets},e.prototype.getEnemy=function(t){return this._enemies.get(t)},e.prototype.getAllEnemies=function(){return this._enemies},e.prototype.getPlayer=function(){return this._player},e.prototype.update=function(t){var e,n,r,o,a,s,c,u;try{for(var l=i(this._guards.values()),f=l.next();!f.done;f=l.next())f.value.update(t)}catch(v){e={error:v}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}try{for(var p=i(this._abilities.values()),h=p.next();!h.done;h=p.next())h.value.update(t)}catch(m){r={error:m}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}try{for(var d=i(this._bullets.values()),_=d.next();!_.done;_=d.next())_.value.update(t)}catch(b){a={error:b}}finally{try{_&&!_.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}try{for(var y=i(this._enemies.values()),g=y.next();!g.done;g=y.next())g.value.update(t)}catch(C){c={error:C}}finally{try{g&&!g.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}},e.prototype.destroy=function(){var t,e,n,r,o,a,s,c;try{for(var u=i(this._guards.keys()),l=u.next();!l.done;l=u.next()){var f=l.value;this.removeGuard(f)}}catch(v){t={error:v}}finally{try{l&&!l.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}this._guards.clear();try{for(var p=i(this._abilities.keys()),h=p.next();!h.done;h=p.next())f=h.value,this.removeAbility(f)}catch(m){n={error:m}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}this._abilities.clear();try{for(var d=i(this._bullets.keys()),_=d.next();!_.done;_=d.next())f=_.value,this.removeBullet(f)}catch(b){o={error:b}}finally{try{_&&!_.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}this._bullets.clear();try{for(var y=i(this._enemies.keys()),g=y.next();!g.done;g=y.next())f=g.value,this.removeEnemy(f)}catch(C){s={error:C}}finally{try{g&&!g.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}this._enemies.clear(),this._player&&(this._player.destroy(),this._player=null)},e.Events=h,e}(cc.EventTarget);n.EntityManager=d,cc._RF.pop()},{"../../Utils/Utils":"Utils","./Ability":"Ability","./Bullet":"Bullet","./Enemy":"Enemy","./Guard":"Guard","./Player":"Player"}],EntityTag:[function(t,e,n){"use strict";cc._RF.push(e,"3be69fxeqBDuYLXZxD/i0/a","EntityTag");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],FFComponent:[function(t,e,n){"use strict";cc._RF.push(e,"07750AVKTxCaZdh9/NziAnw","FFComponent");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._res=[],e}return o(e,t),e.prototype.onDestroy=function(){for(var t=0;t<this._res.length;t++){var e=this._res[t];cc.isValid(e)&&this.releaseAsset(e)}this._res.length=0},e.prototype.loadAutoRes=function(t,e,n,r){var o=this;r||(r=this),u.default.loadRes(t,e,function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];o.retainAsset(r),o._res.push(r)}else o.retainAsset(t),o._res.push(t);n&&n(t)},r)},e.prototype.loadAutoResAsync=function(t,e,n){var r=this;return n||(n=this),u.default.loadResAsync(t,e,n).then(function(t){return r.retainAsset(t),r._res.push(t),t})},e.prototype.retainAsset=function(){},e.prototype.releaseAsset=function(){},i([s],e)}(cc.Component);n.default=c;var u=a(t("./Loader"));cc._RF.pop()},{"./Loader":"Loader"}],GameDefine:[function(t,e,n){"use strict";cc._RF.push(e,"cd8d69FOLlB176+5MoyeEMa","GameDefine"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.VERSION="0.0.1",t.MAX_STAT_LOG_CACHE=10,t.STAT_SEND_PERIOD=60,t.InitGuardId=1,t}();n.default=r,cc._RF.pop()},{}],GameScene:[function(t,e,n){"use strict";cc._RF.push(e,"e68c0oV6G1DEJzPMEqGZ3aG","GameScene");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Gameplay/System/BagSystem"),f=t("../../Debug/EasyMenu/eMenu"),p=t("../../Gameplay/System/BattleSystem"),h=u(t("../../Module/Audio")),d=t("../../Module/ConfigManager"),_=u(t("../../Module/Loader")),y=u(t("../../Module/ViewModule")),g=u(t("../../Utils/Path")),v=cc._decorator,m=v.ccclass,b=v.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topUI=null,e.bottomUI=null,e.labelGamecircle=null,e.labelMail=null,e.labelCoin=null,e.labelHeroSoul=null,e.labelEnergy=null,e.labelUserName=null,e.labelCall=null,e.labelBag=null,e}return o(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this.initUI(),this.initBGM(),this.initUserInfo(),this.initDebug(),[2]})})},e.prototype.initUI=function(){y.default.instance.translateView("HomeWorld");var t=d.ConfigManager.instance.getLanConfig("ui_mail"),e=d.ConfigManager.instance.getLanConfig("ui_gamecircle"),n=d.ConfigManager.instance.getLanConfig("ui_call"),r=d.ConfigManager.instance.getLanConfig("ui_bag");this.labelMail.string=t,this.labelGamecircle.string=e,this.labelCall.string=n,this.labelBag.string=r,p.BattleSystem.instance.targetOff(this),p.BattleSystem.instance.on(p.BattleSystem.Events.BattleStart,this.onBattleStart,this),p.BattleSystem.instance.on(p.BattleSystem.Events.BattleEnd,this.onBattleEnd,this)},e.prototype.initBGM=function(){var t=g.default.getAudioBGM(2);h.default.instance.stopMusic(),h.default.instance.playMusic(t)},e.prototype.initUserInfo=function(){var t=l.BagSystem.instance.getItemCount(1),e=l.BagSystem.instance.getItemCount(2),n=l.BagSystem.instance.getItemCount(3);this.labelCoin.string=""+t,this.labelEnergy.string=""+e,this.labelHeroSoul.string=""+n,this.labelUserName.string=""},e.prototype.initDebug=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,i,a,u,l,h;return s(this,function(s){switch(s.label){case 0:return[4,_.default.loadPrefabAsync(g.default.DEBUG_BUNDLE_PREFIX+"EasyMenu/EasyMenu",this)];case 1:t=s.sent(),(e=cc.instantiate(t)).parent=cc.Camera.main.node,n=e.getComponent(f.eMenu),r=n.addGroup("Level"),o=function(t){var e="Level "+t.level;r.addItem(e,function(){p.BattleSystem.instance.startBattle(t.level)})};try{for(i=c(d.ConfigManager.instance.getLevelConfigs().values()),a=i.next();!a.done;a=i.next())u=a.value,o(u)}catch(y){l={error:y}}finally{try{a&&!a.done&&(h=i.return)&&h.call(i)}finally{if(l)throw l.error}}return[2]}})})},e.prototype.onSetting=function(){},e.prototype.onAddEnergy=function(){},e.prototype.onAddHeroSoul=function(){},e.prototype.onMail=function(){},e.prototype.onGamecircle=function(){},e.prototype.onCall=function(){},e.prototype.onBag=function(){},e.prototype.onBattleStart=function(){this.topUI.active=!1,this.bottomUI.active=!1},e.prototype.onBattleEnd=function(){this.topUI.active=!0,this.bottomUI.active=!0},i([b(cc.Node)],e.prototype,"topUI",void 0),i([b(cc.Node)],e.prototype,"bottomUI",void 0),i([b(cc.Label)],e.prototype,"labelGamecircle",void 0),i([b(cc.Label)],e.prototype,"labelMail",void 0),i([b(cc.Label)],e.prototype,"labelCoin",void 0),i([b(cc.Label)],e.prototype,"labelHeroSoul",void 0),i([b(cc.Label)],e.prototype,"labelEnergy",void 0),i([b(cc.Label)],e.prototype,"labelUserName",void 0),i([b(cc.Label)],e.prototype,"labelCall",void 0),i([b(cc.Label)],e.prototype,"labelBag",void 0),i([m],e)}(cc.Component);n.default=C,cc._RF.pop()},{"../../Debug/EasyMenu/eMenu":"eMenu","../../Gameplay/System/BagSystem":"BagSystem","../../Gameplay/System/BattleSystem":"BattleSystem","../../Module/Audio":"Audio","../../Module/ConfigManager":"ConfigManager","../../Module/Loader":"Loader","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"a3f38mvysRA1ZPXCcZGv0Pa","Game");var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./System/AdSystem"),s=t("./System/BagSystem"),c=t("./System/BattleSystem"),u=t("./System/HomeSystem"),l=function(){function t(){this._scheduleHandler=null,this._scene=null,this._systems=null,this._isInited=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:cc.game.setFrameRate(60),this._systems=[s.BagSystem.instance,u.HomeSystem.instance,c.BattleSystem.instance,a.AdSystem.instance],console.log("[Game] system init start ==============="),t=0,n.label=1;case 1:return t<this._systems.length?(e=this._systems[t],console.log("[Game] init system "+e.name),[4,e.init()]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:console.log("[Game] system lateInit start ==============="),t=0,n.label=5;case 5:return t<this._systems.length?(e=this._systems[t]).lateInit?(console.log("[Game] lateInit system "+e.name),[4,e.lateInit()]):[3,7]:[3,8];case 6:n.sent(),n.label=7;case 7:return t++,[3,5];case 8:return this._isInited=!0,console.log("[Game] init finish ==============="),this.startInterval(),[2]}})})},t.prototype.isInited=function(){return this._isInited},t.prototype.setAttachScene=function(t){this._scene=t,this.startInterval()},t.prototype.startInterval=function(){cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.clearInterval=function(){cc.director.getScheduler().unscheduleUpdate(this)},t.prototype.destroy=function(){var e,n;if(this._systems){try{for(var r=i(this._systems),o=r.next();!o.done;o=r.next()){var a=o.value;a.destroy&&a.destroy()}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this.clearInterval(),this._systems=null,t._instance=null,cc.director.getScheduler().unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_NON_SYSTEM)}},t.prototype.time=function(){return Date.now()},t.prototype.update=function(t){var e,n,r,o;try{try{for(var a=i(this._systems),s=a.next();!s.done;s=a.next())(l=s.value).logicUpdate(t)}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var c=i(this._systems),u=c.next();!u.done;u=c.next()){var l;(l=u.value).lateLogicUpdate&&l.lateLogicUpdate(t)}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}catch(h){}},t._instance=null,t}();n.default=l,cc._RF.pop()},{"./System/AdSystem":"AdSystem","./System/BagSystem":"BagSystem","./System/BattleSystem":"BattleSystem","./System/HomeSystem":"HomeSystem"}],GuardConfig:[function(t,e,n){"use strict";cc._RF.push(e,"48749CxSFBKvokEhCTbmgjX","GuardConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GuardStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"d12a6QOCVpN4bnE6f6gC3Hc","GuardStateMachine");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GuardStateMachine=n.GuardStatus=void 0;var a,s=t("../../../Utils/StateMachine");(function(t){t[t.Idle=0]="Idle",t[t.Chase=1]="Chase",t[t.Attack=2]="Attack"})(a=n.GuardStatus||(n.GuardStatus={}));var c=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return o(e,t),Object.defineProperty(e.prototype,"guard",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attackTarget",{get:function(){return this.context.attackTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anim",{get:function(){return this.avatar.getChildByName("img").getComponent(cc.Animation)||null},enumerable:!1,configurable:!0}),e}(s.BaseState),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Idle,e.searchCd=0,e}return o(e,t),e.prototype.onEnter=function(){this.searchCd=0;var t="guard_"+this.guard.id+"_idle";this.guard.playAnim(t)},e.prototype.onExit=function(){this.anim&&this.anim.stop()},e.prototype.update=function(t){if(null!=this.avatar&&(this.searchCd>0&&(this.searchCd-=t),this.searchCd<=0)){this.searchCd=e.SEARCH_CD;var n=void 0,r=this.guard.avatar.getPosition(),o=this.battleContext.terrain.guardFrontierY;if(r.y>=o){var i=this.config.attackRange*this.config.attackRange;n=this.getAllValidTargets(function(t){return t.position.y<o||cc.Vec2.squaredDistance(t.position,r)<=i})}else n=this.getAllValidTargets();if(!n)return;var s=new Set(Array.from(this.entityContext.getAllGuards().values()).map(function(t){return t.attackTarget}));this.guard.attackTarget=this.findTarget(n,s),this.guard.canMove()?this.changeState(a.Chase):this.changeState(a.Attack)}},e.prototype.getAllValidTargets=function(t){var e=this.entityContext.getAllEnemies();if(0==e.size)return null;var n=Array.from(e.values()).filter(function(e){return null!=e.avatar&&e.isAlive()&&(!t||t(e))});return 0==n.length?null:n},e.prototype.findTarget=function(t,e){var n,r,o,a;if(!t||0===t.length)return null;var s=null,c=this.avatar.getPosition(),u=Number.MAX_VALUE;try{for(var l=i(t),f=l.next();!f.done;f=l.next()){var p=f.value;e.has(p)||(_=cc.Vec2.squaredDistance(c,p.avatar.getPosition()))<u&&(u=_,s=p)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(null==s){u=Number.MAX_VALUE;try{for(var h=i(t),d=h.next();!d.done;d=h.next()){var _;p=d.value,(_=cc.Vec2.squaredDistance(c,p.avatar.getPosition()))<u&&(u=_,s=p)}}catch(g){o={error:g}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}return s},e.SEARCH_CD=.1,e}(c),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Chase,e.isRechasing=!1,e}return o(e,t),e.prototype.onEnter=function(t){void 0===t&&(t=!1);var e="guard_"+this.guard.id+"_walk";this.guard.playAnim(e),this.isRechasing=t},e.prototype.onExit=function(){this.guard.stopAnim()},e.prototype.update=function(t){var e=this.guard.attackTarget;if(e&&e.isAlive()){var n=this.guard.config,r=this.guard.avatar.getPosition(),o=e.avatar.getPosition();if(r.y>=this.battleContext.terrain.guardFrontierY&&o.y>r.y)this.changeState(a.Idle);else{var i=cc.Vec2.distance(o,r),s=n.attackRange;if(this.isRechasing&&(s*=.7),i<=s)this.changeState(a.Attack);else{var c=Math.min(n.moveSpeed*t,i),u=o.sub(r);u.normalizeSelf(),u.mulSelf(c),r.addSelf(u),this.guard.avatar.setPosition(r),this.guard.anim&&(this.guard.anim.node.scaleX=(u.x>=0?1:-1)*Math.abs(this.guard.anim.node.scaleX))}}}else this.changeState(a.Idle)},e}(c),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Attack,e._attachInterval=.01,e._animSpeed=1,e._isInAnim=!1,e}return o(e,t),e.prototype.onEnter=function(){this._attachInterval=Math.max(this.config.attackInterval,.01),this._animName="guard_"+this.guard.id+"_attack",this._isInAnim=!1;var t=this.guard.anim.getAnimationState(this._animName);this._animSpeed=Math.max(1,t.duration/this._attachInterval),cc.log("duration: "+t.duration+", interval: "+this._attachInterval+", speed: "+this._animSpeed)},e.prototype.onExit=function(){},e.prototype.update=function(){var t=this;if(!this._isInAnim){if(null==this.attackTarget||!this.attackTarget.isAlive())return this.guard.attackTarget=null,void this.changeState(a.Idle);if(this.guard.canAttack()){var e=this.guard.avatar.getPosition(),n=this.attackTarget.avatar.getPosition();if(cc.Vec2.squaredDistance(n,e)>this.config.attackRange*this.config.attackRange)this.guard.canMove()?this.changeState(a.Chase,!0):(cc.warn("\u76ee\u6807\uff08"+this.guard.attackTarget+"\uff09\u8ddd\u79bb\u8fc7\u8fdc\uff0c\u5b88\u536b\uff08"+this.guard+"\uff09\u65e0\u6cd5\u79fb\u52a8\uff0c\u91cd\u65b0\u641c\u7d22"),this.guard.attackTarget=null,this.changeState(a.Idle));else{this._isInAnim=!0,this.guard.playAnim(this._animName,this._animSpeed,function(){return t._isInAnim=!1});var r=this.guard.getAttackCount();this.guard.minusAttackCd(r);for(var o=0;o<r;++o)this.attackOnce()}}}},e.prototype.attackOnce=function(){if(this.config.ability){var t=this.entityContext.createAbility(this.config.ability,{pos:this.attackTarget.position});t.owner=this.guard,t.createAvatar({parent:this.battleContext.terrain.node})}else if(this.config.bullet){var e=this.config.bullet,n=e.count>1?e.angleRange/(e.count-1):0,r=this.guard.position,o=this.attackTarget.position.sub(this.guard.position);o.normalizeSelf();for(var i=(e.count-1)/2,a=cc.v2(),s=-i;s<=i;s++){o.rotate(cc.misc.degreesToRadians(s*n),a);var c=this.entityContext.createBullet(e.bulletId,{pos:r});c.owner=this.guard,c.direction=a,c.createAvatar({parent:this.battleContext.terrain.node})}}else this.attackTarget.hurt(this.config.attack,this.guard)},e}(c),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.addInitState(new u(n)),r.addState(new l(n)),r.addState(new f(n)),r}return o(e,t),e}(s.StateMachine);n.GuardStateMachine=p,cc._RF.pop()},{"../../../Utils/StateMachine":"StateMachine"}],Guard:[function(t,e,n){"use strict";cc._RF.push(e,"27994wYqlRF96uHmlb1zAtN","Guard");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Guard=void 0;var a=t("../../Module/ConfigManager"),s=i(t("../../Utils/Path")),c=t("./AI/GuardStateMachine"),u=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._attackCd=0,r.config=a.ConfigManager.instance.getGuardConfig(r.id),r.type=r.config.type,r}return o(e,t),e.prototype.getName=function(){var t="guard_"+this.id+"_name";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.getDesc=function(){var t="guard_"+this.id+"_desc";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}},e.prototype.getAssetPath=function(){return s.default.getEntityPath(this.config.asset)},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new c.GuardStateMachine(this,this._context)},e.prototype.canMove=function(){return this.config.moveSpeed>0},e.prototype.getDistance=function(t){return!this.avatar||t.avatar?Number.MAX_VALUE:cc.Vec2.distance(this.avatar.getPosition(),t.avatar.getPosition())},e.prototype.isAlive=function(){return!0},e.prototype.minusAttackCd=function(t){var e=Math.max(this.config.attackInterval,.01);this._attackCd+=t*e},e.prototype.canAttack=function(){return this._attackCd<=0},e.prototype.getAttackCount=function(){var t=Math.max(this.config.attackInterval,.01),e=Math.floor(Math.abs(this._attackCd)/t);return this._attackCd<=0&&(e+=1),e},e.prototype.update=function(t){this._attackCd>0&&(this._attackCd-=t),this._sm.update(t),this._avatar&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Guard: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Guard=u,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","./AI/GuardStateMachine":"GuardStateMachine","./BaseEntity":"BaseEntity"}],Heap:[function(t,e,n){"use strict";cc._RF.push(e,"efb3fqYA8lIeaNfwiz2Umgc","Heap"),Object.defineProperty(n,"__esModule",{value:!0}),n.Heap=n.MaxNumberComparer=n.minNumberCompare=void 0,n.minNumberCompare=function(t,e){return t-e},n.MaxNumberComparer=function(t,e){return e-t};var r=function(){function t(t){this.items=[],this.itemToIndexMap=new Map,this.innerCompare=t}return t.prototype.peek=function(){return this.items[0]},t.prototype.add=function(t){if(this.itemToIndexMap.has(t))throw new Error("Connot add an item that is already in the heap.");this.items.push(t),this.itemToIndexMap.set(t,this.items.length-1),this.bubbleUpToPlace(this.items.length-1)},t.prototype.pop=function(){if(!this.isEmpty){var t=this.items[0];return this.removeAt(0),t}},Object.defineProperty(t.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){var e=this.itemToIndexMap.get(t);return void 0!==e&&(this.removeAt(e),!0)},t.prototype.clear=function(){this.items.length=0,this.itemToIndexMap.clear()},t.prototype.contains=function(t){return this.itemToIndexMap.has(t)},t.prototype[Symbol.iterator]=function(){return this.items[Symbol.iterator]()},t.prototype.compare=function(t,e){var n=this.innerCompare(t,e);if("number"!=typeof n)throw new Error("The typeof compare result cannot be different from number: "+n);if(isNaN(n))throw new Error("Compare result cannot be is NaN.");return n},t.prototype.removeAt=function(t){if(1!==this.items.length){if(t===this.items.length-1)return this.itemToIndexMap.delete(this.items[this.items.length-1]),void(this.items.length=this.items.length-1);var e=this.items[t];this.itemToIndexMap.delete(e),this.items[t]=this.items[this.items.length-1],this.items.splice(this.items.length-1,1),this.itemToIndexMap.set(this.items[t],t);var n=this.compare(this.items[t],e);n<0?this.bubbleUpToPlace(t):n>0&&this.bubbleDownToPlace(t)}else this.clear()},t.prototype.getLeftChildIndex=function(t){return 2*t+1},t.prototype.getParentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.getSmallerChildIndex=function(t,e){return e>=this.items.length?t>=this.items.length?void 0:t:t>=this.items.length?e:this.compare(this.items[t],this.items[e])<=0?t:e},t.prototype.bubbleUpToPlace=function(t){if(0!==t)for(var e=this.items[t];;){var n=this.getParentIndex(t),r=this.items[n];if(this.compare(r,e)<=0)break;if(this.swap(t,n,e,r),0===n)break;t=n}},t.prototype.bubbleDownToPlace=function(t){for(var e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1);void 0!==n;){var r=this.items[t],o=this.items[n];if(this.compare(r,o)<0)break;this.swap(t,n,r,o),t=n,e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1)}},t.prototype.swap=function(t,e,n,r){n=n||this.items[t],r=r||this.items[e];var o=n;this.items[t]=r,this.items[e]=o,this.itemToIndexMap.set(n,e),this.itemToIndexMap.set(r,t)},t}();n.Heap=r,cc._RF.pop()},{}],HomeData:[function(t,e,n){"use strict";cc._RF.push(e,"1b9dclumqdNK7LplPoMAXNh","HomeData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],HomeSystem:[function(t,e,n){"use strict";cc._RF.push(e,"3f6082YpvFLh6n48Ls7vxH1","HomeSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.HomeSystem=void 0;var c=s(t("../../Module/Database/Db")),u=t("./Common/DataSaver"),l={},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="HomeSystem",e._saver=new u.DataSaver,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return this._data=c.default.instance.getData("home"),this._data||(this._data={version:1,magic:1,curStage:1},this.setDirty()),this._saver.init("home",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(){},e.prototype.getCurrentStage=function(){return this._data.curStage},e._instance=null,e.Events=l,e}(cc.EventTarget);n.HomeSystem=f,cc._RF.pop()},{"../../Module/Database/Db":"Db","./Common/DataSaver":"DataSaver"}],HomeWorld:[function(t,e,n){"use strict";cc._RF.push(e,"55eb9DE7U9MUa1a/1erpYZE","HomeWorld");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Enum/ViewType")),c=t("../../Gameplay/System/BattleSystem"),u=t("../../Gameplay/System/HomeSystem"),l=t("../../Module/ConfigManager"),f=a(t("../../Module/ViewHandler")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=s.default.World,e.stage=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.initiateView=function(){var t="stage"+u.HomeSystem.instance.getCurrentStage(),e=this.node.getChildByName("StageRoot").getChildByName(t),n=cc.instantiate(this.stage);n.parent=e;var r=n.getChildByName("mainNode"),o=r.getChildByName("btnStart");r.getChildByName("labelStart").getComponent(cc.Label).string=l.ConfigManager.instance.getLanConfig("ui_start"),o.targetOff(this),o.on("click",this.onStart,this)},e.prototype.onStart=function(){var t=c.BattleSystem.instance.getCurrentLevel();c.BattleSystem.instance.startBattle(t)},i([d(cc.Prefab)],e.prototype,"stage",void 0),i([h],e)}(f.default);n.default=_,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Gameplay/System/BattleSystem":"BattleSystem","../../Gameplay/System/HomeSystem":"HomeSystem","../../Module/ConfigManager":"ConfigManager","../../Module/ViewHandler":"ViewHandler"}],IBaseData:[function(t,e,n){"use strict";cc._RF.push(e,"22057+z7bdKGI+ID4U/spoA","IBaseData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IBattleContext:[function(t,e,n){"use strict";cc._RF.push(e,"f5498sN/utKFJ0deWwxqdxq","IBattleContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IDGenerator:[function(t,e,n){"use strict";cc._RF.push(e,"a7d2bS2du5C86PRtr1aeBMD","IDGenerator"),Object.defineProperty(n,"__esModule",{value:!0});var r=".",o=function(){function t(t){this._id=0,this._prefix=null,this._id=0,this._prefix=t?t+r:""}return t.prototype.getNewId=function(){return this._prefix+ ++this._id},t}();n.default=o,cc._RF.pop()},{}],IEntityContext:[function(t,e,n){"use strict";cc._RF.push(e,"1c116wEEDxLQZUUOXZQ9CIt","IEntityContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISystem:[function(t,e,n){"use strict";cc._RF.push(e,"9c233bin2tHr6HSs6zSCFrr","ISystem"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemType:[function(t,e,n){"use strict";cc._RF.push(e,"5bf2eyYms9KZ7ysHTr1uDEn","ItemType"),Object.defineProperty(n,"__esModule",{value:!0}),n.ItemType=void 0,function(t){t[t.Coin=1]="Coin",t[t.Energy=2]="Energy",t[t.HeroSoul=3]="HeroSoul"}(n.ItemType||(n.ItemType={})),cc._RF.pop()},{}],LanConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a1242FlPRZOcK06+6zZfsK/","LanConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanType=void 0,function(t){t.cn="cn",t.tw="tw",t.en="en"}(n.LanType||(n.LanType={})),cc._RF.pop()},{}],LevelConfig:[function(t,e,n){"use strict";cc._RF.push(e,"170e4OMJIZNFbhep3LIbOt5","LevelConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Loader:[function(t,e,n){"use strict";cc._RF.push(e,"dd1a6ygV1VBWpvlJhS4TLYY","Loader");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("../Utils/Path")),i=r(t("./AutoRelease")),a=function(){function t(){}return t.loadPrefab=function(t,e,n){this.loadRes(t,cc.Prefab,e,n)},t.loadPrefabAsync=function(t,e){return this.loadResAsync(t,cc.Prefab,e)},t.loadRes=function(e,n,r,o){var i=t._parseParams(e),a=i.bundleName,s=i.resPath;t.loadBundle(a,function(t){function i(t){o&&!cc.isValid(o,!0)||r&&r(t)}t.load(s,n,function(t,n){t?console.warn("[Loader] loadRes failed, res: "+e.toString(),t):i(n)})})},t.loadResAsync=function(e,n,r){return new Promise(function(o,i){var a=t._parseParams(e),s=a.bundleName,c=a.resPath;t.loadBundle(s,function(t){t.load(c,n,function(t,n){if(t)return console.warn("[Loader] loadResAsync failed, res: "+e,t),void i(t);r&&!cc.isValid(r,!0)||o(n)})})})},t.loadBundle=function(e,n){var r;r=Array.isArray(e)?e:[e];var o=[];(function i(){if(r.length>0){var a=r.shift();t._loadBundle(a,function(t){o.push(t),i()})}else n&&(Array.isArray(e)?n(o):n(o[0]))})()},t._loadBundle=function(e,n){var r=t._loadQueue.find(function(t){return t.bundleName==e});r?n&&r.callbacks.push(n):t._loadQueue.push({bundleName:e,callbacks:n?[n]:[]}),t._handleQuery()},t._handleQuery=function(){if(!t._isLoading&&0!==t._loadQueue.length){t._isLoading=!0;var e=t._loadQueue.shift(),n=e.bundleName,r=e.callbacks,o=cc.assetManager.getBundle(n);o?(r.length&&r.forEach(function(t){return t(o)}),t._isLoading=!1,t._handleQuery()):cc.assetManager.loadBundle(n,null,function(e,o){e?console.warn("[Loader] loadBundle failed, bundle: "+n+", err: "+e):(r.length&&r.forEach(function(t){return t(o)}),t._isLoading=!1,t._handleQuery())})}},t._parseParams=function(t){var e,n;if(t instanceof Array)n=[],t.forEach(function(t){var r=o.default.parseBundleName(t);e=r.bundleName,n.push(r.path)});else{var r=o.default.parseBundleName(t);e=r.bundleName,n=r.path}return{bundleName:e,resPath:n}},t.instantiate=function(t){var e=cc.instantiate(t);return e.addComponent(i.default).init(t),e},t._loadQueue=[],t._isLoading=!1,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./AutoRelease":"AutoRelease"}],LoadingView:[function(t,e,n){"use strict";cc._RF.push(e,"58400skqeRIy52YWYBjQBME","LoadingView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=cc._decorator,u=c.ccclass,l=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}var n;return o(e,t),n=e,e.show=function(t){return new Promise(function(e){cc.resources.load("View/LoadingView",cc.Prefab,function(r,o){if(t.isFinished())e(null);else{var i=cc.instantiate(o);i.parent=cc.Canvas.instance.node;var a=i.getComponent(n);a.init(t),e(a)}})})},e.prototype.init=function(t){this._loadingQuene=t,this._loadingQuene.onProgress=this.setProgress.bind(this),s.default.switchParent(this.node,null),cc.game.addPersistRootNode(this.node)},e.prototype.setProgress=function(t){this.labelLoading&&(this.labelLoading.string="Loading: "+t.toFixed(0)+"%")},e.prototype.finish=function(){var t=this;if(cc.isValid(this.node)){var e=cc.Camera.findCamera(this.node);s.default.switchParent(this.node,e.node),this.scheduleOnce(function(){cc.game.removePersistRootNode(t.node),t.node.destroy()})}},i([l(cc.Label)],e.prototype,"labelLoading",void 0),n=i([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Utils/Utils":"Utils"}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"5ddc0ovHztLN7miIStcX6pG","Loading"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this._progress=0,this._tweenObj={progress:0},this._tweenProgress=0,this._minLoadingSec=t}return Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tweenProgress",{get:function(){return this._tweenProgress},enumerable:!1,configurable:!0}),t.prototype.start=function(){var t;this._startTs=Date.now(),this._progress=0,this._tweenProgress=0,this._tweenObj.progress=0,this._tween=null,this._minEndTs=this._startTs+1e3*(null!==(t=this._minLoadingSec)&&void 0!==t?t:0),this._updateHandle=setInterval(this.update.bind(this),16)},t.prototype.stop=function(){this._updateHandle&&(clearInterval(this._updateHandle),this._updateHandle=null)},t.prototype.isFinished=function(){return this._tweenProgress>=100},t.prototype.update=function(){this._tweenObj.progress>this._tweenProgress&&(this._tweenProgress=this._tweenObj.progress,this.onProgress&&this.onProgress(this._tweenProgress),this._tweenProgress>=100&&(this.onComplete&&this.onComplete(),this.stop()))},t.prototype.addProgress=function(t){this.setProgress(this._progress+t)},t.prototype.setProgress=function(t){if(!(t<=this._progress)){this._progress=cc.misc.clampf(t,0,100),this._tween&&(this._tween.stop(),this._tween=null);var e=.5;if(t>=100){var n=Date.now();n+1e3*e<this._minEndTs&&(e=(this._minEndTs-n)/1e3)}else e=1;this._tween=cc.tween(this._tweenObj).to(e,{progress:this._progress}).start()}},t}();n.default=r,cc._RF.pop()},{}],LocalData:[function(t,e,n){"use strict";cc._RF.push(e,"fdb45odkdVHWZUqAslH71aA","LocalData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LocalStorage:[function(t,e,n){"use strict";cc._RF.push(e,"33a9eLsEDNAHqJCMlmnaZjF","LocalStorage");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalStorage=void 0;var o=r(t("../../Utils/Platform")),i=window.wx||window.qq||window.tt,a=function(){function t(){}return t.getItem=function(t){return o.default.isMiniGame()?i.getStorageSync(t):cc.sys.localStorage.getItem(t)},t.getItemAsync=function(t,e){if(!e)return new Promise(function(e){if(o.default.isMiniGame())i.getStorage({key:t,complete:function(t){e(null==t?void 0:t.data)}});else{var n=cc.sys.localStorage.getItem(t);e(n)}});this.getItemAsync(t).then(e)},t.setItem=function(t,e){o.default.isMiniGame()?i.setStorageSync(t,e):cc.sys.localStorage.setItem(t,e)},t.setItemAsync=function(t,e,n){if(!n)return new Promise(function(n){o.default.isMiniGame()?i.setStorage({key:t,data:e,success:function(){n(!0)},fail:function(){n(!1)}}):(cc.sys.localStorage.setItem(t,e),n(!0))});this.setItemAsync(t,e).then(n)},t.removeItem=function(t){this.setItem(t,"")},t}();n.LocalStorage=a,cc._RF.pop()},{"../../Utils/Platform":"Platform"}],NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"48d9bHILP9LLaWfHDJ77uQQ","NodePool");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NodePool=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabMap=new Map,e.templateMap=new Map,e.poolMap=new Map,e}var n;return o(e,t),n=e,e.getInstance=function(){return n._instance},Object.defineProperty(e,"instance",{get:function(){if(null==this._instance){var t=new cc.Node("NodePool");this._instance=t.addComponent(n)}return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._instance=this},e.prototype.registerPrefab=function(t,e){e.addRef(),this.prefabMap.set(t,e)},e.prototype.register=function(t,e){this.templateMap.set(t,e)},e.prototype.onDestroy=function(){this.prefabMap.forEach(function(t){return t.decRef()}),this.prefabMap.clear(),this.templateMap.clear(),this.poolMap.forEach(function(t){return t.clear()}),this.poolMap.clear(),n._instance=null},e.recycle=function(t){n.getInstance().putNode(t)},e.genPool=function(t,e){var n=this.getInstance();return e&&n.register(t,cc.instantiate(e)),{get:function(){return n.getNode(t)},put:function(e){n.putNode(e,t)}}},e.prototype.tryCreatePool=function(t,e){var n=this.poolMap.get(t);return n||(n=new cc.NodePool,this.poolMap.set(t,n),this.registerPrefab(t,e)),n},e.prototype.getNode=function(t){var e=this.getPool(t),n=null==e?void 0:e.get(),r=this.prefabMap.get(t);if(r)n?(n.scaleX=r.data.scaleX,n.scaleY=r.data.scaleY,n.setContentSize(r.data.getContentSize())):(n=cc.instantiate(r)).__pool_name__=t;else{var o=this.templateMap.get(t);o&&(n?(n.scaleX=o.scaleX,n.scaleY=o.scaleY,n.setContentSize(o.getContentSize())):(n=cc.instantiate(o)).__pool_name__=t)}return n},e.prototype.putNode=function(t,e){if(e=e||t.__pool_name__){var n=this.getPool(e);n&&n.put(t)}else cc.warn("[NodePool] putNode, cannot find pool name on node: "+t)},e.prototype.getPool=function(t){return this.poolMap.get(t)},n=i([s],e)}(cc.Component));n.NodePool=c,cc._RF.pop()},{}],Path:[function(t,e,n){"use strict";cc._RF.push(e,"b72c1tsrSFLoreTYty+y1L2","Path"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.parseBundleName=function(e){for(var n=[t.START_BUNDLE,t.MAIN_BUNDLE,t.BATTLE_BUNDLE,t.AUDIO_BUNDLE,t.FONT_BUNDLE,!1,t.RESOURCE_BUNDLE],r=0;r<n.length;++r){var o=n[r],i=o+"/";if(e.startsWith(i))return{bundleName:o,path:e.slice(i.length)}}return{bundleName:t.MAIN_BUNDLE,path:e}},t.getBundlePath=function(t,e){var n=e+"/";return t.startsWith(n)||(t=n+t),t},t.getConfigPath=function(){return this.MAIN_BUNDLE_PREFIX+"Config/JsonCfg"},t.getAudioBGM=function(t){return this.AUDIO_BUNDLE_PREFIX+"Bgm/bgm_"+t},t.getLevelPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Level/"+t},t.getEntityPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Entity/"+t},t.guardImgPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/GuardImgs/guardHeadImgs/img"+t},t.getItemPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/Items/img_"+t},t.getHurtNodePath=function(){return this.BATTLE_BUNDLE_PREFIX+"Prefabs/HurtNode"},t.getItemOutlinePath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/Items/imgOutline_"+t},t.loadingScenePath=function(){return this.START_BUNDLE_PREFIX+"View/LoadingScene"},t.loadingBg=function(){return this.START_BUNDLE_PREFIX+"Prefab/loadingBg"},t.clickEffectPath=function(){return"Sounds/click"},t.soundPath=function(t){return"Sounds/"+t},t.viewPath=function(t){return"View/"+t},t.resourcesPath=function(t){return this.RESOURCE_BUNDLE+"/"+t},t.MAIN_BUNDLE="MainBundle",t.BATTLE_BUNDLE="BattleBundle",t.AUDIO_BUNDLE="AudioBundle",t.FONT_BUNDLE="FontBundle",t.START_BUNDLE="StartBundle",t.DEBUG_BUNDLE="DebugBundle",t.RESOURCE_BUNDLE="resources",t.MAIN_BUNDLE_PREFIX=t.MAIN_BUNDLE+"/",t.BATTLE_BUNDLE_PREFIX=t.BATTLE_BUNDLE+"/",t.AUDIO_BUNDLE_PREFIX=t.AUDIO_BUNDLE+"/",t.START_BUNDLE_PREFIX=t.START_BUNDLE+"/",t.DEBUG_BUNDLE_PREFIX=t.DEBUG_BUNDLE+"/",t}();n.default=r,cc._RF.pop()},{}],Platform:[function(t,e,n){"use strict";var r;cc._RF.push(e,"cc6dfLIrMpJ4rkiQoGgIJGl","Platform"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Default=0]="Default",t[t.Wx=1]="Wx",t[t.QQ=2]="QQ",t[t.TT_Douyin=3]="TT_Douyin",t[t.TT_Toutiao=4]="TT_Toutiao",t[t.Android=5]="Android",t[t.Android_Nog=6]="Android_Nog",t[t.Android_Ohayoo=7]="Android_Ohayoo",t[t.Android_Tap=8]="Android_Tap",t[t.iOS=9]="iOS"}(r||(r={}));var o=function(){function t(){}return t.isWx=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.wx&&null==window.qq||!1},t.isQQ=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.qq||!1},t.isWxLike=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||!1},t.isBytedance=function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isBytedanceDouyin=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"DOUYIN"===this._bytedanceAppName)},t.isBytedanceToutiao=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"TOUTIAO"===this._bytedanceAppName)},t.isMiniGame=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isAndroid=function(){return cc.sys.platform===cc.sys.ANDROID||!1},t.isOhayoo=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isOhayoo}return!1},t.isTap=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isTap}return!1},t.isNog=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return!(t&&(t.isOhayoo||t.isTap))}return!1},t.isIOS=function(){return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD||!1},t.isMobile=function(){return this.isAndroid()||this.isIOS()},t.isNative=function(){return cc.sys.isNative||!1},t.isTest=function(){return!0},t._mockInPlatform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},t._mockPlatform=r.Android,t}();n.default=o,cc._RF.pop()},{}],PlayerData:[function(t,e,n){"use strict";cc._RF.push(e,"42b0bPL3chCE4HYe8tcrPGx","PlayerData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"f5262/u3rBEZK0O6sM/pRtx","Player");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var a=i(t("../../Utils/Path")),s=t("./BaseEntity"),c={Hp:"Hp",Exp:"Exp",Upgrade:"Upgrade"},u=function(t){function e(e){var n=t.call(this,0,0)||this;return n._level=0,n._exp=0,n._upgradeExp=0,n._oriIndex=0,n._isPerfect=!0,n.data=e,n._hp=e.hp,n._upgradeExp=n.getUpgradeExp(n._level),n._isPerfect=!0,n}return o(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxHp",{get:function(){return this.data.hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLevel",{get:function(){return this.data.maxLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upgradeExp",{get:function(){return this._upgradeExp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPerfect",{get:function(){return this._isPerfect},enumerable:!1,configurable:!0}),e.prototype.onAvatarReady=function(){},e.prototype.getAssetPath=function(){return a.default.getEntityPath("Player/Player")},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.isAlive=function(){return this._hp>0},e.prototype.addExp=function(t){this._exp+=t,this.emit(c.Exp,this._exp,this._upgradeExp)},e.prototype.canUpgrade=function(){return this.level<this.maxLevel&&this.getUpgradeExp(this.level)<=this._exp},e.prototype.upgrade=function(){this.canUpgrade()&&(this._exp-=this._upgradeExp,this._level+=1,this._upgradeExp=this.getUpgradeExp(this._level),this.emit(c.Exp,this._exp,this._upgradeExp))},e.prototype.isFullLevel=function(){return this.level>=this.maxLevel},e.prototype.getUpgradeExp=function(t){return t>=this.data.upgradeExp.length&&this.data.upgradeExp[this.data.upgradeExp.length-1],this.data.upgradeExp[t]},e.prototype.hurt=function(t){this._hp=cc.misc.clampf(this._hp-t,0,this.maxHp),this._isPerfect=!1;var e=Math.round(this.maxHp/this.hp);if(e>=1&&this._oriIndex!=e){this._oriIndex=e;var n="wall_"+e;this.anim.play(n)}this.emit(c.Hp,this._hp,this.maxHp),this._hp<=0&&this.die()},e.prototype.die=function(){},e.Events=c,e}(s.BaseEntity);n.Player=u,cc._RF.pop()},{"../../Utils/Path":"Path","./BaseEntity":"BaseEntity"}],Profiler:[function(t,e,n){"use strict";var r;cc._RF.push(e,"8dff6YEK2xMWo2Ij8b4VXRJ","Profiler"),Object.defineProperty(n,"__esModule",{value:!0}),n.profile=n.Profiler=void 0,cc.sys.platform===cc.sys.WECHAT_GAME?wx.getPerformance&&(r=wx.getPerformance()):cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.getPerformance&&(r=tt.getPerformance()),r||(r=window&&window.performance||Date);var o=function(){function t(){}return t.now=function(){return r.now()},t.lazyInit=function(){},t.start=function(){},t.end=function(){},t.dump=function(){},t.inited=!1,t}();n.Profiler=o,n.profile=function(t,e){return void 0===e&&(e=!1),function(){}},cc._RF.pop()},{}],Property:[function(t,e,n){"use strict";cc._RF.push(e,"d5173DN6pRFxKg/uliZTgZ7","Property");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReactBool=n.ReactNumber=n.ReactProperty=n.CacheNode=n.CacheVec2=n.CacheBool=n.CacheNumber=n.CacheProperty=void 0;var i=t("./Action"),a=function(){function t(t){this._gettter=t}return Object.defineProperty(t.prototype,"value",{get:function(){return void 0===this._value&&(this._value=this._gettter()),this._value},enumerable:!1,configurable:!0}),t}();n.CacheProperty=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheNumber=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheBool=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheVec2=u;var l=function(t){function e(e){return t.call(this,function(){return cc.find(e)})||this}return o(e,t),e}(a);n.CacheNode=l;var f=function(){function t(t){this.onValueChange=new i.Action1,this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this.onValueChange.call(t))},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){this.onValueChange.add(t,e)},t.prototype.addWithInitValue=function(t,e){this.onValueChange.add(t,e),t.call(e,this._value)},t}();n.ReactProperty=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(f);n.ReactNumber=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(f);n.ReactBool=h,cc._RF.pop()},{"./Action":"Action"}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"0d24aEHkpBMPqD+bg6rDdp0","Queue");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(e){return null!=e?t.call(this,null,{capacity:e})||this:t.call(this)||this}return o(e,t),e.prototype.enqueue=function(t){return this.push(t)},e.prototype.dequeue=function(){return this.shift()},e.prototype.peek=function(){return this.peekFront()},e}(i(t("denque")).default);n.default=a,cc._RF.pop()},{denque:9}],RemoteStorage:[function(t,e,n){"use strict";cc._RF.push(e,"1ddf1L0HdRH2bIS/PJL+QFL","RemoteStorage"),Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteStorage=void 0;var r=function(){function t(){}return t.init=function(){throw new Error("Not implemented")},t.getItemAsync=function(t,e){if(!e)throw new Error("Not implemented");this.getItemAsync(t).then(e)},t.setItemAsync=function(t,e,n){if(!n)throw new Error("Not implemented");this.setItemAsync(t,e).then(n)},t}();n.RemoteStorage=r,cc._RF.pop()},{}],SceneType:[function(t,e,n){"use strict";cc._RF.push(e,"bc8d6PtiQFIaae0CdQeMCcB","SceneType"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneType=void 0,function(t){t[t.HomeScene=1]="HomeScene",t[t.Count=1]="Count"}(n.SceneType||(n.SceneType={})),cc._RF.pop()},{}],SettingView:[function(t,e,n){"use strict";cc._RF.push(e,"9d3faEFZ3BHxLPgsFykmu+x","SettingView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Module/ViewHandler")),u=cc._decorator,l=u.ccclass,f=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelFeedback=null,e.labelGamecircle=null,e.labelUserName=null,e.labelUserUid=null,e.labelConfirm=null,e._callback=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.cb;this._callback=e;var n=s.ConfigManager.instance.getLanConfig("ui_feedback"),r=s.ConfigManager.instance.getLanConfig("ui_gamecircle"),o=s.ConfigManager.instance.getLanConfig("ui_confirm"),i=s.ConfigManager.instance.getLanConfig("ui_setting");this.labelTitle.string=i,this.labelConfirm.string=o,this.labelFeedback.string=n,this.labelGamecircle.string=r,this.labelUserName.string="\u7528\u6237\u540d\u79f0",this.labelUserUid.string="uid-000000001"},e.prototype.onConfirm=function(){this.close(),this._callback()},i([f(cc.Label)],e.prototype,"labelTitle",void 0),i([f(cc.Label)],e.prototype,"labelFeedback",void 0),i([f(cc.Label)],e.prototype,"labelGamecircle",void 0),i([f(cc.Label)],e.prototype,"labelUserName",void 0),i([f(cc.Label)],e.prototype,"labelUserUid",void 0),i([f(cc.Label)],e.prototype,"labelConfirm",void 0),i([l],e)}(c.default);n.default=p,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler"}],StartSceneLoading:[function(t,e,n){"use strict";cc._RF.push(e,"1af1a/DqwFF7YKH25qito0f","StartSceneLoading");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=i(t("../Gameplay/Game")),s=i(t("../Utils/Path")),c=t("./ConfigManager"),u=i(t("./Database/Db")),l=i(t("./Loader")),f=i(t("./Loading")),p=window.performance||Date,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this);var n=this.timeit("[Loading] loading"),r=function(t){return e.addProgress.bind(e,t)},o=this.loadScene().then(r(20)),i=this.loadBundle(40),a=this.loadConfig().then(r(10)).then(this.loadDatabase.bind(this)).then(r(10)).then(this.login.bind(this)).then(r(10)).then(this.loadGame.bind(this)).then(r(10));Promise.all([i,o,a]).then(function(){n()})},e.prototype.loadGame=function(){var t=this.timeit("[Loading] game");return a.default.instance.init().then(t)},e.prototype.login=function(){return new Promise(function(t){t()})},e.prototype.loadDatabase=function(){u.default.instance.init()},e.prototype.loadConfig=function(){var t=this.timeit("[Loading] config");return c.ConfigManager.instance.init().then(t)},e.prototype.loadScene=function(){var t=this;return this.loadBaseBundle().then(function(){return new Promise(function(e){var n=t.timeit("[Loading] loading scene");cc.director.preloadScene("GameScene",null,function(){n(),e()})})})},e.prototype.loadBaseBundle=function(){var t=this;return new Promise(function(e){var n=t.timeit("[Loading] loading font");l.default.loadBundle([s.default.MAIN_BUNDLE],function(){n(),e()})})},e.prototype.loadBundle=function(t){var e=this;return new Promise(function(n){var r=e.timeit("[Loading] loading bundle"),o=[s.default.MAIN_BUNDLE,s.default.BATTLE_BUNDLE],i=t/o.length,a=e;(function t(){0===o.length?(r(),n()):l.default.loadBundle(o.shift(),function(){a.addProgress(i),t()})})()})},e.prototype.timeit=function(t){var e=p.now();return console.log(t+" start"),function(){var n=p.now()-e;console.log(t+" finish: "+n+"ms")}},e}(f.default);n.default=h,cc._RF.pop()},{"../Gameplay/Game":"Game","../Utils/Path":"Path","./ConfigManager":"ConfigManager","./Database/Db":"Db","./Loader":"Loader","./Loading":"Loading"}],StartScene:[function(t,e,n){"use strict";cc._RF.push(e,"179adkLG4dM+r9siYAbK2+F","StartScene");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var u=c(t("../../Module/StartSceneLoading")),l=c(t("../View/LoadingView")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}return o(e,t),e.prototype.start=function(){cc.dynamicAtlasManager.enabled=!1,this._loadingQuene=new u.default(1),this._loadingQuene.start(),this._loadingQuene.onComplete=this.onComplete.bind(this),this.showLoadingView()},e.prototype.showLoadingView=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,l.default.show(this._loadingQuene)];case 1:return t=e.sent(),cc.isValid(this)?this._loadingView=t:t.finish(),[2]}})})},e.prototype.onComplete=function(){var t=this._loadingView;cc.director.loadScene("GameScene",function(){t&&t.finish()})},i([h(cc.Label)],e.prototype,"labelLoading",void 0),i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Module/StartSceneLoading":"StartSceneLoading","../View/LoadingView":"LoadingView"}],StateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"3abc3hYypJAcqXQLNN4ZRfo","StateMachine");var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.StateMachine=n.BaseState=void 0;var i=function(){function t(){}return t.prototype.setContext=function(t){this.context=t},t.prototype.getContext=function(){return this.context},t.prototype.setStateMachine=function(t){this.stateMachine=t},t.prototype.changeState=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=this.stateMachine).changeState.apply(e,o([t],n))},t.prototype.changeStateAsync=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];setTimeout(function(){var r;(r=e.stateMachine).changeState.apply(r,o([t],n))},1)},t}();n.BaseState=i;var a=function(){function t(t){this._context=t,this._statesMap=new Map}return t.prototype.addState=function(t){this._statesMap.has(t.name)&&this._statesMap.get(t.name)!=t||(t.setContext(this._context),t.setStateMachine(this),this._statesMap.set(t.name,t))},t.prototype.addInitState=function(t){this.addState(t),this._initState=t},t.prototype.initState=function(){this.changeState(this._initState.name)},t.prototype.changeState=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(this._statesMap.has(t)&&this.getCurrentStateName()!==t)return this._prevState=this._currState,this._currState&&this._currState.onExit&&this._currState.onExit(),this._currState=this._statesMap.get(t),this._currState.onEnter&&(e=this._currState).onEnter.apply(e,o(n)),this._currState},t.prototype.revertToPreviousState=function(){this._prevState&&this.changeState(this._prevState.name)},t.prototype.getCurrentStateName=function(){var t;return null===(t=this._currState)||void 0===t?void 0:t.name},t.prototype.getState=function(t){return this._statesMap.get(t)},t.prototype.execute=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._currState&&this._currState.execute&&(t=this._currState).execute.apply(t,o(e))},t.prototype.update=function(t){this._currState&&this._currState.update&&this._currState.update(t)},t}();n.StateMachine=a,cc._RF.pop()},{}],Statistics:[function(t,e,n){"use strict";cc._RF.push(e,"406bdkjKbJNzqEh4AINipp3","Statistics");var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Statistic=n.LogEvent=n.AD_RESULT=n.BannerAdType=n.VideoAdType=void 0;var a,s=i(t("../Gameplay/Game")),c=i(t("../Gameplay/GameDefine"));(function(t){t[t.RefreshGuard=1]="RefreshGuard"})(n.VideoAdType||(n.VideoAdType={})),n.BannerAdType||(n.BannerAdType={}),function(t){t[t.USE_PROPAGANDA=1]="USE_PROPAGANDA",t[t.SUCCESS=2]="SUCCESS",t[t.FAILED=3]="FAILED",t[t.CANCEL=4]="CANCEL"}(n.AD_RESULT||(n.AD_RESULT={})),function(t){t[t.GAME_START=1]="GAME_START",t[t.GAME_SHOW=2]="GAME_SHOW",t[t.GAME_HIDE=3]="GAME_HIDE",t[t.LOGIN=4]="LOGIN",t[t.PLAY_TIME=5]="PLAY_TIME",t[t.REGISTER=6]="REGISTER",t[t.APP_LAUNCH=7]="APP_LAUNCH",t[t.GUIDE_STEP=51]="GUIDE_STEP",t[t.WATCH_AD=102]="WATCH_AD",t[t.SHOW_BANNER_AD=103]="SHOW_BANNER_AD",t[t.SHOW_SPLASH_AD=104]="SHOW_SPLASH_AD",t[t.SHOW_INSERT_AD=105]="SHOW_INSERT_AD",t[t.LEAF_CHANGED=151]="LEAF_CHANGED",t[t.STAR_CHANGED=152]="STAR_CHANGED",t[t.PASSAD_CHANGED=153]="PASSAD_CHANGED",t[t.COMMON_PIECE_CHANGED=154]="COMMON_PIECE_CHANGED",t[t.MOON_STONE_CHANGED=155]="MOON_STONE_CHANGED",t[t.GEM_CHANGED=156]="GEM_CHANGED",t[t.GET_ORDER_MANUAL=201]="GET_ORDER_MANUAL",t[t.GET_ORDER_AUTO=202]="GET_ORDER_AUTO",t[t.ORDER_SUCCESS=203]="ORDER_SUCCESS",t[t.SEND_PROPAGANDA=301]="SEND_PROPAGANDA",t[t.DAILY_TASK_GET_REWARD=401]="DAILY_TASK_GET_REWARD",t[t.MAIN_TASK_GET_REWARD=402]="MAIN_TASK_GET_REWARD",t[t.ACHIEVEMENT_GET_REWARD=403]="ACHIEVEMENT_GET_REWARD",t[t.BUTTON_SOCIAL=501]="BUTTON_SOCIAL",t[t.BUTTON_LOGIN_REWARD=502]="BUTTON_LOGIN_REWARD",t[t.COMBINE_SUCCESS=601]="COMBINE_SUCCESS",t[t.COMBINE_FAILED=602]="COMBINE_FAILED",t[t.TIME_RESEARCH=603]="TIME_RESEARCH",t[t.RESEARCH_DRINK_SCORE=604]="RESEARCH_DRINK_SCORE",t[t.CLICK_MAT_PRODUCE=701]="CLICK_MAT_PRODUCE",t[t.CLICK_SPEEDUP_COOK=702]="CLICK_SPEEDUP_COOK",t[t.GET_LOGIN_REWARD=801]="GET_LOGIN_REWARD",t[t.SHARE_ANIMAL=901]="SHARE_ANIMAL",t[t.ADSTORE_WATCHADCHANCE_CHANGED=1001]="ADSTORE_WATCHADCHANCE_CHANGED",t[t.ADSTORE_FREEBOXCHANCE_CHANGED=1002]="ADSTORE_FREEBOXCHANCE_CHANGED",t[t.ADSTORE_GEMBOXCHANCE_CHANGED=1003]="ADSTORE_GEMBOXCHANCE_CHANGED",t[t.TREASUREMAPCHANCE_CHANGED=1004]="TREASUREMAPCHANCE_CHANGED",t[t.CAP_CHANGED=1005]="CAP_CHANGED"}(a=n.LogEvent||(n.LogEvent={}));var u=function(){function t(){this._logs=[],this._eventCacheCountMap=new Map,this._eventCache=new Map,this._eventCacheCountMap.set(a.LEAF_CHANGED,30),this._eventCacheCountMap.set(a.STAR_CHANGED,30),this._eventCacheCountMap.set(a.GET_ORDER_MANUAL,10),this._eventCacheCountMap.set(a.GET_ORDER_AUTO,10),this._eventCacheCountMap.set(a.ORDER_SUCCESS,10),this._eventCacheCountMap.set(a.SEND_PROPAGANDA,10),this._eventCacheCountMap.set(a.COMBINE_FAILED,10),this._eventCacheCountMap.set(a.COMBINE_SUCCESS,2),this._eventCacheCountMap.set(a.SHOW_BANNER_AD,10),this._leafIncomeCache={uid:null,version:c.default.VERSION,ts:0,eventID:a.LEAF_CHANGED,eventCount:0,extraInfo:{count:0}},this._leafOutgoingCache={uid:null,version:c.default.VERSION,ts:0,eventID:a.LEAF_CHANGED,eventCount:0,extraInfo:{count:0}}}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;cc.game.on(cc.game.EVENT_SHOW,function(){t.addLog(a.GAME_SHOW)},this),cc.game.on(cc.game.EVENT_HIDE,function(){t.addLog(a.GAME_HIDE),t.sendAllLogs()},this),this.delaySendLog()},t.prototype.addLog=function(t,e,n){if(this._eventCacheCountMap.has(t)){var r=this._eventCacheCountMap.get(t);if(t===a.LEAF_CHANGED){var o=e.count;o>0?(this._leafIncomeCache.extraInfo.count+=o,this._leafIncomeCache.eventCount+=1,this._leafIncomeCache.ts=s.default.instance.time()):(this._leafOutgoingCache.extraInfo.count+=o,this._leafOutgoingCache.eventCount+=1,this._leafOutgoingCache.ts=s.default.instance.time()),this._leafIncomeCache.eventCount+this._leafOutgoingCache.eventCount>=r&&(this._leafIncomeCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafIncomeCache)),this._leafIncomeCache.eventCount=0,this._leafIncomeCache.extraInfo={count:0}),this._leafOutgoingCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafOutgoingCache)),this._leafOutgoingCache.eventCount=0,this._leafOutgoingCache.extraInfo={count:0}))}else{if(this._eventCache.has(t)){var i=this._eventCache.get(t);i.eventCount+=1,i.ts=s.default.instance.time(),t===a.STAR_CHANGED&&(i.extraInfo.count+=e.count)}else this._eventCache.set(t,{uid:null,version:c.default.VERSION,eventCount:1,ts:s.default.instance.time(),eventID:t,extraInfo:e});this._eventCache.get(t).eventCount>=r&&(this._logs.push(this._eventCache.get(t)),this._eventCache.delete(t))}}else{var u={uid:null,version:c.default.VERSION,ts:s.default.instance.time(),eventID:t,extraInfo:e};this._logs.push(u)}(n||this._logs.length>=c.default.MAX_STAT_LOG_CACHE)&&this.sendAllLogs()},t.prototype.sendAllLogs=function(){var t=this;this._leafIncomeCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafIncomeCache)),this._leafIncomeCache.eventCount=0,this._leafIncomeCache.extraInfo={count:0}),this._leafOutgoingCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafOutgoingCache)),this._leafOutgoingCache.eventCount=0,this._leafOutgoingCache.extraInfo={count:0}),this._eventCache.forEach(function(e){t._logs.push(e)}),this._eventCache.clear(),this.sendLog()},t.prototype.sendLog=function(){var t,e=this;if(this.delaySendLog(),0!==this._logs.length){for(var n,r=this._logs.splice(0),i=0;i<r.length;i++){var s=r[i];if(s.uid="",s.eventID===a.APP_LAUNCH){n=s,r.splice(i,1);break}}n&&this._send([n],function(t){console.log("[Stats] send launch log: "+t),t||e._logs.push(n)}),(t=this._logs).push.apply(t,o(r))}},t.prototype.delaySendLog=function(){var t=this;this._handle&&(clearTimeout(this._handle),this._handle=null),this._handle=setTimeout(function(){t._handle=null,t.sendLog()},1e3*c.default.STAT_SEND_PERIOD)},t.prototype._send=function(){},t._instance=null,t}();n.Statistic=u,cc._RF.pop()},{"../Gameplay/Game":"Game","../Gameplay/GameDefine":"GameDefine"}],Terrain:[function(t,e,n){"use strict";cc._RF.push(e,"f4965fWvvRKrZ2gayCNF2Nn","Terrain");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=cc._decorator,u=c.ccclass,l=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerPos=null,e.guardSpawnPos=null,e.enemySpawnPos=null,e.guardFrontierPos=null,e}return o(e,t),e.prototype.init=function(){s.default.updateAlignmentRecursively(this.node),this.playerPosition=this.playerPos.getPosition(),this.guardSpawnPosition=this.guardSpawnPos.getPosition(),this.guardFrontierY=this.guardFrontierPos.getPosition().y},e.prototype.getRandEnemyPos=function(){for(var t=[],e=0;e<this.enemySpawnPos.children.length;e++){var n=this.enemySpawnPos.children[e],r=n.getPosition(),o=n.getBoundingBox();t.push({position:r,rect:o})}var i=s.default.shuffle(t)[0],a=i.position,c=i.rect.yMin,u=i.rect.yMax;i.rect.width>i.rect.height&&(c=i.rect.xMin,u=i.rect.xMax);var l=s.default.randomRange(c,u);return a.add(cc.v2(l,0))},i([l(cc.Node)],e.prototype,"playerPos",void 0),i([l(cc.Node)],e.prototype,"guardSpawnPos",void 0),i([l(cc.Node)],e.prototype,"enemySpawnPos",void 0),i([l(cc.Node)],e.prototype,"guardFrontierPos",void 0),i([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Utils/Utils":"Utils"}],ToastView:[function(t,e,n){"use strict";cc._RF.push(e,"5f015hxwaxEyZMz9S3I/Nby","ToastView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Module/ViewHandler")),c=cc._decorator,u=c.ccclass,l=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelContent=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=this;this.labelContent.string=t.text,cc.tween(this.node).to(2,{y:100}).delay(1).call(function(){e.node.destroy()}).start()},i([l(cc.Label)],e.prototype,"labelContent",void 0),i([u],e)}(s.default);n.default=f,cc._RF.pop()},{"../Module/ViewHandler":"ViewHandler"}],UpgradeCard:[function(t,e,n){"use strict";cc._RF.push(e,"95657FjVj5BJ6MAMHVoUTVp","UpgradeCard");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Module/Loader")),u=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelName=null,e.labelHeroCost=null,e.showCaseNode=null,e.heroCostNode=null,e.guardImg=null,e._destroyUids=[],e._guardId=null,e._config=null,e._entityManager=null,e.cb=null,e}return o(e,t),e.prototype.init=function(t,e,n){this._entityManager=t,this.cb=n,this._destroyUids=e.destroyUids||[],this._guardId=e.guardId,this._config=s.ConfigManager.instance.getGuardConfig(this._guardId),this.showCaseNode.active=this._destroyUids.length>0;for(var r=0;r<this.showCaseNode.children.length;r++)this.showCaseNode.children[r].active=!1;for(r=0;r<this._destroyUids.length;r++){this.showCaseNode.children[r].active=!0;var o=this._destroyUids[r],i=this.showCaseNode.children[r].getChildByName("imgSlaveAvatar").getComponent(cc.Sprite);this.showGuardImg(o,i)}this.showCardInfo()},e.prototype.showCardInfo=function(){var t=this,e=this._config,n="guard_"+this._guardId+"_name";this.labelName.string=s.ConfigManager.instance.getLanConfig(n),this.heroCostNode.active=e.costHeroSoul&&e.costHeroSoul>0,this.heroCostNode.active&&(this.labelHeroCost.string=""+e.costHeroSoul);var r=u.default.guardImgPath(this._guardId);c.default.loadRes(r,cc.SpriteFrame,function(e){t.guardImg.spriteFrame=e,l.default.scaleImg(t.guardImg.node,e,150)},this)},e.prototype.showGuardImg=function(t,e){var n=t,r=this._entityManager.getGuard(n),o=u.default.guardImgPath(r.id);c.default.loadRes(o,cc.SpriteFrame,function(t){e.spriteFrame=t,l.default.scaleImg(e.node,t,60)},this)},e.prototype.onClick=function(){this.cb&&this.cb()},i([h(cc.Label)],e.prototype,"labelName",void 0),i([h(cc.Label)],e.prototype,"labelHeroCost",void 0),i([h(cc.Node)],e.prototype,"showCaseNode",void 0),i([h(cc.Node)],e.prototype,"heroCostNode",void 0),i([h(cc.Sprite)],e.prototype,"guardImg",void 0),i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Utils/Path":"Path","../Utils/Utils":"Utils"}],UpgradeConfig:[function(t,e,n){"use strict";cc._RF.push(e,"e0f71sHNBZLIaPTV0HDJW7x","UpgradeConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.UpgradeType=void 0,function(t){t[t.SummonGuard=0]="SummonGuard",t[t.UpgradeGuard=1]="UpgradeGuard"}(n.UpgradeType||(n.UpgradeType={})),cc._RF.pop()},{}],UpgradeView:[function(t,e,n){"use strict";cc._RF.push(e,"e8fcemmwG9P7KW4QiDKJxxj","UpgradeView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var u=t("../Interface/Config/UpgradeConfig"),l=c(t("./UpgradeCard")),f=c(t("../Module/ViewHandler")),p=c(t("../Utils/Utils")),h=t("../Gameplay/System/AdSystem"),d=t("../Module/Statistics"),_=t("../Enum/WatchAdStatus"),y=c(t("../Module/ViewModule")),g=t("../Module/ConfigManager"),v=cc._decorator,m=v.ccclass,b=v.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.card=null,e.cardNode=null,e.btnRefresh=null,e.labelRefresh=null,e._entityManager=null,e._onClose=null,e._battle=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.battle,n=t.upgradeConfig,r=t.onClose;this._battle=e,this._entityManager=this._battle.entityManager,this._onClose=r,this.initCard(n.upgradeOptions)},e.prototype.initCard=function(t){var e=this;this.cardNode.removeAllChildren();for(var n=function(n){var o=cc.instantiate(r.card);o.parent=r.cardNode;var i=o.getComponent(l.default),a=t[n];i.init(r._entityManager,a,function(){e.selectOption(a,e._entityManager)})},r=this,o=0;o<t.length;o++)n(o)},e.prototype.onRefresh=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return[4,h.AdSystem.instance.showVideoAd(d.VideoAdType.RefreshGuard)];case 1:return n.sent()===_.WatchAdStatus.Success?(t=this._battle.randomUpgradeOptions().upgradeOptions,t=p.default.shuffle(t),this.initCard(t)):(e=g.ConfigManager.instance.getLanConfig("toast_ad_failed"),y.default.instance.toast(e)),[2]}})})},e.prototype.selectOption=function(t,e){switch(t.type){case u.UpgradeType.SummonGuard:e.createGuard(t.guardId,{pos:this._battle.getGuardSpawnPos()});break;case u.UpgradeType.UpgradeGuard:e.upgradeGuard(t.guardId,t.destroyUids)}this.close(),this._onClose()},i([b(cc.Prefab)],e.prototype,"card",void 0),i([b(cc.Node)],e.prototype,"cardNode",void 0),i([b(cc.Button)],e.prototype,"btnRefresh",void 0),i([b(cc.Label)],e.prototype,"labelRefresh",void 0),i([m],e)}(f.default);n.default=C,cc._RF.pop()},{"../Enum/WatchAdStatus":"WatchAdStatus","../Gameplay/System/AdSystem":"AdSystem","../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/ConfigManager":"ConfigManager","../Module/Statistics":"Statistics","../Module/ViewHandler":"ViewHandler","../Module/ViewModule":"ViewModule","../Utils/Utils":"Utils","./UpgradeCard":"UpgradeCard"}],UserData:[function(t,e,n){"use strict";cc._RF.push(e,"2b8ebip709J477JZp9H0q9b","UserData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"ef620FmdiBJCZjynGPOJQB0","Utils");var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Module/ConfigManager"),s=i(t("./CryptoJsMini")),c=function(){function t(){}return t.ensureStringLength=function(t,e,n){if(t.length>e)return t.slice(0,e);if(t.length<e){for(n=n||"A";t.length<e;)t+=n;return t.length>e?t.slice(0,e):t}return t},t.getAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var r=s.default.enc.Utf8.parse(e),o=s.default.enc.Utf8.parse(n);return s.default.AES.encrypt(t,r,{iv:o,mode:s.default.mode.CBC,padding:s.default.pad.Pkcs7}).toString()},t.getDAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var r=s.default.enc.Utf8.parse(e),o=s.default.enc.Utf8.parse(n);return s.default.AES.decrypt(t,r,{iv:o,mode:s.default.mode.CBC,padding:s.default.pad.Pkcs7}).toString(s.default.enc.Utf8)},t.getRandomCodeKey=function(t){for(var e="",n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=n.length,o=0;o<(t||8);o++)e+=n.charAt(Math.floor(Math.random()*r));return e},t.encodeShareQuery=function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);var r=e.join("&");return this.getAesString(r,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9")},t.decodeShareQuery=function(t){for(var e={},n=this.getDAesString(t,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9").split("&"),o=0;o<n.length;++o)try{var i=r(n[o].split("="),2),a=i[0],s=i[1];e[a]=s}catch(c){}return e},t.encode=function(t){return this.getAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.decode=function(t){return this.getDAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.encodeObject=function(e){var n={};for(var r in e){var o=e[r];n[r]=t.encode(JSON.stringify(o))}return n},t.decodeObject=function(e){var n={};for(var r in e){var o=e[r];if(null!=o){var i=t.decode(o);n[r]=""!=i?JSON.parse(i):null}else n[r]=null}return n},t.directionToAngle=function(t){return cc.misc.radiansToDegrees(cc.Vec2.RIGHT.signAngle(t))},t.randomRangeInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.randomRange=function(t,e){return Math.random()*(e-t)+t},t.arrayRemove=function(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)},t.shuffle=function(t){for(var e,n=t.length-1;n>0;n--){var o=Math.floor(Math.random()*(n+1));e=r([t[o],t[n]],2),t[n]=e[0],t[o]=e[1]}return t},t.randomSelect=function(t){return 0===t.length?null:t[this.randomRangeInt(0,t.length)]},t.arrayEquals=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.sliceArray=function(t,e){if(0===t.length)return[];for(var n=[],r=Math.ceil(t.length/e),o=0;o<r;++o)n.push(t.slice(o*e,(o+1)*e));return n},t.sortArray=function(t,e){if(0!==t.length){for(var n=[],r=0;r<t.length;++r){var o=t[r],i=e(o);n.push({element:o,key:i})}return n.sort(function(t,e){return t.key-e.key}),n.map(function(t){return t.element})}},t.createMultiMap=function(t,e){var n=new Map;return t.forEach(function(t){var o=r(e(t),2),i=o[0],a=o[1];n.has(i)?n.get(i).push(a):n.set(i,[a])}),n},t.createMap=function(t,e){return new Map(t.map(function(t){return e(t)}))},t.scaleImg=function(t,e,n){var r=n/e.getRect().width,o=n/e.getRect().height,i=Math.min(r,o);t.scale=i;var a=e.getRect().width,s=e.getRect().height;t.width=a,t.height=s},t.gray=function(t,e){var n,r;void 0===e&&(e=!0);var i=t.getComponent(cc.RenderComponent);if(i){var a=cc.Material.getBuiltinMaterial("2d-gray-sprite");i[this.RAW_MAT_PROP]||(i[this.RAW_MAT_PROP]=i.getMaterial(0)),i.setMaterial(0,a)}if(e)try{for(var s=o(t.children),c=s.next();!c.done;c=s.next()){var u=c.value;this.gray(u,!0)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.ungray=function(t,e){var n,r;void 0===e&&(e=!0);var i=t.getComponent(cc.RenderComponent);if(i){var a=i[this.RAW_MAT_PROP];a&&(i.setMaterial(0,a),delete i[this.RAW_MAT_PROP])}if(e)try{for(var s=o(t.children),c=s.next();!c.done;c=s.next()){var u=c.value;this.ungray(u,!0)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.switchParent=function(t,e){var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO);e&&(n=e.convertToNodeSpaceAR(n)),t.parent=e,t.setPosition(n)},t.getOrAddComponent=function(t,e){var n=t.getComponent(e);return n||(n=t.addComponent(e)),n},t.getComponentInChildren=function(t,e){var n,r,i=t.getComponent(e);if(!i)try{for(var a=o(t.children),s=a.next();!s.done;s=a.next()){var c=s.value;if(i=this.getComponentInChildren(c,e))break}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},t.getNodePath=function(t){for(var e=[t.name];t.parent;)e.push(t.parent.name),t=t.parent;return e.reverse(),e.join("/")},t.isAncestorOf=function(t,e){for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1},t.updateAlignmentRecursively=function(t){var e,n,r;null===(r=t.getComponent(cc.Widget))||void 0===r||r.updateAlignment();try{for(var i=o(t.children),a=i.next();!a.done;a=i.next()){var s=a.value;this.updateAlignmentRecursively(s)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.transformRectTo=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),n.invert(n),e.transformMat4(e,n),e},t.transformRectFrom=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),e.transformMat4(e,n),e},t.getBoundingBoxToNode=function(t,e){var n=t.getBoundingBox();return t.parent&&(n=this.transformRectFrom(t.parent,n)),this.transformRectTo(e,n)},t.convertNodePositionToNode=function(t,e,n){if(cc.isValid(n)&&cc.isValid(t))return n.convertToNodeSpaceAR(t.convertToWorldSpaceAR(e))},t.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.Vec2.ZERO)},t.setWorldPosition=function(t,e){t.parent?t.setPosition(t.parent.convertToNodeSpaceAR(e)):t.setPosition(e)},t.anchorPosToAbsPos=function(t,e){return cc.v2(e.x+t.width*t.anchorX,e.y+t.height*t.anchorY)},t.absPosToAnchorPos=function(t,e){return cc.v2(e.x-t.width*t.anchorX,e.y-t.height*t.anchorY)},t.toggleRenderer=function(t,e){var n=t.getComponent(cc.RenderComponent);n&&(n.enabled=e);for(var r=0;r<t.childrenCount;++r)this.toggleRenderer(t.children[r],e)},t.randomPointInRect=function(t){return cc.v2(this.randomRange(t.xMin,t.xMax),this.randomRange(t.yMin,t.yMax))},t.unionRects=function(t){if(!t.length)return null;for(var e=t[0],n=1;n<t.length;++n)e.union(e,t[n]);return e},t.playAnim=function(t,e,n,r){t.play(e).repeatCount=n,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r&&r()},this)},t.playAnims=function(t,e,n){var r=this;0===e.length?n&&n():(t.play(e.shift()).repeatCount=1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r.playAnims(t,e,n)},this))},t.playAnimsWithRepeats=function(t,e,n){var r=this;if(0===e.length)n&&n();else{var o=e.shift(),i=o.name,a=o.repeat;t.play(i).repeatCount=null!=a?a:1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r.playAnimsWithRepeats(t,e,n)},this)}},t.prefixZero=function(t,e){return(Array(e).join("0")+t).slice(-e)},t.formatDate=function(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1,o=r<10?"0"+r:r,i=e.getDate();return n+"-"+o+"-"+(i<10?"0"+i:i)},t.formatTimeText=function(t){var e=a.ConfigManager.instance,n=this.formatTime(t),r="";return n[0]>0&&(r+=n[0]+e.getLanConfig("day")),n[1]>0&&(r+=n[1]+e.getLanConfig("hour")),n[2]>0&&(r+=n[2]+e.getLanConfig("minute")),n[3]>=0&&(r+=n[3]+e.getLanConfig("second")),r},t.formatSimpleTimeText=function(t){var e=this.formatTime(t),n=e.findIndex(function(t){return t>0});n<0&&(n=3);for(var r=""+e[n],o=n+1;o<=3;++o)r+=":"+this.prefixZero(e[o],2);return r},t.formatTime=function(t){t=Math.floor(.001*t);var e=[],n=Math.floor(t/86400);e.push(n),t-=86400*n;var r=Math.floor(t/3600);e.push(r),t-=3600*r;var o=Math.floor(t/60);return e.push(o),t-=60*o,e.push(t),e},t.formatNumberString=function(t){var e=Math.floor(t).toString();return e.length<=5?e:e.length<=8?(t-t%100)/1e4+"\u4e07":(t-t%1e4)/1e8+"\u4ebf"},t.RAW_MAT_PROP="__raw_mat_before_gray",t}();n.default=c,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","./CryptoJsMini":"CryptoJsMini"}],ViewHandler:[function(t,e,n){"use strict";cc._RF.push(e,"1c349gomttE/IFM/eGZiW9V","ViewHandler");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("./ViewModule")),c=a(t("./FFComponent")),u=a(t("../Enum/ViewType")),l=cc._decorator,f=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewID="",e.viewName="",e.viewType=u.default.Normal,e._clawHandles=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.onDisable=function(){this.hideGuides()},e.prototype.onAnimateFinish=function(){},e.prototype.open=function(t){this.initiateView(t)},e.prototype.close=function(){s.default.instance.popView(this)},e.prototype.message=function(){},e.prototype.hideGuides=function(){this._clawHandles},e.prototype.showGuide=function(t,e,n){void 0===n&&(n=!1)},i([f],e)}(c.default));n.default=p,cc._RF.pop()},{"../Enum/ViewType":"ViewType","./FFComponent":"FFComponent","./ViewModule":"ViewModule"}],ViewMessage:[function(t,e,n){"use strict";cc._RF.push(e,"c37dchY+ppKT5DyjpPNkc0f","ViewMessage"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewMessage=void 0,n.ViewMessage||(n.ViewMessage={}),cc._RF.pop()},{}],ViewModule:[function(t,e,n){"use strict";cc._RF.push(e,"5ed43pn/D5IboXBM/v61rW+","ViewModule");var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./Loader")),a=o(t("../Utils/IDGenerator")),s=o(t("./ViewHandler")),c=o(t("../Utils/Path")),u=o(t("./AutoRelease")),l=o(t("../Enum/ViewType")),f=o(t("../Component/View/BusyView/BusyView")),p=function(){function t(){this._activeViews=null,this._keepViews=null,this._loadingMap=null,this._activeViews=cc.js.createMap(!0),this._keepViews=cc.js.createMap(!0),this._loadingMap={},this._idGenerator=new a.default}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype._clearAd=function(){},t.prototype.translateView=function(t,e,n){this._clearActiveViews(),this._clearAd(),(n=this._handleOptions(n)).animate=!1,this.pushView(t,e,n)},t.prototype.pushView=function(t,e,n){n=this._handleOptions(n);var r=this._activeViews[t];if(r)n.onLoaded&&n.onLoaded(r.getComponent(s.default));else if(!n.only||!this._loadingMap[t])if(this._loadingMap[t])this._loadingMap[t].push(e);else if(this._loadingMap[t]=[e],r=this._keepViews[t]){var o=r.getComponent(u.default).prefab;this._loadPrefabSuccess(t,n,o)}else this.loadView(t,n)},t.prototype.loadView=function(t,e){var n=this,r=c.default.viewPath(t);e.bundle&&(r=c.default.getBundlePath(r,e.bundle)),this.showBusy(),i.default.loadRes(r,cc.Prefab,function(r){n._loadPrefabSuccess(t,e,r),n.hideBusy()},null)},t.prototype.showBusy=function(){f.default.show()},t.prototype.hideBusy=function(){f.default.hide()},t.prototype.popView=function(t,e){var n=t.viewID,r=t.viewName,o=this._activeViews[n];delete this._activeViews[n],o&&cc.isValid(o,!0)&&(r in this._keepViews?(o.active=!1,o.removeFromParent()):this._release(t)),e||this._clearAd()},t.prototype.popViewsByName=function(t){var e,n,o=[];for(var i in this._activeViews)(c=this._activeViews[i])&&c.name==t&&o.push(c);try{for(var a=r(o),s=a.next();!s.done;s=a.next()){var c,u=(c=s.value).getComponent(t);this.popView(u)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},t.prototype.popViewsByType=function(t,e){var n,o,i=[];for(var a in this._activeViews)(l=this._activeViews[a].getComponent(s.default))&&l.viewType==t&&(e&&e.includes(l.viewName)||i.push(l));try{for(var c=r(i),u=c.next();!u.done;u=c.next()){var l=u.value;this.popView(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}},t.prototype.popInvalidViews=function(){var t,e;try{for(var n=r(Object.keys(this._activeViews)),o=n.next();!o.done;o=n.next()){var i=o.value,a=this._activeViews[i];a&&cc.isValid(a,!0)||delete this._activeViews[i]}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.activeView=function(t){return this._activeViews[t]?this._activeViews[t]:null},t.prototype.getActiveViews=function(){return this._activeViews},t.prototype.activeViewsByName=function(t){var e=[];for(var n in this._activeViews){var r=this._activeViews[n];t==r.getComponent(s.default).viewName&&e.push(r)}return e.length<1&&(e=null),e},t.prototype.isWorkingByName=function(t){return!!(this._loadingMap[t]&&this._loadingMap[t].length>0)||!!this.activeView(t)},t.prototype.clear=function(){this._clearActiveViews(),this._clearCacheViews()},t.prototype.worldRoot=function(){return cc.find("Canvas/World")},t.prototype.lowerUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/LowerUI")},t.prototype.viewRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/View")},t.prototype.topUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/TopUI")},t.prototype.loadingRoot=function(){return cc.find("Canvas/MainCamera/Loading")},t.prototype.guideRoot=function(){return cc.find("Canvas/MainCamera/GuideLayer")},t.prototype.toast=function(t,e){this.pushView("ToastView",{text:t,value:e},{keep:!0,only:!0,bundle:c.default.MAIN_BUNDLE,zIndex:1})},t.prototype.sendMessage=function(t,e){for(var n in this._activeViews){var r=this._activeViews[n];r&&""!=r.name&&r.getComponent(s.default).message(t,e)}},t.prototype._clearActiveViews=function(){for(var t in this._activeViews)if("CommonLoadingView"!=t){var e=this._activeViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponent(s.default);this._release(n),delete this._activeViews[t]}}},t.prototype._clearCacheViews=function(){for(var t in this._keepViews){var e=this._keepViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponentInChildren(s.default);this._release(n)}}this._keepViews=cc.js.createMap(!0)},t.prototype._release=function(t){cc.isValid(t,!0)&&t.node.destroy()},t.prototype._loadPrefabSuccess=function(t,e,n){e.keep&&!this._keepViews[t]&&(this._keepViews[t]=i.default.instantiate(n));for(var r=this._loadingMap[t],o=0;o<r.length;++o){var a=r[o],s=i.default.instantiate(n);s.zIndex=e.zIndex;var c=t;e.only||(c=t+this._idGenerator.getNewId()),this._activeViews[c]=s;var u=s.getComponent(t);if(u||(u=s.addComponent(t)),u.viewID=c,u.viewName=t,s.name=t,s.active=!0,"CommonLoadingView"==s.name)s.parent=this.loadingRoot();else if("GuideTalkView"==s.name)s.parent=this.guideRoot();else if(u.viewType===l.default.World){var f=this.worldRoot(),p=f.getChildByName("Viewport"),h=f.getChildByName("content");s.parent=h,h.setContentSize(s.getContentSize()),h.setAnchorPoint(s.getAnchorPoint()),p.setContentSize(s.getContentSize()),p.setAnchorPoint(s.getAnchorPoint())}else u.viewType===l.default.LowerUI?s.parent=this.lowerUiRoot():u.viewType===l.default.TopUI?s.parent=this.topUiRoot():s.parent=this.viewRoot();u.open(a);var d=s.getChildByName("view");if(d){var _=cc.view.getVisibleSizeInPixel(),y=_.width/_.height>=.74,g=u.viewType===l.default.Normal;y&&g&&(d.scale=.5)}if(e.animate)if(d){var v=d.scale,m=1.05*v;d.scale=.2*v,cc.tween(d).to(.2,{scale:m}).delay(.05).to(.1,{scale:v}).call(u.onAnimateFinish.bind(u)).start()}else u.onAnimateFinish();else u.onAnimateFinish();e.onLoaded&&e.onLoaded(u)}delete this._loadingMap[t]},t.prototype._loadViewFail=function(t,e){console.warn(t+" load fial, err: ",e)},t.prototype._handleOptions=function(t){return t||(t={}),t.zIndex=t.zIndex?t.zIndex:0,t.keep=!!t.keep,"animate"in t||(t.animate=!0),t.only=!("only"in t&&!t.only),t},t._instance=null,t}();n.default=p,cc._RF.pop()},{"../Component/View/BusyView/BusyView":"BusyView","../Enum/ViewType":"ViewType","../Utils/IDGenerator":"IDGenerator","../Utils/Path":"Path","./AutoRelease":"AutoRelease","./Loader":"Loader","./ViewHandler":"ViewHandler"}],ViewType:[function(t,e,n){"use strict";var r;cc._RF.push(e,"9d3a20UkXNP7q7Q1CVDXIqb","ViewType"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.World=0]="World",t[t.LowerUI=1]="LowerUI",t[t.Normal=2]="Normal",t[t.TopUI=3]="TopUI"}(r||(r={})),n.default=r,cc._RF.pop()},{}],Viewport:[function(t,e,n){"use strict";cc._RF.push(e,"fcb8340FNFOmYHC5J0uJjjn","Viewport");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,c=t("../../Enum/SceneType"),u=a(t("../../Utils/Utils")),l=cc._decorator,f=l.ccclass,p=l.property;(function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e._cameraNode=null,e._startMove=!1,e._scrollEnabled=!0,e._screenRange=[-1,1],e._screenIndex=0,e._scrollDirection=s.None,e._indexSceneMap=new Map,e}return o(e,t),e.prototype.onLoad=function(){this._indexSceneMap.set(0,c.SceneType.HomeScene),this._cameraNode=cc.find("Canvas/MainCamera")},e.prototype.start=function(){this._initSwitchButtons(),this._registerTouch()},e.prototype._initSwitchButtons=function(){this._refreshSwitchButtons(),this.node.on("screen_switch",this._refreshSwitchButtons,this)},e.prototype._refreshSwitchButtons=function(){},e.prototype.whichScene=function(){return this._indexSceneMap.get(this._screenIndex)},e.prototype.switchScreen=function(t){this._moveToScreen(this._screenIndex+t)},e.prototype.isCurrentScreenLeftBound=function(){return this._screenIndex===this._screenRange[0]},e.prototype.isCurrentScreenRightBound=function(){return this._screenIndex===this._screenRange[1]},e.prototype.refreshRange=function(){var t=this.node.getContentSize(),e=this._cameraNode,n=e.getContentSize(),r=t.height,o=cc.v2(this._getScreenX(this._screenRange[0])-n.width/2,0),i=cc.v2(this._getScreenX(this._screenRange[1])+n.width/2,r);o=u.default.convertNodePositionToNode(this.content,o,e.parent),i=u.default.convertNodePositionToNode(this.content,i,e.parent),o.addSelf(cc.v2(n.width*e.anchorX,n.height*e.anchorY)),i.subSelf(cc.v2(n.width*(1-e.anchorX),n.height*(1-e.anchorY))),this._moveRange=cc.Rect.fromMinMax(o,i),this._jumpToScreen(0)},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.scrollTo=function(t,e,n){var r=this;if(void 0===n&&(n=!1),this._scrollEnabled||n){var o=this._getScreenIndex(t.x);t.x=this._getScreenX(o);var i=u.default.convertNodePositionToNode(this.node.parent,t,this._cameraNode.parent);this._validateCameraPos(i),this._cameraNode.stopAllActions(),e>0?cc.tween(this._cameraNode).to(e,{position:cc.v3(i)}).call(function(){o!=r._screenIndex&&(r._screenIndex=o,r.node.emit("screen_switch",o))}).start():(this._cameraNode.setPosition(i),o!=this._screenIndex&&(this._screenIndex=o,this.node.emit("screen_switch",o)))}},e.prototype.scrollToTop=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMax}).start():this._cameraNode.y=this._moveRange.yMax)},e.prototype.scrollToBottom=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMin}).start():this._cameraNode.y=this._moveRange.yMin)},e.prototype._registerTouch=function(){var t=this,e=this.node;e.on(cc.Node.EventType.TOUCH_START,function(e){t._scrollEnabled&&(t._startMove=!1,t._scrollDirection=s.None,t._cameraOriginPos=t._cameraNode.getPosition(),t._touchStartPos=e.getLocation(),t._touchStartTs=Date.now(),t._cameraNode.stopAllActions())},null),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(t._scrollEnabled){var n=e.getLocation(),r=t._touchStartPos.sub(n);if(!t._startMove)if(Math.abs(r.y)>=50)t._scrollDirection=s.Vertical,t._startMove=!0;else{if(!(Math.abs(r.x)>=70))return;t._scrollDirection=s.Horizontal,t._startMove=!0}return t._scrollDirection===s.Vertical?t._cameraNode.y=t._cameraOriginPos.y+r.y:t._cameraNode.x=t._cameraOriginPos.x+r.x,t._checkEdge(),!0}},null),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._scrollEnabled&&t._startMove&&t._correctScreen()},null),e.on(cc.Node.EventType.TOUCH_END,function(){t._scrollEnabled&&t._startMove&&t._inertialScroll()},null)},e.prototype._checkEdge=function(){var t=this._cameraNode.getPosition();this._validateCameraPos(t),this._cameraNode.setPosition(t)},e.prototype._validateCameraPos=function(t){t.x=cc.misc.clampf(t.x,this._moveRange.xMin,this._moveRange.xMax),t.y=cc.misc.clampf(t.y,this._moveRange.yMin,this._moveRange.yMax)},e.prototype._correctScreen=function(){var t=this._cameraNode.x/this._cameraNode.width;this._moveToScreen(t)},e.prototype._moveToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);if(this._cameraNode.x!==n){var r=.5*Math.abs(this._cameraNode.x-n)/this._cameraNode.width;cc.tween(this._cameraNode).to(r,{x:n}).start()}this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._jumpToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);this._cameraNode.x=n,this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._getScreenX=function(t){return t*(this._cameraNode.width+100)},e.prototype._getScreenIndex=function(t){var e,n=this._cameraNode.width+100;return e=t>=0?Math.floor((t+n/2)/n):Math.ceil((t-n/2)/n),cc.misc.clampf(e,this._screenRange[0],this._screenRange[1])},e.prototype._inertialScroll=function(){if(this._scrollDirection===s.Vertical){var t=Date.now()-this._touchStartTs,e=.5*(i=this._cameraNode.y-this._cameraOriginPos.y),n=this._cameraNode.y+e;if(0!==(n=cc.misc.clampf(n,this._moveRange.yMin,this._moveRange.yMax))){var r=.6*t;r>1&&(r=1),cc.tween(this._cameraNode).to(r,{y:n},{easing:"quadOut"}).start()}}else{var o=this._cameraNode.width,i=this._cameraNode.x-this._cameraOriginPos.x;if(Math.abs(i)>=.3*o){var a=Math.sign(i),c=this._screenIndex+a;this._moveToScreen(c)}else this._correctScreen()}},e.prototype.reset=function(){this._startMove=!1,this._scrollEnabled=!0,this._touchStartPos=cc.Vec2.ZERO,this._cameraOriginPos=cc.Vec2.ZERO,this._scrollDirection=s.None},e.prototype.onTouchBack=function(){var t=this;this._scrollEnabled=!1,cc.tween(this._cameraNode).to(.2,{position:cc.v3(this._cameraOriginPos)}).call(function(){t._startMove=!1,t._scrollEnabled=!0,t._touchStartPos=cc.Vec2.ZERO,t._cameraOriginPos=cc.Vec2.ZERO}).start()},i([p(cc.Node)],e.prototype,"content",void 0),i([p(cc.Button)],e.prototype,"_cameraNode",void 0),i([f],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Enum/SceneType":"SceneType","../../Utils/Utils":"Utils"}],WatchAdStatus:[function(t,e,n){"use strict";cc._RF.push(e,"e5017rTF0RAwJkTA+EmQdjB","WatchAdStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.WatchAdStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Cancel=1]="Cancel",t[t.Failed=2]="Failed",t[t.NotSupported=3]="NotSupported",t[t.TooFreq=4]="TooFreq",t[t.NetworkError=5]="NetworkError"}(n.WatchAdStatus||(n.WatchAdStatus={})),cc._RF.pop()},{}],eEdit:[function(t,e,n){"use strict";cc._RF.push(e,"a68b7IarHZBIbmX/Y49IFLI","eEdit");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eEdit=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,this.editbox.string=e,n&&(this.callback=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,1);this.editbox.string=""+e},e.prototype.onEditDidEnded=function(t){var e=t.string;this.callback&&this.callback(e)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.EditBox)],e.prototype,"editbox",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component);n.eEdit=l,cc._RF.pop()},{}],eGraph:[function(t,e,n){"use strict";cc._RF.push(e,"8402dhduE5Ov50TfvBqb+zA","eGraph");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGraph=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=(new cc.Vec3,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.LineGraph=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e.positions=[],e._x=100,e._y=18,e._points=10,e._limit=60,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.updateData=function(t){this.positions.length>=this._points&&this.positions.shift(),this.positions.push(t),this.drawLine()},e.prototype.init=function(t,e,n,r){void 0===n&&(n=60),void 0===r&&(r=10),this.node.name=t,this.NameLable.string=t,e&&(this.callback=e);var o=this.LineGraph.node.getContentSize();this._x=o.width,this._y=.85*o.height,this._limit=n,this._points=Math.max(Math.floor(r),3)},e.prototype.drawLine=function(){var t=this.positions.length;if(!(t<2)){this.LineGraph.clear();for(var e=.5*this._x,n=.5*this._y,r=this._y,o=this._x/(this._points-1),i=0;i<t;i++){var a=r*Math.min(this.positions[i]/this._limit,1.05)-n,s=i*o-e;0==i?this.LineGraph.moveTo(s,a):this.LineGraph.lineTo(s,a)}this.LineGraph.stroke()}},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.Graphics)],e.prototype,"LineGraph",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component));n.eGraph=l,cc._RF.pop()},{}],eGroup:[function(t,e,n){"use strict";cc._RF.push(e,"f6ba3QH8TJGU6L91bCnmd0p","eGroup");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGroup=void 0;var a=t("./eItem"),s=t("./eSlider"),c=t("./eToggle"),u=t("./eEdit"),l=t("./eList"),f=t("./eGraph"),p=cc._decorator,h=p.ccclass,d=p.property,_=new cc.Quat,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrow=null,e.tittle=null,e.menuItem=null,e.sliderItem=null,e.toggleItem=null,e.groupItem=null,e.editItem=null,e.listItem=null,e.graphItem=null,e.nameLabel=null,e._size=new cc.Size(200,30),e._item=null,e._isVisible=!0,e._groupName="",e._time=0,e}var n;return o(e,t),n=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this.setMenuNode()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupName",{set:function(t){this._groupName=t,this.nameLabel.string=t},enumerable:!1,configurable:!0}),e.prototype.getParent=function(){return this.parentComp},e.prototype.onEnable=function(){this.tittle.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_END,this.changeVisible,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this)},e.prototype.onDisable=function(){this.tittle.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this),this.tittle.off(cc.Node.EventType.TOUCH_END,this.changeVisible,this)},e.prototype.touchStart=function(){this._time=cc.director.getTotalTime()},e.prototype.dragPos=function(t){if(!(cc.director.getTotalTime()-this._time<90)){var e=this.node.parent,n=t.touch.getLocation();e.parent?e.setPosition(e.parent.convertToNodeSpaceAR(n)):e.setPosition(n.x,n.y)}},e.prototype.addGroup=function(t){var e=cc.instantiate(this.groupItem),r=e.getComponent(n);return r.size=this.size,e.parent=this.node,t&&(r.groupName=t),r.parentComp=this.getParent(),r},e.prototype.addSlider=function(t,e,n,r,o){var i=cc.instantiate(this.sliderItem);i.setContentSize(this._size),i.parent=this.node;var a=i.getComponent(s.eSlider);return a.slider.progress=n,a.editbox.string=""+n,a&&a.init(t,e,r),o&&(o=a),this},e.prototype.addEdit=function(t,e,n){var r=cc.instantiate(this.editItem);r.setContentSize(this._size),r.parent=this.node;var o=r.getComponent(u.eEdit);return o&&o.init(t,e,n),this},e.prototype.addGraph=function(t,e,n,r){void 0===n&&(n=60),void 0===r&&(r=10);var o=cc.instantiate(this.graphItem);o.setContentSize(this._size),o.parent=this.node;var i=o.getComponent(f.eGraph);return i&&i.init(t,e,n,r),this},e.prototype.addItem=function(t,e){var n=cc.instantiate(this.menuItem);n.setContentSize(this._size),n.parent=this.node;var r=n.getComponent(a.eItem);return r&&r.init(t,e),this},e.prototype.addList=function(t,e){var n=cc.instantiate(this.listItem);n.setContentSize(cc.size(this._size.width,n.getContentSize().height)),n.parent=this.node;var r=n.getComponent(l.eList);return r&&r.init(t,e),this},e.prototype.addToggle=function(t,e,n){void 0===n&&(n=!0);var r=cc.instantiate(this.toggleItem);r.setContentSize(this._size),r.parent=this.node;var o=r.getComponent(c.eToggle);return o.toggle.isChecked=n,o&&o.init(t,e),this},e.prototype.setMenuNode=function(){var t=this;this.resetSize(this.node);var e=this.node.children;e.length>0&&e.forEach(function(e){t.resetSize(e)})},e.prototype.resetSize=function(t){t.setContentSize(this._size)},e.prototype.resetItem=function(t){this._item!=t&&this._item&&this._item.onNormal(),this._item=t},e.prototype.changeVisible=function(){this._isVisible=!this._isVisible;var t=this.node.children;this.arrow.rotation=cc.Quat.fromAngleZ(_,this._isVisible?-90:0);for(var e=1;e<t.length;e++)t[e].active=this._isVisible},i([d(cc.Node)],e.prototype,"arrow",void 0),i([d(cc.Node)],e.prototype,"tittle",void 0),i([d(cc.Prefab)],e.prototype,"menuItem",void 0),i([d(cc.Prefab)],e.prototype,"sliderItem",void 0),i([d(cc.Prefab)],e.prototype,"toggleItem",void 0),i([d(cc.Prefab)],e.prototype,"groupItem",void 0),i([d(cc.Prefab)],e.prototype,"editItem",void 0),i([d(cc.Prefab)],e.prototype,"listItem",void 0),i([d(cc.Prefab)],e.prototype,"graphItem",void 0),i([d(cc.Label)],e.prototype,"nameLabel",void 0),n=i([h],e)}(cc.Component);n.eGroup=y,cc._RF.pop()},{"./eEdit":"eEdit","./eGraph":"eGraph","./eItem":"eItem","./eList":"eList","./eSlider":"eSlider","./eToggle":"eToggle"}],eItem:[function(t,e,n){"use strict";cc._RF.push(e,"25493LQs4pHSqAzfHZVO6iA","eItem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eItem=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component);n.eItem=l,cc._RF.pop()},{}],eList:[function(t,e,n){"use strict";cc._RF.push(e,"07308iMMmFGWa0m3+/sDKOp","eList");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eList=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TouchArea=null,e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.ListLabel=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.TouchArea.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.TouchArea.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.ListLabel.string=String(t)||this.ListLabel.string)}},i([c(cc.Node)],e.prototype,"TouchArea",void 0),i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.Label)],e.prototype,"ListLabel",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component);n.eList=l,cc._RF.pop()},{}],eMenu:[function(t,e,n){"use strict";cc._RF.push(e,"85cb9IBtahOTa27eSlpIePB","eMenu");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eMenu=void 0;var a=t("./eGroup"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GroupPrefab=null,e._size=new cc.Size(200,30),e._groups=new Map,e._isVisible=!0,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemSize",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!1,configurable:!0}),e.prototype.addGroup=function(t){var e=cc.instantiate(this.GroupPrefab),n=e.getComponent(a.eGroup);return t&&(n.groupName=t,this._groups.set(t,e)),n.parentComp=this,n.size=this._size,e.parent=this.node,n},e.prototype.getGroup=function(t){return this._groups.get(t)||null},e.prototype.deleteGroup=function(t){var e=this.getGroup(t);e&&(this._groups.delete(t),e.removeFromParent(),e.destroy())},e.prototype.resetSize=function(t){t.setContentSize(this.MenuItemSize)},i([u(cc.Size)],e.prototype,"MenuItemSize",null),i([u(cc.Prefab)],e.prototype,"GroupPrefab",void 0),i([u({visible:!1})],e.prototype,"_size",void 0),i([c],e)}(cc.Component);n.eMenu=l,cc._RF.pop()},{"./eGroup":"eGroup"}],eSlider:[function(t,e,n){"use strict";cc._RF.push(e,"b79efkp/cJCiL0dI9mTYc6U","eSlider");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eSlider=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.slider=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e._scale=1,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e),n&&(this._scale=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,this._scale);this.slider.progress=e/this._scale,this.editbox.string=""+e},e.prototype.onSliderCallback=function(t){var e=t.progress*this._scale;this.editbox.string=""+e,this.callback&&this.callback(e)},e.prototype.onEditDidEnded=function(t){var e=cc.clamp(Number(t.string)||0,0,this._scale);this.callback&&this.callback(e),this.slider.progress=e/this._scale},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){this.callback&&this.callback(this.slider.progress)},i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.Slider)],e.prototype,"slider",void 0),i([c(cc.EditBox)],e.prototype,"editbox",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component);n.eSlider=l,cc._RF.pop()},{}],eToggle:[function(t,e,n){"use strict";cc._RF.push(e,"4a275KyfYtI+aBzBrwqJDOW","eToggle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eToggle=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.toggle=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onToggleCallback=function(t){this.callback&&this.callback(t.isChecked)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},i([c(cc.Sprite)],e.prototype,"BgSprite",void 0),i([c(cc.Sprite)],e.prototype,"SideSprite",void 0),i([c(cc.Label)],e.prototype,"NameLable",void 0),i([c(cc.Toggle)],e.prototype,"toggle",void 0),i([c(cc.Color)],e.prototype,"MenuItemBgColor",null),i([c(cc.Color)],e.prototype,"MenuItemSideColor",null),i([c({visible:!1})],e.prototype,"BgColor",void 0),i([c({visible:!1})],e.prototype,"SideColor",void 0),i([s],e)}(cc.Component);n.eToggle=l,cc._RF.pop()},{}]},{},["CollisionWrapper","EntityTag","GameScene","StartScene","Viewport","Terrain","BattleView","BusyCircle","BusyView","HomeWorld","LoadingView","eEdit","eGraph","eGroup","eItem","eList","eMenu","eSlider","eToggle","Profiler","AchievementStatus","AdType","ClawGuideType","ItemType","SceneType","ViewMessage","ViewType","WatchAdStatus","Battle","PlayerData","BattleFlow","BattleStats","EnemyStateMachine","GuardStateMachine","Ability","BaseEntity","Bullet","Enemy","EntityManager","Guard","IEntityContext","Player","Game","GameDefine","IBattleContext","AdSystem","BagSystem","BaseSystem","BattleSystem","DataSaver","HomeSystem","ISystem","Common","AbilityConfig","BulletConfig","EnemyConfig","GuardConfig","LanConfig","LevelConfig","UpgradeConfig","AdData","BagData","BattleData","HomeData","IBaseData","LocalData","UserData","Audio","AutoRelease","ConfigManager","Db","DbMap","LocalStorage","RemoteStorage","FFComponent","Loader","Loading","StartSceneLoading","Statistics","ViewHandler","ViewModule","BattleEndView","BattleUI","SettingView","ToastView","UpgradeCard","UpgradeView","Action","CryptoJsMini","Heap","IDGenerator","NodePool","Path","Platform","Property","Queue","StateMachine","Utils"]);