window.__require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AbilityConfig:[function(t,e,n){"use strict";cc._RF.push(e,"45e0fazgstH9Ij7dgwMHcUT","AbilityConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.BuffType=n.AbilityRangeType=void 0,function(t){t[t.Single=0]="Single",t[t.Area=1]="Area"}(n.AbilityRangeType||(n.AbilityRangeType={})),function(t){t[t.Freeze=0]="Freeze",t[t.MoveSpeed=1]="MoveSpeed",t[t.Attack=2]="Attack",t[t.AttackSpeed=3]="AttackSpeed",t[t.DOT=4]="DOT"}(n.BuffType||(n.BuffType={})),cc._RF.pop()},{}],Ability:[function(t,e,n){"use strict";cc._RF.push(e,"447e7xmzA5CsJl0Y1MYTcj6","Ability");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Ability=void 0;var s=a(t("../../Component/Gameplay/CollisionWrapper")),c=a(t("../../Component/Gameplay/EntityTag")),l=t("../../Interface/Config/AbilityConfig"),u=t("../../Module/ConfigManager"),f=a(t("../../Utils/Path")),p=a(t("../../Utils/Utils")),h=t("./BaseEntity"),d=t("./Enemy"),_=function(t){function e(e,n){var o,i=t.call(this,e,n)||this;return i._tick=0,i._isInEffect=!1,i.config=u.ConfigManager.instance.getAbilityConfig(n),i.config&&i.config.buffId&&(i.buff=u.ConfigManager.instance.getBuffConfig(i.config.buffId)),i._totalDuration=i.config.damageDelay+(null===(o=i.buff)||void 0===o?void 0:o.duration),i}return i(e,t),e.prototype.onAvatarReady=function(){var t=p.default.getComponentInChildren(this.avatar,cc.Collider);t.enabled=!0,p.default.getOrAddComponent(t.node,c.default).entity=this;var e=p.default.getOrAddComponent(t.node,s.default);e.onEnter.clear(),e.onEnter.add(this.onCollisionEnter,this),e.onExit.clear(),e.onExit.add(this.onCollisionExit,this),this._tick=0,this._enemyUids=new Set,this.playAnim(null)},e.prototype.getAssetPath=function(){return f.default.getEntityPath(this.config.asset)},e.prototype.update=function(t){var e,n,o,i,a,s,c,u;if(this.avatar){var f=this._tick;if(this._tick+=t,!this._isInEffect&&this._tick>=this.config.damageDelay){this._isInEffect=!0,this._affectEnemy=[];try{for(var h=r(this._enemyUids),d=h.next();!d.done;d=h.next()){var _=d.value,y=this._entityContext.getEnemy(_);this._affectEnemy.push(y)}}catch(R){e={error:R}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}try{for(var g=r(this._affectEnemy),v=g.next();!v.done;v=g.next()){y=v.value;var m=p.default.randomRangeInt(this.config.damageRange[0],this.config.damageRange[1]+1);y.hurt(m,this.owner),this.buff&&y.addBuff(this.buff)}}catch(E){o={error:E}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}}if(this._isInEffect){if(!this.buff&&this.buff.type!=l.BuffType.DOT)return void this._entityContext.removeAbility(this.uid);if(this.buff&&this._tick>=this._totalDuration)try{for(var b=r(this._affectEnemy),w=b.next();!w.done;w=b.next())(y=w.value).removeBuff(this.buff)}catch(O){a={error:O}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(this.buff.type==l.BuffType.DOT){var S=Math.floor((f-this.config.damageDelay)/(this.buff.duration/this.buff.count)),C=Math.floor((this._tick-this.config.damageDelay)/(this.buff.duration/this.buff.count));if(C>S&&C<=this.buff.count&&C>0)for(var M=S;M<C;++M)try{for(var P=(c=void 0,r(this._affectEnemy)),A=P.next();!A.done;A=P.next())(y=A.value).hurt(this.buff.damage,this.owner)}catch(I){c={error:I}}finally{try{A&&!A.done&&(u=P.return)&&u.call(P)}finally{if(c)throw c.error}}}this._tick>=this._totalDuration&&this._entityContext.removeAbility(this.uid)}}},e.prototype.onCollisionEnter=function(t){if(!this._isInEffect){var e=t.node.getComponent(c.default);if(null!=e.entity)if(e.entity instanceof d.Enemy){var n=e.entity;this._enemyUids.add(n.uid)}else cc.error("[Ability] onCollision, other entity is not Enemy: "+e.entity);else cc.error("[Ability] onCollision, other entity is null")}},e.prototype.onCollisionExit=function(t){if(!this._isInEffect){var e=t.node.getComponent(c.default);if(null!=e.entity)if(e.entity instanceof d.Enemy){var n=e.entity;this._enemyUids.delete(n.uid)}else cc.error("[Ability] onCollision, other entity is not Enemy: "+e.entity);else cc.error("[Ability] onCollision, other entity is null")}},e.prototype.toString=function(){return"Ability: "+this.config.id+"["+this.uid+"]"},e}(h.BaseEntity);n.Ability=_,cc._RF.pop()},{"../../Component/Gameplay/CollisionWrapper":"CollisionWrapper","../../Component/Gameplay/EntityTag":"EntityTag","../../Interface/Config/AbilityConfig":"AbilityConfig","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./BaseEntity":"BaseEntity","./Enemy":"Enemy"}],AchievementStatus:[function(t,e,n){"use strict";cc._RF.push(e,"377c8p9LOZCEagSm3Gw9KEk","AchievementStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.AchievementStatus=void 0,function(t){t[t.New=0]="New",t[t.Finish=1]="Finish",t[t.GetReward=2]="GetReward"}(n.AchievementStatus||(n.AchievementStatus={})),cc._RF.pop()},{}],Action:[function(t,e,n){"use strict";cc._RF.push(e,"75033kg3tJHrbYe4hNpS6Tm","Action");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.Action3=n.Action2=n.Action1=n.Action=n.CallBack=void 0;var s=function(){function t(t,e){this.dirty=!1,this.fun=t,this.thisArg=e}return t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.dirty){if(null!=this.thisArg)return(t=this.fun).call.apply(t,a([this.thisArg],e));this.fun.apply(this,a(e))}},t.prototype.isOriginFrom=function(t,e){return this.fun==t&&this.thisArg==e},Object.defineProperty(t.prototype,"originFun",{get:function(){return this.fun},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originThisArg",{get:function(){return this.thisArg},enumerable:!1,configurable:!0}),t}();n.CallBack=s;var c=function(){function t(){this.callBackList=[],this.callingRemNum=-1}return t.prototype.add=function(t,e){null!=t&&-1==this.getFunIndex(t,e)&&this.callBackList.push(new s(t,e))},t.prototype.remove=function(t,e){if(null!=t)if(this.callingRemNum>=0){this.callingRemNum++;var n=this.getCallBack(t,e);null!=n&&(n.dirty=!0)}else{var o=this.getFunIndex(t,e);-1!=o&&this.callBackList.splice(o,1)}},t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0!=this.callBackList.length){this.callingRemNum=0;for(var o=0;o<this.callBackList.length;o++)(t=this.callBackList[o]).call.apply(t,a(e));if(this.callingRemNum>0)for(o=0;o<this.callBackList.length;)this.callBackList[o].dirty?this.callBackList.splice(o,1):o++;this.callingRemNum=-1}},t.prototype.includes=function(t,e){return null!=t&&-1!=this.getFunIndex(t,e)},t.prototype.clear=function(){this.callBackList.length>0&&(this.callBackList.length=0)},Object.defineProperty(t.prototype,"count",{get:function(){return this.callBackList.length},enumerable:!1,configurable:!0}),t.prototype.getFunIndex=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return n;return-1},t.prototype.getCallBack=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return this.callBackList[n];return null},t}();n.Action=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e){t.prototype.call.call(this,e)},e}(c);n.Action1=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n){t.prototype.call.call(this,e,n)},e}(c);n.Action2=u;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n,o){t.prototype.call.call(this,e,n,o)},e}(c);n.Action3=f,cc._RF.pop()},{}],AdData:[function(t,e,n){"use strict";cc._RF.push(e,"2e756a0UeREqZ7cWriiZTfq","AdData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],AdSystem:[function(t,e,n){"use strict";cc._RF.push(e,"714a0rBS+BD1JDEbTURyGDY","AdSystem");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.AdSystem=void 0;var a,s,c=r(t("../../Component/View/BusyView/BusyView")),l=t("../../Enum/WatchAdStatus"),u=t("../../Module/Statistics"),f=r(t("../../Utils/Platform")),p=r(t("../../Utils/Utils")),h=r(t("../Game")),d=window.wx||window.qq||window.tt;(function(t){t[t.Bottom=0]="Bottom",t[t.Top=1]="Top"})(a||(a={})),function(t){t[t.LeftTop=0]="LeftTop",t[t.RightTop=1]="RightTop",t[t.LeftBottom=2]="LeftBottom",t[t.RightBottom=3]="RightBottom"}(s||(s={}));var _=["adunit-cb64c7519047bf9b","adunit-d9ba532529f7253a","adunit-28a93ffd22f5e0b6"],y=["d9298a9cda8267bb8c992362f3fa725b"],g=["t3rfli7j2e11521gk7"],v=function(){function t(){this._currentAdIdPlayCount=0,this._userAdData=null,this._tooFreqVideoTimes=0,this._banVideo=!1,this._banSec=0,this._insertAd=null,this._insertAdReady=!1,this.name="AdSystem"}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){return o(this,void 0,void 0,function(){return i(this,function(){return this._videoCloseCallbacks=[],f.default.isWx()?(this.AD_UNIT_IDS=_,this.BANNER_UNIT_ID="adunit-718b1ee1ee29d4de",this.INSERT_UNIT_ID="adunit-5c469a4740b245a2"):f.default.isQQ()?(this.AD_UNIT_IDS=y,this.BANNER_UNIT_ID="b267d396b718f42e17a170fb179d5ae4",this.INSERT_UNIT_ID="f801dc59ee5188231adad844e50dee6c"):f.default.isBytedance()?(this.AD_UNIT_IDS=g,this.BANNER_UNIT_ID="422789hidi56439b7k",this.INSERT_UNIT_ID="27eb4hji0ek5jnkeef"):this.AD_UNIT_IDS=[],this.supportVideoAd()&&(this.prepareVideoAd(),this.prepareBannerAd()),this.supportInsertAd&&this.prepareInsertAd(),this._initInsertAd(),[2]})})},t.prototype._initInsertAd=function(){var t=this;this.supportInsertAd()&&cc.game.on(cc.game.EVENT_SHOW,function(){t.showInsertAd()},this)},t.prototype.logicUpdate=function(t){this._banVideo&&(this._banSec-=t,this._banSec<=0&&(this._banSec=0,this._banVideo=!1))},t.prototype.destroy=function(){this._videoAd&&(this._videoAd.destroy(),this._videoAd=null),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null),this._customAd&&(this._customAd.destroy(),this._customAd=null),t._instance=null},t.prototype.supportVideoAd=function(){return!!f.default.isTest()||(f.default.isMiniGame()?null!=d.createRewardedVideoAd:!!f.default.isMobile())},t.prototype.supportInsertAd=function(){return!1},t.prototype.supportBannerAd=function(){return!!f.default.isTest()||(f.default.isMiniGame()?null!=d.createBannerAd&&!f.default.isBytedance():!!f.default.isMobile())},t.prototype.supportCustomAd=function(){return!!f.default.isWx()&&null!=wx.createCustomAd},t.prototype.getVideoAdId=function(){return this.AD_UNIT_IDS[this._videoAdIdIndex]},t.prototype.prepareVideoAd=function(){var t=this;if(this.supportVideoAd())if(f.default.isTest())this._videoReady=!0;else if(f.default.isWx()||f.default.isBytedance()){this._videoAd&&(console.warn("[AdSystem] video ad already exists, id '"+this.getVideoAdId()+"', destroy it"),this._videoAd.destroy()),null==this._videoAdIdIndex?this._videoAdIdIndex=Math.floor(Math.random()*this.AD_UNIT_IDS.length):this._videoAdIdIndex=(this._videoAdIdIndex+1)%this.AD_UNIT_IDS.length;var e=this.getVideoAdId();this._currentAdIdPlayCount=0,this._videoReady=!1,this._videoAd=d.createRewardedVideoAd({adUnitId:e}),this._videoAd.onLoad(function(){t._videoReady=!0}),this._videoAd.onError(function(e){console.warn("[AdSystem] video '"+t.getVideoAdId()+"' load failed! errMsg: "+e.errMsg+", errCode: "+e.errCode)}),this._videoAd.onClose(function(e){e&&e.isEnded||void 0===e?t.dispatchVideoClose(l.WatchAdStatus.Success):t.dispatchVideoClose(l.WatchAdStatus.Cancel)})}},t.prototype.onVideoClose=function(t){this._videoCloseCallbacks.push(t)},t.prototype.dispatchVideoClose=function(t){this._videoCloseCallbacks.forEach(function(e){return e(t)}),this._videoCloseCallbacks.splice(0)},t.prototype.isVideoAdReady=function(){return f.default.isWx()||f.default.isBytedance()?this._videoReady:!!f.default.isMobile()||!!f.default.isQQ()},t.prototype.showVideoAd=function(t,e){var n=this;return void 0===e&&(e=!1),this._videoCloseCallbacks.length=0,new Promise(function(r){return o(n,void 0,void 0,function(){var n=this;return i(this,function(){return!e&&this._banVideo?(p.default.formatTimeText(1e3*this._banSec),r(l.WatchAdStatus.TooFreq),[2]):(c.default.show(),this.onVideoClose(function(o){if(c.default.hide(),o===l.WatchAdStatus.Success){u.Statistic.instance.addLog(u.LogEvent.WATCH_AD,{area:t,result:u.AD_RESULT.SUCCESS},!0);var i=h.default.instance.time();n._lastVideoTs?(i-n._lastVideoTs<15e3&&(e||n._tooFreqVideoTimes++,n._tooFreqVideoTimes>=10&&(n._banVideo=!0,n._tooFreqVideoTimes=0)),n._lastVideoTs=i):n._lastVideoTs=i}else o===l.WatchAdStatus.Cancel?u.Statistic.instance.addLog(u.LogEvent.WATCH_AD,{area:t,result:u.AD_RESULT.CANCEL},!0):o===l.WatchAdStatus.Failed&&u.Statistic.instance.addLog(u.LogEvent.WATCH_AD,{area:t,result:u.AD_RESULT.FAILED},!0);r(o)}),this.isVideoAdReady()&&(f.default.isTest()?this.dispatchVideoClose(l.WatchAdStatus.Success):f.default.isWx()||f.default.isBytedance()?this._videoAd.show().catch(function(t){console.warn("[AdSystem] showVideoAd: '"+n.getVideoAdId()+"', failed first time, retry, errMsg: "+t.errMsg+", errCode: "+t.errCode),n._videoAd.load().then(function(){return n._videoAd.show()}).catch(function(t){console.warn("[AdSystem] showVideoAd: '"+n.getVideoAdId()+"', failed second time, errMsg: "+t.errMsg+", errCode: "+t.errCode),n.dispatchVideoClose(l.WatchAdStatus.Failed),n.prepareVideoAd()})}):f.default.isMobile()||f.default.isQQ()),[2])})})})},t.prototype.prepareInsertAd=function(){var t=this;if(this.supportInsertAd()&&f.default.isMiniGame()){this._insertAd&&this._insertAd.destroy();var e=this.INSERT_UNIT_ID;if(this._insertAdReady=!1,this._insertAd=d.createInterstitialAd({adUnitId:e}),!this._insertAd)return;this._insertAd.onLoad(function(){t._insertAdReady=!0,console.log("[AdSystem] insertad load success")}),this._insertAd.onError(function(e){console.warn("[AdSystem] video '"+t.getVideoAdId()+"' load failed! errMsg: "+e.errMsg+", errCode: "+e.errCode)}),this._insertAd.onClose(function(e){e&&e.isEnded||void 0===e?t.dispatchVideoClose(l.WatchAdStatus.Success):t.dispatchVideoClose(l.WatchAdStatus.Cancel)})}},t.prototype.prepareBannerAd=function(){var t=this;if(this.supportBannerAd()&&f.default.isMiniGame()){this._bannerAd&&(this._bannerAd.hide(),this._bannerAd.destroy()),this._bannerShowing=!1,this._bannerSize=null;var e=d.getSystemInfoSync(),n=e.screenWidth,o=e.screenHeight,i=n;this._bannerAd=d.createBannerAd({adUnitId:this.BANNER_UNIT_ID,style:{left:0,top:o,width:i,height:void 0}}),this._bannerAd.onResize(function(e){t._bannerSize=e}),this._bannerAd.onLoad(function(){}),this._bannerAd.onError(function(t){t.errMsg,t.errCode})}},t.prototype.showInsertAd=function(){var t=this;if(this.isMainGuideDone())return new Promise(function(e){t.supportInsertAd()?(t._insertAdShowing&&t.prepareInsertAd(),t._insertAdShowing=!0,t._insertAd&&t._insertAd.show().then(function(){u.Statistic.instance.addLog(u.LogEvent.SHOW_INSERT_AD,{area:"area_insertAd",result:u.AD_RESULT.SUCCESS},!0),e(l.WatchAdStatus.Success)}).catch(function(){u.Statistic.instance.addLog(u.LogEvent.SHOW_INSERT_AD,{area:"area_insertAd",result:u.AD_RESULT.FAILED},!0),e(l.WatchAdStatus.Failed)})):e(l.WatchAdStatus.NotSupported)})},t.prototype.hideInsertAd=function(){this._insertAd&&(this._insertAdShowing=!1,f.default.isMiniGame()&&this.prepareInsertAd())},t.prototype.showBannerAd=function(t,e){var n=this;if(this.isMainGuideDone())return new Promise(function(t){if(n.supportBannerAd())if(n._bannerShowing&&n.prepareBannerAd(),n._bannerShowing=!0,f.default.isMiniGame()){if(e===a.Bottom){var o=d.getSystemInfoSync().screenHeight;n._bannerSize?n._bannerAd.style.top=o-n._bannerSize.height:n._bannerAd.onResize(function(t){n._bannerAd.style.top=o-t.height})}else n._bannerAd.style.top=0;n._bannerAd.show().then(function(){u.Statistic.instance.addLog(u.LogEvent.SHOW_BANNER_AD),t(l.WatchAdStatus.Success)}).catch(function(){return t(l.WatchAdStatus.Failed)})}else cc.sys.platform,cc.sys.ANDROID;else t(l.WatchAdStatus.NotSupported)})},t.prototype.isMainGuideDone=function(){return!0},t.prototype.hideBannerAd=function(){this._bannerShowing&&(this._bannerShowing=!1,f.default.isMiniGame()?this.prepareBannerAd():cc.sys.platform===cc.sys.ANDROID&&SDKBridge.getInstance().hideBannerAd())},t.prototype.showCustomAd=function(t){var e=this;return new Promise(function(n){if(e.supportCustomAd()){e.hideCustomAd();var o=30,i=50,r=wx.getSystemInfoSync(),a=r.screenWidth,c=r.screenHeight;switch(t){case s.LeftTop:o=30,i=50;break;case s.RightTop:o=a-68-30,i=50;break;case s.LeftBottom:o=30,i=c-106-50;break;case s.RightBottom:o=a-68-30,i=c-106-50}e._customAd=wx.createCustomAd({adUnitId:"adunit-e4da9a81c84b239a",adIntervals:30,style:{left:o,top:i,fixed:!1}}),e._customAd.onLoad(function(){console.log("[AdSystem] custom load success")}),e._customAd.onError(function(t){var e=t.errMsg,n=t.errCode;console.warn("[AdSystem] custom load failed! errMsg: "+e+", errCode: "+n)}),e._customAd.show().then(function(){return n(l.WatchAdStatus.Success)}).catch(function(){return n(l.WatchAdStatus.Failed)})}else n(l.WatchAdStatus.NotSupported)})},t.prototype.hideCustomAd=function(){f.default.isWx()&&this._customAd&&(this._customAd.destroy(),this._customAd=null)},t.prototype.showSplashAd=function(){cc.sys.platform===cc.sys.ANDROID&&SDKBridge.getInstance().showSplashAd(function(t,e){if(console.log("splash",t,e),0===t){var n=e.status;u.Statistic.instance.addLog(u.LogEvent.SHOW_SPLASH_AD,{status:n},!0)}})},t.prototype.showSplashIfNotFirstTime=function(){cc.sys.platform,cc.sys.ANDROID},t._instance=null,t.BannerLayoutType=a,t.CustomAdLayoutType=s,t.WatchAdStatus=l.WatchAdStatus,t}();n.AdSystem=v,cc._RF.pop()},{"../../Component/View/BusyView/BusyView":"BusyView","../../Enum/WatchAdStatus":"WatchAdStatus","../../Module/Statistics":"Statistics","../../Utils/Platform":"Platform","../../Utils/Utils":"Utils","../Game":"Game"}],AdType:[function(t,e,n){"use strict";cc._RF.push(e,"e66abjYpu5HuJkAV9BtaBp0","AdType"),Object.defineProperty(n,"__esModule",{value:!0}),n.AdType=void 0,function(t){t[t.AdStore=0]="AdStore"}(n.AdType||(n.AdType={})),cc._RF.pop()},{}],Animator:[function(t,e,n){"use strict";cc._RF.push(e,"ed283wz92BMFIZR/4Tg3G6y","Animator");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Module/FFComponent")),c=cc._decorator,l=c.ccclass,u=(c.property,c.requireComponent),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._anim=null,e._states=new Set,e._stateLoaded=new Map,e}return i(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){var t=this;this._anim||(this._anim=this.getComponent(cc.Animation),this._anim.getClips().forEach(function(e){var n=e.name;t._states.add(n),t._stateLoaded.set(n,!0)}))},e.prototype.getState=function(){return this._state},e.prototype.register=function(t,e,n){var o=this;void 0===n&&(n=!1),n&&(this._defaultState=t,this._state=t),this._states.add(t),this._stateLoaded.set(t,!1),this.loadAutoRes(e,cc.AnimationClip,function(e){o.init(),o._anim.addClip(e,t),o._stateLoaded.set(t,!0),o._state&&o._state===t&&o._tryPlay(t,o._playParams)},this)},e.prototype.play=function(t,e){return void 0===e&&(e=null),!this._anim&&this.init(),this._state=t,this._playParams=e,this._tryPlay(t,e)},e.prototype.stop=function(){this._state=null,this._playParams=null,this._anim&&this._anim.stop()},e.prototype.setSpeed=function(t,e){this._animState&&(e?this._state===e&&(this._animState.speed=t):this._animState.speed=t)},e.prototype._tryPlay=function(t,e){var n,o=this;if(this._stateLoaded.get(t))return this.init(),e&&e.reload||this._anim.pause(),this._anim.targetOff(this),this._animState=this._anim.play(t),this._animState.speed=null!==(n=null==e?void 0:e.speed)&&void 0!==n?n:1,e&&e.repeat&&(this._animState.repeatCount=e.repeat),this._anim.once(cc.Animation.EventType.FINISHED,function(){o._defaultState&&o.play(o._defaultState),e&&e.onFinish&&e.onFinish()},this),this._animState},r([l,u(cc.Animation)],e)}(s.default);n.default=f,cc._RF.pop()},{"../../Module/FFComponent":"FFComponent"}],AppUpdater:[function(t,e,n){"use strict";cc._RF.push(e,"10583s2q3xAmYlUS78vaasT","AppUpdater");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("../Modul/GameDefine")),r=o(t("./Platform")),a=o(t("./Utils")),s=function(){function t(){}return t.checkUpdate=function(){if(r.default.isMiniGame()){var t=window.wx||window.qq||window.tt;if(console.log("[AppUpdater] support UpdateManager: "+!!t.getUpdateManager),t.getUpdateManager){var e=t.getUpdateManager();e.onCheckForUpdate(function(t){console.log("[AppUpdater] onCheckForUpdate: "+t.hasUpdate)}),e.onUpdateReady(function(){console.log("[AppUpdater] onUpdateReady"),t.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(t){console.log("[AppUpdater] onUpdateReady, confirm? "+t.confirm),t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("[AppUpdater] onUpdateFailed")})}}},t.checkPackageUpdate=function(t){var e=this;if(r.default.isIOS())return console.log("ios, no new version"),void(t.onNoNeedUpdate&&t.onNoNeedUpdate());var n=new XMLHttpRequest;n.responseType="json",n.open("GET","https://island-1253189677.cos.ap-guangzhou.myqcloud.com/apks/version.json",!0),n.setRequestHeader("content-type","application/json"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var o=n.response;if(o){var r=o.version,s=o.url;a.default.compareVersion(i.default.VERSION,r)<0?(console.log("has new version"),e.startDownloadApk(s,r),t.onNeedUpdate&&t.onNeedUpdate()):(console.log("no new version"),t.onNoNeedUpdate&&t.onNoNeedUpdate())}else console.error("res invaild")}},n.send()},t.startDownloadApk=function(t,e){t&&SDKBridge.getInstance().downloadApk({url:t,fileName:"WonderIsland_"+e+".apk",notify:!1},null)},t}();n.default=s,cc._RF.pop()},{"../Modul/GameDefine":void 0,"./Platform":"Platform","./Utils":"Utils"}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"1e35aOjGm5Iv54Fk3OYkaFq","Audio");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("../Utils/Path")),r=o(t("./Loader")),a=function(){function t(){this._audioClipCache=[],this.musicMap={},this.stopEffects=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){cc.audioEngine.setMaxAudioInstance(4)},t.prototype.play=function(t,e,n){e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?r.default.loadRes(t,cc.AudioClip,function(t){cc.audioEngine.play(t,e,n)},null):cc.audioEngine.play(t,e,n)},t.prototype.playEffect=function(t,e,n,o){var i,a=this;e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?(t=this.getRealAudioPath(t,o),r.default.loadRes(t,cc.AudioClip,function(t){a._audioClipCache.push(t.nativeUrl),cc.audioEngine.play(t,e,n)},null)):(i=t,a._audioClipCache.push(i.nativeUrl),cc.audioEngine.play(i,e,n))},t.prototype.playMusic=function(t,e,n,o){var i=this;if(null==n&&(n=!0),"string"==typeof t)t=this.getRealAudioPath(t,e),r.default.loadRes(t,cc.AudioClip,function(t){var e=cc.audioEngine.playMusic(t,n);i.musicMap[e]||(i.musicMap[e]=!0),o&&cc.audioEngine.setFinishCallback(e,function(){setTimeout(function(){o()},100)})},null);else{var a=cc.audioEngine.playMusic(t,n);this.musicMap[a]||(this.musicMap[a]=!0)}},t.prototype.getRealAudioPath=function(t,e){return e||(e=i.default.AUDIO_BUNDLE),e&&(t=i.default.getBundlePath(t,e)),t},t.prototype.stopMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.stop(e),this.musicMap[t]=!1)}},t.prototype.musicVolume=function(){return cc.audioEngine.getMusicVolume()},t.prototype.effectsVolume=function(){return cc.audioEngine.getEffectsVolume()},t.prototype.setMusicVolume=function(t){this.musicVolume()!=t&&cc.audioEngine.setMusicVolume(t)},t.prototype.setEffectsVolume=function(t){this.effectsVolume()!==t&&cc.audioEngine.setEffectsVolume(t)},t.prototype.pauseMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.pause(e),this.musicMap[t]=!1)}},t.prototype.resumeMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]||(cc.audioEngine.resume(e),this.musicMap[t]=!0)}},t.prototype.pauseEffects=function(){this.stopEffects=!0},t.prototype.resumeEffects=function(){this.stopEffects=!1},t._instance=null,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./Loader":"Loader"}],AutoRelease:[function(t,e,n){"use strict";cc._RF.push(e,"f36c6VWTpFCpoymRUusi9x9","AutoRelease");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.prefab=t},e.prototype.onDestroy=function(){},r([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],BagData:[function(t,e,n){"use strict";cc._RF.push(e,"b9ff8vwDqxFtJoJgtXMSy2b","BagData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BagSystem:[function(t,e,n){"use strict";cc._RF.push(e,"fe8813fX39D86IoBJ+ddCHw","BagSystem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BagSystem=void 0;var c=s(t("../../Module/Database/Db")),l=s(t("../../Module/ViewModule")),u=t("./Common/DataSaver"),f={ItemChanged:"ItemChanged"},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BagSystem",e._saver=new u.DataSaver,e}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){return a(this,function(){return this._data=c.default.instance.getData("bag"),this._data||(this._data={version:1,magic:1,items:{}},this.setDirty()),this._saver.init("bag",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(){},e.prototype.getItemCount=function(t){var e=this._data.items[t];return e?e.count:0},e.prototype.setItemCount=function(t,e,n){var o=this._data.items[t];o?o.count=n:this._data.items[t]={count:n},this.setDirty(),this.emit(f.ItemChanged,t,e,n)},e.prototype.addItemCount=function(t,e){var n=this.getItemCount(t),o=Math.max(0,n+e),i=e;this.setItemCount(t,i,o)},e.prototype.getItem=function(t){return this._data.items[t]},e.prototype.isItemEnough=function(t,e){return this.getItemCount(t)>=e},e.prototype.showConditionView=function(t,e){var n=this;l.default.instance.pushView("ConditionView",{conditions:t,cb:function(o,i){if(o){for(var r=0;r<t.length;r++){var a=t[r];n.addItemCount(a.id,-a.count)}e&&e(!0)}else i&&l.default.instance.toast(i),e&&e(!1)}})},e._instance=null,e.Events=f,e}(cc.EventTarget);n.BagSystem=p,cc._RF.pop()},{"../../Module/Database/Db":"Db","../../Module/ViewModule":"ViewModule","./Common/DataSaver":"DataSaver"}],BagView:[function(t,e,n){"use strict";cc._RF.push(e,"1bba3sfegVC8bs28YtKTJbn","BagView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.TabType=void 0;var f,p=u(t("../../Component/Utils/TableView/TableView")),h=t("../../Gameplay/System/WeaponSystem"),d=t("../../Module/ConfigManager"),_=u(t("../../Module/Loader")),y=u(t("../../Module/ViewHandler")),g=u(t("../../Module/ViewModule")),v=u(t("../../Utils/Path")),m=u(t("../../Utils/Utils")),b=cc._decorator,w=b.ccclass,S=b.property;(function(t){t[t.Weapon=1]="Weapon",t[t.Beast=2]="Beast"})(f=n.TabType||(n.TabType={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelBtnWeapon=null,e.labelBtnBeast=null,e.weaponView=null,e.beastView=null,e.btnWeaponNode=null,e.btnBeastNode=null,e.slotRoot=null,e.weaponRoot=null,e.showBeastRoot=null,e.labelName=null,e._curTabType=null,e._viewNodeMap=new Map,e._btnNodeMap=new Map,e}return i(e,t),e.prototype.initiateView=function(t){var e=this;m.default.localize(this.labelBtnWeapon,"ui_weapon"),m.default.localize(this.labelBtnBeast,"ui_beast"),this._viewNodeMap.set(f.Beast,this.beastView.node),this._viewNodeMap.set(f.Weapon,this.weaponView.node),this._btnNodeMap.set(f.Beast,this.btnBeastNode),this._btnNodeMap.set(f.Weapon,this.btnWeaponNode),this.weaponView.setLinesData(this._handleWeaponData()),this.beastView.setLinesData(this._handleDivineBeastData()),this.initShowBox(f.Weapon),this.initShowBox(f.Beast),this.onTab(null,t),h.WeaponSystem.instance.targetOff(this),h.WeaponSystem.instance.on(h.WeaponSystem.Events.UpdateWeapon,function(){e.initShowBox(f.Weapon)}),h.WeaponSystem.instance.on(h.WeaponSystem.Events.UpdateDivineBeast,function(){e.initShowBox(f.Beast)}),h.WeaponSystem.instance.on(h.WeaponSystem.Events.UpdateSlot,function(){e.initGemData()})},e.prototype.initShowBox=function(t){return a(this,void 0,void 0,function(){var e,n,o,i;return s(this,function(r){switch(r.label){case 0:if(t==f.Weapon)this.weaponRoot.removeAllChildren(),n=h.WeaponSystem.instance.getCurWeaponId(),e=v.default.getWeapon(n),o=this.weaponRoot;else if(t==f.Beast){if(this.showBeastRoot.removeAllChildren(),!(n=h.WeaponSystem.instance.getCurDivineBeastId()))return[2];e=v.default.getDivineBeast(n),o=this.showBeastRoot}return[4,_.default.loadResAsync(e,cc.Prefab,null)];case 1:return i=r.sent(),cc.instantiate(i).parent=o,t==f.Weapon&&this.initGemData(),[2]}})})},e.prototype.initGemData=function(){var t=h.WeaponSystem.instance.getSlots();for(var e in t){var n=t[e],o="slot"+n.index,i=this.slotRoot.getChildByName(o),r=i.getChildByName("img_lock"),a=i.getChildByName("img").getComponent(cc.Sprite),s=i.getChildByName("outline").getComponent(cc.Sprite);if(n.isUnlock){if(r.active=!1,n.id){var c=v.default.getGemPath(n.type,n.quality),l=v.default.getItemOutlinePath(n.quality);m.default.loadImg(a,c,60),m.default.loadImg(s,l)}}else r.active=!0}},e.prototype.onAnimateFinish=function(){},e.prototype._handleDivineBeastData=function(){var t=d.ConfigManager.instance.getConfig("DivineBeast"),e=h.WeaponSystem.instance.getAllBeast(),n=[],o=[];for(var i in t){var r=t[i],a={id:+i,isUnlock:!1,quality:r.quality,ability:[]};e[r.id]&&(a.isUnlock=e[r.id].isUnlock,a.ability=e[r.id].ability),o.push(a)}return o.sort(function(t,e){return t.quality-e.quality}),n.push({data:o}),n},e.prototype._handleWeaponData=function(){var t=d.ConfigManager.instance.getConfig("Weapon"),e=h.WeaponSystem.instance.getAllWeapon(),n=[],o=[];for(var i in t){var r=t[i],a={id:r.id,quality:r.quality,isUnlock:!1};e[r.id]&&(a.isUnlock=e[r.id].isUnlock),o.push(a)}return o.sort(function(t,e){return t.quality-e.quality}),n.push({data:o}),n},e.prototype.onTab=function(t,e){var n,o,i,r;if(this._curTabType!=e){this._curTabType=e;try{for(var a=c(this._viewNodeMap),s=a.next();!s.done;s=a.next()){var u=l(s.value,2),p=u[0];(_=u[1]).active=p==e}}catch(b){n={error:b}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}try{for(var h=c(this._btnNodeMap),d=h.next();!d.done;d=h.next()){var _,y=l(d.value,2),g=(p=y[0],(_=y[1]).getChildByName("off")),v=_.getChildByName("on");v.active=p==e,g.active=!v.active}}catch(w){i={error:w}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}e==f.Beast?m.default.localize(this.labelName,"divineBeast_1_name"):e==f.Weapon&&m.default.localize(this.labelName,"weapon_1_name")}},e.prototype._closeTableViews=function(){this.weaponView.clear(),this.beastView.clear()},e.prototype.onClose=function(){this._closeTableViews(),g.default.instance.popView(this)},r([S(cc.Label)],e.prototype,"labelTitle",void 0),r([S(cc.Label)],e.prototype,"labelBtnWeapon",void 0),r([S(cc.Label)],e.prototype,"labelBtnBeast",void 0),r([S(p.default)],e.prototype,"weaponView",void 0),r([S(p.default)],e.prototype,"beastView",void 0),r([S(cc.Node)],e.prototype,"btnWeaponNode",void 0),r([S(cc.Node)],e.prototype,"btnBeastNode",void 0),r([S(cc.Node)],e.prototype,"slotRoot",void 0),r([S(cc.Node)],e.prototype,"weaponRoot",void 0),r([S(cc.Node)],e.prototype,"showBeastRoot",void 0),r([S(cc.Label)],e.prototype,"labelName",void 0),r([w],e)}(y.default);n.default=C,cc._RF.pop()},{"../../Component/Utils/TableView/TableView":"TableView","../../Gameplay/System/WeaponSystem":"WeaponSystem","../../Module/ConfigManager":"ConfigManager","../../Module/Loader":"Loader","../../Module/ViewHandler":"ViewHandler","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../../Utils/Utils":"Utils"}],BaseEntity:[function(t,e,n){"use strict";cc._RF.push(e,"a7d56TwhqxPZZEwLIpp0ZKp","BaseEntity");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseEntity=void 0;var c=s(t("../../Module/Loader")),l=t("../../Utils/NodePool"),u=s(t("../../Utils/Utils")),f=function(t){function e(e,n){var o=t.call(this)||this;return o._animSpeed=1,o.uid=e,o.id=n,o}return i(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._avatar.getPosition(cc.v2())},set:function(t){this._avatar.setPosition(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anim",{get:function(){return this._anim},enumerable:!1,configurable:!0}),e.prototype.setInitPos=function(t){this._initPos=t},e.prototype.createAvatar=function(t){return r(this,void 0,void 0,function(){var e,n,o,i;return a(this,function(r){switch(r.label){case 0:return e=this.getAssetPath(),n=l.NodePool.instance,(o=n.getNode(e))?(this._avatar=o,[3,3]):[3,1];case 1:return[4,c.default.loadResAsync(e,cc.Prefab,null)];case 2:i=r.sent(),n.tryCreatePool(e,i),this._avatar=n.getNode(e),r.label=3;case 3:return t&&t.parent&&(this._avatar.parent=t.parent),this._initPos&&this._avatar.setPosition(this._initPos),this._anim=u.default.getComponentInChildren(this.avatar,cc.Animation),this._animState=null,this.onAvatarReady(),[2]}})})},e.prototype.destroy=function(){null!=this._avatar&&(l.NodePool.instance.putNode(this._avatar),this._avatar=null,this._anim=null,this._animState=null)},e.prototype.setContext=function(t){var e=this;this._context=t,this._entityContext=t.entityManager,this._context.battleSpeed.onValueChange.add(function(t){e._animState&&(e._animState.speed=e._animSpeed*t)})},e.prototype.playAnim=function(t,e,n){void 0===e&&(e=1),this._anim?(this._animSpeed=e,this._animState=this._anim.play(t),this._animState&&(this._animState.speed=e*this._context.battleSpeed.value),n&&this._anim.on("finished",function(){n&&n()})):n&&n()},e.prototype.stopAnim=function(){this._anim&&(this._anim.stop(),this._animState=null)},e}(cc.EventTarget);n.BaseEntity=f,cc._RF.pop()},{"../../Module/Loader":"Loader","../../Utils/NodePool":"NodePool","../../Utils/Utils":"Utils"}],BaseSystem:[function(t,e,n){"use strict";cc._RF.push(e,"45fd9d1EhtJZqiy+D6TwR6T","BaseSystem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseSystem=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createInitData=function(t,e){return void 0===e&&(e=1),t.version=e,t.magic=1,t},e}(cc.EventTarget);n.BaseSystem=r,cc._RF.pop()},{}],BattleData:[function(t,e,n){"use strict";cc._RF.push(e,"c0a30UQTc5LPIDIfrq1srdv","BattleData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BattleEndView:[function(t,e,n){"use strict";cc._RF.push(e,"3255fysJppGGpyIfnMkJ0fS","BattleEndView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),u=a(t("../Module/ViewHandler")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelTime=null,e.labelScore=null,e.rewardNodes=null,e.perfectNode=null,e.rewardNode=null,e.dpsNodes=null,e.dpsNode=null,e._callback=null,e._gurads=null,e._rewards=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=t.battleResult,n=t.cb;this.perfectNode.active=e.isPerfect,this._callback=n,this._gurads=e.damageStats,this._rewards=e.rewards,this.labelScore.string=""+e.score,this.labelTime.string=""+e.timeSec;var o=1==e.success?"ui_success":"ui_failed";l.default.localize(this.labelTitle,o),this.initGuardNode(),this.initRewardNode()},e.prototype.initGuardNode=function(){this.dpsNodes.removeAllChildren();for(var t=Math.min(3,this._gurads.length),e=0;e<t;e++){var n=this._gurads[e].id,o=cc.instantiate(this.dpsNode);o.parent=this.dpsNodes;var i="guard_"+n+"_name";o.getChildByName("labelName").getComponent(cc.Label).string=s.ConfigManager.instance.getLanConfig(i),o.getChildByName("labelDps").getComponent(cc.Label).string=""+this._gurads[e].damage;var r=o.getChildByName("img").getComponent(cc.Sprite),a=c.default.guardImgPath(n);l.default.loadImg(r,a,150)}},e.prototype.initRewardNode=function(){this.rewardNodes.removeAllChildren();for(var t=0;t<this._rewards.length;t++){var e=this._rewards[t],n=cc.instantiate(this.rewardNode);n.parent=this.rewardNodes,n.getChildByName("labelNum").getComponent(cc.Label).string=""+e.count;var o=n.getChildByName("img").getComponent(cc.Sprite),i=n.getChildByName("imgOutline").getComponent(cc.Sprite),r=c.default.getItemPath(e.id),a=c.default.getItemOutlinePath(e.quality);l.default.loadImg(o,r,80),l.default.loadImg(i,a,100)}},e.prototype.onConfirm=function(){this.close(),this._callback()},r([h(cc.Label)],e.prototype,"labelTitle",void 0),r([h(cc.Label)],e.prototype,"labelTime",void 0),r([h(cc.Label)],e.prototype,"labelScore",void 0),r([h(cc.Node)],e.prototype,"rewardNodes",void 0),r([h(cc.Node)],e.prototype,"perfectNode",void 0),r([h(cc.Prefab)],e.prototype,"rewardNode",void 0),r([h(cc.Node)],e.prototype,"dpsNodes",void 0),r([h(cc.Prefab)],e.prototype,"dpsNode",void 0),r([p],e)}(u.default);n.default=d,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleFlow:[function(t,e,n){"use strict";cc._RF.push(e,"31da3gE7f5Jma2feLKjHQ3X","BattleFlow");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleFlow=void 0;var i=o(t("lodash")),r=t("../Module/ConfigManager"),a=o(t("../Utils/Utils")),s=function(){function t(t,e){this.tick=0,this.delay=0,this.waveDuration=0,this.totalDuration=0,this.totalSpawnCount=0,this.currentSpawnCount=0,this.config=t,this.flowConfig=r.ConfigManager.instance.getLevelFlowConfig(t.waves[e]),this.delay=t.waveDelay[e],this.waveDuration=t.waveDuration[e],this.totalDuration=this.delay+this.waveDuration,this.totalSpawnCount=this.flowConfig.idArray.reduce(function(t,e){return t+e.enemyCount},0),this.toSpawnEnemys=i.default.cloneDeep(this.flowConfig.idArray)}return t.prototype.tickToGetGenerateEnemy=function(t){return this.tick+=t,this.tick>this.delay&&this.currentSpawnCount<this.totalSpawnCount&&this.tick-this.delay>=this.currentSpawnCount/this.totalSpawnCount*this.waveDuration?this.getRandEnemyId():0},t.prototype.getRandEnemyId=function(){var t=a.default.randomRangeInt(0,this.toSpawnEnemys.length),e=this.toSpawnEnemys[t],n=e.enemyId;return e.enemyCount-=1,e.enemyCount<=0&&this.toSpawnEnemys.splice(t,1),this.currentSpawnCount++,n},t.prototype.isFinish=function(){return this.tick>=this.totalDuration},t}();n.BattleFlow=s,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Utils/Utils":"Utils",lodash:11}],BattleStats:[function(t,e,n){"use strict";cc._RF.push(e,"75e5cy7MapP4obU3fFjbg8F","BattleStats");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleStats=void 0;var r=function(){function t(){this._id2damage=new Map,this._score=0}return t.prototype.addScore=function(t){this._score+=t},t.prototype.getScore=function(){return this._score},t.prototype.recordDamage=function(t,e){var n=this._id2damage.get(t)||0;n+=e,this._id2damage.set(t,n)},t.prototype.clear=function(){this._score=0,this._id2damage.clear()},t.prototype.getDamage=function(t){return this._id2damage.get(t)||0},t.prototype.getAllDamages=function(){var t,e,n=[];try{for(var r=o(this._id2damage.entries()),a=r.next();!a.done;a=r.next()){var s=i(a.value,2),c=s[0],l=s[1];n.push({id:c,damage:l})}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t}();n.BattleStats=r,cc._RF.pop()},{}],BattleSystem:[function(t,e,n){"use strict";cc._RF.push(e,"55aedCHnDZOKblLTS9rkiyl","BattleSystem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleSystem=void 0;var c=t("../../Module/ConfigManager"),l=s(t("../../Module/Database/Db")),u=s(t("../../Module/ViewModule")),f=s(t("../../Utils/Path")),p=t("../Battle"),h=t("./Common/DataSaver"),d={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BattleSystem",e._curLevel=1,e._saver=new h.DataSaver,e}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){return a(this,function(){return this._data=l.default.instance.getData("battle"),this._data||(this._data={magic:1,version:1,curLevel:1,levelData:{}},this.setDirty()),this._saver.init("battle",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(t){this._battle&&this._battle.update(t)},e.prototype.getBattle=function(){return this._battle},e.prototype.getCurrentLevel=function(){return this._data.curLevel},e.prototype.setCurrentLevel=function(t){this._data.curLevel!=t&&(this._data.curLevel=t,this.setDirty())},e.prototype.startBattle=function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(){return this._battle&&this._battle.destroy(),this._curLevel=t,e=c.ConfigManager.instance.getLevelConfig(this._curLevel),this._battle=new p.Battle(e),this._battle.on(p.Battle.Events.BattleEnd,this.onBattleEnd,this),u.default.instance.pushView("BattleView",this._battle,{bundle:f.default.BATTLE_BUNDLE,onLoaded:this.onBattleViewLoaded.bind(this)}),[2]})})},e.prototype.onBattleViewLoaded=function(t){return r(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.emit(d.BattleStart,this._curLevel),this._battleView=t,this._battle.setView(t),[4,this._battle.load()];case 1:return e.sent(),this._battle.startBattle(),[2]}})})},e.prototype.onBattleEnd=function(t){this._battleView&&(this._battleView.close(),this._battleView=null),this._battle&&(this._battle.destroy(),this._battle=null),this.emit(d.BattleEnd);var e=this._data.levelData[this._curLevel];e?t.score>e.maxScore&&(e.maxScore=t.score,this.setDirty()):(this._data.levelData[this._curLevel]={level:this._curLevel,maxScore:t.score},this.setDirty())},e._instance=null,e.Events=d,e}(cc.EventTarget);n.BattleSystem=_,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Module/Database/Db":"Db","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../Battle":"Battle","./Common/DataSaver":"DataSaver"}],BattleUI:[function(t,e,n){"use strict";cc._RF.push(e,"b7d567lHMFEsJYlLRg3HeIz","BattleUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Gameplay/Entity/EntityManager"),c=t("../Gameplay/Entity/Player"),l=a(t("../Utils/Path")),u=a(t("../Utils/Utils")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSpeedUp=null,e.hpBar=null,e.hpLabel=null,e.expBar=null,e.expLabel=null,e.labelSpeed=null,e.rightInfoNode=null,e.guardNode=null,e._guardNode={},e}return i(e,t),e.prototype.init=function(t){var e=this;this.battleContext=t,this.entityManager=t.entityManager;var n=this.entityManager.getPlayer();this.hpBar.progress=1,this.hpLabel.string=n.hp+"/"+n.maxHp,n.on(c.Player.Events.Hp,function(t,n){e.hpBar.progress=cc.misc.clamp01(t/n),e.hpLabel.string=t+"/"+n}),this.expBar.progress=0,this.expLabel.string=n.exp+"/"+n.upgradeExp,n.on(c.Player.Events.Exp,function(t,n){e.expBar.progress=cc.misc.clamp01(t/n),e.expLabel.string=t+"/"+n}),this.btnSpeedUp.node.targetOff(this),this.btnSpeedUp.node.on("click",function(){var t=e.battleContext.battleSpeed.value;(t+=1)>3&&(t=1),e.battleContext.battleSpeed.value=t,e.labelSpeed.string="x"+t},this),this.entityManager.on(s.EntityManager.Events.GuardCreate,this.onGuardCreate,this),this.entityManager.on(s.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this)},e.prototype.onGuardCreate=function(t){var e={count:1,type:t.type,node:null};this._guardNode[t.id]?this._guardNode[t.id].count++:this._guardNode[t.id]=e;var n=this._guardNode[t.id],o=null;if(n.node)o=this._guardNode[t.id].node;else{(o=cc.instantiate(this.guardNode)).parent=this.rightInfoNode,n.node=o;var i=l.default.guardImgPath(t.id),r=o.getChildByName("img").getComponent(cc.Sprite);u.default.loadImg(r,i,50)}var a=o.getChildByName("num");a.active=n.count>0,n.count>0&&(a.getComponent(cc.Label).string="x"+n.count)},e.prototype.onGuardDestroy=function(t){this._guardNode[t.id].count--,this._guardNode[t.id].count<=0?(this._guardNode[t.id].node.removeFromParent(),this._guardNode[t.id].node.destroy(),delete this._guardNode[t.id]):this._guardNode[t.id].node.getChildByName("num").getComponent(cc.Label).string="x"+this._guardNode[t.id].count},r([h(cc.Button)],e.prototype,"btnSpeedUp",void 0),r([h(cc.ProgressBar)],e.prototype,"hpBar",void 0),r([h(cc.Label)],e.prototype,"hpLabel",void 0),r([h(cc.ProgressBar)],e.prototype,"expBar",void 0),r([h(cc.Label)],e.prototype,"expLabel",void 0),r([h(cc.Label)],e.prototype,"labelSpeed",void 0),r([h(cc.Node)],e.prototype,"rightInfoNode",void 0),r([h(cc.Prefab)],e.prototype,"guardNode",void 0),r([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Gameplay/Entity/EntityManager":"EntityManager","../Gameplay/Entity/Player":"Player","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleView:[function(t,e,n){"use strict";cc._RF.push(e,"1fee5/11r9LKLgHc96Xh8Ju","BattleView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Enum/ViewType")),c=a(t("../../Module/ViewHandler")),l=a(t("../../Module/ViewModule")),u=a(t("../../UI/BattleUI")),f=a(t("../../Utils/Path")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=s.default.Normal,e.battleRoot=null,e.battleUI=null,e.btnPause=null,e.effectRoot=null,e}return i(e,t),e.prototype.onLoad=function(){this.btnPause.on("click",this.onSetting,this)},e.prototype.initiateView=function(t){this.battle=t},e.prototype.showBattleEndView=function(t,e){l.default.instance.pushView("BattleEndView",{battleResult:t,cb:e},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.showUpgradeView=function(t,e){l.default.instance.pushView("UpgradeView",{battle:this.battle,upgradeConfig:t,onClose:e},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.onSetting=function(){var t=this;this.battle.pause(),l.default.instance.pushView("SettingView",{cb:function(){t.battle.resume()}})},r([d(cc.Node)],e.prototype,"battleRoot",void 0),r([d(u.default)],e.prototype,"battleUI",void 0),r([d(cc.Node)],e.prototype,"btnPause",void 0),r([d(cc.Node)],e.prototype,"effectRoot",void 0),r([h],e)}(c.default);n.default=_,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Module/ViewHandler":"ViewHandler","../../Module/ViewModule":"ViewModule","../../UI/BattleUI":"BattleUI","../../Utils/Path":"Path"}],Battle:[function(t,e,n){"use strict";cc._RF.push(e,"06a7fEU4HxFHYDug+xd+cR1","Battle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},l=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Battle=void 0;var f=u(t("../Component/Terrain/Terrain")),p=t("../Module/ConfigManager"),h=t("../Interface/Config/UpgradeConfig"),d=u(t("../Module/Loader")),_=u(t("../Utils/Utils")),y=u(t("../Utils/Path")),g=t("./BattleFlow"),v=t("./Entity/EntityManager"),m=t("../Utils/Property"),b=u(t("./GameDefine")),w=t("./BattleStats"),S=t("../Utils/NodePool"),C=t("./System/BagSystem"),M=t("./System/HomeSystem"),P={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},A=function(t){function e(e){var n=t.call(this)||this;return n.battleSpeed=new m.ReactNumber(1),n.isPlaying=!1,n.battleTick=0,n.enemyFlowIndex=0,n.config=e,n}return i(e,t),e.prototype.setView=function(t){this.battleView=t},e.prototype.load=function(){return r(this,void 0,void 0,function(){var t,e,n,o;return a(this,function(i){switch(i.label){case 0:return[4,this.preloadLevelAssets()];case 1:return i.sent(),[4,d.default.loadPrefabAsync(y.default.getLevelPath(this.config.asset),this.battleView)];case 2:return t=i.sent(),(e=cc.instantiate(t)).parent=this.battleView.battleRoot,this.terrain=e.getComponent(f.default),this.terrain.init(),this.battleStats=new w.BattleStats,(n=this.entityManager=new v.EntityManager(this)).on(v.EntityManager.Events.GuardCreate,this.onGuardCreate,this),n.on(v.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this),o={hp:100,maxLevel:10,upgradeExp:[1,20,50,100,200,200,200,200,200,200]},[4,(this.player=this.entityManager.createPlayer(o,{pos:this.terrain.playerPosition})).createAvatar({parent:e})];case 3:return i.sent(),[4,this.initHurtNodePool()];case 4:return i.sent(),this.battleView.battleUI.init(this),[2]}})})},e.prototype.preloadLevelAssets=function(){return r(this,void 0,void 0,function(){var t,e,n,o,i,r,c,l,u,f,h,_,g,v,m,b,w,S,C,M;return a(this,function(){t=[],e=new Set,this.config.waves.forEach(function(t){p.ConfigManager.instance.getLevelFlowConfig(t).idArray.forEach(function(t){return e.add(t.enemyId)})});try{for(n=s(e),o=n.next();!o.done;o=n.next())i=o.value,_=p.ConfigManager.instance.getEnemyConfig(i),t.push(d.default.loadPrefabAsync(y.default.getEntityPath(_.asset),this.battleView))}catch(a){g={error:a}}finally{try{o&&!o.done&&(v=n.return)&&v.call(n)}finally{if(g)throw g.error}}try{for(r=s(p.ConfigManager.instance.getGuardConfigs().values()),c=r.next();!c.done;c=r.next())_=c.value,t.push(d.default.loadPrefabAsync(y.default.getEntityPath(_.asset),this.battleView))}catch(P){m={error:P}}finally{try{c&&!c.done&&(b=r.return)&&b.call(r)}finally{if(m)throw m.error}}try{for(l=s(p.ConfigManager.instance.getAbilityConfigs().values()),u=l.next();!u.done;u=l.next())_=u.value,t.push(d.default.loadPrefabAsync(y.default.getEntityPath(_.asset),this.battleView))}catch(A){w={error:A}}finally{try{u&&!u.done&&(S=l.return)&&S.call(l)}finally{if(w)throw w.error}}try{for(f=s(p.ConfigManager.instance.getBulletConfigs().values()),h=f.next();!h.done;h=f.next())_=h.value,t.push(d.default.loadPrefabAsync(y.default.getEntityPath(_.asset),this.battleView))}catch(R){C={error:R}}finally{try{h&&!h.done&&(M=f.return)&&M.call(f)}finally{if(C)throw C.error}}return t.push(d.default.loadPrefabAsync(y.default.getPlayerEntityPath(),this.battleView)),t.push(d.default.loadPrefabAsync(y.default.getLevelPath(this.config.asset),this.battleView)),t.push(d.default.loadDirAsync(y.default.BATTLE_BUNDLE,"Prefabs",cc.Prefab,this.battleView)),[2,Promise.all(t)]})})},e.prototype.startBattle=function(){this.emit(P.BattleStart),M.HomeSystem.instance.playBgm(2),cc.director.getCollisionManager().enabled=!0,this.isPlaying=!0,this.battleTick=0,this.enemyFlowIndex=0,this.createFlow(),this.entityManager.createGuard(b.default.InitGuardId,{pos:this.getGuardSpawnPos()})},e.prototype.createFlow=function(){this.currentFlow=new g.BattleFlow(this.config,this.enemyFlowIndex),cc.log("\u5f00\u59cb\u65b0\u6ce2\u6b21\uff1a "+this.enemyFlowIndex)},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.resume=function(){this.isPlaying=!0},e.prototype.update=function(t){if(this.isPlaying&&null!=this.player){if(this.player.canUpgrade()&&(this.player.upgrade(),this.showUpgradeAndPause()),t*=this.battleSpeed.value,this.battleTick+=t,this.currentFlow){var e=this.currentFlow.tickToGetGenerateEnemy(t);if(e>0){var n=this.entityManager.createEnemy(e,{pos:this.terrain.getRandEnemyPos()});n.setConfigFactors(this.config.hpFactor,this.config.atkFactor,this.config.speedFactor),n.createAvatar({parent:this.terrain.node})}this.currentFlow.isFinish()&&(this.enemyFlowIndex+=1,this.enemyFlowIndex<this.config.waves.length?this.createFlow():this.currentFlow=null)}if(this.entityManager.update(t),!this.player.isAlive()||!this.currentFlow&&0===this.entityManager.getAllEnemies().size){var o=this.battleStats.getAllDamages();o.sort(function(t,e){return e.damage-t.damage});var i=this.player.isPerfect,r=this.config.rewards;i&&r.push(this.config.extraReward);var a={success:this.player.isAlive(),timeSec:Math.ceil(this.battleTick),score:this.battleStats.getScore(),isPerfect:i,damageStats:o,rewards:r};this.finishBattle(a)}}},e.prototype.showUpgradeAndPause=function(){this.pause(),this.battleView.showUpgradeView(this.randomUpgradeOptions(),this.resume.bind(this))},e.prototype.randomUpgradeOptions=function(){var t,e,n,o,i,r,a,c,u=[],f=Array.from(this.entityManager.getAllGuards().values()),d=_.default.createMultiMap(f,function(t){return[t.id,t]}),y=_.default.createMultiMap(f,function(t){return[t.type,t]}),g=[],v=[],m=p.ConfigManager.instance.getGuardConfigs();try{for(var b=s(m.values()),w=b.next();!w.done;w=b.next()){var S=w.value;if(null==S.summonCondition)g.push(S);else{var C=!0;try{for(var M=(n=void 0,s(S.summonCondition)),P=M.next();!P.done;P=M.next()){var A=P.value,R=A.guardId,E=A.guardType,O=A.count;if(R){if(d.has(R)&&d.get(R).length>=O)continue;C=!1;break}if(!(y.has(E)&&y.get(E).length>=O)){C=!1;break}}}catch(G){n={error:G}}finally{try{P&&!P.done&&(o=M.return)&&o.call(M)}finally{if(n)throw n.error}}C&&v.push(S)}}}catch(H){t={error:H}}finally{try{w&&!w.done&&(e=b.return)&&e.call(b)}finally{if(t)throw t.error}}var I=g.concat(v),N=[];if(3==I.length)N=I;else if(I.length>3)for(var T=0;T<3;T++){var B=_.default.randomRangeInt(0,I.length);N.push(I[B]),I.splice(B,1)}else for(N=I;N.length<3;)N.push(_.default.randomSelect(g));try{for(var D=s(N),x=D.next();!x.done;x=D.next()){var L=x.value;if(null==L.summonCondition)u.push({type:h.UpgradeType.SummonGuard,guardId:L.id});else{var U=[];try{for(var k=(a=void 0,s(L.summonCondition)),j=k.next();!j.done;j=k.next()){var F=j.value,V=(R=F.guardId,E=F.guardType,O=F.count,R?d.get(R):y.get(E));if(O===V.length)U.push.apply(U,l(V));else for(T=0;T<O;++T)B=_.default.randomRangeInt(0,V.length),U.push(V[B]),V.splice(B,1)}}catch(W){a={error:W}}finally{try{j&&!j.done&&(c=k.return)&&c.call(k)}finally{if(a)throw a.error}}u.push({type:h.UpgradeType.UpgradeGuard,guardId:L.id,destroyUids:U.map(function(t){return t.uid})})}}}catch(z){i={error:z}}finally{try{x&&!x.done&&(r=D.return)&&r.call(D)}finally{if(i)throw i.error}}return{upgradeOptions:u}},e.prototype.finishBattle=function(t){var e=this;this.pause(),cc.director.getCollisionManager().enabled=!1,this.battleView.showBattleEndView(t,function(){e.emit(P.BattleEnd,t),M.HomeSystem.instance.playBgm(1);for(var n=0;n<t.rewards.length;n++){var o=t.rewards[n];C.BagSystem.instance.addItemCount(o.id,o.count)}console.log(t.rewards),e.player.recoverPerfect()})},e.prototype.destroy=function(){this.entityManager.clear(),this.terrain&&(this.terrain.node.destroy(),this.terrain=null),cc.director.getCollisionManager().enabled=!1},e.prototype.onGuardCreate=function(t){return r(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,t.createAvatar({parent:this.terrain.node})];case 1:return e.sent(),[2]}})})},e.prototype.getGuardSpawnPos=function(){var t=this.terrain.guardSpawnPosition;return t.addSelf(cc.v2(_.default.randomRange(-200,200),0)),t},e.prototype.initHurtNodePool=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return t=y.default.getHurtNodePath(),[4,d.default.loadResAsync(t,cc.Prefab,null)];case 1:return e=n.sent(),S.NodePool.instance.tryCreatePool(t,e),[2]}})})},e.prototype.showFloatDamage=function(t,e){var n=S.NodePool.instance.getNode(y.default.getHurtNodePath());n.parent=this.battleView.effectRoot,_.default.setWorldPosition(n,t),n.getChildByName("labelHurt").getComponent(cc.Label).string="-"+e,cc.tween(n).by(.5,{y:50}).call(function(){S.NodePool.instance.putNode(n)}).start()},e.prototype.onGuardDestroy=function(){},e.prototype.onPlayerCreate=function(){return r(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.onEnemyCreate=function(){return r(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.Events=P,e}(cc.EventTarget);n.Battle=A,cc._RF.pop()},{"../Component/Terrain/Terrain":"Terrain","../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Utils/NodePool":"NodePool","../Utils/Path":"Path","../Utils/Property":"Property","../Utils/Utils":"Utils","./BattleFlow":"BattleFlow","./BattleStats":"BattleStats","./Entity/EntityManager":"EntityManager","./GameDefine":"GameDefine","./System/BagSystem":"BagSystem","./System/HomeSystem":"HomeSystem"}],BulletConfig:[function(t,e,n){"use strict";cc._RF.push(e,"35cb5TnC3RFGrK0IXJpphOd","BulletConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"8a46162XRFEuZAPPyC17BFo","Bullet");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Bullet=void 0;var a=r(t("../../Component/Gameplay/CollisionWrapper")),s=r(t("../../Component/Gameplay/EntityTag")),c=t("../../Module/ConfigManager"),l=r(t("../../Utils/Path")),u=r(t("../../Utils/Utils")),f=t("./BaseEntity"),p=t("./Enemy"),h=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.config=c.ConfigManager.instance.getBulletConfig(o.id),o}return i(e,t),e.prototype.onAvatarReady=function(){var t=this.avatar.getComponent(cc.Collider);u.default.getOrAddComponent(t.node,s.default).entity=this;var e=u.default.getOrAddComponent(t.node,a.default);e.onEnter.clear(),e.onEnter.add(this.onCollisionEnter,this),this.avatar.zIndex=3e3},e.prototype.getAssetPath=function(){return l.default.getEntityPath(this.config.asset)},e.prototype.update=function(t){if(this.avatar){if(this.trackTarget){var n=this.direction=this.trackTarget.avatar.getPosition(cc.v2()).sub(this.position);n.normalizeSelf(),n.mulSelf(t),n.addSelf(this.position),this.position=n}else{var o=this.direction.mul(t*this.config.moveSpeed);o.addSelf(this.position),this.position=o}var i=u.default.directionToAngle(this.direction);this.avatar.angle=i-e.BulletInitRotation;var r=this.position;(Math.abs(r.x)>500||Math.abs(r.y)>800)&&this._context.entityManager.removeBullet(this.uid)}},e.prototype.onCollisionEnter=function(t){var e=t.node.getComponent(s.default);null!=e.entity?e.entity instanceof p.Enemy?(e.entity.hurt(this.config.attack,this.owner),this._context.entityManager.removeBullet(this.uid)):cc.error("[Bullet] onCollision, other entity is not Enemy: "+e.entity):cc.error("[Bullet] onCollision, other entity is null")},e.prototype.toString=function(){return"Bullet: "+this.config.name+"["+this.uid+"]"},e.BulletInitRotation=90,e}(f.BaseEntity);n.Bullet=h,cc._RF.pop()},{"../../Component/Gameplay/CollisionWrapper":"CollisionWrapper","../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./BaseEntity":"BaseEntity","./Enemy":"Enemy"}],BusyCircle:[function(t,e,n){"use strict";cc._RF.push(e,"f4b47t7xEdBQbt6zGoOWzCc","BusyCircle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstTile=null,e.tiles=12,e.minOpacity=120,e.startColor=cc.Color.GRAY,e.endColor=cc.Color.WHITE,e}return i(e,t),e.prototype.onLoad=function(){var t=360/this.tiles,e=this.firstTile.parent,n=this.firstTile;n.angle=0,n.opacity=255;for(var o=[n],i=n.getPosition(),r=1;r<this.tiles;++r)(a=cc.instantiate(this.firstTile)).parent=e,a.setPosition(i),a.angle=r*t,o.push(a);for(r=0;r<o.length;++r){var a=o[r],s=r/o.length,c=1*(1-s),l=cc.Color.lerp(cc.color(),this.startColor,this.endColor,s);a.color=l,cc.tween(a).to(c,{color:this.endColor}).sequence(cc.tween().set({color:this.startColor}),cc.tween().to(1,{color:this.endColor})).repeatForever().start()}},r([c(cc.Node)],e.prototype,"firstTile",void 0),r([c],e.prototype,"tiles",void 0),r([c],e.prototype,"minOpacity",void 0),r([c(cc.Color)],e.prototype,"startColor",void 0),r([c(cc.Color)],e.prototype,"endColor",void 0),r([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],BusyView:[function(t,e,n){"use strict";cc._RF.push(e,"d1a76Dp/xdNSqN/w5aQFq3Z","BusyView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=c(t("../../../Module/Loader")),u=c(t("../../../Utils/Path")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circlePrefab=null,e}var n;return i(e,t),n=e,e.show=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(o){switch(o.label){case 0:return this._isLoading?(this._show=!0,[2]):(this._show=!0,cc.isValid(this._node)?[3,2]:(this._isLoading=!0,[4,l.default.loadPrefabAsync(u.default.viewPath("BusyView"),null)]));case 1:t=o.sent(),this._isLoading=!1,this._node=cc.instantiate(t),e=cc.Canvas.instance,this._node.parent=e.node,o.label=2;case 2:return this._show?this._node.getComponent(n).show():this._node.getComponent(n).hide(),[2]}})})},e.hide=function(){this._isLoading?this._show=!1:cc.isValid(this._node)&&this._node.getComponent(n).hide()},e.prototype.show=function(){this.node.active=!0,this._circle||(this._circle=cc.instantiate(this.circlePrefab),this._circle.parent=this.node)},e.prototype.hide=function(){this._circle&&(this._circle.destroy(),this._circle=null),this.node.active=!1},e._isLoading=!1,e._show=!1,r([h(cc.Prefab)],e.prototype,"circlePrefab",void 0),n=r([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Module/Loader":"Loader","../../../Utils/Path":"Path"}],ButtonEffect:[function(t,e,n){"use strict";cc._RF.push(e,"beba1YJhhJPj4QpfeXtGnLC","ButtonEffect");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Module/Audio")),c=a(t("../../Utils/Path")),l=cc._decorator,u=l.ccclass,f=(l.property,l.menu),p=l.requireComponent,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},e.prototype.onDestroy=function(){this.node.targetOff(this)},e.prototype.onClick=function(){s.default.instance.playEffect(c.default.effectPath("click"))},r([u,f("Utils/ButtonEffect"),p(cc.Button)],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Module/Audio":"Audio","../../Utils/Path":"Path"}],1:[function(){},{}],ClawGuideType:[function(t,e,n){"use strict";cc._RF.push(e,"1a2a5jnX8RGx64Tpo4mUf2Q","ClawGuideType"),Object.defineProperty(n,"__esModule",{value:!0}),n.ClawGuideType=void 0,function(t){t[t.TREASURE_PROGRESS=0]="TREASURE_PROGRESS",t[t.NPC_PROGRESS=1]="NPC_PROGRESS",t[t.COOK_SPEED_UP=2]="COOK_SPEED_UP",t[t.BUILDING_UPGRADE=3]="BUILDING_UPGRADE",t[t.HUNGRY_SALE=4]="HUNGRY_SALE",t[t.BUILDING_SKIN=5]="BUILDING_SKIN",t[t.GUEST_ORDER=6]="GUEST_ORDER",t[t.TIME_RESEARCH_SUCCESS_RATE=7]="TIME_RESEARCH_SUCCESS_RATE",t[t.OPEN_STATUE=8]="OPEN_STATUE"}(n.ClawGuideType||(n.ClawGuideType={})),cc._RF.pop()},{}],CollisionWrapper:[function(t,e,n){"use strict";cc._RF.push(e,"2b006x3fI5HCI8wS6ie8LKH","CollisionWrapper");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Utils/Action"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onEnter=new a.Action2,e.onStay=new a.Action2,e.onExit=new a.Action2,e}return i(e,t),e.prototype.onCollisionEnter=function(t,e){this.onEnter.call(t,e)},e.prototype.onCollisionStay=function(t,e){this.onStay.call(t,e)},e.prototype.onCollisionExit=function(t,e){this.onExit.call(t,e)},r([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../Utils/Action":"Action"}],ColorAssembler2D:[function(t,e,n){"use strict";cc._RF.push(e,"834a0oo2pRDm7VyZxgk49sy","ColorAssembler2D");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.executeInEditMode,u=a.requireComponent,f=a.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._colors=[],e}return i(e,t),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(t){this._colors=t,this._updateColors()},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this)},e.prototype.onDisable=function(){cc.director.off(cc.Director.EVENT_AFTER_DRAW,this._updateColors,this),this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR},e.prototype._updateColors=function(){var t=this.getComponent(cc.RenderComponent);if(t){var e=t._assembler;if(e instanceof cc.Assembler2D){var n=e._renderData.uintVDatas[0];if(n)for(var o=this.node.color,i=e.floatsPerVert,r=0,a=e.colorOffset,s=n.length;a<s;a+=i)n[a]=(this.colors[r++]||o)._val}}},r([c],e.prototype,"_colors",void 0),r([c({type:[cc.Color]})],e.prototype,"colors",null),r([s,l,u(cc.RenderComponent),f("i18n:MAIN_MENU.component.renderers/ColorAssembler2D-lamyoung.com")],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"a9839GlDRJEL6lLAOb/Ez4w","Common"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],CompareView:[function(t,e,n){"use strict";cc._RF.push(e,"08ab0zXDnZEWb6XUP8JfMpq","CompareView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Module/ViewHandler")),l=a(t("../Utils/Path")),u=a(t("../Utils/Utils")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelConfirm=null,e.labelDecompose=null,e.labelOriGemName=null,e.labelNewGemName=null,e.newGemSp=null,e.newGemSpOutline=null,e.oldGemSp=null,e.oldGemSpOutline=null,e.labelNode=null,e.oldEntryNode=null,e.newEntryNode=null,e.labelNewScore=null,e.labelOldScore=null,e._callback=null,e._newQuality=0,e._oriQuality=0,e._partIndex=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=t.info,n=e.oldGem,o=e.newGem,i=t.index,r=t.cb;this._callback=r,this._newQuality=o.quality,this._partIndex=i,this._oriQuality=n.quality,u.default.localize(this.labelTitle,"ui_compare"),u.default.localize(this.labelConfirm,"ui_confirm"),u.default.localize(this.labelDecompose,"ui_decompose"),u.default.localize(this.labelNewGemName,"gem_"+this._partIndex+"_name"),u.default.localize(this.labelOriGemName,"gem_"+this._partIndex+"_name");var a=s.ConfigManager.instance.getLanConfig("ui_score");this.labelNewScore.string=u.default.formatStr(a,o.score),this.labelOldScore.string=u.default.formatStr(a,n.score);var c=l.default.getGemPath(o.type,o.quality),f=l.default.getItemOutlinePath(this._newQuality),p=l.default.getGemPath(n.type,n.quality),h=l.default.getItemOutlinePath(this._oriQuality);u.default.loadImg(this.newGemSp,c,80),u.default.loadImg(this.newGemSpOutline,f,120),u.default.loadImg(this.oldGemSp,p,80),u.default.loadImg(this.oldGemSpOutline,h,120),this.initLabelNodes(n,o)},e.prototype.initLabelNodes=function(t,e){this.oldEntryNode.removeAllChildren(),this.newEntryNode.removeAllChildren();for(var n=function(t,e,n){for(var o=t.getChildByName("labelContent").getComponent(cc.Label),i="entry_"+n.type,r=s.ConfigManager.instance.getLanConfig(i),a="",c=0;c<n.influenceGuardIds.length;c++){var f="guard_"+n.influenceGuardIds[c]+"_name";a+="["+s.ConfigManager.instance.getLanConfig(f)+"]"}var p=u.default.formatStr(r,a,n.num);o.string=p,t.getChildByName("quality").getChildByName("labelStar").getComponent(cc.Label).string=""+e;var h=t.getChildByName("entryBg").getComponent(cc.Sprite),d=t.getChildByName("quality").getChildByName("entryRightBg").getComponent(cc.Sprite),_=l.default.getEntryBgPath(e),y=l.default.getEntryRightBgPath(e);u.default.loadImg(h,_),u.default.loadImg(d,y)},o=0;o<t.entryInfo.length;o++){var i=t.entryInfo[o];(r=cc.instantiate(this.labelNode)).parent=this.oldEntryNode,n(r,this._newQuality,i)}for(o=0;o<e.entryInfo.length;o++){var r;i=e.entryInfo[o],(r=cc.instantiate(this.labelNode)).parent=this.newEntryNode,n(r,this._oriQuality,i)}},e.prototype.onConfirm=function(){this.close(),this._callback(!0)},e.prototype.onDecompose=function(){this.close(),this._callback(!1)},r([h(cc.Label)],e.prototype,"labelTitle",void 0),r([h(cc.Label)],e.prototype,"labelConfirm",void 0),r([h(cc.Label)],e.prototype,"labelDecompose",void 0),r([h(cc.Label)],e.prototype,"labelOriGemName",void 0),r([h(cc.Label)],e.prototype,"labelNewGemName",void 0),r([h(cc.Sprite)],e.prototype,"newGemSp",void 0),r([h(cc.Sprite)],e.prototype,"newGemSpOutline",void 0),r([h(cc.Sprite)],e.prototype,"oldGemSp",void 0),r([h(cc.Sprite)],e.prototype,"oldGemSpOutline",void 0),r([h(cc.Prefab)],e.prototype,"labelNode",void 0),r([h(cc.Node)],e.prototype,"oldEntryNode",void 0),r([h(cc.Node)],e.prototype,"newEntryNode",void 0),r([h(cc.Label)],e.prototype,"labelNewScore",void 0),r([h(cc.Label)],e.prototype,"labelOldScore",void 0),r([p],e)}(c.default);n.default=d,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],ConditionView:[function(t,e,n){"use strict";cc._RF.push(e,"eddeaVM+R1Jho29M5nlQ95Q","ConditionView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Gameplay/System/BagSystem"),c=t("../Module/ConfigManager"),l=a(t("../Module/ViewHandler")),u=a(t("../Module/ViewModule")),f=a(t("../Utils/Path")),p=a(t("../Utils/Utils")),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelConfirm=null,e.labelCancel=null,e.labelContent=null,e.itemNodes=null,e.itemNode=null,e._callback=null,e._conditions=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=t.conditions,n=t.cb;this._callback=n,this._conditions=e,p.default.localize(this.labelTitle,"ui_condition"),p.default.localize(this.labelConfirm,"ui_confirm"),p.default.localize(this.labelCancel,"ui_cancel"),this.initItems()},e.prototype.initItems=function(){this.itemNodes.removeAllChildren();for(var t=0;t<this._conditions.length;t++){var e=this._conditions[t],n=cc.instantiate(this.itemNode);n.parent=this.itemNodes,n.getChildByName("labelNum").getComponent(cc.Label).string=""+e.count;var o=n.getChildByName("img").getComponent(cc.Sprite),i=n.getChildByName("imgOutline").getComponent(cc.Sprite),r=f.default.getItemPath(e.id),a=f.default.getItemOutlinePath(e.quality||1);p.default.loadImg(o,r,80),p.default.loadImg(i,a,100)}},e.prototype.onCancel=function(){this.close(),this._callback(!1,"toast_user_cancel")},e.prototype.onConfirm=function(){for(var t=!0,e=0;e<this._conditions.length;e++){var n=this._conditions[e];if(!s.BagSystem.instance.isItemEnough(n.id,n.count)){var o=n.count-s.BagSystem.instance.getItemCount(n.id),i=c.ConfigManager.instance.getLanConfig("item_"+n.id+"_name");u.default.instance.toast("toast_needItem",i,o),t=!1;break}}this._callback(t),this.close()},r([_(cc.Label)],e.prototype,"labelTitle",void 0),r([_(cc.Label)],e.prototype,"labelConfirm",void 0),r([_(cc.Label)],e.prototype,"labelCancel",void 0),r([_(cc.Label)],e.prototype,"labelContent",void 0),r([_(cc.Node)],e.prototype,"itemNodes",void 0),r([_(cc.Prefab)],e.prototype,"itemNode",void 0),r([d],e)}(l.default);n.default=y,cc._RF.pop()},{"../Gameplay/System/BagSystem":"BagSystem","../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler","../Module/ViewModule":"ViewModule","../Utils/Path":"Path","../Utils/Utils":"Utils"}],ConfigManager:[function(t,e,n){"use strict";cc._RF.push(e,"4233ecUPplERpCUvnSrTMTZ","ConfigManager");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigManager=void 0;var i=o(t("./Loader")),r=o(t("../Utils/Path")),a=t("../Interface/Config/LanConfig"),s=function(){function t(){this._allConfigMap=null,this._guardMap=new Map,this._bulletMap=new Map,this._enemyMap=new Map,this._abilityMap=new Map,this._levelMap=new Map,this._levelFlowMap=new Map,this._stageMap=new Map,this._lanMap=new Map,this._entryMap=new Map,this._buffMap=new Map,this._gemMap=new Map,this._weaponMap=new Map,this._divineBeastMap=new Map,this._gemArr=[],this._lanType=a.LanType.cn}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;return new Promise(function(e){i.default.loadRes(r.default.getConfigPath(),cc.JsonAsset,function(n){t._allConfigMap=n.json,t.initConfig("Guard",t._guardMap),t.initConfig("Bullet",t._bulletMap),t.initConfig("Enemy",t._enemyMap),t.initConfig("Level",t._levelMap),t.initConfig("LevelFlow",t._levelFlowMap),t.initConfig("Stage",t._stageMap),t.initConfig("Entry",t._entryMap),t.initConfig("Buff",t._buffMap),t.initConfig("Ability",t._abilityMap),t.initConfig("Gem",t._gemMap),t.initConfig("Weapon",t._weaponMap),t.initConfig("DivineBeast",t._divineBeastMap),t.initLanConfig("Lan",t._lanMap),e()},null)})},t.prototype.initLanConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var o in n){var i=o;e.set(i,n[o])}}},t.prototype.initConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var o in n){var i=+o;e.set(i,n[o])}}},t.prototype.getConfig=function(t){return this._allConfigMap[t]},t.prototype.addGuardConfig=function(t){this._guardMap.set(t.id,t)},t.prototype.addEnemyConfig=function(t){this._enemyMap.set(t.id,t)},t.prototype.getDivineBeastConfig=function(t){return this._divineBeastMap.get(t)},t.prototype.getBuffConfig=function(t){return this._buffMap.get(t)},t.prototype.getGemConfig=function(t){return this._gemMap.get(t)},t.prototype.getEntryConfig=function(t){return this._entryMap.get(t)},t.prototype.getWeaponConfig=function(t){return this._weaponMap.get(t)},t.prototype.getGuardConfigs=function(){return this._guardMap},t.prototype.getGuardConfig=function(t){return this._guardMap.get(t)},t.prototype.getBulletConfigs=function(){return this._bulletMap},t.prototype.getBulletConfig=function(t){return this._bulletMap.get(t)},t.prototype.getEnemyConfigs=function(){return this._enemyMap},t.prototype.getEnemyConfig=function(t){return this._enemyMap.get(t)},t.prototype.getAbilityConfigs=function(){return this._abilityMap},t.prototype.getAbilityConfig=function(t){return this._abilityMap.get(t)},t.prototype.getStageConfig=function(t){return this._stageMap.get(t)},t.prototype.getLanConfig=function(t){var e=this._lanMap.get(t);return e?e[this._lanType]:"null"},t.prototype.getLevelConfigs=function(){return this._levelMap},t.prototype.getLevelConfig=function(t){return this._levelMap.get(t)},t.prototype.getLevelFlowConfig=function(t){return this._levelFlowMap.get(t)},t}();n.ConfigManager=s,cc._RF.pop()},{"../Interface/Config/LanConfig":"LanConfig","../Utils/Path":"Path","./Loader":"Loader"}],ConfirmCommonView:[function(t,e,n){"use strict";cc._RF.push(e,"066165pzkBJTJvXOdOaReMx","ConfirmCommonView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Module/ConfigManager"),u=c(t("../../Module/ViewHandler")),f=c(t("../../Module/ViewModule")),p=c(t("../../Module/Audio")),h=c(t("../../Utils/Path")),d=c(t("../../Utils/Platform")),_=c(t("../../Utils/Utils")),y=cc._decorator,g=y.ccclass,v=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refuseBtn=null,e.confirmBtn=null,e.content=null,e.labelRefuse=null,e.labelConfirm=null,e.icon_ad=null,e.adIcon=null,e._handler=null,e}return i(e,t),e.show=function(t){f.default.instance.pushView("ConfirmCommonView",t)},e.prototype.start=function(){},e.prototype.initiateView=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(){return d.default.isBytedance()?(this.adIcon.node.scale=.3,this.adIcon.node.y=8):(this.adIcon.node.scale=1,this.adIcon.node.y=10),_.default.loadImg(this.adIcon,h.default.getAdIconByPlatForm()),e=l.ConfigManager.instance.getLanConfig(t.content),this.content.string=e||t.content,this.labelConfirm.string=t.confirmStr,t.refuseStr?(this.refuseBtn.node.active=!0,this.labelRefuse.string=t.refuseStr):this.refuseBtn.node.active=!1,this._handler=t.handler,this.icon_ad.active=!1,t.showAd&&(this.icon_ad.active=!0),this.icon_ad.active||(this.labelConfirm.node.x=0),[2]})})},e.prototype.onAccept=function(){p.default.instance.playEffect(h.default.clickEffectPath()),this._handler(!0,this),this.onClose()},e.prototype.onRefuse=function(){p.default.instance.playEffect(h.default.clickEffectPath()),this._handler(!1,this),this.onClose()},e.prototype.onClose=function(){f.default.instance.popView(this)},r([v(cc.Button)],e.prototype,"refuseBtn",void 0),r([v(cc.Button)],e.prototype,"confirmBtn",void 0),r([v(cc.Label)],e.prototype,"content",void 0),r([v(cc.Label)],e.prototype,"labelRefuse",void 0),r([v(cc.Label)],e.prototype,"labelConfirm",void 0),r([v(cc.Node)],e.prototype,"icon_ad",void 0),r([v(cc.Sprite)],e.prototype,"adIcon",void 0),r([g],e)}(u.default);n.default=m,cc._RF.pop()},{"../../Module/Audio":"Audio","../../Module/ConfigManager":"ConfigManager","../../Module/ViewHandler":"ViewHandler","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../../Utils/Platform":"Platform","../../Utils/Utils":"Utils"}],CryptoJsMini:[function(t,e,n){"use strict";cc._RF.push(e,"be65azbMBxNgqaDC+gP74Or","CryptoJsMini");var o=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),t("crypto-js/aes"),t("crypto-js/md5");var a=r(t("crypto-js/core"));n.default=a,cc._RF.pop()},{"crypto-js/aes":2,"crypto-js/core":4,"crypto-js/md5":8}],DataSaver:[function(t,e,n){"use strict";cc._RF.push(e,"f220cId5rdEFKR8X1qhmDT5","DataSaver");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataSaver=void 0;var i=o(t("../../../Module/Database/Db")),r=function(){function t(){this._dirty=!1,this._saveInterval=5,this._saveHandle=0}return t.prototype.init=function(t,e,n){void 0===n&&(n=5),this._key=t,this._data=e,this._saveInterval=n},t.prototype.setDirty=function(){var t=this;this._dirty=!0,this._saveHandle||(this._saveHandle=setTimeout(function(){t._saveHandle=0,t.save()},1e3*this._saveInterval))},t.prototype.save=function(){this._dirty&&(this._dirty=!1,this._saveHandle&&(clearTimeout(this._saveHandle),this._saveHandle=0),this._key&&this._data?i.default.instance.setData(this._key,this._data):cc.error("save data error, key: "+this._key))},t}();n.DataSaver=r,cc._RF.pop()},{"../../../Module/Database/Db":"Db"}],DbMap:[function(t,e,n){"use strict";cc._RF.push(e,"bcb2agHxHBDnLQAXiVH1tDO","DbMap"),Object.defineProperty(n,"__esModule",{value:!0}),n.CLEAR_USER_DATA_EXCEPT_KEYS=n.NO_ENCRYPT_KEYS=n.ENABLE_ENCRYPT=n.LOAD_KEYS=void 0,n.LOAD_KEYS=["local","bag","battle","userInfo","home","weapon"],n.ENABLE_ENCRYPT=!1,n.NO_ENCRYPT_KEYS=["local"],n.CLEAR_USER_DATA_EXCEPT_KEYS=["local"],cc._RF.pop()},{}],Db:[function(t,e,n){"use strict";cc._RF.push(e,"e97ecKewSlMh5TYYopGNbCJ","Db");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=t("./LocalStorage"),l=t("./DbMap"),u=function(){function t(){this._saveRequests=[],this._maxQueryPerFrame=5,this._maxTimePerFrame=5,this._nextTaskId=0,this._isNewUser=!1,this._dataMap=cc.js.createMap(!0),this._pendingSaveTasks=cc.js.createMap(!0)}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this.getData("local");t||(this._isNewUser=!0,t={version:1,magic:0},this.setData("local",t)),this._saveHandle||(this._saveHandle=setInterval(this.update.bind(this),16)),this.loadAll()},t.prototype.isNewUser=function(){return this._isNewUser},t.prototype.update=function(){if(0!==this._saveRequests.length){var t=Date.now(),e=0;do{var n=this._saveRequests.shift();this._handlerSaveRequest(n),e++}while(this._saveRequests.length>0&&e<this._maxQueryPerFrame&&Date.now()-t<this._maxTimePerFrame)}},t.prototype.isUpdating=function(){return!!this._saveHandle},t.prototype._handlerSaveRequest=function(t){var e=this.getData(t.key);this.saveData(t.key,e),t.callbacks&&t.callbacks.forEach(function(t){return t&&t()})},t.prototype.loadAll=function(){var t=this;l.LOAD_KEYS.forEach(function(e){return t.loadData(e)})},t.prototype.saveAll=function(){return o(this,void 0,void 0,function(){var t;return i(this,function(){return this._saveRequests.forEach(this._handlerSaveRequest.bind(this)),this._saveRequests.length=0,t=Object.values(this._pendingSaveTasks),[2,Promise.all(t)]})})},t.prototype.clearUserData=function(){var t,e;try{for(var n=r(l.LOAD_KEYS),o=n.next();!o.done;o=n.next()){var i=o.value;l.CLEAR_USER_DATA_EXCEPT_KEYS.includes(i)||(this._dataMap[i]=null,c.LocalStorage.removeItem(i))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearAllData=function(){var t,e;try{for(var n=r(l.LOAD_KEYS),o=n.next();!o.done;o=n.next()){var i=o.value;this._dataMap[i]=null,c.LocalStorage.removeItem(i)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.destroy=function(){this._saveRequests.length=0,this._dataMap=null,this._pendingSaveTasks=null,this._saveHandle&&(clearInterval(this._saveHandle),this._saveHandle=null)},t.prototype.getAllData=function(){return this._dataMap},t.prototype.getData=function(t){return this._dataMap[t]},t.prototype.setData=function(t,e,n){"magic"in e&&(e.magic=(e.magic||0)+1),this._dataMap[t]=e;var o=this._saveRequests.findIndex(function(e){return e.key===t});if(o>=0){if(n){var i=this._saveRequests[o];i.callbacks=i.callbacks||[],i.callbacks.push(n)}}else n?this._saveRequests.push({key:t,callbacks:[n]}):this._saveRequests.push({key:t})},t.prototype.loadData=function(t){var e=c.LocalStorage.getItem(t);if(e){var n=this.decodeObj(t,e);return this._dataMap[t]=n,n}return null},t.prototype.loadDataAsync=function(t,e){var n=this;if(!e)return c.LocalStorage.getItemAsync(t).then(function(e){if(e){var o=n.decodeObj(t,e);return n._dataMap[t]=o,o}return null});this.loadDataAsync(t).then(e)},t.prototype.saveData=function(t,e){var n=this.encodeObj(t,e);c.LocalStorage.setItem(t,n)},t.prototype.saveDataAsync=function(t,e){var n=this;if(!e){var o=this.getData(t),i=this.encodeObj(t,o),r=this._nextTaskId++,a=!1,s=c.LocalStorage.setItemAsync(t,i).then(function(t){return delete n._pendingSaveTasks[r],a=!0,t});return a||(this._pendingSaveTasks[r]=s),s}this.saveDataAsync(t).then(e)},t.prototype.encodeObj=function(t,e){var n=JSON.stringify(e);return l.ENABLE_ENCRYPT&&!l.NO_ENCRYPT_KEYS.includes(t)&&(n=s.default.encode(n)),n},t.prototype.decodeObj=function(t,e){return l.ENABLE_ENCRYPT&&!l.NO_ENCRYPT_KEYS.includes(t)&&(e=s.default.decode(e)),JSON.parse(e)},t._instance=null,t}();n.default=u,cc._RF.pop()},{"../../Utils/Utils":"Utils","./DbMap":"DbMap","./LocalStorage":"LocalStorage"}],DebugPad:[function(t,e,n){"use strict";cc._RF.push(e,"a77ae9vbQVMQrNhw6zVTrFc","DebugPad");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.DebugPad=void 0;var s=t("../Enum/ItemType"),c=t("../Gameplay/System/BagSystem"),l=t("../Gameplay/System/BattleSystem"),u=t("../Gameplay/System/WeaponSystem"),f=t("../Module/ConfigManager"),p=a(t("../Module/Database/Db")),h=a(t("../Module/Loader")),d=a(t("../Utils/Path")),_=t("./EasyMenu/eMenu"),y=function(){function t(){}return t.init=function(){return o(this,void 0,void 0,function(){var t,e,n,o,a,p,y,g,v,m;return i(this,function(i){switch(i.label){case 0:return[4,h.default.loadPrefabAsync(d.default.DEBUG_BUNDLE_PREFIX+"EasyMenu/EasyMenu",null)];case 1:t=i.sent(),(e=this.node=cc.instantiate(t)).parent=cc.Camera.main.node,(n=e.getComponent(_.eMenu)).addGroup("Common").addItem("Clear Data",this.onClearData.bind(this)),n.addGroup("Test").addItem("changeWeapon1",function(){u.WeaponSystem.instance.updateWeapon(1)}).addItem("changeWeapon3",function(){u.WeaponSystem.instance.updateWeapon(3)}).addItem("addCoin",function(){c.BagSystem.instance.addItemCount(s.ItemType.Coin,1e3)}),o=n.addGroup("Level"),a=function(t){var e="Level "+t.level;o.addItem(e,function(){l.BattleSystem.instance.startBattle(t.level)})};try{for(p=r(f.ConfigManager.instance.getLevelConfigs().values()),y=p.next();!y.done;y=p.next())g=y.value,a(g)}catch(b){v={error:b}}finally{try{y&&!y.done&&(m=p.return)&&m.call(p)}finally{if(v)throw v.error}}return[2]}})})},t.onClearData=function(){p.default.instance.clearAllData(),cc.game.end()},t.destroy=function(){cc.isValid(this.node)&&(this.node.destroy(),this.node=null)},t}();n.DebugPad=y,cc._RF.pop()},{"../Enum/ItemType":"ItemType","../Gameplay/System/BagSystem":"BagSystem","../Gameplay/System/BattleSystem":"BattleSystem","../Gameplay/System/WeaponSystem":"WeaponSystem","../Module/ConfigManager":"ConfigManager","../Module/Database/Db":"Db","../Module/Loader":"Loader","../Utils/Path":"Path","./EasyMenu/eMenu":"eMenu"}],Decorators:[function(t,e,n){"use strict";cc._RF.push(e,"b5274Ldd7ZKf42iWRaPF8ns","Decorators"),Object.defineProperty(n,"__esModule",{value:!0}),n.propLabel=void 0;var o=cc._decorator,i=(o.ccclass,o.property);n.propLabel=function(t){return i({editorOnly:!0,serializable:!1,readonly:!0,displayName:t,visible:!0})},cc._RF.pop()},{}],DivineBeastConfig:[function(t,e,n){"use strict";cc._RF.push(e,"bf0cdeB5fNA1aVkzRgzrrkP","DivineBeastConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],DivineBeastItem:[function(t,e,n){"use strict";cc._RF.push(e,"907e6rbR+lCUJQxt2Maxlix","DivineBeastItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Component/Utils/TableView/TableViewItem")),c=t("../../Gameplay/System/BagSystem"),l=t("../../Gameplay/System/WeaponSystem"),u=a(t("../../Utils/Path")),f=a(t("../../Utils/Utils")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img=null,e.outline=null,e.focus=null,e._bagView=null,e._data=null,e}return i(e,t),e.prototype.init=function(t,e){this._bagView=e,this._data=t;var n=u.default.getDivineBeastImg(t.id),o=u.default.getItemOutlinePath(t.quality);f.default.loadImg(this.img,n,60),f.default.loadImg(this.outline,o),this.img.node.opacity=t.isUnlock?255:50,t.isUnlock?f.default.ungray(this.img.node):f.default.gray(this.img.node),this._data.id==l.WeaponSystem.instance.getCurDivineBeastId()&&this.onSelect()},e.prototype.onSelect=function(){var t=this,e=function(){l.WeaponSystem.instance.updateDivineBeast(t._data.id,function(e){e&&(t._bagView.setHighlight(t._data),t._data.isUnlock=!0,t.img.node.opacity=255,f.default.ungray(t.img.node))})};if(this._data.isUnlock)e();else{var n=l.WeaponSystem.instance.getUnlockBeastCondition(this._data.id);c.BagSystem.instance.showConditionView(n,function(t){t&&e()})}},e.prototype.onHighlight=function(t){this.focus.active=t},r([d(cc.Sprite)],e.prototype,"img",void 0),r([d(cc.Sprite)],e.prototype,"outline",void 0),r([d(cc.Node)],e.prototype,"focus",void 0),r([h],e)}(s.default);n.default=_,cc._RF.pop()},{"../../Component/Utils/TableView/TableViewItem":"TableViewItem","../../Gameplay/System/BagSystem":"BagSystem","../../Gameplay/System/WeaponSystem":"WeaponSystem","../../Utils/Path":"Path","../../Utils/Utils":"Utils"}],DivineBeastView:[function(t,e,n){"use strict";cc._RF.push(e,"4acb77VeMBDeY8cJJaULQnC","DivineBeastView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Module/ViewHandler")),c=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),u=cc._decorator,f=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelName=null,e.labelDesc=null,e.labelTitle=null,e.img=null,e._callback=null,e._beastId=null,e}return i(e,t),e.prototype.initiateView=function(t){this._beastId=t.beastId,this._callback=t.cb,l.default.localize(this.labelTitle,"ui_beast"),l.default.localize(this.labelName,"beast_"+this._beastId+"_name"),l.default.localize(this.labelDesc,"beast_"+this._beastId+"_desc"),l.default.loadImg(this.img,c.default.getDivineBeastImg(this._beastId),240)},e.prototype.initAbilityNode=function(){},e.prototype.onConfirm=function(){this.close(),this._callback()},r([p(cc.Label)],e.prototype,"labelName",void 0),r([p(cc.Label)],e.prototype,"labelDesc",void 0),r([p(cc.Label)],e.prototype,"labelTitle",void 0),r([p(cc.Sprite)],e.prototype,"img",void 0),r([f],e)}(s.default);n.default=h,cc._RF.pop()},{"../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],EnemyConfig:[function(t,e,n){"use strict";cc._RF.push(e,"3b4baekK7BCxZhfktdqys2i","EnemyConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],EnemyStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"2bad5EVIphDsahstBaHct8c","EnemyStateMachine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EnemyStateMachine=n.EnemyStatus=void 0;var r,a=t("../../../Utils/StateMachine"),s=t("../../../Interface/Config/AbilityConfig");(function(t){t[t.Move=0]="Move",t[t.Attack=1]="Attack",t[t.Die=2]="Die"})(r=n.EnemyStatus||(n.EnemyStatus={}));var c=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return i(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),e}(a.BaseState),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=r.Move,e}return i(e,t),e.prototype.onEnter=function(){var t=this.avatar.getChildByName("img").getComponent(cc.Animation),e="enemy_"+this.context.id+"_walk";t.play(e)},e.prototype.update=function(t){if(!this.context.hasBuff(s.BuffType.Freeze)){var e=this.context.position,n=this.entityContext.getPlayer().avatar.y;if(e.y<n)e.y=n;else{var o=Math.min(this.context.moveSpeed*t,e.y-n);e.y-=o,e.y<n&&(e.y=n)}this.context.position=e,e.y<=n&&this.changeState(r.Attack)}},e}(c),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=r.Attack,e}return i(e,t),e.prototype.onEnter=function(){this._attackCd=0},e.prototype.update=function(t){if(!this.context.hasBuff(s.BuffType.Freeze)){this._attackCd-=t;for(var e=this.entityContext.getPlayer();this._attackCd<=0&&(this._attackCd+=Math.max(this.config.attackInterval,.01),e.hurt(this.context.attack),e.isAlive()););}},e}(c),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=r.Die,e}return i(e,t),e.prototype.onEnter=function(){var t=this;this.context.playAnim("enemy_death",1,function(){t.entityContext.removeEnemy(t.context.uid)})},e}(c),p=function(t){function e(e,n){var o=t.call(this,e)||this;return o.addInitState(new l(n)),o.addState(new u(n)),o.addState(new f(n)),o}return i(e,t),e}(a.StateMachine);n.EnemyStateMachine=p,cc._RF.pop()},{"../../../Interface/Config/AbilityConfig":"AbilityConfig","../../../Utils/StateMachine":"StateMachine"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"4951bvgGoVA7YqNzcaKeiQ5","Enemy");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Enemy=void 0;var a=r(t("../../Component/Gameplay/EntityTag")),s=t("../../Module/ConfigManager"),c=r(t("../../Utils/Path")),l=r(t("../../Utils/Utils")),u=t("./AI/EnemyStateMachine"),f=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._buffs=[],o.config=s.ConfigManager.instance.getEnemyConfig(o.id),o._hp=o._maxHp=o.config.hp,o._attack=o.config.attack,o._moveSpeed=o.config.moveSpeed,o}return i(e,t),Object.defineProperty(e.prototype,"attack",{get:function(){return this._attack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moveSpeed",{get:function(){return this._moveSpeed},enumerable:!1,configurable:!0}),e.prototype.setConfigFactors=function(t,e,n){this._hp=this._maxHp=Math.floor(this.config.hp*t),this._attack=Math.floor(this.config.attack*e),this._moveSpeed=Math.floor(this.config.moveSpeed*n)},e.prototype.getName=function(){var t="enemy_"+this.id+"_name";return s.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}var n=this.avatar.getComponent(cc.Collider);l.default.getOrAddComponent(n.node,a.default).entity=this,this.anim.node.y=0,this.anim.node.opacity=255},e.prototype.getAssetPath=function(){return c.default.getEntityPath(this.config.asset)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new u.EnemyStateMachine(this,this._context)},e.prototype.isAlive=function(){return this._hp>0},e.prototype.hurt=function(t,e){if(!(t<=0)){var n=Math.min(t,this._hp);if(this._hp-=n,this._context.battleStats.recordDamage(e.id,n),this._hp<=0)this._context.battleStats.addScore(this.config.score),this.die();else{var o=this._anim.node,i=.5*o.width,r=.7*o.height,a=l.default.absPosToAnchorPos(o,cc.v2(i,r)),s=o.convertToWorldSpaceAR(a);this._context.showFloatDamage(s,n)}}},e.prototype.heal=function(t){t<=0||(this._hp=Math.min(this._hp+t,this.config.hp))},e.prototype.die=function(){this._entityContext.getPlayer().addExp(this.config.exp),this._sm.changeState(u.EnemyStatus.Die)},e.prototype.addBuff=function(t){this._buffs.push(t)},e.prototype.removeBuff=function(t){l.default.arrayRemove(this._buffs,t)},e.prototype.hasBuff=function(t){return this._buffs.some(function(e){return e.type===t})},e.prototype.update=function(t){this._sm.update(t),this._avatar&&this.isAlive()&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Enemy: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Enemy=f,cc._RF.pop()},{"../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./AI/EnemyStateMachine":"EnemyStateMachine","./BaseEntity":"BaseEntity"}],EntityManager:[function(t,e,n){"use strict";cc._RF.push(e,"d9fdcWlC35K05kBcN2kW7WF","EntityManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityManager=void 0;var s=t("./Bullet"),c=t("./Enemy"),l=t("./Guard"),u=t("./Player"),f=a(t("../../Utils/Utils")),p=t("./Ability"),h={GuardCreate:"GuardCreate",GuardDestroy:"GuardDestroy",AbilityCreate:"AbilityCreate",AbilityDestroy:"AbilityDestroy",BulletCreate:"BulletCreate",BulletDestroy:"BulletDestroy",EnemyCreate:"EnemyCreate",EnemyDestroy:"EnemyDestroy",PlayerCreate:"PlayerCreate"},d=function(t){function e(e){var n=t.call(this)||this;return n._guards=new Map,n._abilities=new Map,n._bullets=new Map,n._enemies=new Map,n._nextUid=1,n.battleContext=e,n}return i(e,t),e.prototype.createGuard=function(t,e){var n=this._nextUid++,o=new l.Guard(n,t);return o.setContext(this.battleContext),this.setEntityCreateInfo(o,e),this._guards.set(n,o),this.emit(h.GuardCreate,o),o},e.prototype.createAbility=function(t,e){var n=this._nextUid++,o=new p.Ability(n,t);return o.setContext(this.battleContext),this.setEntityCreateInfo(o,e),this._abilities.set(n,o),this.emit(h.AbilityCreate,o),o},e.prototype.createBullet=function(t,e){var n=this._nextUid++,o=new s.Bullet(n,t);return o.setContext(this.battleContext),this.setEntityCreateInfo(o,e),this._bullets.set(n,o),this.emit(h.BulletCreate,o),o},e.prototype.createEnemy=function(t,e){var n=this._nextUid++,o=new c.Enemy(n,t);return o.setContext(this.battleContext),this.setEntityCreateInfo(o,e),this._enemies.set(n,o),this.emit(h.EnemyCreate,o),o},e.prototype.setEntityCreateInfo=function(t,e){t&&e&&t.setInitPos(e.pos)},e.prototype.createPlayer=function(t,e){return this._player=new u.Player(t),this.setEntityCreateInfo(this._player,e),this.emit(h.PlayerCreate,this._player),this._player},e.prototype.upgradeGuard=function(t,e){var n=this;if(e.every(function(t){return null!=n._guards.get(t)})){var o=this.getGuard(f.default.randomSelect(e)).position;e.forEach(function(t){return n.removeGuard(t)}),this.createGuard(t,{pos:o})}},e.prototype.removeGuard=function(t){var e=this._guards.get(t);null!=e&&(e.destroy(),this._guards.delete(t),this.emit(h.GuardDestroy,e))},e.prototype.removeAbility=function(t){var e=this._abilities.get(t);null!=e&&(e.destroy(),this._abilities.delete(t),this.emit(h.AbilityDestroy,e))},e.prototype.removeBullet=function(t){var e=this._bullets.get(t);null!=e&&(e.destroy(),this._bullets.delete(t),this.emit(h.BulletDestroy,e))},e.prototype.removeEnemy=function(t){var e=this._enemies.get(t);null!=e&&(e.destroy(),this._enemies.delete(t),this.emit(h.EnemyDestroy,e))},e.prototype.getGuard=function(t){return this._guards.get(t)},e.prototype.getAllGuards=function(){return this._guards},e.prototype.getBullet=function(t){return this._bullets.get(t)},e.prototype.getAllBullets=function(){return this._bullets},e.prototype.getEnemy=function(t){return this._enemies.get(t)},e.prototype.getAllEnemies=function(){return this._enemies},e.prototype.getPlayer=function(){return this._player},e.prototype.update=function(t){var e,n,o,i,a,s,c,l;try{for(var u=r(this._guards.values()),f=u.next();!f.done;f=u.next())f.value.update(t)}catch(v){e={error:v}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}try{for(var p=r(this._abilities.values()),h=p.next();!h.done;h=p.next())h.value.update(t)}catch(m){o={error:m}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}try{for(var d=r(this._bullets.values()),_=d.next();!_.done;_=d.next())_.value.update(t)}catch(b){a={error:b}}finally{try{_&&!_.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}try{for(var y=r(this._enemies.values()),g=y.next();!g.done;g=y.next())g.value.update(t)}catch(w){c={error:w}}finally{try{g&&!g.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}},e.prototype.destroy=function(){var t,e,n,o,i,a,s,c;try{for(var l=r(this._guards.keys()),u=l.next();!u.done;u=l.next()){var f=u.value;this.removeGuard(f)}}catch(v){t={error:v}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}this._guards.clear();try{for(var p=r(this._abilities.keys()),h=p.next();!h.done;h=p.next())f=h.value,this.removeAbility(f)}catch(m){n={error:m}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}this._abilities.clear();try{for(var d=r(this._bullets.keys()),_=d.next();!_.done;_=d.next())f=_.value,this.removeBullet(f)}catch(b){i={error:b}}finally{try{_&&!_.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}this._bullets.clear();try{for(var y=r(this._enemies.keys()),g=y.next();!g.done;g=y.next())f=g.value,this.removeEnemy(f)}catch(w){s={error:w}}finally{try{g&&!g.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}this._enemies.clear(),this._player&&(this._player.destroy(),this._player=null)},e.Events=h,e}(cc.EventTarget);n.EntityManager=d,cc._RF.pop()},{"../../Utils/Utils":"Utils","./Ability":"Ability","./Bullet":"Bullet","./Enemy":"Enemy","./Guard":"Guard","./Player":"Player"}],EntityTag:[function(t,e,n){"use strict";cc._RF.push(e,"3be69fxeqBDuYLXZxD/i0/a","EntityTag");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],EntryConfig:[function(t,e,n){"use strict";cc._RF.push(e,"46e7fvyV/JO6o7uMUmVtTrm","EntryConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],EntryType:[function(t,e,n){"use strict";cc._RF.push(e,"97b6apBFWRMW5mSvSDrQC5W","EntryType"),Object.defineProperty(n,"__esModule",{value:!0}),n.EntryType=void 0,function(t){t.addHp="addHp",t.addAttack="addAttack",t.addSpeed="addSpeed"}(n.EntryType||(n.EntryType={})),cc._RF.pop()},{}],ErrorReporter:[function(t,e,n){"use strict";cc._RF.push(e,"c8aa5k8MjVJSoir8c2kUFcF","ErrorReporter");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Enum/ErrorType")),c=a(t("../Gameplay/GameDefine")),l=a(t("../Module/Database/Db")),u=a(t("./Platform")),f=function(){function t(){this._logs=[],this._reported=[]}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.enableReportLog()},t.prototype.report=function(t,e){if(!this._reported.some(function(n){return n.type==e&&n.name==t.name&&n.message==t.message&&n.stack==t.stack})){var n={type:e,version:c.default.VERSION,isNewUser:l.default.instance.isNewUser(),name:t.name,message:t.message,stack:t.stack,logs:this._logs};return u.default.isMobile()&&(n.systemInfo=SDKBridge.getInstance().getSystemInfo()),console.warn("error",n),this._reported.push(n),new Promise(function(){})}},t.prototype.enableReportLog=function(){var t,e,n=this;if(!this._console){this._console={};var o=function(t){var e=console[t];a._console[t]=e,console[t]=function(){for(var t,o,r,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];r=1===a.length?null!==(o=null===(t=a[0])||void 0===t?void 0:t.toString())&&void 0!==o?o:"null":a.map(function(t){var e;return null!==(e=null==t?void 0:t.toString())&&void 0!==e?e:"null"}).join(", "),n._logs.push(r),n._logs.length>c.default.MAX_REPORT_LOG_COUNT&&n._logs.shift(),e.apply(void 0,i(a))}},a=this;try{for(var s=r(["log","info","warn","error"]),l=s.next();!l.done;l=s.next())o(l.value)}catch(u){t={error:u}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}},t.prototype.disableReportLog=function(){var t,e;if(this._console){try{for(var n=r(["log","info","warn","error"]),o=n.next();!o.done;o=n.next()){var i=o.value;console[i]=this._console[i]}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this._console=null}},t.prototype.enableGlobalCatch=function(){var t=this;cc.sys.platform===cc.sys.WECHAT_GAME?wx.onError(function(e){t.report(e,s.default.GLOBAL)}):cc.sys.isBrowser?window.onerror=function(t,e,n,o,i){this.report(i,s.default.GLOBAL)}:cc.sys.isNative&&(window.__errorHandler=function(t,e,n,o,i){this.report(i,s.default.GLOBAL)})},t._instance=null,t}();n.default=f,cc._RF.pop()},{"../Enum/ErrorType":"ErrorType","../Gameplay/GameDefine":"GameDefine","../Module/Database/Db":"Db","./Platform":"Platform"}],ErrorType:[function(t,e,n){"use strict";cc._RF.push(e,"cb5c9VTG09OkJTf1Mo7PBxR","ErrorType"),Object.defineProperty(n,"__esModule",{value:!0}),n.default={LOADING:"LoadingError",GAME_INIT:"GameInitError",GAME_UPDATE:"GameUpdateError",GLOBAL:"GlobalError"},cc._RF.pop()},{}],FFComponent:[function(t,e,n){"use strict";cc._RF.push(e,"07750AVKTxCaZdh9/NziAnw","FFComponent");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._res=[],e}return i(e,t),e.prototype.onDestroy=function(){for(var t=0;t<this._res.length;t++){var e=this._res[t];cc.isValid(e)&&this.releaseAsset(e)}this._res.length=0},e.prototype.loadAutoRes=function(t,e,n,o){var i=this;o||(o=this),l.default.loadRes(t,e,function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var o=t[e];i.retainAsset(o),i._res.push(o)}else i.retainAsset(t),i._res.push(t);n&&n(t)},o)},e.prototype.loadAutoResAsync=function(t,e,n){var o=this;return n||(n=this),l.default.loadResAsync(t,e,n).then(function(t){return o.retainAsset(t),o._res.push(t),t})},e.prototype.retainAsset=function(){},e.prototype.releaseAsset=function(){},r([s],e)}(cc.Component);n.default=c;var l=a(t("./Loader"));cc._RF.pop()},{"./Loader":"Loader"}],FlexLabel:[function(t,e,n){"use strict";cc._RF.push(e,"9a82brJsmpOWraCXYe8nA8r","FlexLabel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator.ccclass,s={FLEX_WIDTH:"flex_width"},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this._label||(this._label=this.getComponent(cc.Label)),this._label.node.on("size-changed",this.onSizeChanged,this),this._rawWidth=this._label.node.width},e.prototype.onSizeChanged=function(){var t=this.node.width;this.node.emit(s.FLEX_WIDTH,Math.max(this._rawWidth,t))},e.EventType=s,r([a],e)}(cc.Component);n.default=c,cc._RF.pop()},{}],FrameExecutor:[function(t,e,n){"use strict";cc._RF.push(e,"7d24czN0HpDNZ5VnaO/Jdps","FrameExecutor"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n){this._handler=null,this._sourceData=null,this._complete=null,this._context=null,this._update=null,this.index=0,this.set(t,e,n),this._update=this.next.bind(this)}return t.prototype.next=function(){for(var t=Date.now();;){var e=this.index,n=this._sourceData[e];if(!n){this._complete&&this._complete(),this.stop();break}if(!this._handler(n,e))break;if(this.index++,Date.now()-t>3)break}},t.prototype.free=function(){this._handler=null,this._sourceData=null,this._complete=null},t.prototype.set=function(t,e,n){return this._handler=t,this._complete=n,e instanceof Array?this._sourceData=e:this._sourceData=Object.values(e),this},t.prototype.start=function(t){return this.index=0,this._context=t,t.schedule(this._update,0,cc.macro.REPEAT_FOREVER,0),this},t.prototype.stop=function(){return this._context.unschedule(this._update),this._context=null,this._handler=null,this._sourceData=null,this._complete=null,this},t.prototype.pause=function(){return this._context.schedule(this._update,0,cc.macro.REPEAT_FOREVER,0),this},t.prototype.resume=function(){return this._context.unschedule(this._update),this},t.prototype.isFinished=function(){return this.index>=this._sourceData.length},t}();n.default=o,cc._RF.pop()},{}],2:[function(t,e,n){var o;o=function(t){return function(){var e=t,n=e.lib.BlockCipher,o=e.algo,i=[],r=[],a=[],s=[],c=[],l=[],u=[],f=[],p=[],h=[];(function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,o=0;for(e=0;e<256;e++){var d=o^o<<1^o<<2^o<<3^o<<4;d=d>>>8^255&d^99,i[n]=d,r[d]=n;var _=t[n],y=t[_],g=t[y],v=257*t[d]^16843008*d;a[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,l[n]=v,v=16843009*g^65537*y^257*_^16843008*n,u[d]=v<<24|v>>>8,f[d]=v<<16|v>>>16,p[d]=v<<8|v>>>24,h[d]=v,n?(n=_^t[t[t[g^_]]],o^=t[t[o]]):n=o=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,o=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],a=0;a<o;a++)a<n?r[a]=e[a]:(l=r[a-1],a%n?n>6&&a%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=d[a/n|0]<<24),r[a]=r[a-n]^l);for(var s=this._invKeySchedule=[],c=0;c<o;c++){if(a=o-c,c%4)var l=r[a];else l=r[a-4];s[c]=c<4||a<=4?l:u[i[l>>>24]]^f[i[l>>>16&255]]^p[i[l>>>8&255]]^h[i[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,c,l,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,f,p,h,r),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,o,i,r,a,s){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],f=t[e+2]^n[2],p=t[e+3]^n[3],h=4,d=1;d<c;d++){var _=o[l>>>24]^i[u>>>16&255]^r[f>>>8&255]^a[255&p]^n[h++],y=o[u>>>24]^i[f>>>16&255]^r[p>>>8&255]^a[255&l]^n[h++],g=o[f>>>24]^i[p>>>16&255]^r[l>>>8&255]^a[255&u]^n[h++],v=o[p>>>24]^i[l>>>16&255]^r[u>>>8&255]^a[255&f]^n[h++];l=_,u=y,f=g,p=v}_=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[f>>>8&255]<<8|s[255&p])^n[h++],y=(s[u>>>24]<<24|s[f>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^n[h++],g=(s[f>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[h++],v=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&f])^n[h++],t[e]=_,t[e+1]=y,t[e+2]=g,t[e+3]=v},keySize:8});e.AES=n._createHelper(_)}(),t.AES},"object"==typeof n?e.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(this.CryptoJS)},{"./cipher-core":3,"./core":4,"./enc-base64":5,"./evpkdf":6,"./md5":8}],3:[function(t,e,n){var o;o=function(t){t.lib.Cipher||function(e){var n=t,o=n.lib,i=o.Base,r=o.WordArray,a=o.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),l=n.algo.EvpKDF,u=o.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?m:g}return function(e){return{encrypt:function(n,o,i){return t(o).encrypt(e,n,o,i)},decrypt:function(n,o,i){return t(o).decrypt(e,n,o,i)}}}}()}),f=(o.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=o.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),h=f.CBC=function(){var t=p.extend();function n(t,n,o){var i,r=this._iv;r?(i=r,this._iv=e):i=this._prevBlock;for(var a=0;a<o;a++)t[n+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var o=this._cipher,i=o.blockSize;n.call(this,t,e,i),o.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),t.Decryptor=t.extend({processBlock:function(t,e){var o=this._cipher,i=o.blockSize,r=t.slice(e,e+i);o.decryptBlock(t,e),n.call(this,t,e,i),this._prevBlock=r}}),t}(),d=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,o=n-t.sigBytes%n,i=o<<24|o<<16|o<<8|o,a=[],s=0;s<o;s+=4)a.push(i);var c=r.create(a,o);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},_=(o.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:d}),reset:function(){var t;u.reset.call(this);var e=this.cfg,n=e.iv,o=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=o.createEncryptor:(t=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(o,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),o.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),y=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?r.create([1398893684,1701076831]).concat(n).concat(e):e).toString(c)},parse:function(t){var e,n=c.parse(t),o=n.words;return 1398893684==o[0]&&1701076831==o[1]&&(e=r.create(o.slice(2,4)),o.splice(0,4),n.sigBytes-=16),_.create({ciphertext:n,salt:e})}},g=o.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(t,e,n,o){o=this.cfg.extend(o);var i=t.createEncryptor(n,o),r=i.finalize(e),a=i.cfg;return _.create({ciphertext:r,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:o.format})},decrypt:function(t,e,n,o){return o=this.cfg.extend(o),e=this._parse(e,o.format),t.createDecryptor(n,o).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),v=(n.kdf={}).OpenSSL={execute:function(t,e,n,o,i){if(o||(o=r.random(8)),i)a=l.create({keySize:e+n,hasher:i}).compute(t,o);else var a=l.create({keySize:e+n}).compute(t,o);var s=r.create(a.words.slice(e),4*n);return a.sigBytes=4*e,_.create({key:a,iv:s,salt:o})}},m=o.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(t,e,n,o){var i=(o=this.cfg.extend(o)).kdf.execute(n,t.keySize,t.ivSize,o.salt,o.hasher);o.iv=i.iv;var r=g.encrypt.call(this,t,e,i.key,o);return r.mixIn(i),r},decrypt:function(t,e,n,o){o=this.cfg.extend(o),e=this._parse(e,o.format);var i=o.kdf.execute(n,t.keySize,t.ivSize,e.salt,o.hasher);return o.iv=i.iv,g.decrypt.call(this,t,e,i.key,o)}})}()},"object"==typeof n?e.exports=n=o(t("./core"),t("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],o):o(this.CryptoJS)},{"./core":4,"./evpkdf":6}],4:[function(t,e,n){(function(o){var i;i=function(){var e=e||function(e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==o&&o.crypto&&(n=o.crypto),!n&&"function"==typeof t)try{n=t("crypto")}catch(y){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,o=this.sigBytes,i=t.sigBytes;if(this.clamp(),o%4)for(var r=0;r<i;r++){var a=n[r>>>2]>>>24-r%4*8&255;e[o+r>>>2]|=a<<24-(o+r)%4*8}else for(var s=0;s<i;s+=4)e[o+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new l.init(e,t)}}),u=a.enc={},f=u.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,o=[],i=0;i<n;i++){var r=e[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o+=2)n[o>>>3]|=parseInt(t.substr(o,2),16)<<24-o%8*4;return new l.init(n,e/2)}},p=u.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,o=[],i=0;i<n;i++){var r=e[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>2]|=(255&t.charCodeAt(o))<<24-o%4*8;return new l.init(n,e)}},h=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},d=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n,o=this._data,i=o.words,r=o.sigBytes,a=this.blockSize,s=r/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,r);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(i,f);n=i.splice(0,c),o.sigBytes-=u}return new l.init(n,u)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),_=(s.Hasher=d.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new _.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math);return e},"object"==typeof n?e.exports=n=i():"function"==typeof define&&define.amd?define([],i):this.CryptoJS=i()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],5:[function(t,e,n){var o;o=function(t){return function(){var e=t,n=e.lib.WordArray;function o(t,e,o){for(var i=[],r=0,a=0;a<e;a++)if(a%4){var s=o[t.charCodeAt(a-1)]<<a%4*2|o[t.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=s<<24-r%4*8,r++}return n.create(i,r)}e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,o=this._map;t.clamp();for(var i=[],r=0;r<n;r+=3)for(var a=(e[r>>>2]>>>24-r%4*8&255)<<16|(e[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<n;s++)i.push(o.charAt(a>>>6*(3-s)&63));var c=o.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var r=0;r<n.length;r++)i[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return o(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64},"object"==typeof n?e.exports=n=o(t("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(this.CryptoJS)},{"./core":4}],6:[function(t,e,n){var o;o=function(t){var e,n,o,i,r,a,s;return o=(n=(e=t).lib).Base,i=n.WordArray,a=(r=e.algo).MD5,s=r.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,o=this.cfg,r=o.hasher.create(),a=i.create(),s=a.words,c=o.keySize,l=o.iterations;s.length<c;){n&&r.update(n),n=r.update(t).finalize(e),r.reset();for(var u=1;u<l;u++)n=r.finalize(n),r.reset();a.concat(n)}return a.sigBytes=4*c,a}}),e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)},t.EvpKDF},"object"==typeof n?e.exports=n=o(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],o):o(this.CryptoJS)},{"./core":4,"./hmac":7,"./sha1":9}],7:[function(t,e,n){var o;o=function(t){var e,n,o;n=(e=t).lib.Base,o=e.enc.Utf8,e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),a=this._iKey=e.clone(),s=r.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},"object"==typeof n?e.exports=n=o(t("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(this.CryptoJS)},{"./core":4}],8:[function(t,e,n){var o;o=function(t){return function(e){var n=t,o=n.lib,i=o.WordArray,r=o.Hasher,a=n.algo,s=[];(function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0})();var c=a.MD5=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var o=e+n,i=t[o];t[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r=this._hash.words,a=t[e+0],c=t[e+1],h=t[e+2],d=t[e+3],_=t[e+4],y=t[e+5],g=t[e+6],v=t[e+7],m=t[e+8],b=t[e+9],w=t[e+10],S=t[e+11],C=t[e+12],M=t[e+13],P=t[e+14],A=t[e+15],R=r[0],E=r[1],O=r[2],I=r[3];R=l(R,E,O,I,a,7,s[0]),I=l(I,R,E,O,c,12,s[1]),O=l(O,I,R,E,h,17,s[2]),E=l(E,O,I,R,d,22,s[3]),R=l(R,E,O,I,_,7,s[4]),I=l(I,R,E,O,y,12,s[5]),O=l(O,I,R,E,g,17,s[6]),E=l(E,O,I,R,v,22,s[7]),R=l(R,E,O,I,m,7,s[8]),I=l(I,R,E,O,b,12,s[9]),O=l(O,I,R,E,w,17,s[10]),E=l(E,O,I,R,S,22,s[11]),R=l(R,E,O,I,C,7,s[12]),I=l(I,R,E,O,M,12,s[13]),O=l(O,I,R,E,P,17,s[14]),R=u(R,E=l(E,O,I,R,A,22,s[15]),O,I,c,5,s[16]),I=u(I,R,E,O,g,9,s[17]),O=u(O,I,R,E,S,14,s[18]),E=u(E,O,I,R,a,20,s[19]),R=u(R,E,O,I,y,5,s[20]),I=u(I,R,E,O,w,9,s[21]),O=u(O,I,R,E,A,14,s[22]),E=u(E,O,I,R,_,20,s[23]),R=u(R,E,O,I,b,5,s[24]),I=u(I,R,E,O,P,9,s[25]),O=u(O,I,R,E,d,14,s[26]),E=u(E,O,I,R,m,20,s[27]),R=u(R,E,O,I,M,5,s[28]),I=u(I,R,E,O,h,9,s[29]),O=u(O,I,R,E,v,14,s[30]),R=f(R,E=u(E,O,I,R,C,20,s[31]),O,I,y,4,s[32]),I=f(I,R,E,O,m,11,s[33]),O=f(O,I,R,E,S,16,s[34]),E=f(E,O,I,R,P,23,s[35]),R=f(R,E,O,I,c,4,s[36]),I=f(I,R,E,O,_,11,s[37]),O=f(O,I,R,E,v,16,s[38]),E=f(E,O,I,R,w,23,s[39]),R=f(R,E,O,I,M,4,s[40]),I=f(I,R,E,O,a,11,s[41]),O=f(O,I,R,E,d,16,s[42]),E=f(E,O,I,R,g,23,s[43]),R=f(R,E,O,I,b,4,s[44]),I=f(I,R,E,O,C,11,s[45]),O=f(O,I,R,E,A,16,s[46]),R=p(R,E=f(E,O,I,R,h,23,s[47]),O,I,a,6,s[48]),I=p(I,R,E,O,v,10,s[49]),O=p(O,I,R,E,P,15,s[50]),E=p(E,O,I,R,y,21,s[51]),R=p(R,E,O,I,C,6,s[52]),I=p(I,R,E,O,d,10,s[53]),O=p(O,I,R,E,w,15,s[54]),E=p(E,O,I,R,c,21,s[55]),R=p(R,E,O,I,m,6,s[56]),I=p(I,R,E,O,A,10,s[57]),O=p(O,I,R,E,g,15,s[58]),E=p(E,O,I,R,M,21,s[59]),R=p(R,E,O,I,_,6,s[60]),I=p(I,R,E,O,S,10,s[61]),O=p(O,I,R,E,h,15,s[62]),E=p(E,O,I,R,b,21,s[63]),r[0]=r[0]+R|0,r[1]=r[1]+E|0,r[2]=r[2]+O|0,r[3]=r[3]+I|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var r=e.floor(o/4294967296),a=o;n[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,o,i,r,a){var s=t+(e&n|~e&o)+i+a;return(s<<r|s>>>32-r)+e}function u(t,e,n,o,i,r,a){var s=t+(e&o|n&~o)+i+a;return(s<<r|s>>>32-r)+e}function f(t,e,n,o,i,r,a){var s=t+(e^n^o)+i+a;return(s<<r|s>>>32-r)+e}function p(t,e,n,o,i,r,a){var s=t+(n^(e|~o))+i+a;return(s<<r|s>>>32-r)+e}n.MD5=r._createHelper(c),n.HmacMD5=r._createHmacHelper(c)}(Math),t.MD5},"object"==typeof n?e.exports=n=o(t("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(this.CryptoJS)},{"./core":4}],9:[function(t,e,n){var o;o=function(t){var e,n,o,i,r,a,s;return n=(e=t).lib,o=n.WordArray,i=n.Hasher,r=e.algo,a=[],s=r.SHA1=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)a[l]=0|t[e+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var f=(o<<5|o>>>27)+c+a[l];f+=l<20?1518500249+(i&r|~i&s):l<40?1859775393+(i^r^s):l<60?(i&r|i&s|r&s)-1894007588:(i^r^s)-899497514,c=s,s=r,r=i<<30|i>>>2,i=o,o=f}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return e[o>>>5]|=128<<24-o%32,e[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(o+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=i._createHelper(s),e.HmacSHA1=i._createHmacHelper(s),t.SHA1},"object"==typeof n?e.exports=n=o(t("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(this.CryptoJS)},{"./core":4}],10:[function(t,e){"use strict";function n(t,e){e=e||{},this._capacity=e.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}n.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var n=this.size();if(!(e>=n||e<-n))return e<0&&(e+=n),e=this._head+e&this._capacityMask,this._list[e]}},n.prototype.get=function(t){return this.peekAt(t)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(t){if(0===arguments.length)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},n.prototype.push=function(t){if(0===arguments.length)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),n}},n.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var n=this.size(),o=this._list.length;if(!(e>=n||e<-n)){e<0&&(e+=n),e=this._head+e&this._capacityMask;var i,r=this._list[e];if(t<n/2){for(i=t;i>0;i--)this._list[e]=this._list[e=e-1+o&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+o&this._capacityMask}else{for(i=n-1-t;i>0;i--)this._list[e]=this._list[e=e+1+o&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+o&this._capacityMask}return r}}},n.prototype.remove=function(t,e){var n,o=t,i=e;if(o===(0|o)&&this._head!==this._tail){var r=this.size(),a=this._list.length;if(!(o>=r||o<-r||e<1)){if(o<0&&(o+=r),1===e||!e)return(n=new Array(1))[0]=this.removeOne(o),n;if(0===o&&o+e>=r)return n=this.toArray(),this.clear(),n;var s;for(o+e>r&&(e=r-o),n=new Array(e),s=0;s<e;s++)n[s]=this._list[this._head+o+s&this._capacityMask];if(o=this._head+o&this._capacityMask,t+e===r){for(this._tail=this._tail-e+a&this._capacityMask,s=e;s>0;s--)this._list[o=o+1+a&this._capacityMask]=void 0;return n}if(0===t){for(this._head=this._head+e+a&this._capacityMask,s=e-1;s>0;s--)this._list[o=o+1+a&this._capacityMask]=void 0;return n}if(o<r/2){for(this._head=this._head+t+e+a&this._capacityMask,s=t;s>0;s--)this.unshift(this._list[o=o-1+a&this._capacityMask]);for(o=this._head-1+a&this._capacityMask;i>0;)this._list[o=o-1+a&this._capacityMask]=void 0,i--;t<0&&(this._tail=o)}else{for(this._tail=o,o=o+e+a&this._capacityMask,s=r-(e+t);s>0;s--)this.push(this._list[o++]);for(o=this._tail;i>0;)this._list[o=o+1+a&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}},n.prototype.splice=function(t,e){var n=t;if(n===(0|n)){var o=this.size();if(n<0&&(n+=o),!(n>o)){if(arguments.length>2){var i,r,a,s=arguments.length,c=this._list.length,l=2;if(!o||n<o/2){for(r=new Array(n),i=0;i<n;i++)r[i]=this._list[this._head+i&this._capacityMask];for(0===e?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,e),this._head=this._head+n+c&this._capacityMask);s>l;)this.unshift(arguments[--s]);for(i=n;i>0;i--)this.unshift(r[i-1])}else{var u=(r=new Array(o-(n+e))).length;for(i=0;i<u;i++)r[i]=this._list[this._head+n+e+i&this._capacityMask];for(0===e?(a=[],n!=o&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,e),this._tail=this._tail-u+c&this._capacityMask);l<s;)this.push(arguments[l++]);for(i=0;i<u;i++)this.push(r[i])}return a}return this.remove(n,e)}}},n.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(t){var e=t.length,n=this._nextPowerOf2(e);this._list=new Array(n),this._capacityMask=n-1,this._tail=e;for(var o=0;o<e;o++)this._list[o]=t[o]},n.prototype._copyArray=function(t,e){var n=this._list,o=n.length,i=this.length;if((e|=i)==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var r,a=new Array(e),s=0;if(t||this._head>this._tail){for(r=this._head;r<o;r++)a[s++]=n[r];for(r=0;r<this._tail;r++)a[s++]=n[r]}else for(r=this._head;r<this._tail;r++)a[s++]=n[r];return a},n.prototype._growArray=function(){if(0!=this._head){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},n.prototype._nextPowerOf2=function(t){var e=1<<Math.log(t)/Math.log(2)+1;return Math.max(e,4)},e.exports=n},{}],11:[function(t,e,n){(function(t){(function(){var o,i=200,r="Expected a function",a="__lodash_placeholder__",s=1,c=2,l=4,u=1,f=2,p=1,h=2,d=4,_=8,y=16,g=32,v=64,m=128,b=256,w=512,S=800,C=16,M=1/0,P=9007199254740991,A=17976931348623157e292,R=NaN,E=4294967295,O=E-1,I=E>>>1,N=[["ary",m],["bind",p],["bindKey",h],["curry",_],["curryRight",y],["flip",w],["partial",g],["partialRight",v],["rearg",b]],T="[object Arguments]",B="[object Array]",D="[object AsyncFunction]",x="[object Boolean]",L="[object Date]",U="[object DOMException]",k="[object Error]",j="[object Function]",F="[object GeneratorFunction]",V="[object Map]",G="[object Number]",H="[object Null]",W="[object Object]",z="[object Proxy]",q="[object RegExp]",K="[object Set]",Y="[object String]",X="[object Symbol]",J="[object Undefined]",Q="[object WeakMap]",Z="[object ArrayBuffer]",$="[object DataView]",tt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",ot="[object Int16Array]",it="[object Int32Array]",rt="[object Uint8Array]",at="[object Uint8ClampedArray]",st="[object Uint16Array]",ct="[object Uint32Array]",lt=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,ht=/[&<>"']/g,dt=RegExp(pt.source),_t=RegExp(ht.source),yt=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(St.source),Mt=/^\s+/,Pt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rt=/\{\n\/\* \[wrapped with (.+)\] \*/,Et=/,? & /,Ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,It=/[()=,{}\[\]\/\s]/,Nt=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bt=/\w*$/,Dt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,Lt=/^\[object .+?Constructor\]$/,Ut=/^0o[0-7]+$/i,kt=/^(?:0|[1-9]\d*)$/,jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ft=/($^)/,Vt=/['\n\r\u2028\u2029\\]/g,Gt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ht="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wt="["+Ht+"]",zt="["+Gt+"]",qt="\\d+",Kt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Yt="[^\\ud800-\\udfff"+Ht+qt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Xt="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Zt="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",te="(?:"+Kt+"|"+Yt+")",ee="(?:"+$t+"|"+Yt+")",ne="(?:"+zt+"|"+Xt+")?",oe="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[Jt,Qt,Zt].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",ie="(?:"+["[\\u2700-\\u27bf]",Qt,Zt].join("|")+")"+oe,re="(?:"+[Jt+zt+"?",zt,Qt,Zt,"[\\ud800-\\udfff]"].join("|")+")",ae=RegExp("['\u2019]","g"),se=RegExp(zt,"g"),ce=RegExp(Xt+"(?="+Xt+")|"+re+oe,"g"),le=RegExp([$t+"?"+Kt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Wt,$t,"$"].join("|")+")",ee+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Wt,$t+te,"$"].join("|")+")",$t+"?"+te+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$t+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qt,ie].join("|"),"g"),ue=RegExp("[\\u200d\\ud800-\\udfff"+Gt+"\\ufe0e\\ufe0f]"),fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],he=-1,de={};de[tt]=de[et]=de[nt]=de[ot]=de[it]=de[rt]=de[at]=de[st]=de[ct]=!0,de[T]=de[B]=de[Z]=de[x]=de[$]=de[L]=de[k]=de[j]=de[V]=de[G]=de[W]=de[q]=de[K]=de[Y]=de[Q]=!1;var _e={};_e[T]=_e[B]=_e[Z]=_e[$]=_e[x]=_e[L]=_e[tt]=_e[et]=_e[nt]=_e[ot]=_e[it]=_e[V]=_e[G]=_e[W]=_e[q]=_e[K]=_e[Y]=_e[X]=_e[rt]=_e[at]=_e[st]=_e[ct]=!0,_e[k]=_e[j]=_e[Q]=!1;var ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ge=parseFloat,ve=parseInt,me="object"==typeof t&&t&&t.Object===Object&&t,be="object"==typeof self&&self&&self.Object===Object&&self,we=me||be||Function("","return this")(),Se="object"==typeof n&&n&&!n.nodeType&&n,Ce=Se&&"object"==typeof e&&e&&!e.nodeType&&e,Me=Ce&&Ce.exports===Se,Pe=Me&&me.process,Ae=function(){try{return Ce&&Ce.require&&Ce.require("util").types||Pe&&Pe.binding&&Pe.binding("util")}catch(t){}}(),Re=Ae&&Ae.isArrayBuffer,Ee=Ae&&Ae.isDate,Oe=Ae&&Ae.isMap,Ie=Ae&&Ae.isRegExp,Ne=Ae&&Ae.isSet,Te=Ae&&Ae.isTypedArray;function Be(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function De(t,e,n,o){for(var i=-1,r=null==t?0:t.length;++i<r;){var a=t[i];e(o,a,n(a),t)}return o}function xe(t,e){for(var n=-1,o=null==t?0:t.length;++n<o&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ue(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(!e(t[n],n,t))return!1;return!0}function ke(t,e){for(var n=-1,o=null==t?0:t.length,i=0,r=[];++n<o;){var a=t[n];e(a,n,t)&&(r[i++]=a)}return r}function je(t,e){return!(null==t||!t.length)&&Qe(t,e,0)>-1}function Fe(t,e,n){for(var o=-1,i=null==t?0:t.length;++o<i;)if(n(e,t[o]))return!0;return!1}function Ve(t,e){for(var n=-1,o=null==t?0:t.length,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i}function Ge(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}function He(t,e,n,o){var i=-1,r=null==t?0:t.length;for(o&&r&&(n=t[++i]);++i<r;)n=e(n,t[i],i,t);return n}function We(t,e,n,o){var i=null==t?0:t.length;for(o&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ze(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}var qe=en("length");function Ke(t){return t.split("")}function Ye(t){return t.match(Ot)||[]}function Xe(t,e,n){var o;return n(t,function(t,n,i){if(e(t,n,i))return o=n,!1}),o}function Je(t,e,n,o){for(var i=t.length,r=n+(o?1:-1);o?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function Qe(t,e,n){return e==e?En(t,e,n):Je(t,$e,n)}function Ze(t,e,n,o){for(var i=n-1,r=t.length;++i<r;)if(o(t[i],e))return i;return-1}function $e(t){return t!=t}function tn(t,e){var n=null==t?0:t.length;return n?an(t,e)/n:R}function en(t){return function(e){return null==e?o:e[t]}}function nn(t){return function(e){return null==t?o:t[e]}}function on(t,e,n,o,i){return i(t,function(t,i,r){n=o?(o=!1,t):e(n,t,i,r)}),n}function rn(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function an(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==o&&(n=n===o?a:n+a)}return n}function sn(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}function cn(t,e){return Ve(e,function(e){return[e,t[e]]})}function ln(t){return t?t.slice(0,Tn(t)+1).replace(Mt,""):t}function un(t){return function(e){return t(e)}}function fn(t,e){return Ve(e,function(e){return t[e]})}function pn(t,e){return t.has(e)}function hn(t,e){for(var n=-1,o=t.length;++n<o&&Qe(e,t[n],0)>-1;);return n}function dn(t,e){for(var n=t.length;n--&&Qe(e,t[n],0)>-1;);return n}function _n(t,e){for(var n=t.length,o=0;n--;)t[n]===e&&++o;return o}var yn=nn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),gn=nn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function vn(t){return"\\"+ye[t]}function mn(t,e){return null==t?o:t[e]}function bn(t){return ue.test(t)}function wn(t){return fe.test(t)}function Sn(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,o){n[++e]=[o,t]}),n}function Mn(t,e){return function(n){return t(e(n))}}function Pn(t,e){for(var n=-1,o=t.length,i=0,r=[];++n<o;){var s=t[n];s!==e&&s!==a||(t[n]=a,r[i++]=n)}return r}function An(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Rn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function En(t,e,n){for(var o=n-1,i=t.length;++o<i;)if(t[o]===e)return o;return-1}function On(t,e,n){for(var o=n+1;o--;)if(t[o]===e)return o;return o}function In(t){return bn(t)?Dn(t):qe(t)}function Nn(t){return bn(t)?xn(t):Ke(t)}function Tn(t){for(var e=t.length;e--&&Pt.test(t.charAt(e)););return e}var Bn=nn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function Dn(t){for(var e=ce.lastIndex=0;ce.test(t);)++e;return e}function xn(t){return t.match(ce)||[]}function Ln(t){return t.match(le)||[]}var Un=function t(e){var n,Pt=(e=null==e?we:Un.defaults(we.Object(),e,Un.pick(we,pe))).Array,Ot=e.Date,Gt=e.Error,Ht=e.Function,Wt=e.Math,zt=e.Object,qt=e.RegExp,Kt=e.String,Yt=e.TypeError,Xt=Pt.prototype,Jt=Ht.prototype,Qt=zt.prototype,Zt=e["__core-js_shared__"],$t=Jt.toString,te=Qt.hasOwnProperty,ee=0,ne=(n=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",oe=Qt.toString,ie=$t.call(zt),re=we._,ce=qt("^"+$t.call(te).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=Me?e.Buffer:o,ue=e.Symbol,fe=e.Uint8Array,ye=le?le.allocUnsafe:o,me=Mn(zt.getPrototypeOf,zt),be=zt.create,Se=Qt.propertyIsEnumerable,Ce=Xt.splice,Pe=ue?ue.isConcatSpreadable:o,Ae=ue?ue.iterator:o,qe=ue?ue.toStringTag:o,Ke=function(){try{var t=ia(zt,"defineProperty");return t({},"",{}),t}catch(e){}}(),nn=e.clearTimeout!==we.clearTimeout&&e.clearTimeout,En=Ot&&Ot.now!==we.Date.now&&Ot.now,Dn=e.setTimeout!==we.setTimeout&&e.setTimeout,xn=Wt.ceil,kn=Wt.floor,jn=zt.getOwnPropertySymbols,Fn=le?le.isBuffer:o,Vn=e.isFinite,Gn=Xt.join,Hn=Mn(zt.keys,zt),Wn=Wt.max,zn=Wt.min,qn=Ot.now,Kn=e.parseInt,Yn=Wt.random,Xn=Xt.reverse,Jn=ia(e,"DataView"),Qn=ia(e,"Map"),Zn=ia(e,"Promise"),$n=ia(e,"Set"),to=ia(e,"WeakMap"),eo=ia(zt,"create"),no=to&&new to,oo={},io=Fa(Jn),ro=Fa(Qn),ao=Fa(Zn),so=Fa($n),co=Fa(to),lo=ue?ue.prototype:o,uo=lo?lo.valueOf:o,fo=lo?lo.toString:o;function po(t){if(ic(t)&&!Ks(t)&&!(t instanceof go)){if(t instanceof yo)return t;if(te.call(t,"__wrapped__"))return Ga(t)}return new yo(t)}var ho=function(){function t(){}return function(e){if(!oc(e))return{};if(be)return be(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function _o(){}function yo(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function go(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=E,this.__views__=[]}function vo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function mo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function bo(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function wo(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bo;++e<n;)this.add(t[e])}function So(t){var e=this.__data__=new mo(t);this.size=e.size}function Co(t,e){var n=Ks(t),o=!n&&qs(t),i=!n&&!o&&Qs(t),r=!n&&!o&&!i&&pc(t),a=n||o||i||r,s=a?sn(t.length,Kt):[],c=s.length;for(var l in t)!e&&!te.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ga(l,c))||s.push(l);return s}function Mo(t){var e=t.length;return e?t[Ii(0,e-1)]:o}function Po(t,e){return Ua(_r(t),xo(e,0,t.length))}function Ao(t){return Ua(_r(t))}function Ro(t,e,n){(n===o||Hs(t[e],n))&&(n!==o||e in t)||Bo(t,e,n)}function Eo(t,e,n){var i=t[e];te.call(t,e)&&Hs(i,n)&&(n!==o||e in t)||Bo(t,e,n)}function Oo(t,e){for(var n=t.length;n--;)if(Hs(t[n][0],e))return n;return-1}function Io(t,e,n,o){return Vo(t,function(t,i,r){e(o,t,n(t),r)}),o}function No(t,e){return t&&yr(e,Dc(e),t)}function To(t,e){return t&&yr(e,xc(e),t)}function Bo(t,e,n){"__proto__"==e&&Ke?Ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Do(t,e){for(var n=-1,i=e.length,r=Pt(i),a=null==t;++n<i;)r[n]=a?o:Oc(t,e[n]);return r}function xo(t,e,n){return t==t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function Lo(t,e,n,i,r,a){var u,f=e&s,p=e&c,h=e&l;if(n&&(u=r?n(t,i,r,a):n(t)),u!==o)return u;if(!oc(t))return t;var d=Ks(t);if(d){if(u=pa(t),!f)return _r(t,u)}else{var _=ca(t),y=_==j||_==F;if(Qs(t))return ar(t,f);if(_==W||_==T||y&&!r){if(u=p||y?{}:ha(t),!f)return p?vr(t,To(u,t)):gr(t,No(u,t))}else{if(!_e[_])return r?t:{};u=da(t,_,f)}}a||(a=new So);var g=a.get(t);if(g)return g;a.set(t,u),lc(t)?t.forEach(function(o){u.add(Lo(o,e,n,o,t,a))}):rc(t)&&t.forEach(function(o,i){u.set(i,Lo(o,e,n,i,t,a))});var v=d?o:(h?p?Qr:Jr:p?xc:Dc)(t);return xe(v||t,function(o,i){v&&(o=t[i=o]),Eo(u,i,Lo(o,e,n,i,t,a))}),u}function Uo(t){var e=Dc(t);return function(n){return ko(n,t,e)}}function ko(t,e,n){var i=n.length;if(null==t)return!i;for(t=zt(t);i--;){var r=n[i],a=e[r],s=t[r];if(s===o&&!(r in t)||!a(s))return!1}return!0}function jo(t,e,n){if("function"!=typeof t)throw new Yt(r);return Ba(function(){t.apply(o,n)},e)}function Fo(t,e,n,o){var r=-1,a=je,s=!0,c=t.length,l=[],u=e.length;if(!c)return l;n&&(e=Ve(e,un(n))),o?(a=Fe,s=!1):e.length>=i&&(a=pn,s=!1,e=new wo(e));t:for(;++r<c;){var f=t[r],p=null==n?f:n(f);if(f=o||0!==f?f:0,s&&p==p){for(var h=u;h--;)if(e[h]===p)continue t;l.push(f)}else a(e,p,o)||l.push(f)}return l}po.templateSettings={escape:yt,evaluate:gt,interpolate:vt,variable:"",imports:{_:po}},po.prototype=_o.prototype,po.prototype.constructor=po,yo.prototype=ho(_o.prototype),yo.prototype.constructor=yo,go.prototype=ho(_o.prototype),go.prototype.constructor=go,vo.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},vo.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vo.prototype.get=function(t){var e=this.__data__;if(eo){var n=e[t];return"__lodash_hash_undefined__"===n?o:n}return te.call(e,t)?e[t]:o},vo.prototype.has=function(t){var e=this.__data__;return eo?e[t]!==o:te.call(e,t)},vo.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=eo&&e===o?"__lodash_hash_undefined__":e,this},mo.prototype.clear=function(){this.__data__=[],this.size=0},mo.prototype.delete=function(t){var e=this.__data__,n=Oo(e,t);return!(n<0||(n==e.length-1?e.pop():Ce.call(e,n,1),--this.size,0))},mo.prototype.get=function(t){var e=this.__data__,n=Oo(e,t);return n<0?o:e[n][1]},mo.prototype.has=function(t){return Oo(this.__data__,t)>-1},mo.prototype.set=function(t,e){var n=this.__data__,o=Oo(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this},bo.prototype.clear=function(){this.size=0,this.__data__={hash:new vo,map:new(Qn||mo),string:new vo}},bo.prototype.delete=function(t){var e=na(this,t).delete(t);return this.size-=e?1:0,e},bo.prototype.get=function(t){return na(this,t).get(t)},bo.prototype.has=function(t){return na(this,t).has(t)},bo.prototype.set=function(t,e){var n=na(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},wo.prototype.add=wo.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},wo.prototype.has=function(t){return this.__data__.has(t)},So.prototype.clear=function(){this.__data__=new mo,this.size=0},So.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},So.prototype.get=function(t){return this.__data__.get(t)},So.prototype.has=function(t){return this.__data__.has(t)},So.prototype.set=function(t,e){var n=this.__data__;if(n instanceof mo){var o=n.__data__;if(!Qn||o.length<i-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new bo(o)}return n.set(t,e),this.size=n.size,this};var Vo=wr(Jo),Go=wr(Qo,!0);function Ho(t,e){var n=!0;return Vo(t,function(t,o,i){return n=!!e(t,o,i)}),n}function Wo(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],s=e(a);if(null!=s&&(c===o?s==s&&!fc(s):n(s,c)))var c=s,l=a}return l}function zo(t,e,n,i){var r=t.length;for((n=gc(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:gc(i))<0&&(i+=r),i=n>i?0:vc(i);n<i;)t[n++]=e;return t}function qo(t,e){var n=[];return Vo(t,function(t,o,i){e(t,o,i)&&n.push(t)}),n}function Ko(t,e,n,o,i){var r=-1,a=t.length;for(n||(n=ya),i||(i=[]);++r<a;){var s=t[r];e>0&&n(s)?e>1?Ko(s,e-1,n,o,i):Ge(i,s):o||(i[i.length]=s)}return i}var Yo=Sr(),Xo=Sr(!0);function Jo(t,e){return t&&Yo(t,e,Dc)}function Qo(t,e){return t&&Xo(t,e,Dc)}function Zo(t,e){return ke(e,function(e){return tc(t[e])})}function $o(t,e){for(var n=0,i=(e=nr(e,t)).length;null!=t&&n<i;)t=t[ja(e[n++])];return n&&n==i?t:o}function ti(t,e,n){var o=e(t);return Ks(t)?o:Ge(o,n(t))}function ei(t){return null==t?t===o?J:H:qe&&qe in zt(t)?ra(t):Ra(t)}function ni(t,e){return t>e}function oi(t,e){return null!=t&&te.call(t,e)}function ii(t,e){return null!=t&&e in zt(t)}function ri(t,e,n){return t>=zn(e,n)&&t<Wn(e,n)}function ai(t,e,n){for(var i=n?Fe:je,r=t[0].length,a=t.length,s=a,c=Pt(a),l=1/0,u=[];s--;){var f=t[s];s&&e&&(f=Ve(f,un(e))),l=zn(f.length,l),c[s]=!n&&(e||r>=120&&f.length>=120)?new wo(s&&f):o}f=t[0];var p=-1,h=c[0];t:for(;++p<r&&u.length<l;){var d=f[p],_=e?e(d):d;if(d=n||0!==d?d:0,!(h?pn(h,_):i(u,_,n))){for(s=a;--s;){var y=c[s];if(!(y?pn(y,_):i(t[s],_,n)))continue t}h&&h.push(_),u.push(d)}}return u}function si(t,e,n,o){return Jo(t,function(t,i,r){e(o,n(t),i,r)}),o}function ci(t,e,n){var i=null==(t=Oa(t,e=nr(e,t)))?t:t[ja($a(e))];return null==i?o:Be(i,t,n)}function li(t){return ic(t)&&ei(t)==T}function ui(t,e,n,o,i){return t===e||(null==t||null==e||!ic(t)&&!ic(e)?t!=t&&e!=e:fi(t,e,n,o,ui,i))}function fi(t,e,n,o,i,r){var a=Ks(t),s=Ks(e),c=a?B:ca(t),l=s?B:ca(e),f=(c=c==T?W:c)==W,p=(l=l==T?W:l)==W,h=c==l;if(h&&Qs(t)){if(!Qs(e))return!1;a=!0,f=!1}if(h&&!f)return r||(r=new So),a||pc(t)?qr(t,e,n,o,i,r):Kr(t,e,c,n,o,i,r);if(!(n&u)){var d=f&&te.call(t,"__wrapped__"),_=p&&te.call(e,"__wrapped__");if(d||_){var y=d?t.value():t,g=_?e.value():e;return r||(r=new So),i(y,g,n,o,r)}}return!!h&&(r||(r=new So),Yr(t,e,n,o,i,r))}function pi(t,e,n,i){var r=n.length,a=r,s=!i;if(null==t)return!a;for(t=zt(t);r--;){var c=n[r];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<a;){var l=(c=n[r])[0],p=t[l],h=c[1];if(s&&c[2]){if(p===o&&!(l in t))return!1}else{var d=new So;if(i)var _=i(p,h,l,t,e,d);if(!(_===o?ui(h,p,u|f,i,d):_))return!1}}return!0}function hi(t){return!(!oc(t)||(e=t,ne&&ne in e))&&(tc(t)?ce:Lt).test(Fa(t));var e}function di(t){return"function"==typeof t?t:null==t?al:"object"==typeof t?Ks(t)?bi(t[0],t[1]):mi(t):_l(t)}function _i(t){if(!Sa(t))return Hn(t);var e=[];for(var n in zt(t))te.call(t,n)&&"constructor"!=n&&e.push(n);return e}function yi(t){if(!oc(t))return Aa(t);var e=Sa(t),n=[];for(var o in t)("constructor"!=o||!e&&te.call(t,o))&&n.push(o);return n}function gi(t,e){return t<e}function vi(t,e){var n=-1,o=Xs(t)?Pt(t.length):[];return Vo(t,function(t,i,r){o[++n]=e(t,i,r)}),o}function mi(t){var e=oa(t);return 1==e.length&&e[0][2]?Ma(e[0][0],e[0][1]):function(n){return n===t||pi(n,t,e)}}function bi(t,e){return ma(t)&&Ca(e)?Ma(ja(t),e):function(n){var i=Oc(n,t);return i===o&&i===e?Ic(n,t):ui(e,i,u|f)}}function wi(t,e,n,i,r){t!==e&&Yo(e,function(a,s){if(r||(r=new So),oc(a))Si(t,e,s,n,wi,i,r);else{var c=i?i(Na(t,s),a,s+"",t,e,r):o;c===o&&(c=a),Ro(t,s,c)}},xc)}function Si(t,e,n,i,r,a,s){var c=Na(t,n),l=Na(e,n),u=s.get(l);if(u)Ro(t,n,u);else{var f=a?a(c,l,n+"",t,e,s):o,p=f===o;if(p){var h=Ks(l),d=!h&&Qs(l),_=!h&&!d&&pc(l);f=l,h||d||_?Ks(c)?f=c:Js(c)?f=_r(c):d?(p=!1,f=ar(l,!0)):_?(p=!1,f=ur(l,!0)):f=[]:sc(l)||qs(l)?(f=c,qs(c)?f=bc(c):oc(c)&&!tc(c)||(f=ha(l))):p=!1}p&&(s.set(l,f),r(f,l,i,a,s),s.delete(l)),Ro(t,n,f)}}function Ci(t,e){var n=t.length;if(n)return ga(e+=e<0?n:0,n)?t[e]:o}function Mi(t,e,n){e=e.length?Ve(e,function(t){return Ks(t)?function(e){return $o(e,1===t.length?t[0]:t)}:t}):[al];var o=-1;return e=Ve(e,un(ea())),rn(vi(t,function(t){return{criteria:Ve(e,function(e){return e(t)}),index:++o,value:t}}),function(t,e){return pr(t,e,n)})}function Pi(t,e){return Ai(t,e,function(e,n){return Ic(t,n)})}function Ai(t,e,n){for(var o=-1,i=e.length,r={};++o<i;){var a=e[o],s=$o(t,a);n(s,a)&&Li(r,nr(a,t),s)}return r}function Ri(t){return function(e){return $o(e,t)}}function Ei(t,e,n,o){var i=o?Ze:Qe,r=-1,a=e.length,s=t;for(t===e&&(e=_r(e)),n&&(s=Ve(t,un(n)));++r<a;)for(var c=0,l=e[r],u=n?n(l):l;(c=i(s,u,c,o))>-1;)s!==t&&Ce.call(s,c,1),Ce.call(t,c,1);return t}function Oi(t,e){for(var n=t?e.length:0,o=n-1;n--;){var i=e[n];if(n==o||i!==r){var r=i;ga(i)?Ce.call(t,i,1):Yi(t,i)}}return t}function Ii(t,e){return t+kn(Yn()*(e-t+1))}function Ni(t,e,n,o){for(var i=-1,r=Wn(xn((e-t)/(n||1)),0),a=Pt(r);r--;)a[o?r:++i]=t,t+=n;return a}function Ti(t,e){var n="";if(!t||e<1||e>P)return n;do{e%2&&(n+=t),(e=kn(e/2))&&(t+=t)}while(e);return n}function Bi(t,e){return Da(Ea(t,e,al),t+"")}function Di(t){return Mo(Hc(t))}function xi(t,e){var n=Hc(t);return Ua(n,xo(e,0,n.length))}function Li(t,e,n,i){if(!oc(t))return t;for(var r=-1,a=(e=nr(e,t)).length,s=a-1,c=t;null!=c&&++r<a;){var l=ja(e[r]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=s){var f=c[l];(u=i?i(f,l,c):o)===o&&(u=oc(f)?f:ga(e[r+1])?[]:{})}Eo(c,l,u),c=c[l]}return t}var Ui=no?function(t,e){return no.set(t,e),t}:al,ki=Ke?function(t,e){return Ke(t,"toString",{configurable:!0,enumerable:!1,value:ol(e),writable:!0})}:al;function ji(t){return Ua(Hc(t))}function Fi(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var r=Pt(i);++o<i;)r[o]=t[o+e];return r}function Vi(t,e){var n;return Vo(t,function(t,o,i){return!(n=e(t,o,i))}),!!n}function Gi(t,e,n){var o=0,i=null==t?o:t.length;if("number"==typeof e&&e==e&&i<=I){for(;o<i;){var r=o+i>>>1,a=t[r];null!==a&&!fc(a)&&(n?a<=e:a<e)?o=r+1:i=r}return i}return Hi(t,e,al,n)}function Hi(t,e,n,i){var r=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,c=null===e,l=fc(e),u=e===o;r<a;){var f=kn((r+a)/2),p=n(t[f]),h=p!==o,d=null===p,_=p==p,y=fc(p);if(s)var g=i||_;else g=u?_&&(i||h):c?_&&h&&(i||!d):l?_&&h&&!d&&(i||!y):!d&&!y&&(i?p<=e:p<e);g?r=f+1:a=f}return zn(a,O)}function Wi(t,e){for(var n=-1,o=t.length,i=0,r=[];++n<o;){var a=t[n],s=e?e(a):a;if(!n||!Hs(s,c)){var c=s;r[i++]=0===a?0:a}}return r}function zi(t){return"number"==typeof t?t:fc(t)?R:+t}function qi(t){if("string"==typeof t)return t;if(Ks(t))return Ve(t,qi)+"";if(fc(t))return fo?fo.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Ki(t,e,n){var o=-1,r=je,a=t.length,s=!0,c=[],l=c;if(n)s=!1,r=Fe;else if(a>=i){var u=e?null:Fr(t);if(u)return An(u);s=!1,r=pn,l=new wo}else l=e?[]:c;t:for(;++o<a;){var f=t[o],p=e?e(f):f;if(f=n||0!==f?f:0,s&&p==p){for(var h=l.length;h--;)if(l[h]===p)continue t;e&&l.push(p),c.push(f)}else r(l,p,n)||(l!==c&&l.push(p),c.push(f))}return c}function Yi(t,e){return null==(t=Oa(t,e=nr(e,t)))||delete t[ja($a(e))]}function Xi(t,e,n,o){return Li(t,e,n($o(t,e)),o)}function Ji(t,e,n,o){for(var i=t.length,r=o?i:-1;(o?r--:++r<i)&&e(t[r],r,t););return n?Fi(t,o?0:r,o?r+1:i):Fi(t,o?r+1:0,o?i:r)}function Qi(t,e){var n=t;return n instanceof go&&(n=n.value()),He(e,function(t,e){return e.func.apply(e.thisArg,Ge([t],e.args))},n)}function Zi(t,e,n){var o=t.length;if(o<2)return o?Ki(t[0]):[];for(var i=-1,r=Pt(o);++i<o;)for(var a=t[i],s=-1;++s<o;)s!=i&&(r[i]=Fo(r[i]||a,t[s],e,n));return Ki(Ko(r,1),e,n)}function $i(t,e,n){for(var i=-1,r=t.length,a=e.length,s={};++i<r;){var c=i<a?e[i]:o;n(s,t[i],c)}return s}function tr(t){return Js(t)?t:[]}function er(t){return"function"==typeof t?t:al}function nr(t,e){return Ks(t)?t:ma(t,e)?[t]:ka(wc(t))}var or=Bi;function ir(t,e,n){var i=t.length;return n=n===o?i:n,!e&&n>=i?t:Fi(t,e,n)}var rr=nn||function(t){return we.clearTimeout(t)};function ar(t,e){if(e)return t.slice();var n=t.length,o=ye?ye(n):new t.constructor(n);return t.copy(o),o}function sr(t){var e=new t.constructor(t.byteLength);return new fe(e).set(new fe(t)),e}function cr(t,e){var n=e?sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function lr(t){var e=new t.constructor(t.source,Bt.exec(t));return e.lastIndex=t.lastIndex,e}function ur(t,e){var n=e?sr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fr(t,e){if(t!==e){var n=t!==o,i=null===t,r=t==t,a=fc(t),s=e!==o,c=null===e,l=e==e,u=fc(e);if(!c&&!u&&!a&&t>e||a&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||c&&n&&r||!s&&r||!l)return-1}return 0}function pr(t,e,n){for(var o=-1,i=t.criteria,r=e.criteria,a=i.length,s=n.length;++o<a;){var c=fr(i[o],r[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}function hr(t,e,n,o){for(var i=-1,r=t.length,a=n.length,s=-1,c=e.length,l=Wn(r-a,0),u=Pt(c+l),f=!o;++s<c;)u[s]=e[s];for(;++i<a;)(f||i<r)&&(u[n[i]]=t[i]);for(;l--;)u[s++]=t[i++];return u}function dr(t,e,n,o){for(var i=-1,r=t.length,a=-1,s=n.length,c=-1,l=e.length,u=Wn(r-s,0),f=Pt(u+l),p=!o;++i<u;)f[i]=t[i];for(var h=i;++c<l;)f[h+c]=e[c];for(;++a<s;)(p||i<r)&&(f[h+n[a]]=t[i++]);return f}function _r(t,e){var n=-1,o=t.length;for(e||(e=Pt(o));++n<o;)e[n]=t[n];return e}function yr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],l=i?i(n[c],t[c],c,n,t):o;l===o&&(l=t[c]),r?Bo(n,c,l):Eo(n,c,l)}return n}function gr(t,e){return yr(t,aa(t),e)}function vr(t,e){return yr(t,sa(t),e)}function mr(t,e){return function(n,o){var i=Ks(n)?De:Io,r=e?e():{};return i(n,t,ea(o,2),r)}}function br(t){return Bi(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:o,s=r>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(r--,a):o,s&&va(n[0],n[1],s)&&(a=r<3?o:a,r=1),e=zt(e);++i<r;){var c=n[i];c&&t(e,c,i,a)}return e})}function wr(t,e){return function(n,o){if(null==n)return n;if(!Xs(n))return t(n,o);for(var i=n.length,r=e?i:-1,a=zt(n);(e?r--:++r<i)&&!1!==o(a[r],r,a););return n}}function Sr(t){return function(e,n,o){for(var i=-1,r=zt(e),a=o(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(r[c],c,r))break}return e}}function Cr(t,e,n){var o=e&p,i=Ar(t);return function e(){return(this&&this!==we&&this instanceof e?i:t).apply(o?n:this,arguments)}}function Mr(t){return function(e){var n=bn(e=wc(e))?Nn(e):o,i=n?n[0]:e.charAt(0),r=n?ir(n,1).join(""):e.slice(1);return i[t]()+r}}function Pr(t){return function(e){return He(tl(qc(e).replace(ae,"")),t,"")}}function Ar(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ho(t.prototype),o=t.apply(n,e);return oc(o)?o:n}}function Rr(t,e,n){var i=Ar(t);return function r(){for(var a=arguments.length,s=Pt(a),c=a,l=ta(r);c--;)s[c]=arguments[c];var u=a<3&&s[0]!==l&&s[a-1]!==l?[]:Pn(s,l);return(a-=u.length)<n?kr(t,e,Ir,r.placeholder,o,s,u,o,o,n-a):Be(this&&this!==we&&this instanceof r?i:t,this,s)}}function Er(t){return function(e,n,i){var r=zt(e);if(!Xs(e)){var a=ea(n,3);e=Dc(e),n=function(t){return a(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[a?e[s]:s]:o}}function Or(t){return Xr(function(e){var n=e.length,i=n,a=yo.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new Yt(r);if(a&&!c&&"wrapper"==$r(s))var c=new yo([],!0)}for(i=c?i:n;++i<n;){var l=$r(s=e[i]),u="wrapper"==l?Zr(s):o;c=u&&ba(u[0])&&u[1]==(m|_|g|b)&&!u[4].length&&1==u[9]?c[$r(u[0])].apply(c,u[3]):1==s.length&&ba(s)?c[l]():c.thru(s)}return function(){var t=arguments,o=t[0];if(c&&1==t.length&&Ks(o))return c.plant(o).value();for(var i=0,r=n?e[i].apply(this,t):o;++i<n;)r=e[i].call(this,r);return r}})}function Ir(t,e,n,i,r,a,s,c,l,u){var f=e&m,d=e&p,g=e&h,v=e&(_|y),b=e&w,S=g?o:Ar(t);return function o(){for(var p=arguments.length,h=Pt(p),_=p;_--;)h[_]=arguments[_];if(v)var y=ta(o),m=_n(h,y);if(i&&(h=hr(h,i,r,v)),a&&(h=dr(h,a,s,v)),p-=m,v&&p<u){var w=Pn(h,y);return kr(t,e,Ir,o.placeholder,n,h,w,c,l,u-p)}var C=d?n:this,M=g?C[t]:t;return p=h.length,c?h=Ia(h,c):b&&p>1&&h.reverse(),f&&l<p&&(h.length=l),this&&this!==we&&this instanceof o&&(M=S||Ar(M)),M.apply(C,h)}}function Nr(t,e){return function(n,o){return si(n,t,e(o),{})}}function Tr(t,e){return function(n,i){var r;if(n===o&&i===o)return e;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=qi(n),i=qi(i)):(n=zi(n),i=zi(i)),r=t(n,i)}return r}}function Br(t){return Xr(function(e){return e=Ve(e,un(ea())),Bi(function(n){var o=this;return t(e,function(t){return Be(t,o,n)})})})}function Dr(t,e){var n=(e=e===o?" ":qi(e)).length;if(n<2)return n?Ti(e,t):e;var i=Ti(e,xn(t/In(e)));return bn(e)?ir(Nn(i),0,t).join(""):i.slice(0,t)}function xr(t,e,n,o){var i=e&p,r=Ar(t);return function e(){for(var a=-1,s=arguments.length,c=-1,l=o.length,u=Pt(l+s),f=this&&this!==we&&this instanceof e?r:t;++c<l;)u[c]=o[c];for(;s--;)u[c++]=arguments[++a];return Be(f,i?n:this,u)}}function Lr(t){return function(e,n,i){return i&&"number"!=typeof i&&va(e,n,i)&&(n=i=o),e=yc(e),n===o?(n=e,e=0):n=yc(n),Ni(e,n,i=i===o?e<n?1:-1:yc(i),t)}}function Ur(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=mc(e),n=mc(n)),t(e,n)}}function kr(t,e,n,i,r,a,s,c,l,u){var f=e&_;e|=f?g:v,(e&=~(f?v:g))&d||(e&=~(p|h));var y=[t,e,r,f?a:o,f?s:o,f?o:a,f?o:s,c,l,u],m=n.apply(o,y);return ba(t)&&Ta(m,y),m.placeholder=i,xa(m,t,e)}function jr(t){var e=Wt[t];return function(t,n){if(t=mc(t),(n=null==n?0:zn(gc(n),292))&&Vn(t)){var o=(wc(t)+"e").split("e");return+((o=(wc(e(o[0]+"e"+(+o[1]+n)))+"e").split("e"))[0]+"e"+(+o[1]-n))}return e(t)}}var Fr=$n&&1/An(new $n([,-0]))[1]==M?function(t){return new $n(t)}:fl;function Vr(t){return function(e){var n=ca(e);return n==V?Cn(e):n==K?Rn(e):cn(e,t(e))}}function Gr(t,e,n,i,a,s,c,l){var u=e&h;if(!u&&"function"!=typeof t)throw new Yt(r);var f=i?i.length:0;if(f||(e&=~(g|v),i=a=o),c=c===o?c:Wn(gc(c),0),l=l===o?l:gc(l),f-=a?a.length:0,e&v){var d=i,m=a;i=a=o}var b=u?o:Zr(t),w=[t,e,n,i,a,d,m,s,c,l];if(b&&Pa(w,b),t=w[0],e=w[1],n=w[2],i=w[3],a=w[4],!(l=w[9]=w[9]===o?u?0:t.length:Wn(w[9]-f,0))&&e&(_|y)&&(e&=~(_|y)),e&&e!=p)S=e==_||e==y?Rr(t,e,l):e!=g&&e!=(p|g)||a.length?Ir.apply(o,w):xr(t,e,n,i);else var S=Cr(t,e,n);return xa((b?Ui:Ta)(S,w),t,e)}function Hr(t,e,n,i){return t===o||Hs(t,Qt[n])&&!te.call(i,n)?e:t}function Wr(t,e,n,i,r,a){return oc(t)&&oc(e)&&(a.set(e,t),wi(t,e,o,Wr,a),a.delete(e)),t}function zr(t){return sc(t)?o:t}function qr(t,e,n,i,r,a){var s=n&u,c=t.length,l=e.length;if(c!=l&&!(s&&l>c))return!1;var p=a.get(t),h=a.get(e);if(p&&h)return p==e&&h==t;var d=-1,_=!0,y=n&f?new wo:o;for(a.set(t,e),a.set(e,t);++d<c;){var g=t[d],v=e[d];if(i)var m=s?i(v,g,d,e,t,a):i(g,v,d,t,e,a);if(m!==o){if(m)continue;_=!1;break}if(y){if(!ze(e,function(t,e){if(!pn(y,e)&&(g===t||r(g,t,n,i,a)))return y.push(e)})){_=!1;break}}else if(g!==v&&!r(g,v,n,i,a)){_=!1;break}}return a.delete(t),a.delete(e),_}function Kr(t,e,n,o,i,r,a){switch(n){case $:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z:return!(t.byteLength!=e.byteLength||!r(new fe(t),new fe(e)));case x:case L:case G:return Hs(+t,+e);case k:return t.name==e.name&&t.message==e.message;case q:case Y:return t==e+"";case V:var s=Cn;case K:var c=o&u;if(s||(s=An),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;o|=f,a.set(t,e);var p=qr(s(t),s(e),o,i,r,a);return a.delete(t),p;case X:if(uo)return uo.call(t)==uo.call(e)}return!1}function Yr(t,e,n,i,r,a){var s=n&u,c=Jr(t),l=c.length;if(l!=Jr(e).length&&!s)return!1;for(var f=l;f--;){var p=c[f];if(!(s?p in e:te.call(e,p)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var _=!0;a.set(t,e),a.set(e,t);for(var y=s;++f<l;){var g=t[p=c[f]],v=e[p];if(i)var m=s?i(v,g,p,e,t,a):i(g,v,p,t,e,a);if(!(m===o?g===v||r(g,v,n,i,a):m)){_=!1;break}y||(y="constructor"==p)}if(_&&!y){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(_=!1)}return a.delete(t),a.delete(e),_}function Xr(t){return Da(Ea(t,o,Ya),t+"")}function Jr(t){return ti(t,Dc,aa)}function Qr(t){return ti(t,xc,sa)}var Zr=no?function(t){return no.get(t)}:fl;function $r(t){for(var e=t.name+"",n=oo[e],o=te.call(oo,e)?n.length:0;o--;){var i=n[o],r=i.func;if(null==r||r==t)return i.name}return e}function ta(t){return(te.call(po,"placeholder")?po:t).placeholder}function ea(){var t=po.iteratee||sl;return t=t===sl?di:t,arguments.length?t(arguments[0],arguments[1]):t}function na(t,e){var n,o,i=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function oa(t){for(var e=Dc(t),n=e.length;n--;){var o=e[n],i=t[o];e[n]=[o,i,Ca(i)]}return e}function ia(t,e){var n=mn(t,e);return hi(n)?n:o}function ra(t){var e=te.call(t,qe),n=t[qe];try{t[qe]=o;var i=!0}catch(a){}var r=oe.call(t);return i&&(e?t[qe]=n:delete t[qe]),r}var aa=jn?function(t){return null==t?[]:(t=zt(t),ke(jn(t),function(e){return Se.call(t,e)}))}:vl,sa=jn?function(t){for(var e=[];t;)Ge(e,aa(t)),t=me(t);return e}:vl,ca=ei;function la(t,e,n){for(var o=-1,i=n.length;++o<i;){var r=n[o],a=r.size;switch(r.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=zn(e,t+a);break;case"takeRight":t=Wn(t,e-a)}}return{start:t,end:e}}function ua(t){var e=t.match(Rt);return e?e[1].split(Et):[]}function fa(t,e,n){for(var o=-1,i=(e=nr(e,t)).length,r=!1;++o<i;){var a=ja(e[o]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r||++o!=i?r:!!(i=null==t?0:t.length)&&nc(i)&&ga(a,i)&&(Ks(t)||qs(t))}function pa(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&te.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ha(t){return"function"!=typeof t.constructor||Sa(t)?{}:ho(me(t))}function da(t,e,n){var o,i=t.constructor;switch(e){case Z:return sr(t);case x:case L:return new i(+t);case $:return cr(t,n);case tt:case et:case nt:case ot:case it:case rt:case at:case st:case ct:return ur(t,n);case V:return new i;case G:case Y:return new i(t);case q:return lr(t);case K:return new i;case X:return o=t,uo?zt(uo.call(o)):{}}}function _a(t,e){var n=e.length;if(!n)return t;var o=n-1;return e[o]=(n>1?"& ":"")+e[o],e=e.join(n>2?", ":" "),t.replace(At,"{\n/* [wrapped with "+e+"] */\n")}function ya(t){return Ks(t)||qs(t)||!!(Pe&&t&&t[Pe])}function ga(t,e){var n=typeof t;return!!(e=null==e?P:e)&&("number"==n||"symbol"!=n&&kt.test(t))&&t>-1&&t%1==0&&t<e}function va(t,e,n){if(!oc(n))return!1;var o=typeof e;return!!("number"==o?Xs(n)&&ga(e,n.length):"string"==o&&e in n)&&Hs(n[e],t)}function ma(t,e){if(Ks(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fc(t))||bt.test(t)||!mt.test(t)||null!=e&&t in zt(e)}function ba(t){var e=$r(t),n=po[e];if("function"!=typeof n||!(e in go.prototype))return!1;if(t===n)return!0;var o=Zr(n);return!!o&&t===o[0]}(Jn&&ca(new Jn(new ArrayBuffer(1)))!=$||Qn&&ca(new Qn)!=V||Zn&&"[object Promise]"!=ca(Zn.resolve())||$n&&ca(new $n)!=K||to&&ca(new to)!=Q)&&(ca=function(t){var e=ei(t),n=e==W?t.constructor:o,i=n?Fa(n):"";if(i)switch(i){case io:return $;case ro:return V;case ao:return"[object Promise]";case so:return K;case co:return Q}return e});var wa=Zt?tc:ml;function Sa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function Ca(t){return t==t&&!oc(t)}function Ma(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in zt(n))}}function Pa(t,e){var n=t[1],o=e[1],i=n|o,r=i<(p|h|m),s=o==m&&n==_||o==m&&n==b&&t[7].length<=e[8]||o==(m|b)&&e[7].length<=e[8]&&n==_;if(!r&&!s)return t;o&p&&(t[2]=e[2],i|=n&p?0:d);var c=e[3];if(c){var l=t[3];t[3]=l?hr(l,c,e[4]):c,t[4]=l?Pn(t[3],a):e[4]}return(c=e[5])&&(l=t[5],t[5]=l?dr(l,c,e[6]):c,t[6]=l?Pn(t[5],a):e[6]),(c=e[7])&&(t[7]=c),o&m&&(t[8]=null==t[8]?e[8]:zn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Aa(t){var e=[];if(null!=t)for(var n in zt(t))e.push(n);return e}function Ra(t){return oe.call(t)}function Ea(t,e,n){return e=Wn(e===o?t.length-1:e,0),function(){for(var o=arguments,i=-1,r=Wn(o.length-e,0),a=Pt(r);++i<r;)a[i]=o[e+i];i=-1;for(var s=Pt(e+1);++i<e;)s[i]=o[i];return s[e]=n(a),Be(t,this,s)}}function Oa(t,e){return e.length<2?t:$o(t,Fi(e,0,-1))}function Ia(t,e){for(var n=t.length,i=zn(e.length,n),r=_r(t);i--;){var a=e[i];t[i]=ga(a,n)?r[a]:o}return t}function Na(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ta=La(Ui),Ba=Dn||function(t,e){return we.setTimeout(t,e)},Da=La(ki);function xa(t,e,n){var o=e+"";return Da(t,_a(o,Va(ua(o),n)))}function La(t){var e=0,n=0;return function(){var i=qn(),r=C-(i-n);if(n=i,r>0){if(++e>=S)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ua(t,e){var n=-1,i=t.length,r=i-1;for(e=e===o?i:e;++n<e;){var a=Ii(n,r),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var ka=function(){var t=Us(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(wt,function(t,n,o,i){e.push(o?i.replace(Nt,"$1"):n||t)}),e},function(t){return 500===e.size&&e.clear(),t}),e=t.cache;return t}();function ja(t){if("string"==typeof t||fc(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Fa(t){if(null!=t){try{return $t.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Va(t,e){return xe(N,function(n){var o="_."+n[0];e&n[1]&&!je(t,o)&&t.push(o)}),t.sort()}function Ga(t){if(t instanceof go)return t.clone();var e=new yo(t.__wrapped__,t.__chain__);return e.__actions__=_r(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ha=Bi(function(t,e){return Js(t)?Fo(t,Ko(e,1,Js,!0)):[]}),Wa=Bi(function(t,e){var n=$a(e);return Js(n)&&(n=o),Js(t)?Fo(t,Ko(e,1,Js,!0),ea(n,2)):[]}),za=Bi(function(t,e){var n=$a(e);return Js(n)&&(n=o),Js(t)?Fo(t,Ko(e,1,Js,!0),o,n):[]});function qa(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=null==n?0:gc(n);return i<0&&(i=Wn(o+i,0)),Je(t,ea(e,3),i)}function Ka(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==o&&(r=gc(n),r=n<0?Wn(i+r,0):zn(r,i-1)),Je(t,ea(e,3),r,!0)}function Ya(t){return null!=t&&t.length?Ko(t,1):[]}function Xa(t){return t&&t.length?t[0]:o}var Ja=Bi(function(t){var e=Ve(t,tr);return e.length&&e[0]===t[0]?ai(e):[]}),Qa=Bi(function(t){var e=$a(t),n=Ve(t,tr);return e===$a(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ai(n,ea(e,2)):[]}),Za=Bi(function(t){var e=$a(t),n=Ve(t,tr);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ai(n,o,e):[]});function $a(t){var e=null==t?0:t.length;return e?t[e-1]:o}var ts=Bi(es);function es(t,e){return t&&t.length&&e&&e.length?Ei(t,e):t}var ns=Xr(function(t,e){var n=null==t?0:t.length,o=Do(t,e);return Oi(t,Ve(e,function(t){return ga(t,n)?+t:t}).sort(fr)),o});function os(t){return null==t?t:Xn.call(t)}var is=Bi(function(t){return Ki(Ko(t,1,Js,!0))}),rs=Bi(function(t){var e=$a(t);return Js(e)&&(e=o),Ki(Ko(t,1,Js,!0),ea(e,2))}),as=Bi(function(t){var e=$a(t);return e="function"==typeof e?e:o,Ki(Ko(t,1,Js,!0),o,e)});function ss(t){if(!t||!t.length)return[];var e=0;return t=ke(t,function(t){if(Js(t))return e=Wn(t.length,e),!0}),sn(e,function(e){return Ve(t,en(e))})}function cs(t,e){if(!t||!t.length)return[];var n=ss(t);return null==e?n:Ve(n,function(t){return Be(e,o,t)})}var ls=Bi(function(t,e){return Js(t)?Fo(t,e):[]}),us=Bi(function(t){return Zi(ke(t,Js))}),fs=Bi(function(t){var e=$a(t);return Js(e)&&(e=o),Zi(ke(t,Js),ea(e,2))}),ps=Bi(function(t){var e=$a(t);return e="function"==typeof e?e:o,Zi(ke(t,Js),o,e)}),hs=Bi(ss),ds=Bi(function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,cs(t,n)});function _s(t){var e=po(t);return e.__chain__=!0,e}function ys(t,e){return e(t)}var gs=Xr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Do(e,t)};return!(e>1||this.__actions__.length)&&i instanceof go&&ga(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ys,args:[r],thisArg:o}),new yo(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(r)}),vs=mr(function(t,e,n){te.call(t,n)?++t[n]:Bo(t,n,1)}),ms=Er(qa),bs=Er(Ka);function ws(t,e){return(Ks(t)?xe:Vo)(t,ea(e,3))}function Ss(t,e){return(Ks(t)?Le:Go)(t,ea(e,3))}var Cs=mr(function(t,e,n){te.call(t,n)?t[n].push(e):Bo(t,n,[e])}),Ms=Bi(function(t,e,n){var o=-1,i="function"==typeof e,r=Xs(t)?Pt(t.length):[];return Vo(t,function(t){r[++o]=i?Be(e,t,n):ci(t,e,n)}),r}),Ps=mr(function(t,e,n){Bo(t,n,e)});function As(t,e){return(Ks(t)?Ve:vi)(t,ea(e,3))}var Rs=mr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Es=Bi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&va(t,e[0],e[1])?e=[]:n>2&&va(e[0],e[1],e[2])&&(e=[e[0]]),Mi(t,Ko(e,1),[])}),Os=En||function(){return we.Date.now()};function Is(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Gr(t,m,o,o,o,o,e)}function Ns(t,e){var n;if("function"!=typeof e)throw new Yt(r);return t=gc(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Ts=Bi(function(t,e,n){var o=p;if(n.length){var i=Pn(n,ta(Ts));o|=g}return Gr(t,o,e,n,i)}),Bs=Bi(function(t,e,n){var o=p|h;if(n.length){var i=Pn(n,ta(Bs));o|=g}return Gr(e,o,t,n,i)});function Ds(t,e,n){var i,a,s,c,l,u,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Yt(r);function _(e){var n=i,r=a;return i=a=o,f=e,c=t.apply(r,n)}function y(t){return f=t,l=Ba(m,e),p?_(t):c}function g(t){var n=e-(t-u);return h?zn(n,s-(t-f)):n}function v(t){var n=t-u;return u===o||n>=e||n<0||h&&t-f>=s}function m(){var t=Os();if(v(t))return b(t);l=Ba(m,g(t))}function b(t){return l=o,d&&i?_(t):(i=a=o,c)}function w(){var t=Os(),n=v(t);if(i=arguments,a=this,u=t,n){if(l===o)return y(u);if(h)return rr(l),l=Ba(m,e),_(u)}return l===o&&(l=Ba(m,e)),c}return e=mc(e)||0,oc(n)&&(p=!!n.leading,s=(h="maxWait"in n)?Wn(mc(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),w.cancel=function(){l!==o&&rr(l),f=0,i=u=a=l=o},w.flush=function(){return l===o?c:b(Os())},w}var xs=Bi(function(t,e){return jo(t,1,e)}),Ls=Bi(function(t,e,n){return jo(t,mc(e)||0,n)});function Us(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Yt(r);var n=function(){var o=arguments,i=e?e.apply(this,o):o[0],r=n.cache;if(r.has(i))return r.get(i);var a=t.apply(this,o);return n.cache=r.set(i,a)||r,a};return n.cache=new(Us.Cache||bo),n}function ks(t){if("function"!=typeof t)throw new Yt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Us.Cache=bo;var js=or(function(t,e){var n=(e=1==e.length&&Ks(e[0])?Ve(e[0],un(ea())):Ve(Ko(e,1),un(ea()))).length;return Bi(function(o){for(var i=-1,r=zn(o.length,n);++i<r;)o[i]=e[i].call(this,o[i]);return Be(t,this,o)})}),Fs=Bi(function(t,e){var n=Pn(e,ta(Fs));return Gr(t,g,o,e,n)}),Vs=Bi(function(t,e){var n=Pn(e,ta(Vs));return Gr(t,v,o,e,n)}),Gs=Xr(function(t,e){return Gr(t,b,o,o,o,e)});function Hs(t,e){return t===e||t!=t&&e!=e}var Ws=Ur(ni),zs=Ur(function(t,e){return t>=e}),qs=li(function(){return arguments}())?li:function(t){return ic(t)&&te.call(t,"callee")&&!Se.call(t,"callee")},Ks=Pt.isArray,Ys=Re?un(Re):function(t){return ic(t)&&ei(t)==Z};function Xs(t){return null!=t&&nc(t.length)&&!tc(t)}function Js(t){return ic(t)&&Xs(t)}var Qs=Fn||ml,Zs=Ee?un(Ee):function(t){return ic(t)&&ei(t)==L};function $s(t){if(!ic(t))return!1;var e=ei(t);return e==k||e==U||"string"==typeof t.message&&"string"==typeof t.name&&!sc(t)}function tc(t){if(!oc(t))return!1;var e=ei(t);return e==j||e==F||e==D||e==z}function ec(t){return"number"==typeof t&&t==gc(t)}function nc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function oc(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ic(t){return null!=t&&"object"==typeof t}var rc=Oe?un(Oe):function(t){return ic(t)&&ca(t)==V};function ac(t){return"number"==typeof t||ic(t)&&ei(t)==G}function sc(t){if(!ic(t)||ei(t)!=W)return!1;var e=me(t);if(null===e)return!0;var n=te.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$t.call(n)==ie}var cc=Ie?un(Ie):function(t){return ic(t)&&ei(t)==q},lc=Ne?un(Ne):function(t){return ic(t)&&ca(t)==K};function uc(t){return"string"==typeof t||!Ks(t)&&ic(t)&&ei(t)==Y}function fc(t){return"symbol"==typeof t||ic(t)&&ei(t)==X}var pc=Te?un(Te):function(t){return ic(t)&&nc(t.length)&&!!de[ei(t)]},hc=Ur(gi),dc=Ur(function(t,e){return t<=e});function _c(t){if(!t)return[];if(Xs(t))return uc(t)?Nn(t):_r(t);if(Ae&&t[Ae])return Sn(t[Ae]());var e=ca(t);return(e==V?Cn:e==K?An:Hc)(t)}function yc(t){return t?(t=mc(t))===M||t===-M?(t<0?-1:1)*A:t==t?t:0:0===t?t:0}function gc(t){var e=yc(t),n=e%1;return e==e?n?e-n:e:0}function vc(t){return t?xo(gc(t),0,E):0}function mc(t){if("number"==typeof t)return t;if(fc(t))return R;if(oc(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=oc(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ln(t);var n=xt.test(t);return n||Ut.test(t)?ve(t.slice(2),n?2:8):Dt.test(t)?R:+t}function bc(t){return yr(t,xc(t))}function wc(t){return null==t?"":qi(t)}var Sc=br(function(t,e){if(Sa(e)||Xs(e))yr(e,Dc(e),t);else for(var n in e)te.call(e,n)&&Eo(t,n,e[n])}),Cc=br(function(t,e){yr(e,xc(e),t)}),Mc=br(function(t,e,n,o){yr(e,xc(e),t,o)}),Pc=br(function(t,e,n,o){yr(e,Dc(e),t,o)}),Ac=Xr(Do),Rc=Bi(function(t,e){t=zt(t);var n=-1,i=e.length,r=i>2?e[2]:o;for(r&&va(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],s=xc(a),c=-1,l=s.length;++c<l;){var u=s[c],f=t[u];(f===o||Hs(f,Qt[u])&&!te.call(t,u))&&(t[u]=a[u])}return t}),Ec=Bi(function(t){return t.push(o,Wr),Be(Uc,o,t)});function Oc(t,e,n){var i=null==t?o:$o(t,e);return i===o?n:i}function Ic(t,e){return null!=t&&fa(t,e,ii)}var Nc=Nr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=oe.call(e)),t[e]=n},ol(al)),Tc=Nr(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=oe.call(e)),te.call(t,e)?t[e].push(n):t[e]=[n]},ea),Bc=Bi(ci);function Dc(t){return Xs(t)?Co(t):_i(t)}function xc(t){return Xs(t)?Co(t,!0):yi(t)}var Lc=br(function(t,e,n){wi(t,e,n)}),Uc=br(function(t,e,n,o){wi(t,e,n,o)}),kc=Xr(function(t,e){var n={};if(null==t)return n;var o=!1;e=Ve(e,function(e){return e=nr(e,t),o||(o=e.length>1),e}),yr(t,Qr(t),n),o&&(n=Lo(n,s|c|l,zr));for(var i=e.length;i--;)Yi(n,e[i]);return n}),jc=Xr(function(t,e){return null==t?{}:Pi(t,e)});function Fc(t,e){if(null==t)return{};var n=Ve(Qr(t),function(t){return[t]});return e=ea(e),Ai(t,n,function(t,n){return e(t,n[0])})}var Vc=Vr(Dc),Gc=Vr(xc);function Hc(t){return null==t?[]:fn(t,Dc(t))}var Wc=Pr(function(t,e,n){return e=e.toLowerCase(),t+(n?zc(e):e)});function zc(t){return $c(wc(t).toLowerCase())}function qc(t){return(t=wc(t))&&t.replace(jt,yn).replace(se,"")}var Kc=Pr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yc=Pr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xc=Mr("toLowerCase"),Jc=Pr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qc=Pr(function(t,e,n){return t+(n?" ":"")+$c(e)}),Zc=Pr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),$c=Mr("toUpperCase");function tl(t,e,n){return t=wc(t),(e=n?o:e)===o?wn(t)?Ln(t):Ye(t):t.match(e)||[]}var el=Bi(function(t,e){try{return Be(t,o,e)}catch(n){return $s(n)?n:new Gt(n)}}),nl=Xr(function(t,e){return xe(e,function(e){e=ja(e),Bo(t,e,Ts(t[e],t))}),t});function ol(t){return function(){return t}}var il=Or(),rl=Or(!0);function al(t){return t}function sl(t){return di("function"==typeof t?t:Lo(t,s))}var cl=Bi(function(t,e){return function(n){return ci(n,t,e)}}),ll=Bi(function(t,e){return function(n){return ci(t,n,e)}});function ul(t,e,n){var o=Dc(e),i=Zo(e,o);null!=n||oc(e)&&(i.length||!o.length)||(n=e,e=t,t=this,i=Zo(e,Dc(e)));var r=!(oc(n)&&"chain"in n&&!n.chain),a=tc(t);return xe(i,function(n){var o=e[n];t[n]=o,a&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__),i=n.__actions__=_r(this.__actions__);return i.push({func:o,args:arguments,thisArg:t}),n.__chain__=e,n}return o.apply(t,Ge([this.value()],arguments))})}),t}function fl(){}var pl=Br(Ve),hl=Br(Ue),dl=Br(ze);function _l(t){return ma(t)?en(ja(t)):Ri(t)}var yl=Lr(),gl=Lr(!0);function vl(){return[]}function ml(){return!1}var bl,wl=Tr(function(t,e){return t+e},0),Sl=jr("ceil"),Cl=Tr(function(t,e){return t/e},1),Ml=jr("floor"),Pl=Tr(function(t,e){return t*e},1),Al=jr("round"),Rl=Tr(function(t,e){return t-e},0);return po.after=function(t,e){if("function"!=typeof e)throw new Yt(r);return t=gc(t),function(){if(--t<1)return e.apply(this,arguments)}},po.ary=Is,po.assign=Sc,po.assignIn=Cc,po.assignInWith=Mc,po.assignWith=Pc,po.at=Ac,po.before=Ns,po.bind=Ts,po.bindAll=nl,po.bindKey=Bs,po.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ks(t)?t:[t]},po.chain=_s,po.chunk=function(t,e,n){e=(n?va(t,e,n):e===o)?1:Wn(gc(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,s=Pt(xn(i/e));r<i;)s[a++]=Fi(t,r,r+=e);return s},po.compact=function(t){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var r=t[e];r&&(i[o++]=r)}return i},po.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Pt(t-1),n=arguments[0],o=t;o--;)e[o-1]=arguments[o];return Ge(Ks(n)?_r(n):[n],Ko(e,1))},po.cond=function(t){var e=null==t?0:t.length,n=ea();return t=e?Ve(t,function(t){if("function"!=typeof t[1])throw new Yt(r);return[n(t[0]),t[1]]}):[],Bi(function(n){for(var o=-1;++o<e;){var i=t[o];if(Be(i[0],this,n))return Be(i[1],this,n)}})},po.conforms=function(t){return Uo(Lo(t,s))},po.constant=ol,po.countBy=vs,po.create=function(t,e){var n=ho(t);return null==e?n:No(n,e)},po.curry=function t(e,n,i){var r=Gr(e,_,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},po.curryRight=function t(e,n,i){var r=Gr(e,y,o,o,o,o,o,n=i?o:n);return r.placeholder=t.placeholder,r},po.debounce=Ds,po.defaults=Rc,po.defaultsDeep=Ec,po.defer=xs,po.delay=Ls,po.difference=Ha,po.differenceBy=Wa,po.differenceWith=za,po.drop=function(t,e,n){var i=null==t?0:t.length;return i?Fi(t,(e=n||e===o?1:gc(e))<0?0:e,i):[]},po.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Fi(t,0,(e=i-(e=n||e===o?1:gc(e)))<0?0:e):[]},po.dropRightWhile=function(t,e){return t&&t.length?Ji(t,ea(e,3),!0,!0):[]},po.dropWhile=function(t,e){return t&&t.length?Ji(t,ea(e,3),!0):[]},po.fill=function(t,e,n,o){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&va(t,e,n)&&(n=0,o=i),zo(t,e,n,o)):[]},po.filter=function(t,e){return(Ks(t)?ke:qo)(t,ea(e,3))},po.flatMap=function(t,e){return Ko(As(t,e),1)},po.flatMapDeep=function(t,e){return Ko(As(t,e),M)},po.flatMapDepth=function(t,e,n){return n=n===o?1:gc(n),Ko(As(t,e),n)},po.flatten=Ya,po.flattenDeep=function(t){return null!=t&&t.length?Ko(t,M):[]},po.flattenDepth=function(t,e){return null!=t&&t.length?Ko(t,e=e===o?1:gc(e)):[]},po.flip=function(t){return Gr(t,w)},po.flow=il,po.flowRight=rl,po.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,o={};++e<n;){var i=t[e];o[i[0]]=i[1]}return o},po.functions=function(t){return null==t?[]:Zo(t,Dc(t))},po.functionsIn=function(t){return null==t?[]:Zo(t,xc(t))},po.groupBy=Cs,po.initial=function(t){return null!=t&&t.length?Fi(t,0,-1):[]},po.intersection=Ja,po.intersectionBy=Qa,po.intersectionWith=Za,po.invert=Nc,po.invertBy=Tc,po.invokeMap=Ms,po.iteratee=sl,po.keyBy=Ps,po.keys=Dc,po.keysIn=xc,po.map=As,po.mapKeys=function(t,e){var n={};return e=ea(e,3),Jo(t,function(t,o,i){Bo(n,e(t,o,i),t)}),n},po.mapValues=function(t,e){var n={};return e=ea(e,3),Jo(t,function(t,o,i){Bo(n,o,e(t,o,i))}),n},po.matches=function(t){return mi(Lo(t,s))},po.matchesProperty=function(t,e){return bi(t,Lo(e,s))},po.memoize=Us,po.merge=Lc,po.mergeWith=Uc,po.method=cl,po.methodOf=ll,po.mixin=ul,po.negate=ks,po.nthArg=function(t){return t=gc(t),Bi(function(e){return Ci(e,t)})},po.omit=kc,po.omitBy=function(t,e){return Fc(t,ks(ea(e)))},po.once=function(t){return Ns(2,t)},po.orderBy=function(t,e,n,i){return null==t?[]:(Ks(e)||(e=null==e?[]:[e]),Ks(n=i?o:n)||(n=null==n?[]:[n]),Mi(t,e,n))},po.over=pl,po.overArgs=js,po.overEvery=hl,po.overSome=dl,po.partial=Fs,po.partialRight=Vs,po.partition=Rs,po.pick=jc,po.pickBy=Fc,po.property=_l,po.propertyOf=function(t){return function(e){return null==t?o:$o(t,e)}},po.pull=ts,po.pullAll=es,po.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ei(t,e,ea(n,2)):t},po.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ei(t,e,o,n):t},po.pullAt=ns,po.range=yl,po.rangeRight=gl,po.rearg=Gs,po.reject=function(t,e){return(Ks(t)?ke:qo)(t,ks(ea(e,3)))},po.remove=function(t,e){var n=[];if(!t||!t.length)return n;var o=-1,i=[],r=t.length;for(e=ea(e,3);++o<r;){var a=t[o];e(a,o,t)&&(n.push(a),i.push(o))}return Oi(t,i),n},po.rest=function(t,e){if("function"!=typeof t)throw new Yt(r);return Bi(t,e=e===o?e:gc(e))},po.reverse=os,po.sampleSize=function(t,e,n){return e=(n?va(t,e,n):e===o)?1:gc(e),(Ks(t)?Po:xi)(t,e)},po.set=function(t,e,n){return null==t?t:Li(t,e,n)},po.setWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Li(t,e,n,i)},po.shuffle=function(t){return(Ks(t)?Ao:ji)(t)},po.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&va(t,e,n)?(e=0,n=i):(e=null==e?0:gc(e),n=n===o?i:gc(n)),Fi(t,e,n)):[]},po.sortBy=Es,po.sortedUniq=function(t){return t&&t.length?Wi(t):[]},po.sortedUniqBy=function(t,e){return t&&t.length?Wi(t,ea(e,2)):[]},po.split=function(t,e,n){return n&&"number"!=typeof n&&va(t,e,n)&&(e=n=o),(n=n===o?E:n>>>0)?(t=wc(t))&&("string"==typeof e||null!=e&&!cc(e))&&!(e=qi(e))&&bn(t)?ir(Nn(t),0,n):t.split(e,n):[]},po.spread=function(t,e){if("function"!=typeof t)throw new Yt(r);return e=null==e?0:Wn(gc(e),0),Bi(function(n){var o=n[e],i=ir(n,0,e);return o&&Ge(i,o),Be(t,this,i)})},po.tail=function(t){var e=null==t?0:t.length;return e?Fi(t,1,e):[]},po.take=function(t,e,n){return t&&t.length?Fi(t,0,(e=n||e===o?1:gc(e))<0?0:e):[]},po.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Fi(t,(e=i-(e=n||e===o?1:gc(e)))<0?0:e,i):[]},po.takeRightWhile=function(t,e){return t&&t.length?Ji(t,ea(e,3),!1,!0):[]},po.takeWhile=function(t,e){return t&&t.length?Ji(t,ea(e,3)):[]},po.tap=function(t,e){return e(t),t},po.throttle=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw new Yt(r);return oc(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),Ds(t,e,{leading:o,maxWait:e,trailing:i})},po.thru=ys,po.toArray=_c,po.toPairs=Vc,po.toPairsIn=Gc,po.toPath=function(t){return Ks(t)?Ve(t,ja):fc(t)?[t]:_r(ka(wc(t)))},po.toPlainObject=bc,po.transform=function(t,e,n){var o=Ks(t),i=o||Qs(t)||pc(t);if(e=ea(e,4),null==n){var r=t&&t.constructor;n=i?o?new r:[]:oc(t)&&tc(r)?ho(me(t)):{}}return(i?xe:Jo)(t,function(t,o,i){return e(n,t,o,i)}),n},po.unary=function(t){return Is(t,1)},po.union=is,po.unionBy=rs,po.unionWith=as,po.uniq=function(t){return t&&t.length?Ki(t):[]},po.uniqBy=function(t,e){return t&&t.length?Ki(t,ea(e,2)):[]},po.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Ki(t,o,e):[]},po.unset=function(t,e){return null==t||Yi(t,e)},po.unzip=ss,po.unzipWith=cs,po.update=function(t,e,n){return null==t?t:Xi(t,e,er(n))},po.updateWith=function(t,e,n,i){return i="function"==typeof i?i:o,null==t?t:Xi(t,e,er(n),i)},po.values=Hc,po.valuesIn=function(t){return null==t?[]:fn(t,xc(t))},po.without=ls,po.words=tl,po.wrap=function(t,e){return Fs(er(e),t)},po.xor=us,po.xorBy=fs,po.xorWith=ps,po.zip=hs,po.zipObject=function(t,e){return $i(t||[],e||[],Eo)},po.zipObjectDeep=function(t,e){return $i(t||[],e||[],Li)},po.zipWith=ds,po.entries=Vc,po.entriesIn=Gc,po.extend=Cc,po.extendWith=Mc,ul(po,po),po.add=wl,po.attempt=el,po.camelCase=Wc,po.capitalize=zc,po.ceil=Sl,po.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=mc(n))==n?n:0),e!==o&&(e=(e=mc(e))==e?e:0),xo(mc(t),e,n)},po.clone=function(t){return Lo(t,l)},po.cloneDeep=function(t){return Lo(t,s|l)},po.cloneDeepWith=function(t,e){return Lo(t,s|l,e="function"==typeof e?e:o)},po.cloneWith=function(t,e){return Lo(t,l,e="function"==typeof e?e:o)},po.conformsTo=function(t,e){return null==e||ko(t,e,Dc(e))},po.deburr=qc,po.defaultTo=function(t,e){return null==t||t!=t?e:t},po.divide=Cl,po.endsWith=function(t,e,n){t=wc(t),e=qi(e);var i=t.length,r=n=n===o?i:xo(gc(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},po.eq=Hs,po.escape=function(t){return(t=wc(t))&&_t.test(t)?t.replace(ht,gn):t},po.escapeRegExp=function(t){return(t=wc(t))&&Ct.test(t)?t.replace(St,"\\$&"):t},po.every=function(t,e,n){var i=Ks(t)?Ue:Ho;return n&&va(t,e,n)&&(e=o),i(t,ea(e,3))},po.find=ms,po.findIndex=qa,po.findKey=function(t,e){return Xe(t,ea(e,3),Jo)},po.findLast=bs,po.findLastIndex=Ka,po.findLastKey=function(t,e){return Xe(t,ea(e,3),Qo)},po.floor=Ml,po.forEach=ws,po.forEachRight=Ss,po.forIn=function(t,e){return null==t?t:Yo(t,ea(e,3),xc)},po.forInRight=function(t,e){return null==t?t:Xo(t,ea(e,3),xc)},po.forOwn=function(t,e){return t&&Jo(t,ea(e,3))},po.forOwnRight=function(t,e){return t&&Qo(t,ea(e,3))},po.get=Oc,po.gt=Ws,po.gte=zs,po.has=function(t,e){return null!=t&&fa(t,e,oi)},po.hasIn=Ic,po.head=Xa,po.identity=al,po.includes=function(t,e,n,o){t=Xs(t)?t:Hc(t),n=n&&!o?gc(n):0;var i=t.length;return n<0&&(n=Wn(i+n,0)),uc(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Qe(t,e,n)>-1},po.indexOf=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=null==n?0:gc(n);return i<0&&(i=Wn(o+i,0)),Qe(t,e,i)},po.inRange=function(t,e,n){return e=yc(e),n===o?(n=e,e=0):n=yc(n),ri(t=mc(t),e,n)},po.invoke=Bc,po.isArguments=qs,po.isArray=Ks,po.isArrayBuffer=Ys,po.isArrayLike=Xs,po.isArrayLikeObject=Js,po.isBoolean=function(t){return!0===t||!1===t||ic(t)&&ei(t)==x},po.isBuffer=Qs,po.isDate=Zs,po.isElement=function(t){return ic(t)&&1===t.nodeType&&!sc(t)},po.isEmpty=function(t){if(null==t)return!0;if(Xs(t)&&(Ks(t)||"string"==typeof t||"function"==typeof t.splice||Qs(t)||pc(t)||qs(t)))return!t.length;var e=ca(t);if(e==V||e==K)return!t.size;if(Sa(t))return!_i(t).length;for(var n in t)if(te.call(t,n))return!1;return!0},po.isEqual=function(t,e){return ui(t,e)},po.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:o)?n(t,e):o;return i===o?ui(t,e,o,n):!!i},po.isError=$s,po.isFinite=function(t){return"number"==typeof t&&Vn(t)},po.isFunction=tc,po.isInteger=ec,po.isLength=nc,po.isMap=rc,po.isMatch=function(t,e){return t===e||pi(t,e,oa(e))},po.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,pi(t,e,oa(e),n)},po.isNaN=function(t){return ac(t)&&t!=+t},po.isNative=function(t){if(wa(t))throw new Gt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return hi(t)},po.isNil=function(t){return null==t},po.isNull=function(t){return null===t},po.isNumber=ac,po.isObject=oc,po.isObjectLike=ic,po.isPlainObject=sc,po.isRegExp=cc,po.isSafeInteger=function(t){return ec(t)&&t>=-P&&t<=P},po.isSet=lc,po.isString=uc,po.isSymbol=fc,po.isTypedArray=pc,po.isUndefined=function(t){return t===o},po.isWeakMap=function(t){return ic(t)&&ca(t)==Q},po.isWeakSet=function(t){return ic(t)&&"[object WeakSet]"==ei(t)},po.join=function(t,e){return null==t?"":Gn.call(t,e)},po.kebabCase=Kc,po.last=$a,po.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=gc(n))<0?Wn(i+r,0):zn(r,i-1)),e==e?On(t,e,r):Je(t,$e,r,!0)},po.lowerCase=Yc,po.lowerFirst=Xc,po.lt=hc,po.lte=dc,po.max=function(t){return t&&t.length?Wo(t,al,ni):o},po.maxBy=function(t,e){return t&&t.length?Wo(t,ea(e,2),ni):o},po.mean=function(t){return tn(t,al)},po.meanBy=function(t,e){return tn(t,ea(e,2))},po.min=function(t){return t&&t.length?Wo(t,al,gi):o},po.minBy=function(t,e){return t&&t.length?Wo(t,ea(e,2),gi):o},po.stubArray=vl,po.stubFalse=ml,po.stubObject=function(){return{}},po.stubString=function(){return""},po.stubTrue=function(){return!0},po.multiply=Pl,po.nth=function(t,e){return t&&t.length?Ci(t,gc(e)):o},po.noConflict=function(){return we._===this&&(we._=re),this},po.noop=fl,po.now=Os,po.pad=function(t,e,n){t=wc(t);var o=(e=gc(e))?In(t):0;if(!e||o>=e)return t;var i=(e-o)/2;return Dr(kn(i),n)+t+Dr(xn(i),n)},po.padEnd=function(t,e,n){t=wc(t);var o=(e=gc(e))?In(t):0;return e&&o<e?t+Dr(e-o,n):t},po.padStart=function(t,e,n){t=wc(t);var o=(e=gc(e))?In(t):0;return e&&o<e?Dr(e-o,n)+t:t},po.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Kn(wc(t).replace(Mt,""),e||0)},po.random=function(t,e,n){if(n&&"boolean"!=typeof n&&va(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=yc(t),e===o?(e=t,t=0):e=yc(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Yn();return zn(t+r*(e-t+ge("1e-"+((r+"").length-1))),e)}return Ii(t,e)},po.reduce=function(t,e,n){var o=Ks(t)?He:on,i=arguments.length<3;return o(t,ea(e,4),n,i,Vo)},po.reduceRight=function(t,e,n){var o=Ks(t)?We:on,i=arguments.length<3;return o(t,ea(e,4),n,i,Go)},po.repeat=function(t,e,n){return e=(n?va(t,e,n):e===o)?1:gc(e),Ti(wc(t),e)},po.replace=function(){var t=arguments,e=wc(t[0]);return t.length<3?e:e.replace(t[1],t[2])},po.result=function(t,e,n){var i=-1,r=(e=nr(e,t)).length;for(r||(r=1,t=o);++i<r;){var a=null==t?o:t[ja(e[i])];a===o&&(i=r,a=n),t=tc(a)?a.call(t):a}return t},po.round=Al,po.runInContext=t,po.sample=function(t){return(Ks(t)?Mo:Di)(t)},po.size=function(t){if(null==t)return 0;if(Xs(t))return uc(t)?In(t):t.length;var e=ca(t);return e==V||e==K?t.size:_i(t).length},po.snakeCase=Jc,po.some=function(t,e,n){var i=Ks(t)?ze:Vi;return n&&va(t,e,n)&&(e=o),i(t,ea(e,3))},po.sortedIndex=function(t,e){return Gi(t,e)},po.sortedIndexBy=function(t,e,n){return Hi(t,e,ea(n,2))},po.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var o=Gi(t,e);if(o<n&&Hs(t[o],e))return o}return-1},po.sortedLastIndex=function(t,e){return Gi(t,e,!0)},po.sortedLastIndexBy=function(t,e,n){return Hi(t,e,ea(n,2),!0)},po.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Gi(t,e,!0)-1;if(Hs(t[n],e))return n}return-1},po.startCase=Qc,po.startsWith=function(t,e,n){return t=wc(t),n=null==n?0:xo(gc(n),0,t.length),e=qi(e),t.slice(n,n+e.length)==e},po.subtract=Rl,po.sum=function(t){return t&&t.length?an(t,al):0},po.sumBy=function(t,e){return t&&t.length?an(t,ea(e,2)):0},po.template=function(t,e,n){var i=po.templateSettings;n&&va(t,e,n)&&(e=o),t=wc(t),e=Mc({},e,i,Hr);var r,a,s=Mc({},e.imports,i.imports,Hr),c=Dc(s),l=fn(s,c),u=0,f=e.interpolate||Ft,p="__p += '",h=qt((e.escape||Ft).source+"|"+f.source+"|"+(f===vt?Tt:Ft).source+"|"+(e.evaluate||Ft).source+"|$","g"),d="//# sourceURL="+(te.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++he+"]")+"\n";t.replace(h,function(e,n,o,i,s,c){return o||(o=i),p+=t.slice(u,c).replace(Vt,vn),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),o&&(p+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=c+e.length,e}),p+="';\n";var _=te.call(e,"variable")&&e.variable;if(_){if(It.test(_))throw new Gt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(lt,""):p).replace(ut,"$1").replace(ft,"$1;"),p="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=el(function(){return Ht(c,d+"return "+p).apply(o,l)});if(y.source=p,$s(y))throw y;return y},po.times=function(t,e){if((t=gc(t))<1||t>P)return[];var n=E,o=zn(t,E);e=ea(e),t-=E;for(var i=sn(o,e);++n<t;)e(n);return i},po.toFinite=yc,po.toInteger=gc,po.toLength=vc,po.toLower=function(t){return wc(t).toLowerCase()},po.toNumber=mc,po.toSafeInteger=function(t){return t?xo(gc(t),-P,P):0===t?t:0},po.toString=wc,po.toUpper=function(t){return wc(t).toUpperCase()},po.trim=function(t,e,n){if((t=wc(t))&&(n||e===o))return ln(t);if(!t||!(e=qi(e)))return t;var i=Nn(t),r=Nn(e);return ir(i,hn(i,r),dn(i,r)+1).join("")},po.trimEnd=function(t,e,n){if((t=wc(t))&&(n||e===o))return t.slice(0,Tn(t)+1);if(!t||!(e=qi(e)))return t;var i=Nn(t);return ir(i,0,dn(i,Nn(e))+1).join("")},po.trimStart=function(t,e,n){if((t=wc(t))&&(n||e===o))return t.replace(Mt,"");if(!t||!(e=qi(e)))return t;var i=Nn(t);return ir(i,hn(i,Nn(e))).join("")},po.truncate=function(t,e){var n=30,i="...";if(oc(e)){var r="separator"in e?e.separator:r;n="length"in e?gc(e.length):n,i="omission"in e?qi(e.omission):i}var a=(t=wc(t)).length;if(bn(t)){var s=Nn(t);a=s.length}if(n>=a)return t;var c=n-In(i);if(c<1)return i;var l=s?ir(s,0,c).join(""):t.slice(0,c);if(r===o)return l+i;if(s&&(c+=l.length-c),cc(r)){if(t.slice(c).search(r)){var u,f=l;for(r.global||(r=qt(r.source,wc(Bt.exec(r))+"g")),r.lastIndex=0;u=r.exec(f);)var p=u.index;l=l.slice(0,p===o?c:p)}}else if(t.indexOf(qi(r),c)!=c){var h=l.lastIndexOf(r);h>-1&&(l=l.slice(0,h))}return l+i},po.unescape=function(t){return(t=wc(t))&&dt.test(t)?t.replace(pt,Bn):t},po.uniqueId=function(t){var e=++ee;return wc(t)+e},po.upperCase=Zc,po.upperFirst=$c,po.each=ws,po.eachRight=Ss,po.first=Xa,ul(po,(bl={},Jo(po,function(t,e){te.call(po.prototype,e)||(bl[e]=t)}),bl),{chain:!1}),po.VERSION="4.17.21",xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){po[t].placeholder=po}),xe(["drop","take"],function(t,e){go.prototype[t]=function(n){n=n===o?1:Wn(gc(n),0);var i=this.__filtered__&&!e?new go(this):this.clone();return i.__filtered__?i.__takeCount__=zn(n,i.__takeCount__):i.__views__.push({size:zn(n,E),type:t+(i.__dir__<0?"Right":"")}),i},go.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),xe(["filter","map","takeWhile"],function(t,e){var n=e+1,o=1==n||3==n;go.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ea(t,3),type:n}),e.__filtered__=e.__filtered__||o,e}}),xe(["head","last"],function(t,e){var n="take"+(e?"Right":"");go.prototype[t]=function(){return this[n](1).value()[0]}}),xe(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");go.prototype[t]=function(){return this.__filtered__?new go(this):this[n](1)}}),go.prototype.compact=function(){return this.filter(al)},go.prototype.find=function(t){return this.filter(t).head()},go.prototype.findLast=function(t){return this.reverse().find(t)},go.prototype.invokeMap=Bi(function(t,e){return"function"==typeof t?new go(this):this.map(function(n){return ci(n,t,e)})}),go.prototype.reject=function(t){return this.filter(ks(ea(t)))},go.prototype.slice=function(t,e){t=gc(t);var n=this;return n.__filtered__&&(t>0||e<0)?new go(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=gc(e))<0?n.dropRight(-e):n.take(e-t)),n)},go.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},go.prototype.toArray=function(){return this.take(E)},Jo(go.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=po[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);r&&(po.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,c=e instanceof go,l=s[0],u=c||Ks(e),f=function(t){var e=r.apply(po,Ge([t],s));return i&&p?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,h=!!this.__actions__.length,d=a&&!p,_=c&&!h;if(!a&&u){e=_?e:new go(this);var y=t.apply(e,s);return y.__actions__.push({func:ys,args:[f],thisArg:o}),new yo(y,p)}return d&&_?t.apply(this,s):(y=this.thru(f),d?i?y.value()[0]:y.value():y)})}),xe(["pop","push","shift","sort","splice","unshift"],function(t){var e=Xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);po.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var i=this.value();return e.apply(Ks(i)?i:[],t)}return this[n](function(n){return e.apply(Ks(n)?n:[],t)})}}),Jo(go.prototype,function(t,e){var n=po[e];if(n){var o=n.name+"";te.call(oo,o)||(oo[o]=[]),oo[o].push({name:e,func:n})}}),oo[Ir(o,h).name]=[{name:"wrapper",func:o}],go.prototype.clone=function(){var t=new go(this.__wrapped__);return t.__actions__=_r(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=_r(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=_r(this.__views__),t},go.prototype.reverse=function(){if(this.__filtered__){var t=new go(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},go.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ks(t),o=e<0,i=n?t.length:0,r=la(0,i,this.__views__),a=r.start,s=r.end,c=s-a,l=o?s:a-1,u=this.__iteratees__,f=u.length,p=0,h=zn(c,this.__takeCount__);if(!n||!o&&i==c&&h==c)return Qi(t,this.__actions__);var d=[];t:for(;c--&&p<h;){for(var _=-1,y=t[l+=e];++_<f;){var g=u[_],v=g.iteratee,m=g.type,b=v(y);if(2==m)y=b;else if(!b){if(1==m)continue t;break t}}d[p++]=y}return d},po.prototype.at=gs,po.prototype.chain=function(){return _s(this)},po.prototype.commit=function(){return new yo(this.value(),this.__chain__)},po.prototype.next=function(){this.__values__===o&&(this.__values__=_c(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},po.prototype.plant=function(t){for(var e,n=this;n instanceof _o;){var i=Ga(n);i.__index__=0,i.__values__=o,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},po.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof go){var e=t;return this.__actions__.length&&(e=new go(this)),(e=e.reverse()).__actions__.push({func:ys,args:[os],thisArg:o}),new yo(e,this.__chain__)}return this.thru(os)},po.prototype.toJSON=po.prototype.valueOf=po.prototype.value=function(){return Qi(this.__wrapped__,this.__actions__)},po.prototype.first=po.prototype.head,Ae&&(po.prototype[Ae]=function(){return this}),po}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(we._=Un,define(function(){return Un})):Ce?((Ce.exports=Un)._=Un,Se._=Un):we._=Un}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],GameDefine:[function(t,e,n){"use strict";cc._RF.push(e,"cd8d69FOLlB176+5MoyeEMa","GameDefine"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.VERSION="0.0.1",t.MAX_STAT_LOG_CACHE=10,t.STAT_SEND_PERIOD=60,t.MAX_REPORT_LOG_COUNT=200,t.GemMaxNum=6,t.GemMaxTypeNum=8,t.GemBaseValue=10,t.InitGuardId=1,t}();n.default=o,cc._RF.pop()},{}],GameScene:[function(t,e,n){"use strict";cc._RF.push(e,"e68c0oV6G1DEJzPMEqGZ3aG","GameScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Debug/DebugPad"),u=t("../../Gameplay/System/BattleSystem"),f=t("../../Gameplay/System/HomeSystem"),p=c(t("../../Module/ViewModule")),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topUI=null,e.topUIPrefab=null,e.bottomUI=null,e.bottomUIPrefab=null,e}return i(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(){return l.DebugPad.init(),this.initUI(),[2]})})},e.prototype.initUI=function(){p.default.instance.translateView("HomeWorld",null,{onLoaded:this.onHomeWorldLoaded.bind(this)}),u.BattleSystem.instance.targetOff(this),u.BattleSystem.instance.on(u.BattleSystem.Events.BattleStart,this.onBattleStart,this),u.BattleSystem.instance.on(u.BattleSystem.Events.BattleEnd,this.onBattleEnd,this);var t=cc.instantiate(this.bottomUIPrefab);t.parent=this.bottomUI,t.getComponent("HomeBottomUI").init();var e=cc.instantiate(this.topUIPrefab);e.parent=this.topUI,e.getComponent("HomeTopUI").init()},e.prototype.onHomeWorldLoaded=function(t){f.HomeSystem.instance.onHomeWorldLoaded(t)},e.prototype.onBattleStart=function(){this.topUI.active=!1,this.bottomUI.active=!1},e.prototype.onBattleEnd=function(){this.topUI.active=!0,this.bottomUI.active=!0},r([_(cc.Node)],e.prototype,"topUI",void 0),r([_(cc.Prefab)],e.prototype,"topUIPrefab",void 0),r([_(cc.Node)],e.prototype,"bottomUI",void 0),r([_(cc.Prefab)],e.prototype,"bottomUIPrefab",void 0),r([d],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Debug/DebugPad":"DebugPad","../../Gameplay/System/BattleSystem":"BattleSystem","../../Gameplay/System/HomeSystem":"HomeSystem","../../Module/ViewModule":"ViewModule"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"a3f38mvysRA1ZPXCcZGv0Pa","Game");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Enum/ErrorType")),c=a(t("../Utils/ErrorReporter")),l=t("./System/AdSystem"),u=t("./System/BagSystem"),f=t("./System/BattleSystem"),p=t("./System/HomeSystem"),h=t("./System/WeaponSystem"),d=function(){function t(){this._scheduleHandler=null,this._scene=null,this._systems=null,this._isInited=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){return o(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:cc.game.setFrameRate(60),this._systems=[u.BagSystem.instance,h.WeaponSystem.instance,p.HomeSystem.instance,f.BattleSystem.instance,l.AdSystem.instance],console.log("[Game] system init start ==============="),t=0,n.label=1;case 1:return t<this._systems.length?(e=this._systems[t],console.log("[Game] init system "+e.name),[4,e.init()]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:console.log("[Game] system lateInit start ==============="),t=0,n.label=5;case 5:return t<this._systems.length?(e=this._systems[t]).lateInit?(console.log("[Game] lateInit system "+e.name),[4,e.lateInit()]):[3,7]:[3,8];case 6:n.sent(),n.label=7;case 7:return t++,[3,5];case 8:return this._isInited=!0,console.log("[Game] init finish ==============="),this.startInterval(),[2]}})})},t.prototype.isInited=function(){return this._isInited},t.prototype.setAttachScene=function(t){this._scene=t,this.startInterval()},t.prototype.startInterval=function(){cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.clearInterval=function(){cc.director.getScheduler().unscheduleUpdate(this)},t.prototype.destroy=function(){var e,n;if(this._systems){try{for(var o=r(this._systems),i=o.next();!i.done;i=o.next()){var a=i.value;a.destroy&&a.destroy()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.clearInterval(),this._systems=null,t._instance=null,cc.director.getScheduler().unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_NON_SYSTEM)}},t.prototype.time=function(){return Date.now()},t.prototype.update=function(t){var e,n,o,i;try{try{for(var a=r(this._systems),l=a.next();!l.done;l=a.next())(p=l.value).logicUpdate(t)}catch(h){e={error:h}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var u=r(this._systems),f=u.next();!f.done;f=u.next()){var p;(p=f.value).lateLogicUpdate&&p.lateLogicUpdate(t)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}catch(_){c.default.instance.report(_,s.default.GAME_UPDATE)}},t._instance=null,t}();n.default=d,cc._RF.pop()},{"../Enum/ErrorType":"ErrorType","../Utils/ErrorReporter":"ErrorReporter","./System/AdSystem":"AdSystem","./System/BagSystem":"BagSystem","./System/BattleSystem":"BattleSystem","./System/HomeSystem":"HomeSystem","./System/WeaponSystem":"WeaponSystem"}],GemConfig:[function(t,e,n){"use strict";cc._RF.push(e,"4cf1bNdhqJJJ4GzZ+9EAKAi","GemConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GemPropView:[function(t,e,n){"use strict";cc._RF.push(e,"71f4cCEWLlEeIE0No2LwOe2","GemPropView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Module/ViewHandler")),l=a(t("../Utils/Path")),u=a(t("../Utils/Utils")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelGemName=null,e.labelScore=null,e.gemSp=null,e.gemOutline=null,e.labelNode=null,e.entryNode=null,e._partIndex=null,e._gemData=null,e}return i(e,t),e.prototype.initiateView=function(t){this._partIndex=t.index,this._gemData=t,u.default.localize(this.labelTitle,"ui_compare"),u.default.localize(this.labelGemName,"gem_"+this._partIndex+"_name");var e=s.ConfigManager.instance.getLanConfig("ui_score");this.labelScore.string=u.default.formatStr(e,t.score);var n=l.default.getGemPath(t.type,t.quality),o=l.default.getItemOutlinePath(this._gemData.quality);u.default.loadImg(this.gemSp,n,80),u.default.loadImg(this.gemOutline,o,120),this.initLabelNodes()},e.prototype.initLabelNodes=function(){this.entryNode.removeAllChildren();for(var t=function(t,e,n){for(var o=t.getChildByName("labelContent").getComponent(cc.Label),i="entry_"+n.type,r=s.ConfigManager.instance.getLanConfig(i),a="",c=0;c<n.influenceGuardIds.length;c++){var f="guard_"+n.influenceGuardIds[c]+"_name";a+="["+s.ConfigManager.instance.getLanConfig(f)+"]"}var p=u.default.formatStr(r,a,n.num);o.string=p;var h=t.getChildByName("quality").getChildByName("labelStar").getComponent(cc.Label),d=Math.min(Math.round(e/2),4);h.string=""+d;var _=t.getChildByName("entryBg").getComponent(cc.Sprite),y=t.getChildByName("quality").getChildByName("entryRightBg").getComponent(cc.Sprite),g=l.default.getEntryBgPath(d),v=l.default.getEntryRightBgPath(d);u.default.loadImg(_,g),u.default.loadImg(y,v)},e=0;e<this._gemData.entryInfo.length;e++){var n=this._gemData.entryInfo[e],o=cc.instantiate(this.labelNode);o.parent=this.entryNode,t(o,this._gemData.quality,n)}},e.prototype.onConfirm=function(){this.close()},r([h(cc.Label)],e.prototype,"labelTitle",void 0),r([h(cc.Label)],e.prototype,"labelGemName",void 0),r([h(cc.Label)],e.prototype,"labelScore",void 0),r([h(cc.Sprite)],e.prototype,"gemSp",void 0),r([h(cc.Sprite)],e.prototype,"gemOutline",void 0),r([h(cc.Prefab)],e.prototype,"labelNode",void 0),r([h(cc.Node)],e.prototype,"entryNode",void 0),r([p],e)}(c.default);n.default=d,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],GemType:[function(t,e,n){"use strict";cc._RF.push(e,"8efedKvXENIg5tcDcbbzIL4","GemType"),Object.defineProperty(n,"__esModule",{value:!0}),n.GemType=void 0,function(t){t.red="red",t.black="black",t.yellow="yellow",t.pink="pink",t.blue="blue",t.dimond="dimond",t.purple="purple",t.green="green"}(n.GemType||(n.GemType={})),cc._RF.pop()},{}],GuardConfig:[function(t,e,n){"use strict";cc._RF.push(e,"48749CxSFBKvokEhCTbmgjX","GuardConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GuardStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"d12a6QOCVpN4bnE6f6gC3Hc","GuardStateMachine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GuardStateMachine=n.GuardStatus=void 0;var a,s=t("../../../Utils/StateMachine");(function(t){t[t.Idle=0]="Idle",t[t.Chase=1]="Chase",t[t.Attack=2]="Attack"})(a=n.GuardStatus||(n.GuardStatus={}));var c=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return i(e,t),Object.defineProperty(e.prototype,"guard",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attackTarget",{get:function(){return this.context.attackTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anim",{get:function(){return this.avatar.getChildByName("img").getComponent(cc.Animation)||null},enumerable:!1,configurable:!0}),e}(s.BaseState),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Idle,e.searchCd=0,e}return i(e,t),e.prototype.onEnter=function(){this.searchCd=0;var t="guard_"+this.guard.id+"_idle";this.guard.playAnim(t)},e.prototype.onExit=function(){this.anim&&this.anim.stop()},e.prototype.update=function(t){if(null!=this.avatar&&(this.searchCd>0&&(this.searchCd-=t),this.searchCd<=0)){this.searchCd=e.SEARCH_CD;var n=void 0,o=this.guard.avatar.getPosition(),i=this.battleContext.terrain.guardFrontierY;if(o.y>=i){var r=this.config.attackRange*this.config.attackRange;n=this.getAllValidTargets(function(t){return t.position.y<i||cc.Vec2.squaredDistance(t.position,o)<=r})}else n=this.getAllValidTargets();if(!n)return;var s=new Set(Array.from(this.entityContext.getAllGuards().values()).map(function(t){return t.attackTarget}));this.guard.attackTarget=this.findTarget(n,s),this.guard.canMove()?this.changeState(a.Chase):this.changeState(a.Attack)}},e.prototype.getAllValidTargets=function(t){var e=this.entityContext.getAllEnemies();if(0==e.size)return null;var n=Array.from(e.values()).filter(function(e){return null!=e.avatar&&e.isAlive()&&(!t||t(e))});return 0==n.length?null:n},e.prototype.findTarget=function(t,e){var n,o,i,a;if(!t||0===t.length)return null;var s=null,c=this.avatar.getPosition(),l=Number.MAX_VALUE;try{for(var u=r(t),f=u.next();!f.done;f=u.next()){var p=f.value;e.has(p)||(_=cc.Vec2.squaredDistance(c,p.avatar.getPosition()))<l&&(l=_,s=p)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(null==s){l=Number.MAX_VALUE;try{for(var h=r(t),d=h.next();!d.done;d=h.next()){var _;p=d.value,(_=cc.Vec2.squaredDistance(c,p.avatar.getPosition()))<l&&(l=_,s=p)}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return s},e.SEARCH_CD=.1,e}(c),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Chase,e.isRechasing=!1,e}return i(e,t),e.prototype.onEnter=function(t){void 0===t&&(t=!1);var e="guard_"+this.guard.id+"_walk";this.guard.playAnim(e),this.isRechasing=t},e.prototype.onExit=function(){this.guard.stopAnim()},e.prototype.update=function(t){var e=this.guard.attackTarget;if(e&&e.isAlive()){var n=this.guard.config,o=this.guard.avatar.getPosition(),i=e.avatar.getPosition();if(o.y>=this.battleContext.terrain.guardFrontierY&&i.y>o.y)this.changeState(a.Idle);else{var r=cc.Vec2.distance(i,o),s=n.attackRange;if(this.isRechasing&&(s*=.7),r<=s)this.changeState(a.Attack);else{var c=Math.min(n.moveSpeed*t,r),l=i.sub(o);l.normalizeSelf(),l.mulSelf(c),o.addSelf(l),this.guard.avatar.setPosition(o),this.guard.anim&&(this.guard.anim.node.scaleX=(l.x>=0?1:-1)*Math.abs(this.guard.anim.node.scaleX))}}}else this.changeState(a.Idle)},e}(c),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Attack,e._attachInterval=.01,e._animSpeed=1,e._isInAnim=!1,e}return i(e,t),e.prototype.onEnter=function(){this._attachInterval=Math.max(this.config.attackInterval,.01),this._animName="guard_"+this.guard.id+"_attack",this._isInAnim=!1;var t=this.guard.anim.getAnimationState(this._animName);this._animSpeed=Math.max(1,t.duration/this._attachInterval),cc.log("duration: "+t.duration+", interval: "+this._attachInterval+", speed: "+this._animSpeed)},e.prototype.onExit=function(){},e.prototype.update=function(){var t=this;if(!this._isInAnim){if(null==this.attackTarget||!this.attackTarget.isAlive())return this.guard.attackTarget=null,void this.changeState(a.Idle);if(this.guard.canAttack()){var e=this.guard.avatar.getPosition(),n=this.attackTarget.avatar.getPosition();if(cc.Vec2.squaredDistance(n,e)>this.config.attackRange*this.config.attackRange)this.guard.canMove()?this.changeState(a.Chase,!0):(cc.warn("\u76ee\u6807\uff08"+this.guard.attackTarget+"\uff09\u8ddd\u79bb\u8fc7\u8fdc\uff0c\u5b88\u536b\uff08"+this.guard+"\uff09\u65e0\u6cd5\u79fb\u52a8\uff0c\u91cd\u65b0\u641c\u7d22"),this.guard.attackTarget=null,this.changeState(a.Idle));else{this._isInAnim=!0,this.guard.playAnim(this._animName,this._animSpeed,function(){return t._isInAnim=!1});var o=this.guard.getAttackCount();this.guard.minusAttackCd(o);for(var i=0;i<o;++i)this.attackOnce()}}}},e.prototype.attackOnce=function(){if(this.config.ability){var t=this.entityContext.createAbility(this.config.ability,{pos:this.attackTarget.position});t.owner=this.guard,t.createAvatar({parent:this.battleContext.terrain.node})}else if(this.config.bullet){var e=this.config.bullet,n=e.count>1?e.angleRange/(e.count-1):0,o=this.guard.position,i=this.attackTarget.position.sub(this.guard.position);i.normalizeSelf();for(var r=(e.count-1)/2,a=cc.v2(),s=-r;s<=r;s++){i.rotate(cc.misc.degreesToRadians(s*n),a);var c=this.entityContext.createBullet(e.bulletId,{pos:o});c.owner=this.guard,c.direction=a,c.createAvatar({parent:this.battleContext.terrain.node})}}else this.attackTarget.hurt(this.config.attack,this.guard)},e}(c),p=function(t){function e(e,n){var o=t.call(this,e)||this;return o.addInitState(new l(n)),o.addState(new u(n)),o.addState(new f(n)),o}return i(e,t),e}(s.StateMachine);n.GuardStateMachine=p,cc._RF.pop()},{"../../../Utils/StateMachine":"StateMachine"}],Guard:[function(t,e,n){"use strict";cc._RF.push(e,"27994wYqlRF96uHmlb1zAtN","Guard");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Guard=void 0;var a=t("../../Module/ConfigManager"),s=r(t("../../Utils/Path")),c=t("./AI/GuardStateMachine"),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._attackCd=0,o.config=a.ConfigManager.instance.getGuardConfig(o.id),o.type=o.config.type,o}return i(e,t),e.prototype.getName=function(){var t="guard_"+this.id+"_name";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.getDesc=function(){var t="guard_"+this.id+"_desc";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}},e.prototype.getAssetPath=function(){return s.default.getEntityPath(this.config.asset)},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new c.GuardStateMachine(this,this._context)},e.prototype.canMove=function(){return this.config.moveSpeed>0},e.prototype.getDistance=function(t){return!this.avatar||t.avatar?Number.MAX_VALUE:cc.Vec2.distance(this.avatar.getPosition(),t.avatar.getPosition())},e.prototype.isAlive=function(){return!0},e.prototype.minusAttackCd=function(t){var e=Math.max(this.config.attackInterval,.01);this._attackCd+=t*e},e.prototype.canAttack=function(){return this._attackCd<=0},e.prototype.getAttackCount=function(){var t=Math.max(this.config.attackInterval,.01),e=Math.floor(Math.abs(this._attackCd)/t);return this._attackCd<=0&&(e+=1),e},e.prototype.update=function(t){this._attackCd>0&&(this._attackCd-=t),this._sm.update(t),this._avatar&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Guard: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Guard=l,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","./AI/GuardStateMachine":"GuardStateMachine","./BaseEntity":"BaseEntity"}],GuideData:[function(t,e,n){"use strict";cc._RF.push(e,"69a97nnxn1FXZRrL31PbYeF","GuideData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GuideMask:[function(t,e,n){"use strict";cc._RF.push(e,"708a8zUQXVCMqY7u6gdCAdk","GuideMask");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.ClawLayer=void 0;var l,u=c(t("../../Modul/Loader")),f=c(t("../../Utils/Path")),p=c(t("../../Utils/Utils")),h=cc._decorator,d=h.ccclass;h.property,function(t){t[t.NONE=0]="NONE",t[t.TRANSPARENT_MASK=1]="TRANSPARENT_MASK",t[t.FULL_MASK=2]="FULL_MASK",t[t.NODE_MASK=3]="NODE_MASK"}(l||(l={}));var _,y=function(){this.isTargetExternal=!0};(function(t){t[t.Upper=0]="Upper",t[t.Lower=1]="Lower"})(_=n.ClawLayer||(n.ClawLayer={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maskMode=l.NONE,e._mask=null,e._maskGraphics=null,e._maskBg=null,e._focusTargetNodes=[],e._focusBoundingMap=new Map,e._focusTouchMap=new Map,e._focusExtraBounding=new Map,e._focusMaskDirty=!1,e._clawPrefab=null,e._maxClawHandle=0,e._clawInfoMap=new Map,e._clawNodePool=new cc.NodePool,e}var n;return i(e,t),n=e,e.get=function(){return cc.find("Canvas/MainCamera/GuideLayer").getComponent(n)},e.prototype.onLoad=function(){var t=this;this._lowerContainer=cc.find("Canvas/MainCamera/GuideLayerLower"),this.node.setContentSize(cc.winSize),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this._mask=this.node.getComponentInChildren(cc.Mask),this._mask.inverted=!0,this._mask.node.active=!1,this._maskGraphics=this._mask._graphics,this._maskBg=this._mask.getComponentInChildren(cc.Sprite),u.default.loadRes(f.default.guideClawPath(),cc.Prefab,function(e){t._clawPrefab=e},this)},e.prototype.onTouchStart=function(t){var e,n,o=this.node._touchListener;switch(this._maskMode){case l.NONE:o.setSwallowTouches(!1);break;case l.TRANSPARENT_MASK:case l.FULL_MASK:o.setSwallowTouches(!0);break;case l.NODE_MASK:var i=!1,r=cc.v2(cc.Camera.main.getScreenToWorldPoint(t.getLocation()));try{for(var s=a(this._focusTargetNodes),c=s.next();!c.done;c=s.next()){var u=c.value;if(cc.isValid(u)&&this._focusTouchMap.get(u)&&u.getBoundingBoxToWorld().contains(r)){i=!0;break}}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}o.setSwallowTouches(!i);break;default:cc.warn("[GuideMask] unexpected MaskMode: "+this._maskMode)}},e.prototype.update=function(t){var e,n,o,i,r,c;if(this._maskMode===l.NODE_MASK){this._focusMaskDirty=!1;var u=[];try{for(var f=a(this._focusTargetNodes),p=f.next();!p.done;p=f.next()){var h=p.value;cc.isValid(h)?this._updateFollowTarget(h):u.push(h)}}catch(A){e={error:A}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}try{for(var d=a(u),_=d.next();!_.done;_=d.next())h=_.value,this.hideNodeMask(h)}catch(R){o={error:R}}finally{try{_&&!_.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}this._focusTargetNodes.length>0?this._updateMaskHole():this.clearMask()}if(this._clawInfoMap.size>0)try{for(var y=a(this._clawInfoMap),g=y.next();!g.done;g=y.next()){var v=s(g.value,2),m=v[0],b=v[1],w=b.target;if(cc.isValid(w,!0)&&w.activeInHierarchy){var S=b.clawNode;if(S){var C=w.convertToWorldSpaceAR(cc.Vec2.ZERO);if(C=S.parent.convertToNodeSpaceAR(C),b.tweenTime){var M=S.getPosition(),P=cc.Vec2.lerp(cc.v2(),M,C,cc.misc.clamp01(t/b.tweenTime));S.setPosition(P),b.tweenTime-=t,b.tweenTime<=0&&(b.tweenTime=null,this._lastClawPos=P)}else S.setPosition(C)}}else this.hideClaw(m)}}catch(E){r={error:E}}finally{try{g&&!g.done&&(c=y.return)&&c.call(y)}finally{if(r)throw r.error}}},e.prototype.showFullMask=function(){this._maskMode!==l.FULL_MASK&&(this._clean(),this._maskMode=l.FULL_MASK,this._mask.node.active=!0,this._mask.enabled=!1,this._maskBg.enabled=!0)},e.prototype.showTransparentMask=function(){this._maskMode!==l.TRANSPARENT_MASK&&(this._clean(),this._maskMode=l.TRANSPARENT_MASK,this._mask.node.active=!0,this._mask.enabled=!1,this._maskBg.enabled=!1)},e.prototype.showNodeMask=function(t,e,n){void 0===e&&(e=!0),this._maskMode===l.NODE_MASK&&this._focusTargetNodes.includes(t)&&1===this._focusTargetNodes.length?this._focusTouchMap.set(t,e):(this._clean(),this.addNodeMask(t,e,n))},e.prototype.addNodeMask=function(t,e,n){void 0===e&&(e=!0),this._maskMode===l.NODE_MASK&&this._focusTargetNodes.includes(t)?this._focusTouchMap.set(t,e):(this._maskMode=l.NODE_MASK,this._mask.node.active=!0,this._mask.enabled=!0,this._maskBg.enabled=!0,this._focusTargetNodes.push(t),this._focusTouchMap.set(t,e),n&&this._focusExtraBounding.set(t,n),this._focusMaskDirty=!0,this._updateMaskHole())},e.prototype.hideNodeMask=function(t){var e=this._focusTargetNodes.indexOf(t);e>=0&&(this._focusTargetNodes.splice(e,1),this._focusTouchMap.delete(t),this._focusBoundingMap.delete(t),this._focusExtraBounding.delete(t),this._focusMaskDirty=!0)},e.prototype._updateFollowTarget=function(t){var e=this._getBoundingBox(t),n=this._focusBoundingMap.get(t);n&&e.equals(n)||(this._focusBoundingMap.set(t,e),this._focusMaskDirty=!0)},e.prototype._getBoundingBox=function(t){var e=t.getBoundingBoxToWorld(),n=this._focusExtraBounding.get(t);if(n){var o=n.left,i=n.right,r=n.top,a=n.bottom;o&&(e.x-=o,e.width+=o),i&&(e.width+=i),a&&(e.y-=a,e.height+=a),r&&(e.height+=r)}return p.default.transformRectTo(this.node,e)},e.prototype._updateMaskHole=function(){var t,e;if(this._focusMaskDirty){this._maskGraphics.clear(!0);try{for(var n=a(this._focusBoundingMap.values()),o=n.next();!o.done;o=n.next()){var i=o.value;this._maskGraphics.fillRect(i.x,i.y,i.width,i.height)}}catch(r){t={error:r}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this._focusMaskDirty=!1}},e.prototype.clearMask=function(){this._maskMode=l.NONE,this._clean()},e.prototype._clean=function(){this._focusTargetNodes.splice(0),this._focusBoundingMap.clear(),this._focusTouchMap.clear(),this._focusMaskDirty=!1,this._mask._graphics.clear(!0),this._mask.node.active=!1},e.prototype.isInFocus=function(){return this._focusTargetNodes.length>0},e.prototype.showClaw=function(t){var e=this,n=t.node,o=t.tips,i=t.tipsOffset,r=t.repeat,a=t.onFinish,s=t.noTween,c=t.upsidedown,l=t.targetOffset,u=t.layer,f=t.showFocusCircle,h=this.getTargetHandle(n);h&&this.hideClaw(h),h=++this._maxClawHandle;var d=new y;return d.target=n,d.isTargetExternal=!0,this._clawInfoMap.set(h,d),this._getClaw(null!=u?u:_.Upper).then(function(t){var u;if(!n||!cc.isValid(n,!0))return e.hideClaw(h),h;if(e._clawInfoMap.has(h)){d.clawNode=t,t.active=!0;var _=p.default.convertNodePositionToNode(n,cc.Vec2.ZERO,e.node),y=null!==(u=e._lastClawPos)&&void 0!==u?u:cc.Vec2.ZERO,g=0;if(!s){var v=cc.Vec2.distance(_,y);v>800&&(g=v/800,d.tweenTime=g)}t.setPosition(y);var m=cc.find("labelContainer/label",t).getComponent(cc.Label),b=cc.find("img",t).getComponent(cc.Sprite),w=m.node.parent;w.active=!!o,w.stopAllActions(),o&&(m.string=o,g>0&&(w.active=!1,cc.tween(w).delay(g+.2).call(function(){return w.active=!0}).start()),i?w.setPosition(i.x,i.y):w.setPosition(cc.v2(0,-120)));var S=c?-30:30;b.node.scaleY=c?-1:1,b.node.stopAllActions(),l?b.node.setPosition(l.x,l.y-S):b.node.setPosition(0,-S),null!=r&&r>0?cc.tween(b.node).delay(g).repeat(r,cc.tween().by(.5,{y:S},{easing:"sineIn"}).by(.5,{y:-S},{easing:"sineOut"})).call(function(){e.hideClaw(h),a&&a()}).start():cc.tween(b.node).delay(g).repeatForever(cc.tween().by(.5,{y:S},{easing:"sineIn"}).by(.5,{y:-S},{easing:"sineOut"})).start();var C=t.getChildByName("focusCircle");if(C.active=!!f,f){C.stopAllActions(),l?C.setPosition(l.x,l.y):C.setPosition(0,0);var M=n.getBoundingBoxToWorld();M=p.default.transformRectTo(t,M);var P=cc.misc.clampf(1.3*Math.min(M.height,M.width),100,250),A=Math.min(P+200,1.8*P),R=C.width;cc.tween(C).delay(g).repeatForever(cc.tween().show().set({scale:A/R,opacity:255}).to(.5,{scale:P/R}).to(.3,{opacity:0}).delay(.2)).start()}}else e._clawNodePool.put(t)}),h},e.prototype.showMoveClaw=function(t,e,n,o,i){var r=this,a=++this._maxClawHandle,s=new cc.Node("moveClawTarget");s.parent=this.node,t=this.node.convertToNodeSpaceAR(t),e=this.node.convertToNodeSpaceAR(e),s.setPosition(t);var c=new y;return c.target=s,c.isTargetExternal=!1,this._clawInfoMap.set(a,c),this._getClaw(_.Upper).then(function(l){if(r._clawInfoMap.has(a)){c.clawNode=l,l.active=!0,l.setPosition(t);var u=cc.Vec2.distance(t,e)/800;o?cc.tween(s).repeat(n,cc.tween().delay(.3).to(u,{position:cc.v3(e)}).delay(.3).to(u,{position:cc.v3(t)})).call(function(){r.hideClaw(a),i&&i()}).start():cc.tween(s).repeat(n,cc.tween().delay(.3).to(u,{position:cc.v3(e)}).delay(.3).set({position:cc.v3(t)})).call(function(){r.hideClaw(a),i&&i()}).start();var f=l.getComponentInChildren(cc.Label),p=l.getComponentInChildren(cc.Sprite);f.node.parent.active=!1,p.node.stopAllActions(),p.node.y=0}else r._clawNodePool.put(l)}),a},e.prototype.hideClaw=function(t){var e=this._clawInfoMap.get(t);console.log("[GuideMask] hideClaw: "+t+", exist: "+!!e),e&&(e.clawNode&&(this._lastClawPos=e.clawNode.getPosition(),this._clawNodePool.put(e.clawNode)),e.isTargetExternal||e.target.destroy(),this._clawInfoMap.delete(t))},e.prototype.hideAllClaws=function(){var t,e;try{for(var n=a(this._clawInfoMap),o=n.next();!o.done;o=n.next()){var i=s(o.value,2),r=(i[0],i[1]);r.clawNode&&this._clawNodePool.put(r.clawNode),r.isTargetExternal||r.target.destroy()}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this._clawInfoMap.clear()},e.prototype.clearClawPos=function(){this._lastClawPos=null},e.prototype.isClawShowing=function(t){return this._clawInfoMap.has(t)},e.prototype.isAnyClawShowing=function(){return this._clawInfoMap.size>0},e.prototype.getTargetHandle=function(t){var e,n;try{for(var o=a(this._clawInfoMap),i=o.next();!i.done;i=o.next()){var r=s(i.value,2),c=r[0];if(r[1].target===t)return c}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return null},e.prototype._getClaw=function(t){var e=this;return new Promise(function(t){e._clawPrefab?t(e._clawPrefab):u.default.loadResAsync(f.default.guideClawPath(),cc.Prefab,e).then(function(n){e._clawPrefab=n,t(e._clawPrefab)})}).then(function(n){var o,i=null!==(o=e._clawNodePool.get())&&void 0!==o?o:cc.instantiate(n);return i.parent=t===_.Upper?e.node:e._lowerContainer,i})},e.MaskMode=l,n=r([d],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Modul/Loader":void 0,"../../Utils/Path":"Path","../../Utils/Utils":"Utils"}],Heap:[function(t,e,n){"use strict";cc._RF.push(e,"efb3fqYA8lIeaNfwiz2Umgc","Heap"),Object.defineProperty(n,"__esModule",{value:!0}),n.Heap=n.MaxNumberComparer=n.minNumberCompare=void 0,n.minNumberCompare=function(t,e){return t-e},n.MaxNumberComparer=function(t,e){return e-t};var o=function(){function t(t){this.items=[],this.itemToIndexMap=new Map,this.innerCompare=t}return t.prototype.peek=function(){return this.items[0]},t.prototype.add=function(t){if(this.itemToIndexMap.has(t))throw new Error("Connot add an item that is already in the heap.");this.items.push(t),this.itemToIndexMap.set(t,this.items.length-1),this.bubbleUpToPlace(this.items.length-1)},t.prototype.pop=function(){if(!this.isEmpty){var t=this.items[0];return this.removeAt(0),t}},Object.defineProperty(t.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){var e=this.itemToIndexMap.get(t);return void 0!==e&&(this.removeAt(e),!0)},t.prototype.clear=function(){this.items.length=0,this.itemToIndexMap.clear()},t.prototype.contains=function(t){return this.itemToIndexMap.has(t)},t.prototype[Symbol.iterator]=function(){return this.items[Symbol.iterator]()},t.prototype.compare=function(t,e){var n=this.innerCompare(t,e);if("number"!=typeof n)throw new Error("The typeof compare result cannot be different from number: "+n);if(isNaN(n))throw new Error("Compare result cannot be is NaN.");return n},t.prototype.removeAt=function(t){if(1!==this.items.length){if(t===this.items.length-1)return this.itemToIndexMap.delete(this.items[this.items.length-1]),void(this.items.length=this.items.length-1);var e=this.items[t];this.itemToIndexMap.delete(e),this.items[t]=this.items[this.items.length-1],this.items.splice(this.items.length-1,1),this.itemToIndexMap.set(this.items[t],t);var n=this.compare(this.items[t],e);n<0?this.bubbleUpToPlace(t):n>0&&this.bubbleDownToPlace(t)}else this.clear()},t.prototype.getLeftChildIndex=function(t){return 2*t+1},t.prototype.getParentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.getSmallerChildIndex=function(t,e){return e>=this.items.length?t>=this.items.length?void 0:t:t>=this.items.length?e:this.compare(this.items[t],this.items[e])<=0?t:e},t.prototype.bubbleUpToPlace=function(t){if(0!==t)for(var e=this.items[t];;){var n=this.getParentIndex(t),o=this.items[n];if(this.compare(o,e)<=0)break;if(this.swap(t,n,e,o),0===n)break;t=n}},t.prototype.bubbleDownToPlace=function(t){for(var e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1);void 0!==n;){var o=this.items[t],i=this.items[n];if(this.compare(o,i)<0)break;this.swap(t,n,o,i),t=n,e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1)}},t.prototype.swap=function(t,e,n,o){n=n||this.items[t],o=o||this.items[e];var i=n;this.items[t]=o,this.items[e]=i,this.itemToIndexMap.set(n,e),this.itemToIndexMap.set(o,t)},t}();n.Heap=o,cc._RF.pop()},{}],HomeBottomUI:[function(t,e,n){"use strict";cc._RF.push(e,"03f57kPT25KVoVziCPgRWkh","HomeBottomUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Enum/ItemType"),c=a(t("../Gameplay/GameDefine")),l=t("../Gameplay/System/BagSystem"),u=t("../Gameplay/System/HomeSystem"),f=t("../Gameplay/System/WeaponSystem"),p=a(t("../Module/ViewModule")),h=a(t("../Utils/Path")),d=a(t("../Utils/Utils")),_=cc._decorator,y=_.ccclass,g=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelCall=null,e.labelRetreat=null,e.labelAutoAttack=null,e.weaponRoot=null,e.divineBeastRoot=null,e.slotRoot=null,e.autoAttack=null,e._slots=null,e._isSummoned=!1,e._divineBeastId=null,e._slotMap=new Map,e._autoAttack=!1,e}return i(e,t),e.prototype.update=function(){this._autoAttack&&this.onSummon()},e.prototype.init=function(){var t=this;d.default.localize(this.labelCall,"ui_call"),d.default.localize(this.labelRetreat,"ui_retreat"),d.default.localize(this.labelAutoAttack,"ui_autoAttack"),u.HomeSystem.instance.targetOff(this),f.WeaponSystem.instance.on(f.WeaponSystem.Events.UpdateSlot,function(){t.initGem()}),u.HomeSystem.instance.on(u.HomeSystem.Events.OnHurt,function(){t.updateGem()}),this.initGem(),this.initDivineBeast(),this.initAutoAttack()},e.prototype.updateToggle=function(){this._autoAttack?this.autoAttack.check():this.autoAttack.uncheck()},e.prototype.initAutoAttack=function(){this._autoAttack=u.HomeSystem.instance.isAutoAttack(),this.updateToggle()},e.prototype.updateAutoAttack=function(){this._autoAttack=!this._autoAttack,this.updateToggle()},e.prototype.initDivineBeast=function(){if(this._divineBeastId=f.WeaponSystem.instance.getCurDivineBeastId(),this._divineBeastId){var t=this.divineBeastRoot.getChildByName("Slot").getChildByName("img").getComponent(cc.Sprite),e=h.default.getDivineBeastImg(this._divineBeastId);d.default.loadImg(t,e,60)}},e.prototype.initGem=function(){for(var t=this,e=f.WeaponSystem.instance.getWeaponSlotNum(),n=function(n){var i="slot"+n,r=o.slotRoot.getChildByName(i),a=r.getChildByName("img_lock");a.active=!1,n>=e&&(a.active=!0);var s=r.getComponent(cc.Button);s.node.targetOff(o),s.node.on("click",function(){t.onShowGemProp(n)}),o._slotMap.set(n,r)},o=this,i=0;i<c.default.GemMaxNum;i++)n(i);for(var r in this._slots=f.WeaponSystem.instance.getSlots(),this._slots){var a=this._slots[r];a.id&&this.onUpdateSlotView(a)}},e.prototype.onUpdateSlotView=function(t){if(!(t.index>f.WeaponSystem.instance.getWeaponSlotNum())){var e=t.index,n=this._slotMap.get(e),o=n.getChildByName("img").getComponent(cc.Sprite),i=n.getChildByName("outline").getComponent(cc.Sprite),r=h.default.getGemPath(t.type,t.quality),a=h.default.getItemOutlinePath(t.quality);d.default.loadImg(o,r,60),d.default.loadImg(i,a)}},e.prototype.onShowGemProp=function(t){var e=f.WeaponSystem.instance.getSlotByIndex(t);e.isUnlock?e.id?p.default.instance.pushView("GemPropView",e):p.default.instance.toast("toast_noGem"):p.default.instance.toast("toast_lock")},e.prototype.onRetreat=function(){u.HomeSystem.instance.startRetreat()},e.prototype.onSummon=function(){this._isSummoned||(this._isSummoned=!0,u.HomeSystem.instance.createGuard())},e.prototype.updateGem=function(){var t=this,e=f.WeaponSystem.instance.randomGem(),n=e.index,o=f.WeaponSystem.instance.getSlots()[n];o.id?(f.WeaponSystem.instance.compareTwoGems(o,e),p.default.instance.pushView("CompareView",{info:{oldGem:o,newGem:e},index:n,cb:function(n){if(n)f.WeaponSystem.instance.setSlotData(e),t.onUpdateSlotView(e);else{var o=Math.floor(e.score/10);l.BagSystem.instance.addItemCount(s.ItemType.Coin,o)}t._isSummoned=!1}})):(f.WeaponSystem.instance.setSlotData(e),this.onUpdateSlotView(e),this._isSummoned=!1)},e.prototype.showDivineBeast=function(){this._divineBeastId&&p.default.instance.pushView("DivineBeastView",{beastId:this._divineBeastId,cb:function(){}})},r([g(cc.Label)],e.prototype,"labelCall",void 0),r([g(cc.Label)],e.prototype,"labelRetreat",void 0),r([g(cc.Label)],e.prototype,"labelAutoAttack",void 0),r([g(cc.Node)],e.prototype,"weaponRoot",void 0),r([g(cc.Node)],e.prototype,"divineBeastRoot",void 0),r([g(cc.Node)],e.prototype,"slotRoot",void 0),r([g(cc.Toggle)],e.prototype,"autoAttack",void 0),r([y],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../Enum/ItemType":"ItemType","../Gameplay/GameDefine":"GameDefine","../Gameplay/System/BagSystem":"BagSystem","../Gameplay/System/HomeSystem":"HomeSystem","../Gameplay/System/WeaponSystem":"WeaponSystem","../Module/ViewModule":"ViewModule","../Utils/Path":"Path","../Utils/Utils":"Utils"}],HomeData:[function(t,e,n){"use strict";cc._RF.push(e,"1b9dclumqdNK7LplPoMAXNh","HomeData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],HomeSystem:[function(t,e,n){"use strict";cc._RF.push(e,"3f6082YpvFLh6n48Ls7vxH1","HomeSystem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.HomeSystem=void 0;var c=s(t("../../Module/Audio")),l=t("../../Module/ConfigManager"),u=s(t("../../Module/Database/Db")),f=s(t("../../Module/ViewModule")),p=s(t("../../Utils/Path")),h=s(t("../Game")),d=t("./BagSystem"),_=t("./Common/DataSaver"),y={OnHurt:"OnHurt"},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="HomeSystem",e._oneSec=1,e._leftRetreatTs=0,e._saver=new _.DataSaver,e._config=null,e._homeWorld=null,e}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(){return this._data=u.default.instance.getData("home"),this._data?this._config=l.ConfigManager.instance.getStageConfig(this._data.curStage):(this._config=l.ConfigManager.instance.getStageConfig(1),t=this._config.stageHp,this._data={version:1,magic:1,curStage:1,leftHp:t,startRetreatTs:-1,autoAttack:!1},this.setDirty()),this._data.startRetreatTs>0&&(e=1e3*this._config.retreatTime+this._data.startRetreatTs,this._leftRetreatTs=e-h.default.instance.time(),this._leftRetreatTs=Math.max(this._leftRetreatTs,0)),this._saver.init("home",this._data),this.playBgm(1),[2]})})},e.prototype.onHomeWorldLoaded=function(t){this._homeWorld=t},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.createGuard=function(){var t=this;this._homeWorld.showGuardAttackAnim(function(){t.onHurt(1),t.emit(y.OnHurt)})},e.prototype.playBgm=function(t){var e=p.default.soundPath(t);c.default.instance.stopMusic(),c.default.instance.playMusic(e)},e.prototype.logicUpdate=function(t){this._oneSec-=t,this._oneSec<=0&&(this._oneSec=1,this._leftRetreatTs>0&&(this._leftRetreatTs-=1e3,this._leftRetreatTs<=0&&this.stopRetreat(),this._homeWorld.updateLeftTime()))},e.prototype.getCurrentStage=function(){return this._data.curStage},e.prototype.getLeftHp=function(){return this._data.leftHp},e.prototype.getLeftRetreatTs=function(){return this._leftRetreatTs},e.prototype.onHurt=function(t){this._data.leftHp>=0&&(this._data.leftHp-=t,this._data.leftHp=Math.max(0,this._data.leftHp),this._homeWorld.updateLeftHp(),this.setDirty())},e.prototype.isAutoAttack=function(){return this._data.autoAttack},e.prototype.startRetreat=function(){var t=this;if(this._data.leftHp>0)f.default.instance.toast("toast_leftHp",this._data.leftHp);else if(this._data.startRetreatTs<=0){var e=this._config.retreatCondition;d.BagSystem.instance.showConditionView(e,function(){t._data.startRetreatTs=h.default.instance.time(),t._leftRetreatTs=1e3*t._config.retreatTime,t.setDirty()})}},e.prototype.stopRetreat=function(){this._leftRetreatTs=0,this._data.curStage++,this._config=l.ConfigManager.instance.getStageConfig(this._data.curStage),this._data.leftHp=this._config.stageHp,this._homeWorld.updateStage(this._data.curStage),this.setDirty()},e._instance=null,e.Events=y,e}(cc.EventTarget);n.HomeSystem=g,cc._RF.pop()},{"../../Module/Audio":"Audio","../../Module/ConfigManager":"ConfigManager","../../Module/Database/Db":"Db","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../Game":"Game","./BagSystem":"BagSystem","./Common/DataSaver":"DataSaver"}],HomeTopUI:[function(t,e,n){"use strict";cc._RF.push(e,"555325+IkJKq6oXJDcFg/Jv","HomeTopUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../Enum/ItemType"),u=t("../Gameplay/System/BagSystem"),f=c(t("../Module/Loader")),p=c(t("../Module/ViewModule")),h=t("../Utils/NodePool"),d=c(t("../Utils/Path")),_=c(t("../Utils/Utils")),y=cc._decorator,g=y.ccclass,v=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelGamecircle=null,e.labelMail=null,e.labelCoin=null,e.labelHeroSoul=null,e.labelEnergy=null,e.labelUserName=null,e.labelBag=null,e.moneyNode=null,e}return i(e,t),e.prototype.init=function(){this.initUserInfo(),this.initStr(),this.initFloatLabelNode()},e.prototype.initStr=function(){_.default.localize(this.labelMail,"ui_mail"),_.default.localize(this.labelGamecircle,"ui_gamecircle"),_.default.localize(this.labelBag,"ui_bag")},e.prototype.initFloatLabelNode=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return t=d.default.getPrefabByName("FloatNode"),[4,f.default.loadResAsync(t,cc.Prefab,null)];case 1:return e=n.sent(),h.NodePool.instance.tryCreatePool(t,e),[2]}})})},e.prototype.showFloatLabel=function(t,e,n){var o=h.NodePool.instance.getNode(d.default.getPrefabByName("FloatNode")),i=null,r=null;t==l.ItemType.Coin?(r=this.labelCoin.getComponent(cc.Label),i=this.labelCoin.node):t==l.ItemType.Energy?(r=this.labelEnergy.getComponent(cc.Label),i=this.labelEnergy.node):t==l.ItemType.HeroSoul&&(r=this.labelHeroSoul.getComponent(cc.Label),i=this.labelHeroSoul.node),o.parent=i.parent,o.setPosition(i.getPosition()),o.getChildByName("labelFloat").getComponent(cc.Label).string="+"+e,cc.tween(o).by(.5,{y:50}).call(function(){h.NodePool.instance.putNode(o),r.string=""+n}).start()},e.prototype.initUserInfo=function(){var t=this,e=u.BagSystem.instance.getItemCount(1),n=u.BagSystem.instance.getItemCount(2),o=u.BagSystem.instance.getItemCount(3);this.labelCoin.string=""+e,this.labelEnergy.string=""+n,this.labelHeroSoul.string=""+o,this.labelUserName.string="\u65e0\u540d\u6c0f",u.BagSystem.instance.targetOff(this),u.BagSystem.instance.on(u.BagSystem.Events.ItemChanged,function(e,n,o){t.showFloatLabel(e,n,o)})},e.prototype.onSetting=function(){p.default.instance.pushView("SettingView",{cb:function(){}})},e.prototype.onAddEnergy=function(){},e.prototype.onAddHeroSoul=function(){},e.prototype.onMail=function(){},e.prototype.onBag=function(){p.default.instance.pushView("BagView",1)},e.prototype.onGamecircle=function(){},r([v(cc.Label)],e.prototype,"labelGamecircle",void 0),r([v(cc.Label)],e.prototype,"labelMail",void 0),r([v(cc.Label)],e.prototype,"labelCoin",void 0),r([v(cc.Label)],e.prototype,"labelHeroSoul",void 0),r([v(cc.Label)],e.prototype,"labelEnergy",void 0),r([v(cc.Label)],e.prototype,"labelUserName",void 0),r([v(cc.Label)],e.prototype,"labelBag",void 0),r([v(cc.Node)],e.prototype,"moneyNode",void 0),r([g],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../Enum/ItemType":"ItemType","../Gameplay/System/BagSystem":"BagSystem","../Module/Loader":"Loader","../Module/ViewModule":"ViewModule","../Utils/NodePool":"NodePool","../Utils/Path":"Path","../Utils/Utils":"Utils"}],HomeWorld:[function(t,e,n){"use strict";cc._RF.push(e,"55eb9DE7U9MUa1a/1erpYZE","HomeWorld");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=c(t("../../Enum/ViewType")),u=t("../../Gameplay/System/BattleSystem"),f=t("../../Gameplay/System/HomeSystem"),p=c(t("../../Module/Loader")),h=c(t("../../Module/ViewHandler")),d=c(t("../../Utils/Path")),_=c(t("../../Utils/Utils")),y=cc._decorator,g=y.ccclass,v=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=l.default.World,e.stagePrefab=null,e.stageRoot=null,e._labelLeftTime=null,e._labelLeftHp=null,e._stageNode=null,e.stage=null,e}return i(e,t),e.prototype.initiateView=function(){var t=f.HomeSystem.instance.getCurrentStage();this.stage=cc.instantiate(this.stagePrefab),this.stage.parent=this.stageRoot,this.stage.setPosition(this.getCurPos(t)),this.updateNodeInfo()},e.prototype.getCurPos=function(t){var e="stage"+t;return this._stageNode=this.node.getChildByName("StageRoot").getChildByName(e),this._stageNode||(this._stageNode=this.stageRoot.getChildByName("infinity")),this._stageNode.getPosition()},e.prototype.updateNodeInfo=function(){var t=this.stage.getChildByName("mainNode"),e=t.getChildByName("btnStart"),n=t.getChildByName("labelStart").getComponent(cc.Label);_.default.localize(n,"ui_start"),this._labelLeftTime=t.getChildByName("labelLeftTime").getComponent(cc.Label),this.updateLeftTime(),this._labelLeftHp=t.getChildByName("labelLeftHp").getComponent(cc.Label),this.updateLeftHp(),e.targetOff(this),e.on("click",this.onStart,this)},e.prototype.updateStage=function(t){var e=this,n=this.getCurPos(t);cc.tween(this.stage).to(.5,{position:cc.v3(n.x,n.y,0)}).call(function(){e.updateNodeInfo()}).start()},e.prototype.updateLeftHp=function(){var t=f.HomeSystem.instance.getLeftHp();t<=0?this._labelLeftHp.node.active=!1:this._labelLeftHp.string=""+t},e.prototype.updateLeftTime=function(){var t=f.HomeSystem.instance.getLeftRetreatTs();t<=0?this._labelLeftTime.node.active=!1:this._labelLeftTime.string=_.default.formatTimeText(t)},e.prototype.onStart=function(){var t=u.BattleSystem.instance.getCurrentLevel();u.BattleSystem.instance.startBattle(t)},e.prototype.showGuardAttackAnim=function(t){return a(this,void 0,void 0,function(){var e,n,o,i,r,a,c,l;return s(this,function(s){switch(s.label){case 0:return e=_.default.randomRangeInt(1,3),n=d.default.getEntityPath("Guards/Guard"+e),[4,p.default.loadResAsync(n,cc.Prefab,null)];case 1:return o=s.sent(),(i=cc.instantiate(o)).parent=this.stageRoot,r=this._stageNode.getPosition(),a=r.x+200*Math.random()+100,c=r.y+200*Math.random()+100,i.setPosition(a,c),(l=i.getChildByName("img").getComponent(cc.Animation)).play("guard_"+e+"_walk"),cc.tween(i).to(1,{x:r.x,y:r.y}).call(function(){l.play("guard_"+e+"_attack"),l.on("finished",function(){i.removeFromParent(),i.destroy(),t()})}).start(),[2]}})})},r([v(cc.Prefab)],e.prototype,"stagePrefab",void 0),r([v(cc.Node)],e.prototype,"stageRoot",void 0),r([g],e)}(h.default);n.default=m,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Gameplay/System/BattleSystem":"BattleSystem","../../Gameplay/System/HomeSystem":"HomeSystem","../../Module/Loader":"Loader","../../Module/ViewHandler":"ViewHandler","../../Utils/Path":"Path","../../Utils/Utils":"Utils"}],IBaseData:[function(t,e,n){"use strict";cc._RF.push(e,"22057+z7bdKGI+ID4U/spoA","IBaseData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IBattleContext:[function(t,e,n){"use strict";cc._RF.push(e,"f5498sN/utKFJ0deWwxqdxq","IBattleContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IDGenerator:[function(t,e,n){"use strict";cc._RF.push(e,"a7d2bS2du5C86PRtr1aeBMD","IDGenerator"),Object.defineProperty(n,"__esModule",{value:!0});var o=".",i=function(){function t(t){this._id=0,this._prefix=null,this._id=0,this._prefix=t?t+o:""}return t.prototype.getNewId=function(){return this._prefix+ ++this._id},t}();n.default=i,cc._RF.pop()},{}],IEntityContext:[function(t,e,n){"use strict";cc._RF.push(e,"1c116wEEDxLQZUUOXZQ9CIt","IEntityContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISerializable:[function(t,e,n){"use strict";cc._RF.push(e,"364937qCqpAO6iJy+u6OqM1","ISerializable"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISystem:[function(t,e,n){"use strict";cc._RF.push(e,"9c233bin2tHr6HSs6zSCFrr","ISystem"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemType:[function(t,e,n){"use strict";cc._RF.push(e,"5bf2eyYms9KZ7ysHTr1uDEn","ItemType"),Object.defineProperty(n,"__esModule",{value:!0}),n.ItemType=void 0,function(t){t[t.Coin=1]="Coin",t[t.Energy=2]="Energy",t[t.HeroSoul=3]="HeroSoul"}(n.ItemType||(n.ItemType={})),cc._RF.pop()},{}],LanConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a1242FlPRZOcK06+6zZfsK/","LanConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanType=void 0,function(t){t.cn="cn",t.tw="tw",t.en="en"}(n.LanType||(n.LanType={})),cc._RF.pop()},{}],LevelConfig:[function(t,e,n){"use strict";cc._RF.push(e,"170e4OMJIZNFbhep3LIbOt5","LevelConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Loader:[function(t,e,n){"use strict";cc._RF.push(e,"dd1a6ygV1VBWpvlJhS4TLYY","Loader");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("../Utils/Path")),r=o(t("./AutoRelease")),a=function(){function t(){}return t.loadPrefab=function(t,e,n){this.loadRes(t,cc.Prefab,e,n)},t.loadPrefabAsync=function(t,e){return this.loadResAsync(t,cc.Prefab,e)},t.loadRes=function(e,n,o,i){var r=t._parseParams(e),a=r.bundleName,s=r.resPath;t.loadBundle(a,function(t){function r(t){i&&!cc.isValid(i,!0)||o&&o(t)}t.load(s,n,function(t,n){t?console.warn("[Loader] loadRes failed, res: "+e.toString(),t):r(n)})})},t.loadResAsync=function(t,e,n){var o=this;return new Promise(function(i){o.loadRes(t,e,i,n)})},t.loadDir=function(t,e,n,o,i){this.loadBundle(t,function(r){i&&!cc.isValid(i,!0)||r.loadDir(e,n,function(n,r){n?console.warn("[Loader] loadDir failed, bundleName: "+t+", dir: "+e,n):i&&!cc.isValid(i,!0)||o&&o(r)})})},t.loadDirAsync=function(t,e,n,o){var i=this;return new Promise(function(r){i.loadDir(t,e,n,r,o)})},t.loadBundle=function(e,n){var o;o=Array.isArray(e)?e:[e];var i=[];(function r(){if(o.length>0){var a=o.shift();t._loadBundle(a,function(t){i.push(t),r()})}else n&&(Array.isArray(e)?n(i):n(i[0]))})()},t._loadBundle=function(e,n){var o=t._loadQueue.find(function(t){return t.bundleName==e});o?n&&o.callbacks.push(n):t._loadQueue.push({bundleName:e,callbacks:n?[n]:[]}),t._handleQuery()},t._handleQuery=function(){if(!t._isLoading&&0!==t._loadQueue.length){t._isLoading=!0;var e=t._loadQueue.shift(),n=e.bundleName,o=e.callbacks,i=cc.assetManager.getBundle(n);i?(o.length&&o.forEach(function(t){return t(i)}),t._isLoading=!1,t._handleQuery()):cc.assetManager.loadBundle(n,null,function(e,i){e?console.warn("[Loader] loadBundle failed, bundle: "+n+", err: "+e):(o.length&&o.forEach(function(t){return t(i)}),t._isLoading=!1,t._handleQuery())})}},t._parseParams=function(t){var e,n;if(t instanceof Array)n=[],t.forEach(function(t){var o=i.default.parseBundleName(t);e=o.bundleName,n.push(o.path)});else{var o=i.default.parseBundleName(t);e=o.bundleName,n=o.path}return{bundleName:e,resPath:n}},t.instantiate=function(t){var e=cc.instantiate(t);return e.addComponent(r.default).init(t),e},t._loadQueue=[],t._isLoading=!1,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./AutoRelease":"AutoRelease"}],LoadingView:[function(t,e,n){"use strict";cc._RF.push(e,"58400skqeRIy52YWYBjQBME","LoadingView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=cc._decorator,l=c.ccclass,u=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}var n;return i(e,t),n=e,e.show=function(t){return new Promise(function(e){cc.resources.load("View/LoadingView",cc.Prefab,function(o,i){if(t.isFinished())e(null);else{var r=cc.instantiate(i);r.parent=cc.Canvas.instance.node;var a=r.getComponent(n);a.init(t),e(a)}})})},e.prototype.init=function(t){this._loadingQuene=t,this._loadingQuene.onProgress=this.setProgress.bind(this),s.default.switchParent(this.node,null),cc.game.addPersistRootNode(this.node)},e.prototype.setProgress=function(t){this.labelLoading&&(this.labelLoading.string="Loading: "+t.toFixed(0)+"%")},e.prototype.finish=function(){var t=this;if(cc.isValid(this.node)){var e=cc.Camera.findCamera(this.node);s.default.switchParent(this.node,e.node),this.scheduleOnce(function(){cc.game.removePersistRootNode(t.node),t.node.destroy()})}},r([u(cc.Label)],e.prototype,"labelLoading",void 0),n=r([l],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Utils/Utils":"Utils"}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"5ddc0ovHztLN7miIStcX6pG","Loading"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this._progress=0,this._tweenObj={progress:0},this._tweenProgress=0,this._minLoadingSec=t}return Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tweenProgress",{get:function(){return this._tweenProgress},enumerable:!1,configurable:!0}),t.prototype.start=function(){var t;this._startTs=Date.now(),this._progress=0,this._tweenProgress=0,this._tweenObj.progress=0,this._tween=null,this._minEndTs=this._startTs+1e3*(null!==(t=this._minLoadingSec)&&void 0!==t?t:0),this._updateHandle=setInterval(this.update.bind(this),16)},t.prototype.stop=function(){this._updateHandle&&(clearInterval(this._updateHandle),this._updateHandle=null)},t.prototype.isFinished=function(){return this._tweenProgress>=100},t.prototype.update=function(){this._tweenObj.progress>this._tweenProgress&&(this._tweenProgress=this._tweenObj.progress,this.onProgress&&this.onProgress(this._tweenProgress),this._tweenProgress>=100&&(this.onComplete&&this.onComplete(),this.stop()))},t.prototype.addProgress=function(t){this.setProgress(this._progress+t)},t.prototype.setProgress=function(t){if(!(t<=this._progress)){this._progress=cc.misc.clampf(t,0,100),this._tween&&(this._tween.stop(),this._tween=null);var e=.5;if(t>=100){var n=Date.now();n+1e3*e<this._minEndTs&&(e=(this._minEndTs-n)/1e3)}else e=1;this._tween=cc.tween(this._tweenObj).to(e,{progress:this._progress}).start()}},t}();n.default=o,cc._RF.pop()},{}],LocalData:[function(t,e,n){"use strict";cc._RF.push(e,"fdb45odkdVHWZUqAslH71aA","LocalData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LocalStorage:[function(t,e,n){"use strict";cc._RF.push(e,"33a9eLsEDNAHqJCMlmnaZjF","LocalStorage");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalStorage=void 0;var i=o(t("../../Utils/Platform")),r=window.wx||window.qq||window.tt,a=function(){function t(){}return t.getItem=function(t){return i.default.isMiniGame()?r.getStorageSync(t):cc.sys.localStorage.getItem(t)},t.getItemAsync=function(t,e){if(!e)return new Promise(function(e){if(i.default.isMiniGame())r.getStorage({key:t,complete:function(t){e(null==t?void 0:t.data)}});else{var n=cc.sys.localStorage.getItem(t);e(n)}});this.getItemAsync(t).then(e)},t.setItem=function(t,e){i.default.isMiniGame()?r.setStorageSync(t,e):cc.sys.localStorage.setItem(t,e)},t.setItemAsync=function(t,e,n){if(!n)return new Promise(function(n){i.default.isMiniGame()?r.setStorage({key:t,data:e,success:function(){n(!0)},fail:function(){n(!1)}}):(cc.sys.localStorage.setItem(t,e),n(!0))});this.setItemAsync(t,e).then(n)},t.removeItem=function(t){this.setItem(t,"")},t}();n.LocalStorage=a,cc._RF.pop()},{"../../Utils/Platform":"Platform"}],NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"48d9bHILP9LLaWfHDJ77uQQ","NodePool");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NodePool=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabMap=new Map,e.templateMap=new Map,e.poolMap=new Map,e}var n;return i(e,t),n=e,e.getInstance=function(){return n._instance},Object.defineProperty(e,"instance",{get:function(){if(null==this._instance){var t=new cc.Node("NodePool");this._instance=t.addComponent(n)}return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._instance=this},e.prototype.registerPrefab=function(t,e){e.addRef(),this.prefabMap.set(t,e)},e.prototype.register=function(t,e){this.templateMap.set(t,e)},e.prototype.onDestroy=function(){this.prefabMap.forEach(function(t){return t.decRef()}),this.prefabMap.clear(),this.templateMap.clear(),this.poolMap.forEach(function(t){return t.clear()}),this.poolMap.clear(),n._instance=null},e.recycle=function(t){n.getInstance().putNode(t)},e.genPool=function(t,e){var n=this.getInstance();return e&&n.register(t,cc.instantiate(e)),{get:function(){return n.getNode(t)},put:function(e){n.putNode(e,t)}}},e.prototype.tryCreatePool=function(t,e){var n=this.poolMap.get(t);return n||(n=new cc.NodePool,this.poolMap.set(t,n),this.registerPrefab(t,e)),n},e.prototype.getNode=function(t){var e=this.getPool(t),n=null==e?void 0:e.get(),o=this.prefabMap.get(t);if(o)n?(n.scaleX=o.data.scaleX,n.scaleY=o.data.scaleY,n.setContentSize(o.data.getContentSize())):(n=cc.instantiate(o)).__pool_name__=t;else{var i=this.templateMap.get(t);i&&(n?(n.scaleX=i.scaleX,n.scaleY=i.scaleY,n.setContentSize(i.getContentSize())):(n=cc.instantiate(i)).__pool_name__=t)}return n},e.prototype.putNode=function(t,e){if(e=e||t.__pool_name__){var n=this.getPool(e);n&&n.put(t)}else cc.warn("[NodePool] putNode, cannot find pool name on node: "+t)},e.prototype.getPool=function(t){return this.poolMap.get(t)},n=r([s],e)}(cc.Component));n.NodePool=c,cc._RF.pop()},{}],Path:[function(t,e,n){"use strict";cc._RF.push(e,"b72c1tsrSFLoreTYty+y1L2","Path");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./Platform")),r=function(){function t(){}return t.parseBundleName=function(e){for(var n=[t.START_BUNDLE,t.MAIN_BUNDLE,t.BATTLE_BUNDLE,t.AUDIO_BUNDLE,t.FONT_BUNDLE,!1,t.RESOURCE_BUNDLE],o=0;o<n.length;++o){var i=n[o],r=i+"/";if(e.startsWith(r))return{bundleName:i,path:e.slice(r.length)}}return{bundleName:t.MAIN_BUNDLE,path:e}},t.getBundlePath=function(t,e){var n=e+"/";return t.startsWith(n)||(t=n+t),t},t.getConfigPath=function(){return this.MAIN_BUNDLE_PREFIX+"Config/JsonCfg"},t.getLevelPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Level/"+t},t.getEntryBgPath=function(t){return"Res/Entry/entry_bg_"+t},t.getEntryRightBgPath=function(t){return"Res/Entry/entry_rightBg_"+t},t.getEntityPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Entity/"+t},t.getPlayerEntityPath=function(){return this.getEntityPath("Player/Player")},t.guardImgPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/GuardImgs/guardHeadImgs/img"+t},t.getItemPath=function(t){return"Res/Items/img_"+t},t.getGemPath=function(t,e){return"Res/Gem/"+t+"_"+e},t.getHurtNodePath=function(){return this.BATTLE_BUNDLE_PREFIX+"Prefabs/HurtNode"},t.getPrefabByName=function(t){return"Prefabs/"+t},t.getWeapon=function(t){return"Prefabs/Weapons/Weapon_"+t},t.getWeaponImg=function(t){return"Res/Weapon/weapon_"+t},t.getDivineBeast=function(t){return"Prefabs/DivineBeasts/DivineBeast_"+t},t.getItemOutlinePath=function(t){return"Res/Items/outline_"+t},t.getDivineBeastImg=function(t){return"Res/DivineBeast/db_"+t},t.getAdIconByPlatForm=function(){return i.default.isBytedance()?"GameTextures/UI/icon_dyAd":"GameTextures/UI/icon_watchAd"},t.loadingScenePath=function(){return this.START_BUNDLE_PREFIX+"View/LoadingScene"},t.loadingBg=function(){return this.START_BUNDLE_PREFIX+"Prefab/loadingBg"},t.effectPath=function(t){return this.AUDIO_BUNDLE_PREFIX+"Effects/"+t},t.soundPath=function(t){return this.AUDIO_BUNDLE_PREFIX+"Bgm/bgm_"+t},t.viewPath=function(t){return"View/"+t},t.resourcesPath=function(t){return this.RESOURCE_BUNDLE+"/"+t},t.MAIN_BUNDLE="MainBundle",t.BATTLE_BUNDLE="BattleBundle",t.AUDIO_BUNDLE="AudioBundle",t.FONT_BUNDLE="FontBundle",t.START_BUNDLE="StartBundle",t.DEBUG_BUNDLE="DebugBundle",t.RESOURCE_BUNDLE="resources",t.MAIN_BUNDLE_PREFIX=t.MAIN_BUNDLE+"/",t.BATTLE_BUNDLE_PREFIX=t.BATTLE_BUNDLE+"/",t.AUDIO_BUNDLE_PREFIX=t.AUDIO_BUNDLE+"/",t.START_BUNDLE_PREFIX=t.START_BUNDLE+"/",t.DEBUG_BUNDLE_PREFIX=t.DEBUG_BUNDLE+"/",t}();n.default=r,cc._RF.pop()},{"./Platform":"Platform"}],Platform:[function(t,e,n){"use strict";var o;cc._RF.push(e,"cc6dfLIrMpJ4rkiQoGgIJGl","Platform"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Default=0]="Default",t[t.Wx=1]="Wx",t[t.QQ=2]="QQ",t[t.TT_Douyin=3]="TT_Douyin",t[t.TT_Toutiao=4]="TT_Toutiao",t[t.Android=5]="Android",t[t.Android_Nog=6]="Android_Nog",t[t.Android_Ohayoo=7]="Android_Ohayoo",t[t.Android_Tap=8]="Android_Tap",t[t.iOS=9]="iOS"}(o||(o={}));var i=function(){function t(){}return t.isWx=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.wx&&null==window.qq||!1},t.isQQ=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.qq||!1},t.isWxLike=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||!1},t.isBytedance=function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isBytedanceDouyin=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"DOUYIN"===this._bytedanceAppName)},t.isBytedanceToutiao=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"TOUTIAO"===this._bytedanceAppName)},t.isMiniGame=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isAndroid=function(){return cc.sys.platform===cc.sys.ANDROID||!1},t.isOhayoo=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isOhayoo}return!1},t.isTap=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isTap}return!1},t.isNog=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return!(t&&(t.isOhayoo||t.isTap))}return!1},t.isIOS=function(){return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD||!1},t.isMobile=function(){return this.isAndroid()||this.isIOS()},t.isNative=function(){return cc.sys.isNative||!1},t.isTest=function(){return!0},t._mockInPlatform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},t._mockPlatform=o.Android,t}();n.default=i,cc._RF.pop()},{}],PlayerData:[function(t,e,n){"use strict";cc._RF.push(e,"42b0bPL3chCE4HYe8tcrPGx","PlayerData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"f5262/u3rBEZK0O6sM/pRtx","Player");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var a=r(t("../../Utils/Path")),s=t("./BaseEntity"),c={Hp:"Hp",Exp:"Exp",Upgrade:"Upgrade"},l=function(t){function e(e){var n=t.call(this,0,0)||this;return n._level=0,n._exp=0,n._upgradeExp=0,n._oriIndex=0,n._isPerfect=!0,n.data=e,n._hp=e.hp,n._upgradeExp=n.getUpgradeExp(n._level),n._isPerfect=!0,n}return i(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxHp",{get:function(){return this.data.hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLevel",{get:function(){return this.data.maxLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upgradeExp",{get:function(){return this._upgradeExp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPerfect",{get:function(){return this._isPerfect},enumerable:!1,configurable:!0}),e.prototype.onAvatarReady=function(){},e.prototype.getAssetPath=function(){return a.default.getPlayerEntityPath()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.isAlive=function(){return this._hp>0},e.prototype.addExp=function(t){this._exp+=t,this.emit(c.Exp,this._exp,this._upgradeExp)},e.prototype.canUpgrade=function(){return this.level<this.maxLevel&&this.getUpgradeExp(this.level)<=this._exp},e.prototype.upgrade=function(){this.canUpgrade()&&(this._exp-=this._upgradeExp,this._level+=1,this._upgradeExp=this.getUpgradeExp(this._level),this.emit(c.Exp,this._exp,this._upgradeExp))},e.prototype.isFullLevel=function(){return this.level>=this.maxLevel},e.prototype.getUpgradeExp=function(t){return t>=this.data.upgradeExp.length&&this.data.upgradeExp[this.data.upgradeExp.length-1],this.data.upgradeExp[t]},e.prototype.recoverPerfect=function(){this._isPerfect=!0},e.prototype.hurt=function(t){this._hp=cc.misc.clampf(this._hp-t,0,this.maxHp),this._isPerfect=!1;var e=Math.round(this.maxHp/this.hp);if(e>=1&&this._oriIndex!=e){this._oriIndex=e;var n="wall_"+e;this.anim.play(n)}this.emit(c.Hp,this._hp,this.maxHp),this._hp<=0&&this.die()},e.prototype.die=function(){},e.Events=c,e}(s.BaseEntity);n.Player=l,cc._RF.pop()},{"../../Utils/Path":"Path","./BaseEntity":"BaseEntity"}],Profiler:[function(t,e,n){"use strict";var o;cc._RF.push(e,"8dff6YEK2xMWo2Ij8b4VXRJ","Profiler"),Object.defineProperty(n,"__esModule",{value:!0}),n.profile=n.Profiler=void 0,cc.sys.platform===cc.sys.WECHAT_GAME?wx.getPerformance&&(o=wx.getPerformance()):cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.getPerformance&&(o=tt.getPerformance()),o||(o=window&&window.performance||Date);var i=function(){function t(){}return t.now=function(){return o.now()},t.lazyInit=function(){},t.start=function(){},t.end=function(){},t.dump=function(){},t.inited=!1,t}();n.Profiler=i,n.profile=function(t,e){return void 0===e&&(e=!1),function(){}},cc._RF.pop()},{}],Property:[function(t,e,n){"use strict";cc._RF.push(e,"d5173DN6pRFxKg/uliZTgZ7","Property");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReactBool=n.ReactNumber=n.ReactProperty=n.CacheNode=n.CacheVec2=n.CacheBool=n.CacheNumber=n.CacheProperty=void 0;var r=t("./Action"),a=function(){function t(t){this._gettter=t}return Object.defineProperty(t.prototype,"value",{get:function(){return void 0===this._value&&(this._value=this._gettter()),this._value},enumerable:!1,configurable:!0}),t}();n.CacheProperty=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);n.CacheNumber=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);n.CacheBool=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a);n.CacheVec2=l;var u=function(t){function e(e){return t.call(this,function(){return cc.find(e)})||this}return i(e,t),e}(a);n.CacheNode=u;var f=function(){function t(t){this.onValueChange=new r.Action1,this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this.onValueChange.call(t))},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){this.onValueChange.add(t,e)},t.prototype.addWithInitValue=function(t,e){this.onValueChange.add(t,e),t.call(e,this._value)},t}();n.ReactProperty=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(f);n.ReactNumber=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(f);n.ReactBool=h,cc._RF.pop()},{"./Action":"Action"}],PseudoRandom:[function(t,e,n){"use strict";cc._RF.push(e,"1f9b9e2bb1Mzpnl63wskuxM","PseudoRandom"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===e&&(e=2),this._total=0,this._success=0,this._buffer=2,e=Math.max(e,1),this._buffer=e,this.setRate(t)}return t.prototype.setRate=function(t){(t=cc.misc.clamp01(t))!=this._targetRate&&(this._targetRate=t,this._total=0,this._success=0,this.updateDynamicRate())},t.prototype.updateDynamicRate=function(){if(this._dynamicRates=[],0===this._targetRate||1===this._targetRate)this._dynamicRates.push(this._targetRate),this._rateLevel=0;else{for(var t=0;t<this._buffer;++t){var e=this._targetRate*t/this._buffer;this._dynamicRates.push(e)}for(this._dynamicRates.push(this._targetRate),this._rateLevel=this._buffer,t=0;t<this._buffer;++t)e=this._targetRate+(t+1)/this._buffer*(1-this._targetRate),this._dynamicRates.push(e)}cc.log("[PseudoRandom] rate: "+this._targetRate+", dynamic: "+this._dynamicRates.join(",")+", level: "+this._rateLevel)},t.prototype.rand=function(){if(0===this._total)return(e=Math.random()<this._targetRate)&&this._success++,this._total++,cc.log("[PseudoRandom] rand, result: "+e+", target: "+this._targetRate+", real: "+this._success/this._total+", count: "+this._success+"/"+this._total),e;var t=this._success/this._total;t<this._targetRate?this._rateLevel=Math.min(this._rateLevel+1,this._dynamicRates.length-1):t>this._targetRate&&(this._rateLevel=Math.max(this._rateLevel-1,0));var e,n=this._dynamicRates[this._rateLevel];return(e=Math.random()<n)&&this._success++,this._total++,cc.log("[PseudoRandom] rand, result: "+e+", target: "+this._targetRate+", real: "+this._success/this._total+", count: "+this._success+"/"+this._total),e},t}();n.default=o,cc._RF.pop()},{}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"0d24aEHkpBMPqD+bg6rDdp0","Queue");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(e){return null!=e?t.call(this,null,{capacity:e})||this:t.call(this)||this}return i(e,t),e.prototype.enqueue=function(t){return this.push(t)},e.prototype.dequeue=function(){return this.shift()},e.prototype.peek=function(){return this.peekFront()},e}(r(t("denque")).default);n.default=a,cc._RF.pop()},{denque:10}],RemoteImgLoader:[function(t,e,n){"use strict";cc._RF.push(e,"ca8550oO7JMGK42hvH+jIoq","RemoteImgLoader");var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./CryptoJsMini")),r=function(){function t(){}return t.loadImg=function(t,e){var n=jsb.fileUtils.getWritablePath()+"remoteImgCache/",o=i.default.MD5(t).toString(),r=n+o+".jpg";function a(){e&&e(null,null)}function s(){cc.loader.load(r,function(t,n){if(t)cc.error(t),a();else{var o=new cc.SpriteFrame(n);o&&e&&e(o,r)}})}if(console.log("filepath ->",r),jsb.fileUtils.isFileExist(r))return cc.log("Remote is find"+r),void s();var c=function(t){void 0!==t?(jsb.fileUtils.isDirectoryExist(n)?console.log("\u8def\u5f84exist"):jsb.fileUtils.createDirectory(n),jsb.fileUtils.writeDataToFile(new Uint8Array(t),r)?(cc.log("Remote write file succeed."),s()):(cc.log("Remote write file failed."),a())):(cc.log("Remote download file failed."),a())},l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&(200===l.status?c(l.response):c(null))}.bind(this),l.responseType="arraybuffer",l.open("GET",t,!0),l.send()},t}();n.default=r,cc._RF.pop()},{"./CryptoJsMini":"CryptoJsMini"}],RemoteStorage:[function(t,e,n){"use strict";cc._RF.push(e,"1ddf1L0HdRH2bIS/PJL+QFL","RemoteStorage"),Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteStorage=void 0;var o=function(){function t(){}return t.init=function(){throw new Error("Not implemented")},t.getItemAsync=function(t,e){if(!e)throw new Error("Not implemented");this.getItemAsync(t).then(e)},t.setItemAsync=function(t,e,n){if(!n)throw new Error("Not implemented");this.setItemAsync(t,e).then(n)},t}();n.RemoteStorage=o,cc._RF.pop()},{}],RetryPolicy:[function(t,e,n){"use strict";cc._RF.push(e,"3f10c2NPH5BCrvBwT/qQOVA","RetryPolicy"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n,o){this._initialTimeoutMs=t,this._maxNumRetries=e,this._backoffMultiplier=n,this._maxTimeoutMs=null!=o?o:1/0}return t.prototype.run=function(t){var e=this;this._running?console.error("[RetryPolicy] run: exists running task!"):(this._task=t,this._currentRetryTimes=0,this._currentTimeoutMs=this._initialTimeoutMs,this._running=!0,this._timeoutHandler=setTimeout(function(){e._timeoutHandler=null,e._task(e)},this._currentTimeoutMs))},t.prototype.continue=function(){var t=this;this._timeoutHandler?console.warn("[RetryPolicy] continue: exists running task!"):(this._currentRetryTimes++,this._currentRetryTimes>=this._maxNumRetries?this._running=!1:(this._currentTimeoutMs=Math.min(this._currentTimeoutMs*this._backoffMultiplier,this._maxTimeoutMs),this._timeoutHandler=setTimeout(function(){t._timeoutHandler=null,t._task(t)},this._currentTimeoutMs)))},t.prototype.finish=function(){this._running=!1,this._timeoutHandler&&(clearTimeout(this._timeoutHandler),this._timeoutHandler=null)},t}();n.default=o,cc._RF.pop()},{}],SDKBridge:[function(t,e){"use strict";cc._RF.push(e,"8d561j4QXRKE6n6702fl60n","SDKBridge");var n=function(){function t(){this.SDK_CLASS_NAME_ANDROID="com/firewing/sdk/SDKBridge",this.SDK_CLASS_NAME_IOS="SDKBridge",this._isAndroid=cc.sys.platform===cc.sys.ANDROID,this._isIOS=cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD,this._isValid=this._isAndroid||this._isIOS,this._callbackMap=new Map,this._nextCallbackID=1,this._channel=null,this._nogOpenId=null,this._nogUserInfo=null,this._tapAccessToken=null,this._tapUserInfo=null,this._ohayooUserInfo=null}var e=t.prototype;return e.getChannel=function(){return this._channel?this._channel:this._isAndroid?"android":this._isIOS?"ios":"unknown"},e.getSystemInfo=function(){var t=null,e=this.callNative("getSystemInfo","()Ljava/lang/String;");if(e)try{t=JSON.parse(e)}catch(n){}return t},e.login=function(t,e){var n=this;if(this._isValid){this._channel=t;var o=this._addCallback(function(t,o){0===t&&(n._loginResult=JSON.parse(o.data),"nog"===n._channel?(n._nogUserInfo=n._loginResult,n._nogOpenId=n._nogUserInfo.userGameId):"tap"===n._channel?n._tapAccessToken=n._loginResult:"ohayoo"===n._channel&&(n._ohayooUserInfo=n._loginResult)),e&&e(t,o)});this.callNative("login","(Ljava/lang/String;I)V",t,o)}else e&&e(1,null)},e.logout=function(t){var e=this._addCallback(t);this.callNative("logout","(I)V",e)},e.canBindPhone=function(){return this.canInvoke("bindPhone")},e.bindPhone=function(t){var e=this;this.invoke("bindPhone",null,function(n,o){0===n&&(console.log("[SDK] bindPhone",e._channel,JSON.stringify(o)),"nog"===e._channel?e._nogUserInfo=o:"ohayoo"===e._channel&&(e._ohayooUserInfo=o)),t&&t(n,o)})},e.isLoggedIn=function(){return null!=this._nogUserInfo},e.isPhoneBinded=function(){if("nog"==this._channel&&this._nogUserInfo){var t=this._nogUserInfo.phone;return t&&t.length>0}return!("ohayoo"!=this._channel||!this._ohayooUserInfo)&&(this._ohayooUserInfo.mobile||"").length>0},e.getNogOpenId=function(){return this._nogOpenId},e.getNogUserInfo=function(){return this._nogUserInfo},e.getTapAccessToken=function(){return this._tapAccessToken},e.setTapUserInfo=function(t){this._tapUserInfo=t},e.getTapUserInfo=function(){return this._tapUserInfo},e.getOhayooUserInfo=function(){return this._ohayooUserInfo},e.openTapMoment=function(t){var e=this._addCallback(t);this.callNative("openTapMoment","(I)V",e)},e.showBannerAd=function(t,e){var n=this._addCallback(function(t,n){0===t&&cc.log("showBannerAd",JSON.stringify(n)),e&&e(t,n)}),o=JSON.stringify(t);this.callNative("showBannerAd","(Ljava/lang/String;I)V",o,n)},e.hideBannerAd=function(){this.callNative("hideBannerAd","()V")},e.showVideoAd=function(t,e){var n=this._addCallback(function(t,n){0===t&&cc.log("showVideoAd",JSON.stringify(n)),e&&e(t,n)}),o=JSON.stringify(t);this.callNative("showVideoAd","(Ljava/lang/String;I)V",o,n)},e.showSplashAd=function(t){var e=this._addCallback(t);this.callNative("showSplashAd","(I)V",e)},e.wxShareWeb=function(t,e){this.invokeBySdk("wx","wxShareWeb",t,e)},e.shareText=function(t,e){this.invokeBySdk("fw","shareText",t,e)},e.downloadApk=function(t,e){var n=this._addCallback(e),o=JSON.stringify(t);this.callNative("downloadApk","(Ljava/lang/String;I)V",o,n)},e.setupBugly=function(t){var e=JSON.stringify(t);this.callNative("setupBugly","(Ljava/lang/String;)V",e)},e.setClipboardData=function(t,e){var n=this._addCallback(e);this.callNative("setClipboardData","(Ljava/lang/String;I)V",t,n)},e.getClipboardData=function(t){this.invokeBySdk("fw","getClipboard",null,t)},e.reportLog=function(){},e.canInvoke=function(t){return this.callNative("canInvoke","(Ljava/lang/String;)Z",t)},e.invoke=function(t,e,n){var o=this._addCallback(n),i=null!=e?JSON.stringify(e):"{}";this.callNative("invoke","(Ljava/lang/String;Ljava/lang/String;I)V",t,i,o)},e.canInvokeBySdk=function(t,e){return this.callNative("canInvokeBySdk","(Ljava/lang/String;Ljava/lang/String;)Z",t,e)},e.invokeBySdk=function(t,e,n,o){var i=this._addCallback(o),r=null!=n?JSON.stringify(n):"{}";this.callNative("invokeBySdk","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)V",t,e,r,i)},e.callNative=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r;if(this._isAndroid)return(r=jsb.reflection).callStaticMethod.apply(r,[this.SDK_CLASS_NAME_ANDROID,t,e].concat(o));if(this._isIOS){for(var a,s=0;s<o.length;++s)t+=":";return(a=jsb.reflection).callStaticMethod.apply(a,[this.SDK_CLASS_NAME_IOS,t].concat(o))}},e.onNativeToJsCallback=function(t,e){var n=this._removeCallback(t);n&&setTimeout(function(){var t=e.code,o=e.data;n(t,o)},0)},e._addCallback=function(t){var e=this._nextCallbackID++;return this._callbackMap.set(e,t),e},e._removeCallback=function(t){var e=this._callbackMap.get(t);return this._callbackMap.delete(t),e},e.clear=function(){this._callbackMap.clear()},t}();n._instance=null,n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},window.SDKBridge=n,cc._RF.pop()},{}],SceneType:[function(t,e,n){"use strict";cc._RF.push(e,"bc8d6PtiQFIaae0CdQeMCcB","SceneType"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneType=void 0,function(t){t[t.HomeScene=1]="HomeScene",t[t.Count=1]="Count"}(n.SceneType||(n.SceneType={})),cc._RF.pop()},{}],SettingData:[function(t,e,n){"use strict";cc._RF.push(e,"a5760sLoWVFQKvaDQD4o/z6","SettingData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],SettingView:[function(t,e,n){"use strict";cc._RF.push(e,"9d3faEFZ3BHxLPgsFykmu+x","SettingView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Module/ViewHandler")),c=a(t("../Utils/Utils")),l=cc._decorator,u=l.ccclass,f=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelFeedback=null,e.labelGamecircle=null,e.labelUserName=null,e.labelUserUid=null,e._callback=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=t.cb;this._callback=e,c.default.localize(this.labelTitle,"ui_setting"),c.default.localize(this.labelFeedback,"ui_feedback"),c.default.localize(this.labelGamecircle,"ui_gamecircle"),this.labelUserName.string="\u7528\u6237\u540d\u79f0",this.labelUserUid.string="uid-000000001"},e.prototype.onConfirm=function(){this.close(),this._callback()},r([f(cc.Label)],e.prototype,"labelTitle",void 0),r([f(cc.Label)],e.prototype,"labelFeedback",void 0),r([f(cc.Label)],e.prototype,"labelGamecircle",void 0),r([f(cc.Label)],e.prototype,"labelUserName",void 0),r([f(cc.Label)],e.prototype,"labelUserUid",void 0),r([u],e)}(s.default);n.default=p,cc._RF.pop()},{"../Module/ViewHandler":"ViewHandler","../Utils/Utils":"Utils"}],StageConfig:[function(t,e,n){"use strict";cc._RF.push(e,"9cbb82oGnxFiq6g41/Nc1YM","StageConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],StartSceneLoading:[function(t,e,n){"use strict";cc._RF.push(e,"1af1a/DqwFF7YKH25qito0f","StartSceneLoading");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=r(t("../Gameplay/Game")),s=r(t("../Utils/Path")),c=t("./ConfigManager"),l=r(t("./Database/Db")),u=r(t("./Loader")),f=r(t("./Loading")),p=window.performance||Date,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this);var n=this.timeit("[Loading] loading"),o=function(t){return e.addProgress.bind(e,t)},i=this.loadScene().then(this.addProgress.bind(this,10)).then(this.loadRes.bind(this)).then(this.addProgress.bind(this,10)),r=this.loadBundle(40).then(),a=this.loadConfig().then(o(10)).then(this.loadDatabase.bind(this)).then(o(10)).then(this.login.bind(this)).then(o(10)).then(this.loadGame.bind(this)).then(o(10));Promise.all([r,i,a]).then(n)},e.prototype.loadGame=function(){var t=this.timeit("[Loading] game");return a.default.instance.init().then(t)},e.prototype.loadRes=function(){var t=this;return new Promise(function(e){var n=t.timeit("[Loading] res");u.default.loadRes(s.default.viewPath("HomeWorld"),cc.Prefab,function(){n(),e()},null)})},e.prototype.login=function(){return new Promise(function(t){t()})},e.prototype.loadDatabase=function(){l.default.instance.init()},e.prototype.loadConfig=function(){var t=this.timeit("[Loading] config");return c.ConfigManager.instance.init().then(t)},e.prototype.loadScene=function(){var t=this;return this.loadBaseBundle().then(function(){return new Promise(function(e){var n=t.timeit("[Loading] loading scene");cc.director.preloadScene("GameScene",null,function(){n(),e()})})})},e.prototype.loadBaseBundle=function(){var t=this;return new Promise(function(e){var n=t.timeit("[Loading] loading font");u.default.loadBundle([s.default.MAIN_BUNDLE],function(){n(),e()})})},e.prototype.loadBundle=function(t){var e=this;return new Promise(function(n){var o=e.timeit("[Loading] loading bundle"),i=[s.default.MAIN_BUNDLE,s.default.BATTLE_BUNDLE],r=t/i.length,a=e;(function t(){0===i.length?(o(),n()):u.default.loadBundle(i.shift(),function(){a.addProgress(r),t()})})()})},e.prototype.timeit=function(t){var e=p.now();return console.log(t+" start"),function(){var n=p.now()-e;console.log(t+" finish: "+n+"ms")}},e}(f.default);n.default=h,cc._RF.pop()},{"../Gameplay/Game":"Game","../Utils/Path":"Path","./ConfigManager":"ConfigManager","./Database/Db":"Db","./Loader":"Loader","./Loading":"Loading"}],StartScene:[function(t,e,n){"use strict";cc._RF.push(e,"179adkLG4dM+r9siYAbK2+F","StartScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=c(t("../../Gameplay/GameDefine")),u=c(t("../../Module/StartSceneLoading")),f=t("../../Module/Statistics"),p=c(t("../../Utils/AppUpdater")),h=c(t("../../Utils/ErrorReporter")),d=c(t("../View/LoadingView")),_=cc._decorator,y=_.ccclass,g=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}return i(e,t),e.prototype.start=function(){cc.dynamicAtlasManager.enabled=!1,f.Statistic.instance.init(),f.Statistic.instance.addLog(f.LogEvent.GAME_START,null,!0),h.default.instance.init(),p.default.checkUpdate(),cc.sys.platform===cc.sys.ANDROID&&SDKBridge.getInstance().setupBugly({version:l.default.VERSION}),this._loadingQuene=new u.default(1),this._loadingQuene.start(),this._loadingQuene.onComplete=this.onComplete.bind(this),this.showLoadingView()},e.prototype.showLoadingView=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,d.default.show(this._loadingQuene)];case 1:return t=e.sent(),cc.isValid(this)?this._loadingView=t:t.finish(),[2]}})})},e.prototype.onComplete=function(){var t=this._loadingView;cc.director.loadScene("GameScene",function(){t&&t.finish()})},r([g(cc.Label)],e.prototype,"labelLoading",void 0),r([y],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Gameplay/GameDefine":"GameDefine","../../Module/StartSceneLoading":"StartSceneLoading","../../Module/Statistics":"Statistics","../../Utils/AppUpdater":"AppUpdater","../../Utils/ErrorReporter":"ErrorReporter","../View/LoadingView":"LoadingView"}],StateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"3abc3hYypJAcqXQLNN4ZRfo","StateMachine");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.StateMachine=n.BaseState=void 0;var r=function(){function t(){}return t.prototype.setContext=function(t){this.context=t},t.prototype.getContext=function(){return this.context},t.prototype.setStateMachine=function(t){this.stateMachine=t},t.prototype.changeState=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.stateMachine).changeState.apply(e,i([t],n))},t.prototype.changeStateAsync=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];setTimeout(function(){var o;(o=e.stateMachine).changeState.apply(o,i([t],n))},1)},t}();n.BaseState=r;var a=function(){function t(t){this._context=t,this._statesMap=new Map}return t.prototype.addState=function(t){this._statesMap.has(t.name)&&this._statesMap.get(t.name)!=t||(t.setContext(this._context),t.setStateMachine(this),this._statesMap.set(t.name,t))},t.prototype.addInitState=function(t){this.addState(t),this._initState=t},t.prototype.initState=function(){this.changeState(this._initState.name)},t.prototype.changeState=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(this._statesMap.has(t)&&this.getCurrentStateName()!==t)return this._prevState=this._currState,this._currState&&this._currState.onExit&&this._currState.onExit(),this._currState=this._statesMap.get(t),this._currState.onEnter&&(e=this._currState).onEnter.apply(e,i(n)),this._currState},t.prototype.revertToPreviousState=function(){this._prevState&&this.changeState(this._prevState.name)},t.prototype.getCurrentStateName=function(){var t;return null===(t=this._currState)||void 0===t?void 0:t.name},t.prototype.getState=function(t){return this._statesMap.get(t)},t.prototype.execute=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._currState&&this._currState.execute&&(t=this._currState).execute.apply(t,i(e))},t.prototype.update=function(t){this._currState&&this._currState.update&&this._currState.update(t)},t}();n.StateMachine=a,cc._RF.pop()},{}],Statistics:[function(t,e,n){"use strict";cc._RF.push(e,"406bdkjKbJNzqEh4AINipp3","Statistics");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Statistic=n.LogEvent=n.AD_RESULT=n.BannerAdType=n.VideoAdType=void 0;var a,s=r(t("../Gameplay/Game")),c=r(t("../Gameplay/GameDefine"));(function(t){t[t.RefreshGuard=1]="RefreshGuard"})(n.VideoAdType||(n.VideoAdType={})),n.BannerAdType||(n.BannerAdType={}),function(t){t[t.USE_PROPAGANDA=1]="USE_PROPAGANDA",t[t.SUCCESS=2]="SUCCESS",t[t.FAILED=3]="FAILED",t[t.CANCEL=4]="CANCEL"}(n.AD_RESULT||(n.AD_RESULT={})),function(t){t[t.GAME_START=1]="GAME_START",t[t.GAME_SHOW=2]="GAME_SHOW",t[t.GAME_HIDE=3]="GAME_HIDE",t[t.LOGIN=4]="LOGIN",t[t.PLAY_TIME=5]="PLAY_TIME",t[t.REGISTER=6]="REGISTER",t[t.APP_LAUNCH=7]="APP_LAUNCH",t[t.GUIDE_STEP=51]="GUIDE_STEP",t[t.WATCH_AD=102]="WATCH_AD",t[t.SHOW_BANNER_AD=103]="SHOW_BANNER_AD",t[t.SHOW_SPLASH_AD=104]="SHOW_SPLASH_AD",t[t.SHOW_INSERT_AD=105]="SHOW_INSERT_AD",t[t.LEAF_CHANGED=151]="LEAF_CHANGED",t[t.STAR_CHANGED=152]="STAR_CHANGED",t[t.PASSAD_CHANGED=153]="PASSAD_CHANGED",t[t.COMMON_PIECE_CHANGED=154]="COMMON_PIECE_CHANGED",t[t.MOON_STONE_CHANGED=155]="MOON_STONE_CHANGED",t[t.GEM_CHANGED=156]="GEM_CHANGED",t[t.GET_ORDER_MANUAL=201]="GET_ORDER_MANUAL",t[t.GET_ORDER_AUTO=202]="GET_ORDER_AUTO",t[t.ORDER_SUCCESS=203]="ORDER_SUCCESS",t[t.SEND_PROPAGANDA=301]="SEND_PROPAGANDA",t[t.DAILY_TASK_GET_REWARD=401]="DAILY_TASK_GET_REWARD",t[t.MAIN_TASK_GET_REWARD=402]="MAIN_TASK_GET_REWARD",t[t.ACHIEVEMENT_GET_REWARD=403]="ACHIEVEMENT_GET_REWARD",t[t.BUTTON_SOCIAL=501]="BUTTON_SOCIAL",t[t.BUTTON_LOGIN_REWARD=502]="BUTTON_LOGIN_REWARD",t[t.COMBINE_SUCCESS=601]="COMBINE_SUCCESS",t[t.COMBINE_FAILED=602]="COMBINE_FAILED",t[t.TIME_RESEARCH=603]="TIME_RESEARCH",t[t.RESEARCH_DRINK_SCORE=604]="RESEARCH_DRINK_SCORE",t[t.CLICK_MAT_PRODUCE=701]="CLICK_MAT_PRODUCE",t[t.CLICK_SPEEDUP_COOK=702]="CLICK_SPEEDUP_COOK",t[t.GET_LOGIN_REWARD=801]="GET_LOGIN_REWARD",t[t.SHARE_ANIMAL=901]="SHARE_ANIMAL",t[t.ADSTORE_WATCHADCHANCE_CHANGED=1001]="ADSTORE_WATCHADCHANCE_CHANGED",t[t.ADSTORE_FREEBOXCHANCE_CHANGED=1002]="ADSTORE_FREEBOXCHANCE_CHANGED",t[t.ADSTORE_GEMBOXCHANCE_CHANGED=1003]="ADSTORE_GEMBOXCHANCE_CHANGED",t[t.TREASUREMAPCHANCE_CHANGED=1004]="TREASUREMAPCHANCE_CHANGED",t[t.CAP_CHANGED=1005]="CAP_CHANGED"}(a=n.LogEvent||(n.LogEvent={}));var l=function(){function t(){this._logs=[],this._eventCacheCountMap=new Map,this._eventCache=new Map,this._eventCacheCountMap.set(a.LEAF_CHANGED,30),this._eventCacheCountMap.set(a.STAR_CHANGED,30),this._eventCacheCountMap.set(a.GET_ORDER_MANUAL,10),this._eventCacheCountMap.set(a.GET_ORDER_AUTO,10),this._eventCacheCountMap.set(a.ORDER_SUCCESS,10),this._eventCacheCountMap.set(a.SEND_PROPAGANDA,10),this._eventCacheCountMap.set(a.COMBINE_FAILED,10),this._eventCacheCountMap.set(a.COMBINE_SUCCESS,2),this._eventCacheCountMap.set(a.SHOW_BANNER_AD,10),this._leafIncomeCache={uid:null,version:c.default.VERSION,ts:0,eventID:a.LEAF_CHANGED,eventCount:0,extraInfo:{count:0}},this._leafOutgoingCache={uid:null,version:c.default.VERSION,ts:0,eventID:a.LEAF_CHANGED,eventCount:0,extraInfo:{count:0}}}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;cc.game.on(cc.game.EVENT_SHOW,function(){t.addLog(a.GAME_SHOW)},this),cc.game.on(cc.game.EVENT_HIDE,function(){t.addLog(a.GAME_HIDE),t.sendAllLogs()},this),this.delaySendLog()},t.prototype.addLog=function(t,e,n){if(this._eventCacheCountMap.has(t)){var o=this._eventCacheCountMap.get(t);if(t===a.LEAF_CHANGED){var i=e.count;i>0?(this._leafIncomeCache.extraInfo.count+=i,this._leafIncomeCache.eventCount+=1,this._leafIncomeCache.ts=s.default.instance.time()):(this._leafOutgoingCache.extraInfo.count+=i,this._leafOutgoingCache.eventCount+=1,this._leafOutgoingCache.ts=s.default.instance.time()),this._leafIncomeCache.eventCount+this._leafOutgoingCache.eventCount>=o&&(this._leafIncomeCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafIncomeCache)),this._leafIncomeCache.eventCount=0,this._leafIncomeCache.extraInfo={count:0}),this._leafOutgoingCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafOutgoingCache)),this._leafOutgoingCache.eventCount=0,this._leafOutgoingCache.extraInfo={count:0}))}else{if(this._eventCache.has(t)){var r=this._eventCache.get(t);r.eventCount+=1,r.ts=s.default.instance.time(),t===a.STAR_CHANGED&&(r.extraInfo.count+=e.count)}else this._eventCache.set(t,{uid:null,version:c.default.VERSION,eventCount:1,ts:s.default.instance.time(),eventID:t,extraInfo:e});this._eventCache.get(t).eventCount>=o&&(this._logs.push(this._eventCache.get(t)),this._eventCache.delete(t))}}else{var l={uid:null,version:c.default.VERSION,ts:s.default.instance.time(),eventID:t,extraInfo:e};this._logs.push(l)}(n||this._logs.length>=c.default.MAX_STAT_LOG_CACHE)&&this.sendAllLogs()},t.prototype.sendAllLogs=function(){var t=this;this._leafIncomeCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafIncomeCache)),this._leafIncomeCache.eventCount=0,this._leafIncomeCache.extraInfo={count:0}),this._leafOutgoingCache.eventCount>0&&(this._logs.push(Object.assign({},this._leafOutgoingCache)),this._leafOutgoingCache.eventCount=0,this._leafOutgoingCache.extraInfo={count:0}),this._eventCache.forEach(function(e){t._logs.push(e)}),this._eventCache.clear(),this.sendLog()},t.prototype.sendLog=function(){var t,e=this;if(this.delaySendLog(),0!==this._logs.length){for(var n,o=this._logs.splice(0),r=0;r<o.length;r++){var s=o[r];if(s.uid="",s.eventID===a.APP_LAUNCH){n=s,o.splice(r,1);break}}n&&this._send([n],function(t){console.log("[Stats] send launch log: "+t),t||e._logs.push(n)}),(t=this._logs).push.apply(t,i(o))}},t.prototype.delaySendLog=function(){var t=this;this._handle&&(clearTimeout(this._handle),this._handle=null),this._handle=setTimeout(function(){t._handle=null,t.sendLog()},1e3*c.default.STAT_SEND_PERIOD)},t.prototype._send=function(){},t._instance=null,t}();n.Statistic=l,cc._RF.pop()},{"../Gameplay/Game":"Game","../Gameplay/GameDefine":"GameDefine"}],TableViewInterface:[function(t,e,n){"use strict";cc._RF.push(e,"3cdcanb2BZJBooPCRpismVd","TableViewInterface"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],TableViewItem:[function(t,e,n){"use strict";cc._RF.push(e,"5da8a8HJ19Gk7s+/EXA45hV","TableViewItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,a.menu),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t,e){this._tableView=e},e.prototype.onUnuse=function(){},e.prototype.computeSize=function(){return this.node.getContentSize()},e.prototype.onCull=function(){},e.prototype.onHighlight=function(){},r([s,c("TableView/TableViewItem")],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],TableViewLine:[function(t,e,n){"use strict";cc._RF.push(e,"7db7eu5Wk1Hwak9JA+8OUCp","TableViewLine");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("./TableViewItem")),c=cc._decorator,l=c.ccclass,u=c.property,f=c.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.countPerRow=1,e.titleNode=null,e.labelTitle=null,e.btnFolded=null,e._titleTopDist=0,e._contentTopPadding=0,e._spaceX=0,e._spaceY=0,e._mainData=null,e._childrenData=[],e._children=[],e._childrenRequests=[],e._rows=0,e._showRows=0,e._btnFoldedImgNode=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this.content.getBoundingBox();this.content.setAnchorPoint(cc.v2(.5,1)),this.content.setPosition(t.center.x,t.yMax);var e=this.node.height*(1-this.node.anchorY);this._contentTopPadding=e-t.yMax,this.titleNode&&(this._titleTopDist=e-this.titleNode.y)},e.prototype.onDestroy=function(){this.clear()},e.prototype.setSpaceX=function(t){this._spaceX=t},e.prototype.setSpaceY=function(t){this._spaceY=t},e.prototype.setItemPool=function(t){this._itemPool=t},e.prototype.setRequests=function(t,e){this._requestItem=t,this._cancelRequest=e},e.prototype.setItemTempalte=function(t){this._itemTemplate=t;var e=t.node;this._itemSize=e.getContentSize(),this._itemApOffset=cc.v2(e.width*e.anchorX,e.height*(1-e.anchorY))},e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this._mainData=e,e.title&&(this.labelTitle.string=e.title),this._childrenData=e.data,this._showRows=this._rows=Math.ceil(this._childrenData.length/this.countPerRow);var o=null!=e.isFolded||null!=e.rowsWhenFolded;o&&(e.isFolded=!!e.isFolded,e.rowsWhenFolded=e.rowsWhenFolded>0?e.rowsWhenFolded:1,this._showRows=e.isFolded?Math.min(this._rows,e.rowsWhenFolded):this._rows),this.btnFolded&&(this.btnFolded.node.active=o,this._btnFoldedImgNode||(this._btnFoldedImgNode=this.btnFolded.node.getComponentInChildren(cc.Sprite).node),this.btnFolded.node.targetOff(this),o&&this.btnFolded.node.on("click",this.toggleFold,this),this._btnFoldedImgNode.angle=this._mainData.isFolded?0:-90),this.clear(),this._children.length=this._childrenData.length,this._childrenRequests.length=this._childrenData.length,this.computeLayout(),this.resetSize(),this.computeRowRect(),e.lineData&&this.initWithLineData(e.lineData)},e.prototype.initWithLineData=function(){},e.prototype.fold=function(){this._mainData.isFolded||this.toggleFold()},e.prototype.unfold=function(){this._mainData.isFolded&&this.toggleFold()},e.prototype.toggleFold=function(){this._mainData.isFolded=!this._mainData.isFolded,this._showRows=this._mainData.isFolded?Math.min(this._rows,this._mainData.rowsWhenFolded):this._rows,this._btnFoldedImgNode&&(this._btnFoldedImgNode.angle=this._mainData.isFolded?0:-90),this.resetSize(),this._tableView.reLayout(),this.computeRowRect()},e.prototype.onUnuse=function(){this.clear()},e.prototype.computeSize=function(t){var e=this.node.width,n=Math.ceil(t.data.length/this.countPerRow);(null!=t.isFolded||null!=t.rowsWhenFolded)&&t.isFolded&&(n=Math.min(n,t.rowsWhenFolded));var o=n*this._itemSize.height+(n-1)*this._spaceY+this._contentTopPadding;return cc.size(e,o)},e.prototype.computeLayout=function(){this.computeFirstLinePos();for(var t=this._childrenData.length,e=this._childrenPos.length;e<t;++e){var n=Math.floor(e/this.countPerRow),o=e%this.countPerRow,i=cc.v2(0,-n*(this._spaceY+this._itemSize.height));i.addSelf(this._firstRowPos[o]),this._childrenPos.push(i)}},e.prototype.computeFirstLinePos=function(){if(!this._firstRowPos){this._firstRowPos=[],this._childrenPos=[];for(var t=this._itemSize.width,e=this.countPerRow*t+(this.countPerRow-1)*this._spaceX,n=(this.content.width-e)/2,o=this.content.width*this.content.anchorX,i=0;i<this.countPerRow;++i){var r=cc.v2(n+i*(t+this._spaceX)+this._itemApOffset.x-o,-this._itemApOffset.y);this._firstRowPos.push(r),this._childrenPos.push(r)}}},e.prototype.computeChildPos=function(t){this.computeFirstLinePos();var e=Math.floor(t/this.countPerRow),n=t%this.countPerRow,o=cc.v2(0,-e*(this._spaceY+this._itemSize.height));return o.addSelf(this._firstRowPos[n]),o},e.prototype.computeRowRect=function(){var t=new cc.Mat4;this.content.getLocalMatrix(t);var e=new cc.Mat4;this.node.getLocalMatrix(e),e.mul(t,e);var n=this.content.width,o=this._itemSize.height,i=-n/2;this._rowRectInParent=[];for(var r=0;r<this._rows;++r){var a=-this._itemSize.height*(r+1)-r*this._spaceY,s=cc.rect(i,a,n,o);s.transformMat4(s,e),this._rowRectInParent.push(s)}},e.prototype.resetSize=function(){var t=this._showRows*this._itemSize.height+Math.max(0,this._showRows-1)*this._spaceY;this.node.height=t+this._contentTopPadding,this.content.height=t;var e=this.node.height*(1-this.node.anchorY);this.content.y=e-this._contentTopPadding,this.titleNode&&(this.titleNode.y=e-this._titleTopDist)},e.prototype.onCull=function(t){for(var e=this,n=this._childrenData.length,o=0;o<this._rows;++o)for(var i=this._rowRectInParent[o],r=!(o>=this._showRows)&&i.intersects(t),a=o*this.countPerRow,s=function(t){var o=t+a;if(o>=n)return"break";var i,s=c._children[o];r?s?s.node.active=!0:(i=c._childrenRequests[o])||(c._childrenRequests[o]=c._requestItem(function(t){e._childrenRequests[o]=null,t.node.parent=e.content,t.node.setPosition(e._childrenPos[o]),t.init(e._childrenData[o],e._tableView),e._children[o]=t})):s?(c.unuseChild(s),c._children[o]=null):(i=c._childrenRequests[o])&&c._cancelRequest(i)},c=this,l=0;l<this.countPerRow&&"break"!==s(l);++l);},e.prototype.clear=function(){for(var t=this._children.length-1;t>=0;--t){var e=this._children[t];e&&this.unuseChild(e)}for(this._children.splice(0),t=this._childrenRequests.length-1;t>=0;--t){var n=this._childrenRequests[t];n&&this._cancelRequest(n)}this._childrenRequests.splice(0)},e.prototype.unuseChild=function(t){t&&(t.onUnuse(),this._itemPool.put(t.node))},e.prototype.getChildren=function(){return this._children},r([u(cc.Node)],e.prototype,"content",void 0),r([u],e.prototype,"countPerRow",void 0),r([u(cc.Node)],e.prototype,"titleNode",void 0),r([u(cc.Label)],e.prototype,"labelTitle",void 0),r([u(cc.Button)],e.prototype,"btnFolded",void 0),r([l,f("TableView/TableViewLine")],e)}(s.default);n.default=p,cc._RF.pop()},{"./TableViewItem":"TableViewItem"}],TableView:[function(t,e,n){"use strict";cc._RF.push(e,"6b37dQfVExCWquL2llt11iM","TableView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../../Debug/Profiler"),u=c(t("../../../Utils/Utils")),f=c(t("./TableViewItem")),p=c(t("./TableViewLine")),h=cc._decorator,d=h.ccclass,_=h.property,y=h.menu,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.linePrefab=null,e.isVertical=!0,e.paddingLeft=0,e.paddingRight=0,e.paddingTop=0,e.paddingBottom=0,e.spaceX=0,e.spaceY=0,e._isInited=!1,e._isItemPoolExternal=!1,e._isLinePoolExternal=!1,e._isLineData=!1,e._children=[],e._childrenPos=[],e._childrenRect=[],e._childrenData=[],e._childrenRequests=[],e._requests=[],e._requestMaxHandle=0,e}return i(e,t),Object.defineProperty(e.prototype,"scroll",{get:function(){return this._scroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCount",{get:function(){return this._childrenData?this._childrenData.length:0},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._scroll=this.getComponent(cc.ScrollView),this._content=this._scroll.content,this._mask=this.getComponentInChildren(cc.Mask).node,this._scroll.vertical=this.isVertical,this._scroll.horizontal=!this.isVertical,this._itemPool=new cc.NodePool,this._linePool=new cc.NodePool,this._isItemPoolExternal=!0,this._isLinePoolExternal=!0,this._itemTemplate=cc.instantiate(this.itemPrefab).getComponent(f.default),this._itemTemplate.node.parent=this.node,this._itemTemplate.node.active=!1,this.linePrefab&&(this._lineTemplate=cc.instantiate(this.linePrefab).getComponent(p.default),this._lineTemplate.node.parent=this.node,this._lineTemplate.node.active=!1,this._initLine(this._lineTemplate)),this._scroll.vertical?this._content.setAnchorPoint(cc.v2(.5,1)):this._content.setAnchorPoint(cc.v2(0,.5)),this._content.on(cc.Node.EventType.POSITION_CHANGED,this.cull,this),this._content.getComponent(cc.Layout)&&(cc.error("[TableView] content should not has 'cc.Layout' component!! node path: "+u.default.getNodePath(this.node)),this._content.removeComponent(cc.Layout))},e.prototype.onDestroy=function(){!this._isItemPoolExternal&&this._itemPool.clear&&this._itemPool.clear(),!this._isLinePoolExternal&&this._linePool.clear&&this._linePool.clear()},e.prototype.cull=function(){var t=this,e=this._mask.getBoundingBox(),n=new cc.Mat4;this._mask.parent.getWorldMatrix(n),e.transformMat4(e,n);var o=new cc.Mat4;this._content.getWorldMatrix(o),o.invert(o),e.transformMat4(e,o),this._lastViewRect=e;for(var i=function(n){var o,i=r._childrenRect[n].intersects(e),a=r._children[n];i?a?(a.node.active=!0,a.onCull(e)):(o=r._childrenRequests[n])||(r._childrenRequests[n]=r._requestChild(function(e){t._childrenRequests[n]=null,e.node.parent=t._content,e.node.setPosition(t._childrenPos[n]),e.init(t._childrenData[n],t),e.onCull(t._lastViewRect),t._children[n]=e})):a?(r._unuseChild(a),r._children[n]=null):(o=r._childrenRequests[n])&&(r._cancelRequest(o),r._childrenRequests[n]=null)},r=this,a=0;a<this._children.length;a++)i(a)},e.prototype.setItemPool=function(t){this._itemPool=t,this._isItemPoolExternal=!0},e.prototype.setLinePool=function(t){this._linePool=t,this._isLinePoolExternal=!0},e.prototype.setItemsData=function(t){this._isLineData=!1,this._childrenData=t,this.clear(),this._children.length=t.length,this._childrenRequests.length=t.length,this.computeLayout(),this.cull(),this._setInited()},e.prototype.setLinesData=function(t){this._isLineData=!0,this._childrenData=t,this.clear(),this._children.length=t.length,this._childrenRequests.length=t.length,this.computeLayout(),this.cull(),this._setInited()},e.prototype.reLayout=function(){this.computeLayout();for(var t=0;t<this._children.length;t++){var e=this._children[t];e&&e.node.setPosition(this._childrenPos[t])}this.cull()},e.prototype.computeLayout=function(){var t,e,n=this._scroll.vertical,o=n?this.paddingTop:this.paddingLeft,i=this._isLineData?this._lineTemplate:this._itemTemplate,r=i.node.getAnchorPoint();this._childrenPos.splice(0),this._childrenRect.splice(0);try{for(var s=a(this._childrenData),c=s.next();!c.done;c=s.next()){var l=c.value,u=i.computeSize(l),f=void 0;n?(f=cc.v2(0,-o-u.height*(1-r.y)),o+=u.height+this.spaceY):(f=cc.v2(o+u.width*r.x,0),o+=u.width+this.spaceX);var p=cc.rect(f.x-u.width*r.x,f.y-u.height*r.y,u.width,u.height);this._childrenPos.push(f),this._childrenRect.push(p)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}o+=n?this.paddingBottom:this.paddingRight,n?this._content.height=o:this._content.width=o},e.prototype.clear=function(){for(var t=this._isLineData?this._linePool:this._itemPool,e=this._children.length-1;e>=0;--e){var n=this._children[e];n&&(n.onUnuse(),t.put(n.node))}for(this._children.splice(0),e=this._childrenRequests.length-1;e>=0;--e){var o=this._childrenRequests[e];o&&this._cancelRequest(o)}this._childrenRequests.splice(0)},e.prototype.setHighlight=function(t){var e=this._findNodeIndex(t),n=s(e,2),o=n[0],i=n[1],r=this._children[o];if(r)for(var a=null!=i?r:null,c=0;c<a.getChildren().length;c++)a.getChildren()[c].onHighlight(c==i)},e.prototype.showNode=function(t,e,n){var o=this;e<0&&(e=0),this._requireInited(function(){var i=o._findNodeIndex(t);if(null!=i){var r=s(i,2),a=r[0],c=r[1],l=cc.v2(o._childrenPos[a]);if(null!=c&&l.addSelf(o._lineTemplate.computeChildPos(c)),o.isVertical){var u=1- -l.y/o._content.height;o._scroll.scrollToPercentVertical(u,e)}else u=l.x/o._content.width,o._scroll.scrollToPercentHorizontal(u,e);o.scheduleOnce(function(){var t=o._children[a];if(t){var e=null!=c?t:null,i=e?e.getChildren()[c]:t;if(i)n&&n(i.node);else var r=setInterval(function(){var t=e?e.getChildren()[c]:o._children[a];t&&(clearInterval(r),n&&n(t.node))})}},e)}else n&&n(null)})},e.prototype._requireInited=function(t){this._isInited?t&&t():this._onInit?this._onInit.push(t):this._onInit=[t]},e.prototype._setInited=function(){this._isInited||(this._isInited=!0,this._onInit&&(this._onInit.forEach(function(t){return t()}),this._onInit=null))},e.prototype._findNodeIndex=function(t){var e="function"==typeof t;if(this._isLineData){for(var n=0;n<this._childrenData.length;n++)for(var o=this._childrenData[n].data,i=0;i<o.length;++i)if(e&&t(o[i])||!e&&o[i]===t)return[n,i]}else for(n=0;n<this._childrenData.length;n++)if(e&&t(this._childrenData[n])||!e&&this._childrenData[n]===t)return[n,null]},e.prototype._unuseChild=function(t){var e=this._isLineData?this._linePool:this._itemPool;t.onUnuse(),e.put(t.node)},e.prototype._handleRequests=function(){var t,e;if(this._requests.length>0){var n=Date.now();do{var o=this._requests.shift();if(o.isItem){var i=(null!==(t=this._itemPool.get())&&void 0!==t?t:cc.instantiate(this.itemPrefab)).getComponent(f.default);o.callback(i)}else i=(null!==(e=this._linePool.get())&&void 0!==e?e:cc.instantiate(this.linePrefab)).getComponent(p.default),this._initLine(i),o.callback(i)}while(this._requests.length>0&&Date.now()-n<2)}0===this._requests.length&&(this.unschedule(this._requestFunc),this._requestFunc=null)},e.prototype._cancelRequest=function(t){for(var e=0;e<this._requests.length;e++)if(this._requests[e].handle===t){this._requests.splice(e,1);break}},e.prototype._requestChild=function(t){return this._isLineData?this._requestLine(t):this._requestItem(t)},e.prototype._requestItem=function(t){var e=++this._requestMaxHandle;return this._requests.push({isItem:!0,handle:e,callback:t}),this._requestFunc||(this._requestFunc=this._handleRequests.bind(this),this.schedule(this._requestFunc,0)),e},e.prototype._requestLine=function(t){var e=++this._requestMaxHandle;return this._requests.push({isItem:!1,handle:e,callback:t}),this._requestFunc||(this._requestFunc=this._handleRequests.bind(this),this.schedule(this._requestFunc,0)),e},e.prototype._initLine=function(t){t.setSpaceX(this.spaceX),t.setSpaceY(this.spaceY),t.setItemTempalte(this._itemTemplate),t.setItemPool(this._itemPool),t.setRequests(this._requestItem.bind(this),this._cancelRequest.bind(this))},r([_(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([_(cc.Prefab)],e.prototype,"linePrefab",void 0),r([_],e.prototype,"isVertical",void 0),r([_({displayName:"[H] Padding Left"})],e.prototype,"paddingLeft",void 0),r([_({displayName:"[H] Padding Right"})],e.prototype,"paddingRight",void 0),r([_({displayName:"[V] Padding Top"})],e.prototype,"paddingTop",void 0),r([_({displayName:"[V] Padding Bottom"})],e.prototype,"paddingBottom",void 0),r([_({displayName:"Space X"})],e.prototype,"spaceX",void 0),r([_({displayName:"Space Y"})],e.prototype,"spaceY",void 0),r([l.profile("cull")],e.prototype,"cull",null),r([l.profile("request")],e.prototype,"_handleRequests",null),r([d,y("TableView/TableView")],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Debug/Profiler":"Profiler","../../../Utils/Utils":"Utils","./TableViewItem":"TableViewItem","./TableViewLine":"TableViewLine"}],Terrain:[function(t,e,n){"use strict";cc._RF.push(e,"f4965fWvvRKrZ2gayCNF2Nn","Terrain");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Utils/Utils")),c=cc._decorator,l=c.ccclass,u=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerPos=null,e.guardSpawnPos=null,e.enemySpawnPos=null,e.guardFrontierPos=null,e}return i(e,t),e.prototype.init=function(){s.default.updateAlignmentRecursively(this.node),this.playerPosition=this.playerPos.getPosition(),this.guardSpawnPosition=this.guardSpawnPos.getPosition(),this.guardFrontierY=this.guardFrontierPos.getPosition().y},e.prototype.getRandEnemyPos=function(){for(var t=[],e=0;e<this.enemySpawnPos.children.length;e++){var n=this.enemySpawnPos.children[e],o=n.getPosition(),i=n.getBoundingBox();t.push({position:o,rect:i})}var r=s.default.shuffle(t)[0],a=r.position,c=r.rect.yMin,l=r.rect.yMax;r.rect.width>r.rect.height&&(c=r.rect.xMin,l=r.rect.xMax);var u=s.default.randomRange(c,l);return a.add(cc.v2(u,0))},r([u(cc.Node)],e.prototype,"playerPos",void 0),r([u(cc.Node)],e.prototype,"guardSpawnPos",void 0),r([u(cc.Node)],e.prototype,"enemySpawnPos",void 0),r([u(cc.Node)],e.prototype,"guardFrontierPos",void 0),r([l],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Utils/Utils":"Utils"}],ToastView:[function(t,e,n){"use strict";cc._RF.push(e,"5f015hxwaxEyZMz9S3I/Nby","ToastView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../Module/ConfigManager"),u=c(t("../Module/ViewHandler")),f=c(t("../Utils/Utils")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelContent=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=this,n=l.ConfigManager.instance.getLanConfig(t.fmt);this.labelContent.string=f.default.formatStr.apply(f.default,s([n],t.args)),cc.tween(this.node).to(2,{y:100}).delay(1).call(function(){e.close()}).start()},r([d(cc.Label)],e.prototype,"labelContent",void 0),r([h],e)}(u.default);n.default=_,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler","../Utils/Utils":"Utils"}],TweenFX:[function(t,e,n){"use strict";cc._RF.push(e,"2701a/HOcBG6IJoTsbooWgc","TweenFX");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a,s,c=r(t("./Utils"));(function(t){t[t.Line=0]="Line",t[t.Arc=1]="Arc",t[t.Boom=2]="Boom"})(a||(a={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Bottom=3]="Bottom",t[t.Random=4]="Random"}(s||(s={}));var l={generateGap:.1,arcSide:s.Random,boomRange:100},u=function(){function t(){}return t.getTopContainer=function(){return this._topContainer||(this._topContainer=cc.find("Canvas/MainCamera/TopUI/FX")),this._topContainer},t.getGlobalContainer=function(){return this._globalContainer||(this._globalContainer=cc.find("Canvas/MainCamera/FX")),this._globalContainer},t.collect=function(t){var e,n,r,u,f,p,h,d=this;if(t){var _=t.template,y=t.destroyHandler,g=t.count,v=t.fromWorldPos,m=t.toWorldPos,b=t.moveType,w=t.duration,S=t.speed,C=t.scale,M=t.container,P=t.onFinish;if(Array.isArray(_)||(_=[_]),Array.isArray(g)||(g=[g]),_.length===g.length){if(null==w){if(null==S)return void console.warn("[TweenFX] collect, lack of 'speed' or 'duration' in config!");w=cc.Vec2.distance(v,m)/S}M||(cc.isValid(this._container,!0)||(this._container=this.getTopContainer()),M=this._container);var A=M.convertToNodeSpaceAR(v),R=M.convertToNodeSpaceAR(m);if(b===a.Line){for(var E=null!==(r=t.generateGap)&&void 0!==r?r:l.generateGap,O=0;O<_.length;++O)for(var I=_[O],N=g[O],T=function(t){var e=B.instantiate(I);e.parent=M,e.setPosition(A),cc.tween(e).hide().delay(t*E).show().to(w,{position:cc.v3(R),scale:null!=C?C:e.scale},{easing:"quadIn"}).call(function(){return d.destroy(e,y)}).start()},B=this,D=0;D<N;++D)T(D);if(P){var x=Math.max.apply(Math,i(g))*E+w;setTimeout(P,1e3*x)}}else if(b===a.Arc){E=null!==(u=t.generateGap)&&void 0!==u?u:l.generateGap;var L=null!==(f=t.arcSide)&&void 0!==f?f:l.arcSide,U=cc.Vec2.lerp(cc.v2(),A,R,.3),k=cc.Vec2.lerp(cc.v2(),A,R,.7),j=cc.Vec2.distance(A,R)/5,F=R.sub(A).rotate(Math.PI/2).normalizeSelf().mulSelf(j),V=F.mul(-1),G=R.x<A.x,H=U.add(F),W=k.add(F),z=U.add(V),q=k.add(V),K=!0;L===s.Left?K=!0:L===s.Right?K=!1:L===s.Up?K=!G:L===s.Bottom?K=G:L===s.Random&&(K=Math.random()<.5);var Y=K?H:z,X=K?W:q;for(O=0;O<_.length;++O){I=_[O],N=g[O];var J=function(t){var e=Q.instantiate(I);e.parent=M,e.setPosition(A),e.runAction(cc.sequence(cc.hide(),cc.delayTime(t*E),cc.show(),cc.spawn(cc.bezierTo(w,[Y,X,R]).easing(cc.easeQuadraticActionIn()),cc.scaleTo(w,null!=C?C:e.scale)),cc.callFunc(function(){return d.destroy(e,y)})))},Q=this;for(D=0;D<N;++D)J(D)}P&&(x=Math.max.apply(Math,i(g))*E+w,setTimeout(P,1e3*x))}else if(b===a.Boom){var Z=[];for(O=0;O<_.length;++O)for(I=_[O],N=g[O],D=0;D<N;++D){var $=this.instantiate(I);$.parent=M,$.setPosition(A),Z.push($)}E=null!==(p=t.generateGap)&&void 0!==p?p:l.generateGap,c.default.shuffle(Z);var tt=c.default.randomRange(0,360),et=360/Z.length,nt=null!==(h=t.boomRange)&&void 0!==h?h:l.boomRange,ot=void 0,it=void 0;nt instanceof Array?(e=o(nt,2),ot=e[0],it=e[1]):(n=o([0,nt],2),ot=n[0],it=n[1]);var rt=function(t){var e=Z[t],n=(tt+et*t)%360,o=c.default.randomRange(ot,it),i=A.add(cc.Vec2.RIGHT.rotate(n/2/Math.PI).mul(o));e.runAction(cc.sequence(cc.hide(),cc.delayTime(E*t),cc.show(),cc.spawn(cc.bezierTo(w,[i,i,R]),cc.scaleTo(w,null!=C?C:e.scale)),cc.callFunc(function(){return d.destroy(e,y)})))};for(O=0;O<Z.length;++O)rt(O);P&&(x=w,setTimeout(P,1e3*x))}}else console.warn("[TweenFx] collect, template.length ("+_.length+") != count.length ("+g.length+")!")}},t.instantiate=function(t){return t instanceof Function?t():cc.instantiate(t)},t.destroy=function(t,e){e?e(t):t.destroy()},t.MoveType=a,t.ArcSide=s,t}();n.default=u,cc._RF.pop()},{"./Utils":"Utils"}],UniqueView:[function(t,e,n){"use strict";cc._RF.push(e,"9e96fGfK2ZAbI1npKHhaMuY","UniqueView"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this._views=t}return t.prototype.show=function(t){for(var e=0;e<this._views.length;e++){var n=this._views[e];n.active=n===t}},t}();n.default=o,cc._RF.pop()},{}],UpgradeCard:[function(t,e,n){"use strict";cc._RF.push(e,"95657FjVj5BJ6MAMHVoUTVp","UpgradeCard");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Module/ConfigManager"),c=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),u=t("../Enum/ItemType"),f=t("../Gameplay/System/BagSystem"),p=a(t("../Module/ViewModule")),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelName=null,e.labelHeroCost=null,e.showCaseNode=null,e.heroCostNode=null,e.guardImg=null,e._destroyUids=[],e._guardId=null,e._config=null,e._entityManager=null,e.cb=null,e}return i(e,t),e.prototype.init=function(t,e,n){this._entityManager=t,this.cb=n,this._destroyUids=e.destroyUids||[],this._guardId=e.guardId,this._config=s.ConfigManager.instance.getGuardConfig(this._guardId),this.showCaseNode.active=this._destroyUids.length>0;for(var o=0;o<this.showCaseNode.children.length;o++)this.showCaseNode.children[o].active=!1;for(o=0;o<this._destroyUids.length;o++){this.showCaseNode.children[o].active=!0;var i=this._destroyUids[o],r=this.showCaseNode.children[o].getChildByName("imgSlaveAvatar").getComponent(cc.Sprite);this.showGuardImg(i,r)}this.showCardInfo()},e.prototype.showCardInfo=function(){var t=this._config,e="guard_"+this._guardId+"_name";if(l.default.localize(this.labelName,e),this.heroCostNode.active=t.costHeroSoul&&t.costHeroSoul>0,this.heroCostNode.active){this.labelHeroCost.string=""+t.costHeroSoul;var n=c.default.getItemPath(u.ItemType.HeroSoul),o=this.heroCostNode.getChildByName("img").getComponent(cc.Sprite);l.default.loadImg(o,n,24)}var i=c.default.guardImgPath(this._guardId);l.default.loadImg(this.guardImg,i,150)},e.prototype.showGuardImg=function(t,e){var n=t,o=this._entityManager.getGuard(n),i=c.default.guardImgPath(o.id);l.default.loadImg(e,i,60)},e.prototype.onClick=function(){var t=u.ItemType.HeroSoul,e=this._config.costHeroSoul;if(f.BagSystem.instance.isItemEnough(t,e))this.cb&&this.cb();else{var n=s.ConfigManager.instance.getLanConfig("item_"+t+"_name");p.default.instance.toast("toast_needItem",n,e)}},r([_(cc.Label)],e.prototype,"labelName",void 0),r([_(cc.Label)],e.prototype,"labelHeroCost",void 0),r([_(cc.Node)],e.prototype,"showCaseNode",void 0),r([_(cc.Node)],e.prototype,"heroCostNode",void 0),r([_(cc.Sprite)],e.prototype,"guardImg",void 0),r([d],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../Enum/ItemType":"ItemType","../Gameplay/System/BagSystem":"BagSystem","../Module/ConfigManager":"ConfigManager","../Module/ViewModule":"ViewModule","../Utils/Path":"Path","../Utils/Utils":"Utils"}],UpgradeConfig:[function(t,e,n){"use strict";cc._RF.push(e,"e0f71sHNBZLIaPTV0HDJW7x","UpgradeConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.UpgradeType=void 0,function(t){t[t.SummonGuard=0]="SummonGuard",t[t.UpgradeGuard=1]="UpgradeGuard"}(n.UpgradeType||(n.UpgradeType={})),cc._RF.pop()},{}],UpgradeView:[function(t,e,n){"use strict";cc._RF.push(e,"e8fcemmwG9P7KW4QiDKJxxj","UpgradeView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../Interface/Config/UpgradeConfig"),u=c(t("./UpgradeCard")),f=c(t("../Module/ViewHandler")),p=c(t("../Utils/Utils")),h=t("../Gameplay/System/AdSystem"),d=t("../Module/Statistics"),_=t("../Enum/WatchAdStatus"),y=c(t("../Module/ViewModule")),g=t("../Enum/ItemType"),v=t("../Gameplay/System/BagSystem"),m=cc._decorator,b=m.ccclass,w=m.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.card=null,e.cardNode=null,e.btnRefresh=null,e.labelRefresh=null,e.labelHeroSoul=null,e._entityManager=null,e._onClose=null,e._battle=null,e}return i(e,t),e.prototype.initiateView=function(t){var e=t.battle,n=t.upgradeConfig,o=t.onClose;this._battle=e,this._entityManager=this._battle.entityManager,this._onClose=o,p.default.localize(this.labelRefresh,"ui_refresh"),this.initCard(n.upgradeOptions),this.initMoneyNode()},e.prototype.initCard=function(t){var e=this;this.cardNode.removeAllChildren();for(var n=function(n){var i=cc.instantiate(o.card);i.parent=o.cardNode;var r=i.getComponent(u.default),a=t[n];r.init(o._entityManager,a,function(){e.selectOption(a,e._entityManager)})},o=this,i=0;i<t.length;i++)n(i)},e.prototype.initMoneyNode=function(){this.labelHeroSoul.string=""+v.BagSystem.instance.getItemCount(g.ItemType.HeroSoul)},e.prototype.onRefresh=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,h.AdSystem.instance.showVideoAd(d.VideoAdType.RefreshGuard)];case 1:return e.sent()===_.WatchAdStatus.Success?(t=this._battle.randomUpgradeOptions().upgradeOptions,t=p.default.shuffle(t),this.initCard(t)):y.default.instance.toast("toast_ad_failed"),[2]}})})},e.prototype.selectOption=function(t,e){switch(t.type){case l.UpgradeType.SummonGuard:e.createGuard(t.guardId,{pos:this._battle.getGuardSpawnPos()});break;case l.UpgradeType.UpgradeGuard:e.upgradeGuard(t.guardId,t.destroyUids)}this.close(),this._onClose()},r([w(cc.Prefab)],e.prototype,"card",void 0),r([w(cc.Node)],e.prototype,"cardNode",void 0),r([w(cc.Button)],e.prototype,"btnRefresh",void 0),r([w(cc.Label)],e.prototype,"labelRefresh",void 0),r([w(cc.Label)],e.prototype,"labelHeroSoul",void 0),r([b],e)}(f.default);n.default=S,cc._RF.pop()},{"../Enum/ItemType":"ItemType","../Enum/WatchAdStatus":"WatchAdStatus","../Gameplay/System/AdSystem":"AdSystem","../Gameplay/System/BagSystem":"BagSystem","../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/Statistics":"Statistics","../Module/ViewHandler":"ViewHandler","../Module/ViewModule":"ViewModule","../Utils/Utils":"Utils","./UpgradeCard":"UpgradeCard"}],UserData:[function(t,e,n){"use strict";cc._RF.push(e,"2b8ebip709J477JZp9H0q9b","UserData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"ef620FmdiBJCZjynGPOJQB0","Utils");var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Module/Audio")),c=t("../Module/ConfigManager"),l=a(t("../Module/Loader")),u=a(t("./CryptoJsMini")),f=a(t("./Path")),p=function(){function t(){}return t.ensureStringLength=function(t,e,n){if(t.length>e)return t.slice(0,e);if(t.length<e){for(n=n||"A";t.length<e;)t+=n;return t.length>e?t.slice(0,e):t}return t},t.getAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var o=u.default.enc.Utf8.parse(e),i=u.default.enc.Utf8.parse(n);return u.default.AES.encrypt(t,o,{iv:i,mode:u.default.mode.CBC,padding:u.default.pad.Pkcs7}).toString()},t.getDAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var o=u.default.enc.Utf8.parse(e),i=u.default.enc.Utf8.parse(n);return u.default.AES.decrypt(t,o,{iv:i,mode:u.default.mode.CBC,padding:u.default.pad.Pkcs7}).toString(u.default.enc.Utf8)},t.getRandomCodeKey=function(t){for(var e="",n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",o=n.length,i=0;i<(t||8);i++)e+=n.charAt(Math.floor(Math.random()*o));return e},t.encodeShareQuery=function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);var o=e.join("&");return this.getAesString(o,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9")},t.decodeShareQuery=function(t){for(var e={},n=this.getDAesString(t,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9").split("&"),i=0;i<n.length;++i)try{var r=o(n[i].split("="),2),a=r[0],s=r[1];e[a]=s}catch(c){}return e},t.encode=function(t){return this.getAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.decode=function(t){return this.getDAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.encodeObject=function(e){var n={};for(var o in e){var i=e[o];n[o]=t.encode(JSON.stringify(i))}return n},t.decodeObject=function(e){var n={};for(var o in e){var i=e[o];if(null!=i){var r=t.decode(i);n[o]=""!=r?JSON.parse(r):null}else n[o]=null}return n},t.directionToAngle=function(t){return cc.misc.radiansToDegrees(cc.Vec2.RIGHT.signAngle(t))},t.randomRangeInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.randomRange=function(t,e){return Math.random()*(e-t)+t},t.randomColor=function(){var t=this.randomRangeInt(0,256),e=this.randomRangeInt(0,256),n=this.randomRangeInt(0,256);return new cc.Color(t,e,n,255)},t.arrayRemove=function(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)},t.shuffle=function(t){for(var e,n=t.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));e=o([t[i],t[n]],2),t[n]=e[0],t[i]=e[1]}return t},t.randomSelect=function(t){return 0===t.length?null:t[this.randomRangeInt(0,t.length)]},t.arrayEquals=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.sliceArray=function(t,e){if(0===t.length)return[];for(var n=[],o=Math.ceil(t.length/e),i=0;i<o;++i)n.push(t.slice(i*e,(i+1)*e));return n},t.sortArray=function(t,e){if(0!==t.length){for(var n=[],o=0;o<t.length;++o){var i=t[o],r=e(i);n.push({element:i,key:r})}return n.sort(function(t,e){return t.key-e.key}),n.map(function(t){return t.element})}},t.randomByWeight=function(t){for(var e=t.reduce(function(t,e){return t+e},0),n=Math.ceil(Math.random()*e),o=0,i=0;i<t.length;i++)if(n<=(o+=t[i]))return i+1},t.createMultiMap=function(t,e){var n=new Map;return t.forEach(function(t){var i=o(e(t),2),r=i[0],a=i[1];n.has(r)?n.get(r).push(a):n.set(r,[a])}),n},t.createMap=function(t,e){return new Map(t.map(function(t){return e(t)}))},t.loadImg=function(e,n,o){l.default.loadRes(n,cc.SpriteFrame,function(n){e.spriteFrame=n,null!=o&&t.scaleImg(e.node,n,o)},e)},t.scaleImg=function(t,e,n){var o=n/e.getRect().width,i=n/e.getRect().height,r=Math.min(o,i);t.scale=r;var a=e.getRect().width,s=e.getRect().height;t.width=a,t.height=s},t.gray=function(t,e){var n,o;void 0===e&&(e=!0);var r=t.getComponent(cc.RenderComponent);if(r){var a=cc.Material.getBuiltinMaterial("2d-gray-sprite");r[this.RAW_MAT_PROP]||(r[this.RAW_MAT_PROP]=r.getMaterial(0)),r.setMaterial(0,a)}if(e)try{for(var s=i(t.children),c=s.next();!c.done;c=s.next()){var l=c.value;this.gray(l,!0)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t.ungray=function(t,e){var n,o;void 0===e&&(e=!0);var r=t.getComponent(cc.RenderComponent);if(r){var a=r[this.RAW_MAT_PROP];a&&(r.setMaterial(0,a),delete r[this.RAW_MAT_PROP])}if(e)try{for(var s=i(t.children),c=s.next();!c.done;c=s.next()){var l=c.value;this.ungray(l,!0)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t.localize=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(t){var i=c.ConfigManager.instance.getLanConfig(e);t.string=this.formatStr.apply(this,r([i],n))}},t.formatStr=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.length?t.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t}):t},t.shortName=function(t,e){return t.length>e&&(t=t.substring(0,e)+"..."),t},t.compareVersion=function(t,e){for(var n=t.split("."),o=e.split("."),i=0;i<n.length;++i){var r=parseInt(n[i]),a=parseInt(o[i]||"0");if(r!==a)return r-a}return o.length>n.length?-1:0},t.clickSound=function(t){t instanceof cc.Button&&(t=t.node),t.on("click",function(){s.default.instance.playEffect(f.default.clickEffectPath())})},t.switchParent=function(t,e){var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO);e&&(n=e.convertToNodeSpaceAR(n)),t.parent=e,t.setPosition(n)},t.getOrAddComponent=function(t,e){var n=t.getComponent(e);return n||(n=t.addComponent(e)),n},t.getComponentInChildren=function(t,e){var n,o,r=t.getComponent(e);if(!r)try{for(var a=i(t.children),s=a.next();!s.done;s=a.next()){var c=s.value;if(r=this.getComponentInChildren(c,e))break}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return r},t.getNodePath=function(t){for(var e=[t.name];t.parent;)e.push(t.parent.name),t=t.parent;return e.reverse(),e.join("/")},t.isAncestorOf=function(t,e){for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1},t.updateAlignmentRecursively=function(t){var e,n,o;null===(o=t.getComponent(cc.Widget))||void 0===o||o.updateAlignment();try{for(var r=i(t.children),a=r.next();!a.done;a=r.next()){var s=a.value;this.updateAlignmentRecursively(s)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.transformRectTo=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),n.invert(n),e.transformMat4(e,n),e},t.transformRectFrom=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),e.transformMat4(e,n),e},t.getBoundingBoxToNode=function(t,e){var n=t.getBoundingBox();return t.parent&&(n=this.transformRectFrom(t.parent,n)),this.transformRectTo(e,n)},t.convertNodePositionToNode=function(t,e,n){if(cc.isValid(n)&&cc.isValid(t))return n.convertToNodeSpaceAR(t.convertToWorldSpaceAR(e))},t.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.Vec2.ZERO)},t.setWorldPosition=function(t,e){t.parent?t.setPosition(t.parent.convertToNodeSpaceAR(e)):t.setPosition(e)},t.anchorPosToAbsPos=function(t,e){return cc.v2(e.x+t.width*t.anchorX,e.y+t.height*t.anchorY)},t.absPosToAnchorPos=function(t,e){return cc.v2(e.x-t.width*t.anchorX,e.y-t.height*t.anchorY)},t.toggleRenderer=function(t,e){var n=t.getComponent(cc.RenderComponent);n&&(n.enabled=e);for(var o=0;o<t.childrenCount;++o)this.toggleRenderer(t.children[o],e)},t.randomPointInRect=function(t){return cc.v2(this.randomRange(t.xMin,t.xMax),this.randomRange(t.yMin,t.yMax))},t.unionRects=function(t){if(!t.length)return null;for(var e=t[0],n=1;n<t.length;++n)e.union(e,t[n]);return e},t.playAnim=function(t,e,n,o){t.play(e).repeatCount=n,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){o&&o()},this)},t.playAnims=function(t,e,n){var o=this;0===e.length?n&&n():(t.play(e.shift()).repeatCount=1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){o.playAnims(t,e,n)},this))},t.playAnimsWithRepeats=function(t,e,n){var o=this;if(0===e.length)n&&n();else{var i=e.shift(),r=i.name,a=i.repeat;t.play(r).repeatCount=null!=a?a:1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){o.playAnimsWithRepeats(t,e,n)},this)}},t.prefixZero=function(t,e){return(Array(e).join("0")+t).slice(-e)},t.formatDate=function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1,i=o<10?"0"+o:o,r=e.getDate();return n+"-"+i+"-"+(r<10?"0"+r:r)},t.formatTimeText=function(t){var e=c.ConfigManager.instance,n=this.formatTime(t),o="";return n[0]>0&&(o+=n[0]+e.getLanConfig("ui_day")),n[1]>0&&(o+=n[1]+e.getLanConfig("ui_hour")),n[2]>0&&(o+=n[2]+e.getLanConfig("ui_minute")),n[3]>=0&&(o+=n[3]+e.getLanConfig("ui_second")),o},t.formatSimpleTimeText=function(t){var e=this.formatTime(t),n=e.findIndex(function(t){return t>0});n<0&&(n=3);for(var o=""+e[n],i=n+1;i<=3;++i)o+=":"+this.prefixZero(e[i],2);return o},t.formatMinutesText=function(t){var e=c.ConfigManager.instance,n=this.formatTime(t),o="";return n[0]>0&&(o+=n[0]+e.getLanConfig("day")),n[1]>0&&(o+=n[1]+e.getLanConfig("hour")),n[2]>0&&(o+=n[2]+e.getLanConfig("minute")),o},t.formatTime=function(t){t=Math.floor(.001*t);var e=[],n=Math.floor(t/86400);e.push(n),t-=86400*n;var o=Math.floor(t/3600);e.push(o),t-=3600*o;var i=Math.floor(t/60);return e.push(i),t-=60*i,e.push(t),e},t.formatNumberString=function(t){var e=Math.floor(t).toString();return e.length<=5?e:e.length<=8?(t-t%100)/1e4+"\u4e07":(t-t%1e4)/1e8+"\u4ebf"},t.getAge=function(t,e){if(e<=t)return 0;var n=e.getFullYear()-t.getFullYear();return(e.getMonth()<t.getMonth()||e.getMonth()===t.getMonth()&&e.getDate()<t.getDate())&&(n-=1),n},t.isInAntiAddictionTime=function(t){var e=new Date(t),n=e.getDay(),o=e.getFullYear()+"-"+this.prefixZero(e.getMonth()+1,2)+"-"+this.prefixZero(e.getDate(),2);return!ChineseCalender.isHoliday(o)&&5!==n&&6!==n&&0!==n||20!==e.getHours()},t.RAW_MAT_PROP="__raw_mat_before_gray",t}();n.default=p,cc._RF.pop()},{"../Module/Audio":"Audio","../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","./CryptoJsMini":"CryptoJsMini","./Path":"Path"}],ViewHandler:[function(t,e,n){"use strict";cc._RF.push(e,"1c349gomttE/IFM/eGZiW9V","ViewHandler");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("./ViewModule")),c=a(t("./FFComponent")),l=a(t("../Enum/ViewType")),u=cc._decorator,f=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewID="",e.viewName="",e.viewType=l.default.Normal,e._clawHandles=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.onDisable=function(){this.hideGuides()},e.prototype.onAnimateFinish=function(){},e.prototype.open=function(t){this.initiateView(t)},e.prototype.close=function(){s.default.instance.popView(this)},e.prototype.message=function(){},e.prototype.hideGuides=function(){this._clawHandles},e.prototype.showGuide=function(t,e,n){void 0===n&&(n=!1)},r([f],e)}(c.default));n.default=p,cc._RF.pop()},{"../Enum/ViewType":"ViewType","./FFComponent":"FFComponent","./ViewModule":"ViewModule"}],ViewMessage:[function(t,e,n){"use strict";cc._RF.push(e,"c37dchY+ppKT5DyjpPNkc0f","ViewMessage"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewMessage=void 0,n.ViewMessage||(n.ViewMessage={}),cc._RF.pop()},{}],ViewModule:[function(t,e,n){"use strict";cc._RF.push(e,"5ed43pn/D5IboXBM/v61rW+","ViewModule");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("./Loader")),a=i(t("../Utils/IDGenerator")),s=i(t("./ViewHandler")),c=i(t("../Utils/Path")),l=i(t("./AutoRelease")),u=i(t("../Enum/ViewType")),f=i(t("../Component/View/BusyView/BusyView")),p=i(t("../Component/Scene/Viewport")),h=t("../Gameplay/System/AdSystem"),d=function(){function t(){this._activeViews=null,this._keepViews=null,this._loadingMap=null,this._activeViews=cc.js.createMap(!0),this._keepViews=cc.js.createMap(!0),this._loadingMap={},this._idGenerator=new a.default}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype._clearAd=function(){h.AdSystem.instance.hideCustomAd(),h.AdSystem.instance.hideBannerAd()},t.prototype.translateView=function(t,e,n){this._clearActiveViews(),this._clearAd(),(n=this._handleOptions(n)).animate=!1,this.pushView(t,e,n)},t.prototype.pushView=function(t,e,n){n=this._handleOptions(n);var o=this._activeViews[t];if(o)n.onLoaded&&n.onLoaded(o.getComponent(s.default));else if(!n.only||!this._loadingMap[t])if(this._loadingMap[t])this._loadingMap[t].push(e);else if(this._loadingMap[t]=[e],o=this._keepViews[t]){var i=o.getComponent(l.default).prefab;this._loadPrefabSuccess(t,n,i)}else this.loadView(t,n)},t.prototype.loadView=function(t,e){var n=this,o=c.default.viewPath(t);e.bundle&&(o=c.default.getBundlePath(o,e.bundle)),this.showBusy(),r.default.loadRes(o,cc.Prefab,function(o){n._loadPrefabSuccess(t,e,o),n.hideBusy()},null)},t.prototype.showBusy=function(){f.default.show()},t.prototype.hideBusy=function(){f.default.hide()},t.prototype.popView=function(t,e){var n=t.viewID,o=t.viewName,i=this._activeViews[n];delete this._activeViews[n],i&&cc.isValid(i,!0)&&(o in this._keepViews?(i.active=!1,i.removeFromParent()):this._release(t)),e||this._clearAd()},t.prototype.popViewsByName=function(t){var e,n,i=[];for(var r in this._activeViews)(c=this._activeViews[r])&&c.name==t&&i.push(c);try{for(var a=o(i),s=a.next();!s.done;s=a.next()){var c,l=(c=s.value).getComponent(t);this.popView(l)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},t.prototype.popViewsByType=function(t,e){var n,i,r=[];for(var a in this._activeViews)(u=this._activeViews[a].getComponent(s.default))&&u.viewType==t&&(e&&e.includes(u.viewName)||r.push(u));try{for(var c=o(r),l=c.next();!l.done;l=c.next()){var u=l.value;this.popView(u)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},t.prototype.popInvalidViews=function(){var t,e;try{for(var n=o(Object.keys(this._activeViews)),i=n.next();!i.done;i=n.next()){var r=i.value,a=this._activeViews[r];a&&cc.isValid(a,!0)||delete this._activeViews[r]}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.activeView=function(t){return this._activeViews[t]?this._activeViews[t]:null},t.prototype.getActiveViews=function(){return this._activeViews},t.prototype.activeViewsByName=function(t){var e=[];for(var n in this._activeViews){var o=this._activeViews[n];t==o.getComponent(s.default).viewName&&e.push(o)}return e.length<1&&(e=null),e},t.prototype.isWorkingByName=function(t){return!!(this._loadingMap[t]&&this._loadingMap[t].length>0)||!!this.activeView(t)},t.prototype.clear=function(){this._clearActiveViews(),this._clearCacheViews()},t.prototype.worldRoot=function(){return cc.find("Canvas/World")},t.prototype.lowerUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/LowerUI")},t.prototype.viewRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/View")},t.prototype.topUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/TopUI")},t.prototype.loadingRoot=function(){return cc.find("Canvas/MainCamera/Loading")},t.prototype.guideRoot=function(){return cc.find("Canvas/MainCamera/GuideLayer")},t.prototype.toast=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.pushView("ToastView",{fmt:t,args:e},{keep:!0,only:!0,bundle:c.default.MAIN_BUNDLE,zIndex:1})},t.prototype.sendMessage=function(t,e){for(var n in this._activeViews){var o=this._activeViews[n];o&&""!=o.name&&o.getComponent(s.default).message(t,e)}},t.prototype._clearActiveViews=function(){for(var t in this._activeViews)if("CommonLoadingView"!=t){var e=this._activeViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponent(s.default);this._release(n),delete this._activeViews[t]}}},t.prototype._clearCacheViews=function(){for(var t in this._keepViews){var e=this._keepViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponentInChildren(s.default);this._release(n)}}this._keepViews=cc.js.createMap(!0)},t.prototype._release=function(t){cc.isValid(t,!0)&&t.node.destroy()},t.prototype._loadPrefabSuccess=function(t,e,n){e.keep&&!this._keepViews[t]&&(this._keepViews[t]=r.default.instantiate(n));for(var o=this._loadingMap[t],i=0;i<o.length;++i){var a=o[i],s=r.default.instantiate(n);s.zIndex=e.zIndex;var c=t;e.only||(c=t+this._idGenerator.getNewId()),this._activeViews[c]=s;var l=s.getComponent(t);if(l||(l=s.addComponent(t)),l.viewID=c,l.viewName=t,s.name=t,s.active=!0,"CommonLoadingView"==s.name)s.parent=this.loadingRoot();else if("GuideTalkView"==s.name)s.parent=this.guideRoot();else if(l.viewType===u.default.World){var f=this.worldRoot(),h=f.getChildByName("Viewport"),d=f.getChildByName("content");s.parent=d,d.setContentSize(s.getContentSize()),d.setAnchorPoint(s.getAnchorPoint()),h.setContentSize(s.getContentSize()),h.setAnchorPoint(s.getAnchorPoint()),h.getComponent(p.default).refreshRange()}else l.viewType===u.default.LowerUI?s.parent=this.lowerUiRoot():l.viewType===u.default.TopUI?s.parent=this.topUiRoot():s.parent=this.viewRoot();l.open(a);var _=s.getChildByName("view");if(_){var y=cc.view.getVisibleSizeInPixel(),g=y.width/y.height>=.74,v=l.viewType===u.default.Normal;g&&v&&(_.scale=.5)}if(e.animate)if(_){var m=_.scale,b=1.05*m;_.scale=.2*m,cc.tween(_).to(.2,{scale:b}).delay(.05).to(.1,{scale:m}).call(l.onAnimateFinish.bind(l)).start()}else l.onAnimateFinish();else l.onAnimateFinish();e.onLoaded&&e.onLoaded(l)}delete this._loadingMap[t]},t.prototype._loadViewFail=function(t,e){console.warn(t+" load fial, err: ",e)},t.prototype._handleOptions=function(t){return t||(t={}),t.zIndex=t.zIndex?t.zIndex:0,t.keep=!!t.keep,"animate"in t||(t.animate=!0),t.only=!("only"in t&&!t.only),t},t._instance=null,t}();n.default=d,cc._RF.pop()},{"../Component/Scene/Viewport":"Viewport","../Component/View/BusyView/BusyView":"BusyView","../Enum/ViewType":"ViewType","../Gameplay/System/AdSystem":"AdSystem","../Utils/IDGenerator":"IDGenerator","../Utils/Path":"Path","./AutoRelease":"AutoRelease","./Loader":"Loader","./ViewHandler":"ViewHandler"}],ViewType:[function(t,e,n){"use strict";var o;cc._RF.push(e,"9d3a20UkXNP7q7Q1CVDXIqb","ViewType"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.World=0]="World",t[t.LowerUI=1]="LowerUI",t[t.Normal=2]="Normal",t[t.TopUI=3]="TopUI"}(o||(o={})),n.default=o,cc._RF.pop()},{}],Viewport:[function(t,e,n){"use strict";cc._RF.push(e,"fcb8340FNFOmYHC5J0uJjjn","Viewport");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,c=t("../../Enum/SceneType"),l=a(t("../../Utils/Utils")),u=cc._decorator,f=u.ccclass,p=u.property;(function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e._cameraNode=null,e._startMove=!1,e._scrollEnabled=!0,e._screenRange=[-1,1],e._screenIndex=0,e._scrollDirection=s.None,e._indexSceneMap=new Map,e}return i(e,t),e.prototype.onLoad=function(){this._indexSceneMap.set(0,c.SceneType.HomeScene),this._cameraNode=cc.find("Canvas/MainCamera")},e.prototype.start=function(){this._initSwitchButtons(),this._registerTouch()},e.prototype._initSwitchButtons=function(){this._refreshSwitchButtons(),this.node.on("screen_switch",this._refreshSwitchButtons,this)},e.prototype._refreshSwitchButtons=function(){},e.prototype.whichScene=function(){return this._indexSceneMap.get(this._screenIndex)},e.prototype.switchScreen=function(t){this._moveToScreen(this._screenIndex+t)},e.prototype.isCurrentScreenLeftBound=function(){return this._screenIndex===this._screenRange[0]},e.prototype.isCurrentScreenRightBound=function(){return this._screenIndex===this._screenRange[1]},e.prototype.refreshRange=function(){var t=this.node.getContentSize(),e=this._cameraNode,n=e.getContentSize(),o=t.height,i=cc.v2(this._getScreenX(this._screenRange[0])-n.width/2,0),r=cc.v2(this._getScreenX(this._screenRange[1])+n.width/2,o);i=l.default.convertNodePositionToNode(this.content,i,e.parent),r=l.default.convertNodePositionToNode(this.content,r,e.parent),i.addSelf(cc.v2(n.width*e.anchorX,n.height*e.anchorY)),r.subSelf(cc.v2(n.width*(1-e.anchorX),n.height*(1-e.anchorY))),this._moveRange=cc.Rect.fromMinMax(i,r),this._jumpToScreen(0)},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.scrollTo=function(t,e,n){var o=this;if(void 0===n&&(n=!1),this._scrollEnabled||n){var i=this._getScreenIndex(t.x);t.x=this._getScreenX(i);var r=l.default.convertNodePositionToNode(this.node.parent,t,this._cameraNode.parent);this._validateCameraPos(r),this._cameraNode.stopAllActions(),e>0?cc.tween(this._cameraNode).to(e,{position:cc.v3(r)}).call(function(){i!=o._screenIndex&&(o._screenIndex=i,o.node.emit("screen_switch",i))}).start():(this._cameraNode.setPosition(r),i!=this._screenIndex&&(this._screenIndex=i,this.node.emit("screen_switch",i)))}},e.prototype.scrollToTop=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMax}).start():this._cameraNode.y=this._moveRange.yMax)},e.prototype.scrollToBottom=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMin}).start():this._cameraNode.y=this._moveRange.yMin)},e.prototype._registerTouch=function(){var t=this,e=this.node;e.on(cc.Node.EventType.TOUCH_START,function(e){t._scrollEnabled&&(t._startMove=!1,t._scrollDirection=s.None,t._cameraOriginPos=t._cameraNode.getPosition(),t._touchStartPos=e.getLocation(),t._touchStartTs=Date.now(),t._cameraNode.stopAllActions())},null),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(t._scrollEnabled){var n=e.getLocation(),o=t._touchStartPos.sub(n);if(!t._startMove)if(Math.abs(o.y)>=50)t._scrollDirection=s.Vertical,t._startMove=!0;else{if(!(Math.abs(o.x)>=70))return;t._scrollDirection=s.Horizontal,t._startMove=!0}return t._scrollDirection===s.Vertical?t._cameraNode.y=t._cameraOriginPos.y+o.y:t._cameraNode.x=t._cameraOriginPos.x+o.x,t._checkEdge(),!0}},null),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._scrollEnabled&&t._startMove&&t._correctScreen()},null),e.on(cc.Node.EventType.TOUCH_END,function(){t._scrollEnabled&&t._startMove&&t._inertialScroll()},null)},e.prototype._checkEdge=function(){var t=this._cameraNode.getPosition();this._validateCameraPos(t),this._cameraNode.setPosition(t)},e.prototype._validateCameraPos=function(t){t.x=cc.misc.clampf(t.x,this._moveRange.xMin,this._moveRange.xMax),t.y=cc.misc.clampf(t.y,this._moveRange.yMin,this._moveRange.yMax)},e.prototype._correctScreen=function(){var t=this._cameraNode.x/this._cameraNode.width;this._moveToScreen(t)},e.prototype._moveToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);if(this._cameraNode.x!==n){var o=.5*Math.abs(this._cameraNode.x-n)/this._cameraNode.width;cc.tween(this._cameraNode).to(o,{x:n}).start()}this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._jumpToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);this._cameraNode.x=n,this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._getScreenX=function(t){return t*(this._cameraNode.width+100)},e.prototype._getScreenIndex=function(t){var e,n=this._cameraNode.width+100;return e=t>=0?Math.floor((t+n/2)/n):Math.ceil((t-n/2)/n),cc.misc.clampf(e,this._screenRange[0],this._screenRange[1])},e.prototype._inertialScroll=function(){if(this._scrollDirection===s.Vertical){var t=Date.now()-this._touchStartTs,e=.5*(r=this._cameraNode.y-this._cameraOriginPos.y),n=this._cameraNode.y+e;if(0!==(n=cc.misc.clampf(n,this._moveRange.yMin,this._moveRange.yMax))){var o=.6*t;o>1&&(o=1),cc.tween(this._cameraNode).to(o,{y:n},{easing:"quadOut"}).start()}}else{var i=this._cameraNode.width,r=this._cameraNode.x-this._cameraOriginPos.x;if(Math.abs(r)>=.3*i){var a=Math.sign(r),c=this._screenIndex+a;this._moveToScreen(c)}else this._correctScreen()}},e.prototype.reset=function(){this._startMove=!1,this._scrollEnabled=!0,this._touchStartPos=cc.Vec2.ZERO,this._cameraOriginPos=cc.Vec2.ZERO,this._scrollDirection=s.None},e.prototype.onTouchBack=function(){var t=this;this._scrollEnabled=!1,cc.tween(this._cameraNode).to(.2,{position:cc.v3(this._cameraOriginPos)}).call(function(){t._startMove=!1,t._scrollEnabled=!0,t._touchStartPos=cc.Vec2.ZERO,t._cameraOriginPos=cc.Vec2.ZERO}).start()},r([p(cc.Node)],e.prototype,"content",void 0),r([p(cc.Button)],e.prototype,"_cameraNode",void 0),r([f],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Enum/SceneType":"SceneType","../../Utils/Utils":"Utils"}],VmDataBinding:[function(t,e,n){"use strict";cc._RF.push(e,"ab8d1bb9jpKdLs4OSeeEVmg","VmDataBinding");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.vbind=n.vfor=n.vsearch=n.vshow=n.vclick=n.vm=n.reactive=n.PropertyType=n.hasChanged=void 0;var a=function(t){return null!==t&&"object"==typeof t};n.hasChanged=function(t,e){return!Object.is(t,e)};var s,c=new WeakMap;(function(t){t.V_BIND="vbind",t.V_FOR="vfor",t.V_SHOW="vshow"})(s=n.PropertyType||(n.PropertyType={})),n.reactive=function(t){var e=this;return new Proxy(t,{get:function(t,o){var i=Reflect.get(t,o);if(a(i)&&Reflect.isExtensible(i)){var r=e.rawMap.get(i)||o;e.rawMap.set(i,r)}return a(i)?n.reactive.call(e,i):i},set:function(t,n,o){var i={oldValue:t[n],newValue:o},r=Reflect.set(t,n,o);return u.call(e,t,n,i),r},deleteProperty:function(t,n){var o=Reflect.deleteProperty(t,n);return u.call(e,t,n,{}),o}})};var l={vbind:function(t){var e=this,n=(t.type,t.property),o=t.key,i=t.handle,r=function(t,e,n){var o=!1;if(Reflect.has(t,e))t[e]=n,o=!0;else if(Reflect.has(t,"node")){var i=t.node;if(Reflect.has(i,e))i[e]=n,o=!0;else if(-1!=e.indexOf(".")){var r="cc."+(s=e.split("."))[0],a=s[1];(c=i.getComponent(r))||(c=i.addComponent(r)),Reflect.has(c,a)&&(c[a]=n,c instanceof cc.Widget&&c.updateAlignment(),o=!0)}else o=!1}else if(-1!=e.indexOf(".")){var s,c;i=t,r="cc."+(s=e.split("."))[0],a=s[1],(c=i.getComponent(r))||(c=i.addComponent(r)),Reflect.has(c,a)&&(c[a]=n,c instanceof cc.Widget&&c.updateAlignment(),o=!0)}else o=!1;return o};if("string"==typeof i){var a=m[o];a||(a=_),a(this,i).then(function(t){0==r(e[n],o,t)&&cc.error(n+" -> "+o+" not find")}).catch(function(t){cc.log(t)})}else if("function"==typeof i){var s=i.call(this,this);0==r(this[n],o,s)&&cc.error(n+" -> "+o+" not find")}else s=i,0==r(this[n],o,s)&&cc.error(n+" -> "+o+" not find")},vfor:function(t){t.type;var e=t.property;t.key,g(this,e,t.handle).then(function(){}).catch(function(t){cc.log(t)})},vshow:function(t){t.type;var e=t.property;t.key,y(this,e,t.handle).then(function(){}).catch(function(t){cc.log(t)})}},u=function(t,e,o){var i=null==o?void 0:o.newValue,r=null==o?void 0:o.oldValue;if(!r||n.hasChanged(i,r)){var s=this.rawMap.get(t);if(a(i)&&Reflect.isExtensible(i)){var c=s||e;this.rawMap.set(i,c)}s&&(e=s);for(var u=this.targetMap[e]||[],f=0;f<u.length;f++){var p=u[f],h=p.type;p.property,p.key,p.handle,l[h].call(this,p)}}},f=function(t,e){var n=e.shift();if(t)return 0==e.length?t[n]:f(t[n],e)},p=function(t,e){for(var n=[],o=0;o<e.length;o++){var i=new String(e[o]),r=(i=i.replace("?","")).split("."),a=f(t,r);n.push(a)}return n},h=[function(t,e){var n,o,i,a=e.vsearch||[];if(0!=a.length){var s=new Map;v(this.node,s);try{for(var c=r(a),l=c.next();!l.done;l=c.next()){var u=l.value,f=u.className,p=u.tag||u.name,h=s.get(p);"cc.cc.Node"!=f.prototype.__classname__&&(h=null!==(i=null==h?void 0:h.getComponent(f))&&void 0!==i?i:null),null!=h?this[u.name]=h:cc.error("\u6ca1\u6709\u627e\u5230\u5c5e\u6027 "+t+"->"+p)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}s=null}},function(t,e){var n,o,i=this,a=e.vclick||[],s=function(t){var e,n,o=t.tag,r=t.name,a=t.handler,s=null;if(!(s="string"==typeof a?c[a]:a))return cc.error("\u6ca1\u6709\u627e\u5230function "+a),"continue";(e=c[r],n=null,(n=e instanceof cc.Node?e:e.node).getComponent(cc.Button)||n.addComponent(cc.Button),n).on("click",function(t){s.call(i,t,o)},c)},c=this;try{for(var l=r(a),u=l.next();!u.done;u=l.next())s(u.value)}catch(f){n={error:f}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}];function d(t,e){var n=function(t){for(var e=[],n=[],o=0;o<t.length;o++){var i=t[o];if("{"==i)n.push(o+1);else if("}"==i){var r=n.pop(),a=o-r,s=t.substr(r,a);e.push(s)}}return e},o=function(t,e,n){for(var o=new String(t),i=0;i<e.length;i++){var r=e[i],a=n[i];o=o.replace("${"+r+"}",a)}return o};return new Promise(function(i,r){try{var a=n(e);if(0==a.length)i(p(t.data,[e])[0]);else if(1==a.length&&"${"+a[0]+"}"==e)i(p(t.data,a)[0]);else{var s=p(t.data,a);i(o(e,a,s).valueOf())}}catch(c){r("\u5931\u8d25")}})}function _(t,e){return d(t,e)}function y(t,e,n){var r=this;return new Promise(function(a,s){return o(r,void 0,void 0,function(){var o,r;return i(this,function(){try{o=t[e],r=o instanceof cc.Node?o:o.node,"string"==typeof n?_(t,n).then(function(t){r.active=t}).catch(function(t){cc.log(t)}):r.active="function"==typeof n?n.call(t,t):n,a(1)}catch(i){s(i)}return[2]})})})}function g(t,e,n){var r=this;return new Promise(function(a,s){return o(r,void 0,void 0,function(){var o,r,c,l,u,f,p,h,d;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),o=n.component,r=n.prefab,c=n.data,[4,_(t,c)];case 1:for(l=i.sent(),(u=t[e]).removeAllChildren(),f=function(e){var n=l[e],i=cc.instantiate(t[r]),a=i.getComponent(o),s=a.onLoad;a.onLoad=function(){null==s||s.call(a),a.setData(n)},u.addChild(i)},p=0,h=l.length;p<h;p++)f(p);return a(1),[3,3];case 2:return d=i.sent(),s(d),[3,3];case 3:return[2]}})})})}function v(t,e){e.set(t.name,t);var n=t.children;for(var o in n)cc.isValid(n[o])&&v(n[o],e)}n.vm=function(t){var e=t.prototype.onLoad;t.prototype.onLoad=function(){var n,o,i=cc.js.getClassName(t),a=c.get(t.prototype)||{};try{for(var s=r(h),l=s.next();!l.done;l=s.next())l.value.call(this,i,a)}catch(u){n={error:u}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}null==e||e.call(this)}},n.vclick=function(t,e){return function(n,o){var i=c.get(n)||{},r=i.vclick||[];r.push({tag:e,name:o,handler:t}),i.vclick=r,c.set(n,i)}},n.vshow=function(t){return function(e,n){var o=c.get(e)||{},i=o.property||[];i.push({type:s.V_SHOW,propertyKey:n,handler:t}),o.property=i,c.set(e,o)}},n.vsearch=function(t,e){return function(n,o){var i=c.get(n)||{},r=i.vsearch||[];r.push({tag:e,name:o,className:t}),i.vsearch=r,c.set(n,i)}},n.vfor=function(t){return function(e,n){var o=c.get(e)||{},i=o.property||[];i.push({type:s.V_FOR,propertyKey:n,handler:t}),o.property=i,c.set(e,o)}},n.vbind=function(t){return function(e,n){var o=c.get(e)||{},i=o.property||[];i.push({type:s.V_BIND,propertyKey:n,handler:t}),o.property=i,c.set(e,o)}};var m={common:_,string:d,spriteFrame:function(t,e){var n=this;return new Promise(function(r,a){return o(n,void 0,void 0,function(){var n;return i(this,function(o){switch(o.label){case 0:return[4,d(t,e)];case 1:return(n=o.sent()).startsWith("http")?cc.assetManager.loadRemote(n,{ext:".png"},function(t,e){if(cc.error)a(n+"\u52a0\u8f7d\u5931\u8d25\uff01");else{var o=new cc.SpriteFrame(e);r(o)}}):cc.resources.load(n+"/spriteFrame",cc.SpriteFrame,function(t,e){t?a(n+"\u52a0\u8f7d\u5931\u8d25\uff01"):r(e)}),[2]}})})})}};cc._RF.pop()},{}],WarningView:[function(t,e,n){"use strict";cc._RF.push(e,"827f49LurNPm7TFxUjyiY8B","WarningView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../Module/ViewHandler")),c=a(t("../Utils/Utils")),l=cc._decorator,u=l.ccclass,f=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelConfrim=null,e.labelCancel=null,e.labelContent=null,e.cb=null,e}return i(e,t),e.prototype.initiateView=function(t){this.cb=t.cb,c.default.localize(this.labelTitle,"ui_warning"),c.default.localize(this.labelConfrim,"ui_confirm"),c.default.localize(this.labelCancel,"ui_cancel"),c.default.localize(this.labelContent,t.strKey)},e.prototype.onConfirm=function(){this.close(),this.cb(!0)},e.prototype.onCancle=function(){this.close(),this.cb(!1)},r([f(cc.Label)],e.prototype,"labelTitle",void 0),r([f(cc.Label)],e.prototype,"labelConfrim",void 0),r([f(cc.Label)],e.prototype,"labelCancel",void 0),r([f(cc.Label)],e.prototype,"labelContent",void 0),r([u],e)}(s.default);n.default=p,cc._RF.pop()},{"../Module/ViewHandler":"ViewHandler","../Utils/Utils":"Utils"}],WatchAdStatus:[function(t,e,n){"use strict";cc._RF.push(e,"e5017rTF0RAwJkTA+EmQdjB","WatchAdStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.WatchAdStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Cancel=1]="Cancel",t[t.Failed=2]="Failed",t[t.NotSupported=3]="NotSupported",t[t.TooFreq=4]="TooFreq",t[t.NetworkError=5]="NetworkError"}(n.WatchAdStatus||(n.WatchAdStatus={})),cc._RF.pop()},{}],WeaponConfig:[function(t,e,n){"use strict";cc._RF.push(e,"d2ef3d51ERHr54/CkhSZyzj","WeaponConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],WeaponData:[function(t,e,n){"use strict";cc._RF.push(e,"25e3545p3ZHr5ukrQS1XB1M","WeaponData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],WeaponItem:[function(t,e,n){"use strict";cc._RF.push(e,"14377RpRHlKPaPhhP3HnI2o","WeaponItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("../../Component/Utils/TableView/TableViewItem")),c=t("../../Gameplay/System/BagSystem"),l=t("../../Gameplay/System/WeaponSystem"),u=a(t("../../Utils/Path")),f=a(t("../../Utils/Utils")),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.img=null,e.outline=null,e.focus=null,e._bagView=null,e._data=null,e}return i(e,t),e.prototype.init=function(t,e){this._bagView=e,this._data=t;var n=u.default.getWeaponImg(t.id),o=u.default.getItemOutlinePath(t.quality);f.default.loadImg(this.img,n,60),f.default.loadImg(this.outline,o),this.img.node.opacity=t.isUnlock?255:50,t.isUnlock?f.default.ungray(this.img.node):f.default.gray(this.img.node),this._data.id==l.WeaponSystem.instance.getCurWeaponId()&&this.onHighlight(!0)},e.prototype.onSelect=function(){var t=this,e=function(){l.WeaponSystem.instance.updateWeapon(t._data.id,function(e){e&&(t._bagView.setHighlight(t._data),t._data.isUnlock=!0,t.img.node.opacity=255,f.default.ungray(t.img.node))})};if(this._data.isUnlock)e();else{var n=l.WeaponSystem.instance.getUnlockWeaponCondition(this._data.id);c.BagSystem.instance.showConditionView(n,function(t){t&&e()})}},e.prototype.onHighlight=function(t){this.focus.active=t},r([d(cc.Sprite)],e.prototype,"img",void 0),r([d(cc.Sprite)],e.prototype,"outline",void 0),r([d(cc.Node)],e.prototype,"focus",void 0),r([h],e)}(s.default);n.default=_,cc._RF.pop()},{"../../Component/Utils/TableView/TableViewItem":"TableViewItem","../../Gameplay/System/BagSystem":"BagSystem","../../Gameplay/System/WeaponSystem":"WeaponSystem","../../Utils/Path":"Path","../../Utils/Utils":"Utils"}],WeaponSystem:[function(t,e,n){"use strict";cc._RF.push(e,"6ca02U3HLFHWrgD2wn1RuA/","WeaponSystem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.WeaponSystem=void 0;var c=t("../../Module/ConfigManager"),l=s(t("../../Module/Database/Db")),u=s(t("../../Module/ViewModule")),f=s(t("../../Utils/Utils")),p=s(t("../GameDefine")),h=t("./Common/DataSaver"),d=t("./HomeSystem"),_={UpdateWeapon:"UpdateWeapon",UpdateDivineBeast:"UpdateDivineBeast",UpdateSlot:"UpdateSlot"},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="WeaponSystem",e._data=null,e._saver=new h.DataSaver,e}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){var t,e,n,o,i,r;return a(this,function(){if(this._data=l.default.instance.getData("weapon"),!this._data){for(n in t=c.ConfigManager.instance.getConfig("Weapon"),e={version:1,magic:1,curWeaponId:1,curDivineBeastId:0,beasts:{},weapons:{},slots:{}},t)o={id:+n,isUnlock:!1},e.weapons[n]=o,1==+n&&(e.weapons[n].isUnlock=!0);for(i=0;i<p.default.GemMaxNum;i++)(r={id:null,index:null,quality:null,type:null,score:null,entryInfo:null,isUnlock:!0}).index=i,e.slots[i]=r,i>=2&&(e.slots[i].isUnlock=!1);this._data=e,this.setDirty()}return this._saver.init("weapon",this._data),[2]})})},e.prototype.setDirty=function(){this._saver.setDirty()},e.prototype.destroy=function(){this._saver.save()},e.prototype.logicUpdate=function(){},e.prototype.getCurWeaponId=function(){return this._data.curWeaponId},e.prototype.getCurWeapon=function(){var t=this._data.curWeaponId;return this._data.weapons[t]},e.prototype.getCurDivineBeastId=function(){return this._data.curDivineBeastId},e.prototype.getAllBeast=function(){return this._data.beasts},e.prototype.getAllWeapon=function(){return this._data.weapons},e.prototype.getCurDivineBeast=function(){var t=this._data.curDivineBeastId;return this._data.beasts[t]},e.prototype.getSlots=function(){return this._data.slots},e.prototype.getSlotByIndex=function(t){return this._data.slots[t]},e.prototype.setSlotData=function(t){this._data.slots[t.index]=t,this.setDirty()},e.prototype.getUnlockWeaponCondition=function(t){return c.ConfigManager.instance.getWeaponConfig(t).condition},e.prototype.getUnlockBeastCondition=function(t){return c.ConfigManager.instance.getDivineBeastConfig(t).condition},e.prototype.compareTwoGems=function(t,e){return t.score<=e.score},e.prototype.getGemScore=function(t,e){for(var n=t*e.length,o=0;o<e.length;o++){var i=e[o];n*=i.num,n*=i.influenceGuardIds.length}return Math.round(n)},e.prototype.getGemInfluenceById=function(t){var e={},n=this._data.slots;for(var o in n){var i=n[o];if(i.isUnlock)for(var r=0;r<i.entryInfo.length;r++){var a=i.entryInfo[r];a.influenceGuardIds.includes(t)&&(e[a.type]?e[a.type]+=a.num:e[a.type]=a.num)}}return e},e.prototype.getRandomEntryArr=function(t,e){for(var n=c.ConfigManager.instance.getGemConfig(t),o=1+Math.floor(e/3),i=[],r=0;r<n.entryArr.length;r++)i.push(n.entryArr[r]);(i=f.default.shuffle(i)).splice(0,o);var a=[];for(r=0;r<i.length;r++){var s=i[r],l=c.ConfigManager.instance.getEntryConfig(s),u=l["range"+e],p=Math.floor(f.default.randomRange(u[0],u[1]));a.push({id:s,type:l.type,influenceGuardIds:l.influenceGuardIds,num:p})}return a},e.prototype.updateDivineBeast=function(t,e){this._data.curDivineBeastId=t,this.emit(_.UpdateDivineBeast,t),this.setDirty(),e&&e()},e.prototype.updateSlots=function(){var t=this.getSlots(),e=this.getWeaponSlotNum();for(var n in t){t[n].isUnlock=!(+n>=e)}this.emit(_.UpdateSlot),this.setDirty()},e.prototype.updateWeapon=function(t,e){var n=this,o=this.getCurWeaponId();if(o!=t){var i=function(){n._data.curWeaponId=t,n._data.weapons[t].isUnlock||(n._data.weapons[t].isUnlock=!0),n.updateSlots(),n.emit(_.UpdateWeapon),e&&e(!0)};c.ConfigManager.instance.getWeaponConfig(o).slotNum>c.ConfigManager.instance.getWeaponConfig(t).slotNum?u.default.instance.pushView("WarningView",{strKey:"warn_lessSlots",cb:function(t){t?i():(u.default.instance.toast("toast_user_cancel"),e&&e(!1))}}):i()}},e.prototype.getWeaponSlotNum=function(){return c.ConfigManager.instance.getWeaponConfig(this.getCurWeaponId()).slotNum},e.prototype.randomGem=function(){var t=d.HomeSystem.instance.getCurrentStage(),e=c.ConfigManager.instance.getStageConfig(t).randomArr,n=f.default.randomByWeight(e),o=this.getWeaponSlotNum(),i=f.default.randomRangeInt(0,o),r=f.default.randomRangeInt(1,p.default.GemMaxTypeNum+1),a=c.ConfigManager.instance.getGemConfig(r).type,s=this.getRandomEntryArr(r,n);return{id:r,index:i,quality:n,type:a,entryInfo:s,score:this.getGemScore(n,s),isUnlock:!0}},e._instance=null,e.Events=_,e}(cc.EventTarget);n.WeaponSystem=y,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Module/Database/Db":"Db","../../Module/ViewModule":"ViewModule","../../Utils/Utils":"Utils","../GameDefine":"GameDefine","./Common/DataSaver":"DataSaver","./HomeSystem":"HomeSystem"}],eEdit:[function(t,e,n){"use strict";cc._RF.push(e,"a68b7IarHZBIbmX/Y49IFLI","eEdit");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eEdit=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,this.editbox.string=e,n&&(this.callback=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,1);this.editbox.string=""+e},e.prototype.onEditDidEnded=function(t){var e=t.string;this.callback&&this.callback(e)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.EditBox)],e.prototype,"editbox",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component);n.eEdit=u,cc._RF.pop()},{}],eGraph:[function(t,e,n){"use strict";cc._RF.push(e,"8402dhduE5Ov50TfvBqb+zA","eGraph");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGraph=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=(new cc.Vec3,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.LineGraph=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e.positions=[],e._x=100,e._y=18,e._points=10,e._limit=60,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.updateData=function(t){this.positions.length>=this._points&&this.positions.shift(),this.positions.push(t),this.drawLine()},e.prototype.init=function(t,e,n,o){void 0===n&&(n=60),void 0===o&&(o=10),this.node.name=t,this.NameLable.string=t,e&&(this.callback=e);var i=this.LineGraph.node.getContentSize();this._x=i.width,this._y=.85*i.height,this._limit=n,this._points=Math.max(Math.floor(o),3)},e.prototype.drawLine=function(){var t=this.positions.length;if(!(t<2)){this.LineGraph.clear();for(var e=.5*this._x,n=.5*this._y,o=this._y,i=this._x/(this._points-1),r=0;r<t;r++){var a=o*Math.min(this.positions[r]/this._limit,1.05)-n,s=r*i-e;0==r?this.LineGraph.moveTo(s,a):this.LineGraph.lineTo(s,a)}this.LineGraph.stroke()}},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.Graphics)],e.prototype,"LineGraph",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component));n.eGraph=u,cc._RF.pop()},{}],eGroup:[function(t,e,n){"use strict";cc._RF.push(e,"f6ba3QH8TJGU6L91bCnmd0p","eGroup");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGroup=void 0;var a=t("./eItem"),s=t("./eSlider"),c=t("./eToggle"),l=t("./eEdit"),u=t("./eList"),f=t("./eGraph"),p=cc._decorator,h=p.ccclass,d=p.property,_=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrow=null,e.tittle=null,e.menuItem=null,e.sliderItem=null,e.toggleItem=null,e.groupItem=null,e.editItem=null,e.listItem=null,e.graphItem=null,e.nameLabel=null,e._size=new cc.Size(200,30),e._item=null,e._isVisible=!0,e._groupName="",e._time=0,e}var n;return i(e,t),n=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this.setMenuNode()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupName",{set:function(t){this._groupName=t,this.nameLabel.string=t},enumerable:!1,configurable:!0}),e.prototype.getParent=function(){return this.parentComp},e.prototype.onEnable=function(){this.tittle.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_END,this.changeVisible,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this)},e.prototype.onDisable=function(){this.tittle.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this),this.tittle.off(cc.Node.EventType.TOUCH_END,this.changeVisible,this)},e.prototype.touchStart=function(){this._time=cc.director.getTotalTime()},e.prototype.dragPos=function(t){if(!(cc.director.getTotalTime()-this._time<90)){var e=this.node.parent,n=t.touch.getLocation();e.parent?e.setPosition(e.parent.convertToNodeSpaceAR(n)):e.setPosition(n.x,n.y)}},e.prototype.addGroup=function(t){var e=cc.instantiate(this.groupItem),o=e.getComponent(n);return o.size=this.size,e.parent=this.node,t&&(o.groupName=t),o.parentComp=this.getParent(),o},e.prototype.addSlider=function(t,e,n,o,i){var r=cc.instantiate(this.sliderItem);r.setContentSize(this._size),r.parent=this.node;var a=r.getComponent(s.eSlider);return a.slider.progress=n,a.editbox.string=""+n,a&&a.init(t,e,o),i&&(i=a),this},e.prototype.addEdit=function(t,e,n){var o=cc.instantiate(this.editItem);o.setContentSize(this._size),o.parent=this.node;var i=o.getComponent(l.eEdit);return i&&i.init(t,e,n),this},e.prototype.addGraph=function(t,e,n,o){void 0===n&&(n=60),void 0===o&&(o=10);var i=cc.instantiate(this.graphItem);i.setContentSize(this._size),i.parent=this.node;var r=i.getComponent(f.eGraph);return r&&r.init(t,e,n,o),this},e.prototype.addItem=function(t,e){var n=cc.instantiate(this.menuItem);n.setContentSize(this._size),n.parent=this.node;var o=n.getComponent(a.eItem);return o&&o.init(t,e),this},e.prototype.addList=function(t,e){var n=cc.instantiate(this.listItem);n.setContentSize(cc.size(this._size.width,n.getContentSize().height)),n.parent=this.node;var o=n.getComponent(u.eList);return o&&o.init(t,e),this},e.prototype.addToggle=function(t,e,n){void 0===n&&(n=!0);var o=cc.instantiate(this.toggleItem);o.setContentSize(this._size),o.parent=this.node;var i=o.getComponent(c.eToggle);return i.toggle.isChecked=n,i&&i.init(t,e),this},e.prototype.setMenuNode=function(){var t=this;this.resetSize(this.node);var e=this.node.children;e.length>0&&e.forEach(function(e){t.resetSize(e)})},e.prototype.resetSize=function(t){t.setContentSize(this._size)},e.prototype.resetItem=function(t){this._item!=t&&this._item&&this._item.onNormal(),this._item=t},e.prototype.changeVisible=function(){this._isVisible=!this._isVisible;var t=this.node.children;this.arrow.angle=this._isVisible?-90:0;for(var e=1;e<t.length;e++)t[e].active=this._isVisible},r([d(cc.Node)],e.prototype,"arrow",void 0),r([d(cc.Node)],e.prototype,"tittle",void 0),r([d(cc.Prefab)],e.prototype,"menuItem",void 0),r([d(cc.Prefab)],e.prototype,"sliderItem",void 0),r([d(cc.Prefab)],e.prototype,"toggleItem",void 0),r([d(cc.Prefab)],e.prototype,"groupItem",void 0),r([d(cc.Prefab)],e.prototype,"editItem",void 0),r([d(cc.Prefab)],e.prototype,"listItem",void 0),r([d(cc.Prefab)],e.prototype,"graphItem",void 0),r([d(cc.Label)],e.prototype,"nameLabel",void 0),n=r([h],e)}(cc.Component));n.eGroup=_,cc._RF.pop()},{"./eEdit":"eEdit","./eGraph":"eGraph","./eItem":"eItem","./eList":"eList","./eSlider":"eSlider","./eToggle":"eToggle"}],eItem:[function(t,e,n){"use strict";cc._RF.push(e,"25493LQs4pHSqAzfHZVO6iA","eItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eItem=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component);n.eItem=u,cc._RF.pop()},{}],eList:[function(t,e,n){"use strict";cc._RF.push(e,"07308iMMmFGWa0m3+/sDKOp","eList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eList=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TouchArea=null,e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.ListLabel=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.TouchArea.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.TouchArea.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.ListLabel.string=String(t)||this.ListLabel.string)}},r([c(cc.Node)],e.prototype,"TouchArea",void 0),r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.Label)],e.prototype,"ListLabel",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component);n.eList=u,cc._RF.pop()},{}],eMenu:[function(t,e,n){"use strict";cc._RF.push(e,"85cb9IBtahOTa27eSlpIePB","eMenu");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eMenu=void 0;var a=t("./eGroup"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GroupPrefab=null,e._size=new cc.Size(200,30),e._groups=new Map,e._isVisible=!0,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemSize",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!1,configurable:!0}),e.prototype.addGroup=function(t){var e=cc.instantiate(this.GroupPrefab),n=e.getComponent(a.eGroup);return t&&(n.groupName=t,this._groups.set(t,e)),n.parentComp=this,n.size=this._size,e.parent=this.node,n},e.prototype.getGroup=function(t){return this._groups.get(t)||null},e.prototype.deleteGroup=function(t){var e=this.getGroup(t);e&&(this._groups.delete(t),e.removeFromParent(),e.destroy())},e.prototype.resetSize=function(t){t.setContentSize(this.MenuItemSize)},r([l(cc.Size)],e.prototype,"MenuItemSize",null),r([l(cc.Prefab)],e.prototype,"GroupPrefab",void 0),r([l({visible:!1})],e.prototype,"_size",void 0),r([c],e)}(cc.Component);n.eMenu=u,cc._RF.pop()},{"./eGroup":"eGroup"}],eSlider:[function(t,e,n){"use strict";cc._RF.push(e,"b79efkp/cJCiL0dI9mTYc6U","eSlider");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eSlider=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.slider=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e._scale=1,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e),n&&(this._scale=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,this._scale);this.slider.progress=e/this._scale,this.editbox.string=""+e},e.prototype.onSliderCallback=function(t){var e=t.progress*this._scale;this.editbox.string=""+e,this.callback&&this.callback(e)},e.prototype.onEditDidEnded=function(t){var e=cc.clamp(Number(t.string)||0,0,this._scale);this.callback&&this.callback(e),this.slider.progress=e/this._scale},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){this.callback&&this.callback(this.slider.progress)},r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.Slider)],e.prototype,"slider",void 0),r([c(cc.EditBox)],e.prototype,"editbox",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component);n.eSlider=u,cc._RF.pop()},{}],eToggle:[function(t,e,n){"use strict";cc._RF.push(e,"4a275KyfYtI+aBzBrwqJDOW","eToggle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eToggle=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=new cc.Color,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.toggle=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return i(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onToggleCallback=function(t){this.callback&&this.callback(t.isChecked)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(l,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},r([c(cc.Sprite)],e.prototype,"BgSprite",void 0),r([c(cc.Sprite)],e.prototype,"SideSprite",void 0),r([c(cc.Label)],e.prototype,"NameLable",void 0),r([c(cc.Toggle)],e.prototype,"toggle",void 0),r([c(cc.Color)],e.prototype,"MenuItemBgColor",null),r([c(cc.Color)],e.prototype,"MenuItemSideColor",null),r([c({visible:!1})],e.prototype,"BgColor",void 0),r([c({visible:!1})],e.prototype,"SideColor",void 0),r([s],e)}(cc.Component);n.eToggle=u,cc._RF.pop()},{}]},{},["CollisionWrapper","EntityTag","GuideMask","GameScene","StartScene","Viewport","Terrain","Animator","ButtonEffect","ColorAssembler2D","FlexLabel","TableView","TableViewInterface","TableViewItem","TableViewLine","BattleView","BusyCircle","BusyView","ConfirmCommonView","HomeWorld","LoadingView","DebugPad","eEdit","eGraph","eGroup","eItem","eList","eMenu","eSlider","eToggle","Profiler","Decorators","VmDataBinding","AchievementStatus","AdType","ClawGuideType","EntryType","ErrorType","GemType","ItemType","SceneType","ViewMessage","ViewType","WatchAdStatus","Battle","PlayerData","BattleFlow","BattleStats","EnemyStateMachine","GuardStateMachine","Ability","BaseEntity","Bullet","Enemy","EntityManager","Guard","IEntityContext","Player","Game","GameDefine","IBattleContext","AdSystem","BagSystem","BaseSystem","BattleSystem","DataSaver","HomeSystem","ISystem","WeaponSystem","Common","AbilityConfig","BulletConfig","DivineBeastConfig","EnemyConfig","EntryConfig","GemConfig","GuardConfig","LanConfig","LevelConfig","StageConfig","UpgradeConfig","WeaponConfig","AdData","BagData","BattleData","GuideData","HomeData","IBaseData","LocalData","SettingData","UserData","WeaponData","Audio","AutoRelease","ConfigManager","Db","DbMap","LocalStorage","RemoteStorage","FFComponent","ISerializable","Loader","Loading","SDKBridge","StartSceneLoading","Statistics","ViewHandler","ViewModule","BagView","DivineBeastItem","WeaponItem","BattleEndView","BattleUI","CompareView","ConditionView","DivineBeastView","GemPropView","HomeBottomUI","HomeTopUI","SettingView","ToastView","UpgradeCard","UpgradeView","WarningView","Action","AppUpdater","CryptoJsMini","ErrorReporter","FrameExecutor","Heap","IDGenerator","NodePool","Path","Platform","Property","PseudoRandom","Queue","RemoteImgLoader","RetryPolicy","StateMachine","TweenFX","UniqueView","Utils"]);