window.__require=function t(e,n,r){function o(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({AchievementStatus:[function(t,e,n){"use strict";cc._RF.push(e,"377c8p9LOZCEagSm3Gw9KEk","AchievementStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.AchievementStatus=void 0,function(t){t[t.New=0]="New",t[t.Finish=1]="Finish",t[t.GetReward=2]="GetReward"}(n.AchievementStatus||(n.AchievementStatus={})),cc._RF.pop()},{}],Action:[function(t,e,n){"use strict";cc._RF.push(e,"75033kg3tJHrbYe4hNpS6Tm","Action");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.Action3=n.Action2=n.Action1=n.Action=n.CallBack=void 0;var c=function(){function t(t,e){this.dirty=!1,this.fun=t,this.thisArg=e}return t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.dirty){if(null!=this.thisArg)return(t=this.fun).call.apply(t,a([this.thisArg],e));this.fun.apply(this,a(e))}},t.prototype.isOriginFrom=function(t,e){return this.fun==t&&this.thisArg==e},Object.defineProperty(t.prototype,"originFun",{get:function(){return this.fun},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originThisArg",{get:function(){return this.thisArg},enumerable:!1,configurable:!0}),t}();n.CallBack=c;var s=function(){function t(){this.callBackList=[],this.callingRemNum=-1}return t.prototype.add=function(t,e){null!=t&&-1==this.getFunIndex(t,e)&&this.callBackList.push(new c(t,e))},t.prototype.remove=function(t,e){if(null!=t)if(this.callingRemNum>=0){this.callingRemNum++;var n=this.getCallBack(t,e);null!=n&&(n.dirty=!0)}else{var r=this.getFunIndex(t,e);-1!=r&&this.callBackList.splice(r,1)}},t.prototype.call=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0!=this.callBackList.length){this.callingRemNum=0;for(var r=0;r<this.callBackList.length;r++)(t=this.callBackList[r]).call.apply(t,a(e));if(this.callingRemNum>0)for(r=0;r<this.callBackList.length;)this.callBackList[r].dirty?this.callBackList.splice(r,1):r++;this.callingRemNum=-1}},t.prototype.includes=function(t,e){return null!=t&&-1!=this.getFunIndex(t,e)},t.prototype.clear=function(){this.callBackList.length>0&&(this.callBackList.length=0)},Object.defineProperty(t.prototype,"count",{get:function(){return this.callBackList.length},enumerable:!1,configurable:!0}),t.prototype.getFunIndex=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return n;return-1},t.prototype.getCallBack=function(t,e){for(var n=0;n<this.callBackList.length;n++)if(this.callBackList[n].isOriginFrom(t,e))return this.callBackList[n];return null},t}();n.Action=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e){t.prototype.call.call(this,e)},e}(s);n.Action1=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n){t.prototype.call.call(this,e,n)},e}(s);n.Action2=l;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.add=function(e,n){t.prototype.add.call(this,e,n)},e.prototype.remove=function(e,n){t.prototype.remove.call(this,e,n)},e.prototype.call=function(e,n,r){t.prototype.call.call(this,e,n,r)},e}(s);n.Action3=f,cc._RF.pop()},{}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"1e35aOjGm5Iv54Fk3OYkaFq","Audio");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("../Utils/Path")),i=r(t("./Loader")),a=function(){function t(){this._audioClipCache=[],this.musicMap={},this.stopEffects=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){cc.audioEngine.setMaxAudioInstance(4)},t.prototype.play=function(t,e,n){e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?i.default.loadRes(t,cc.AudioClip,function(t){cc.audioEngine.play(t,e,n)},null):cc.audioEngine.play(t,e,n)},t.prototype.playEffect=function(t,e,n,r){var o,a=this;e=!!e,n="number"==typeof n?n:this.effectsVolume(),"string"==typeof t?(t=this.getRealAudioPath(t,r),i.default.loadRes(t,cc.AudioClip,function(t){a._audioClipCache.push(t.nativeUrl),cc.audioEngine.play(t,e,n)},null)):(o=t,a._audioClipCache.push(o.nativeUrl),cc.audioEngine.play(o,e,n))},t.prototype.playMusic=function(t,e,n,r){var o=this;if(null==n&&(n=!0),"string"==typeof t)t=this.getRealAudioPath(t,e),i.default.loadRes(t,cc.AudioClip,function(t){var e=cc.audioEngine.playMusic(t,n);o.musicMap[e]||(o.musicMap[e]=!0),r&&cc.audioEngine.setFinishCallback(e,function(){setTimeout(function(){r()},100)})},null);else{var a=cc.audioEngine.playMusic(t,n);this.musicMap[a]||(this.musicMap[a]=!0)}},t.prototype.getRealAudioPath=function(t,e){return e||(e=o.default.AUDIO_BUNDLE),e&&(t=o.default.getBundlePath(t,e)),t},t.prototype.stopMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.stop(e),this.musicMap[t]=!1)}},t.prototype.musicVolume=function(){return cc.audioEngine.getMusicVolume()},t.prototype.effectsVolume=function(){return cc.audioEngine.getEffectsVolume()},t.prototype.setMusicVolume=function(t){this.musicVolume()!=t&&cc.audioEngine.setMusicVolume(t)},t.prototype.setEffectsVolume=function(t){this.effectsVolume()!==t&&cc.audioEngine.setEffectsVolume(t)},t.prototype.pauseMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]&&(cc.audioEngine.pause(e),this.musicMap[t]=!1)}},t.prototype.resumeMusic=function(){for(var t in this.musicMap){var e=parseInt(t);this.musicMap[e]||(cc.audioEngine.resume(e),this.musicMap[t]=!0)}},t.prototype.pauseEffects=function(){this.stopEffects=!0},t.prototype.resumeEffects=function(){this.stopEffects=!1},t._instance=null,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./Loader":"Loader"}],AutoRelease:[function(t,e,n){"use strict";cc._RF.push(e,"f36c6VWTpFCpoymRUusi9x9","AutoRelease");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t){this.prefab=t},e.prototype.onDestroy=function(){},i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],BagData:[function(t,e,n){"use strict";cc._RF.push(e,"b9ff8vwDqxFtJoJgtXMSy2b","BagData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],BagSystem:[function(t,e,n){"use strict";cc._RF.push(e,"fe8813fX39D86IoBJ+ddCHw","BagSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BagSystem=void 0;var s=c(t("../../Module/Database/Db")),u={ItemChanged:"ItemChanged"},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BagSystem",e._dirty=!1,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return this._data=s.default.instance.getData("bag"),this._data||(this._data={version:1,magic:1,items:{}}),[2]})})},e.prototype.logicUpdate=function(){},e.prototype.destroy=function(){},e.prototype.getItemCount=function(t){var e=this._data.items[t];return e?e.count:0},e.prototype.setItemCount=function(t,e){var n=this._data.items[t];n?n.count=e:this._data.items[t]={count:e},this.emit(u.ItemChanged,t,e)},e.prototype.addItemCount=function(t,e){var n=this.getItemCount(t),r=Math.max(0,n+e);this.setItemCount(t,r)},e.prototype.getItem=function(t){return this._data.items[t]},e.prototype.save=function(){this._dirty&&(this._dirty=!1,s.default.instance.setData("bag",this._data))},e._instance=null,e.Events=u,e}(cc.EventTarget);n.BagSystem=l,cc._RF.pop()},{"../../Module/Database/Db":"Db"}],BaseEntity:[function(t,e,n){"use strict";cc._RF.push(e,"a7d56TwhqxPZZEwLIpp0ZKp","BaseEntity");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseEntity=void 0;var s=c(t("../../Module/Loader")),u=t("../../Utils/NodePool"),l=function(t){function e(e,n){var r=t.call(this)||this;return r.uid=e,r.id=n,r}return o(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._avatar.getPosition(cc.v2())},set:function(t){this._avatar.setPosition(t)},enumerable:!1,configurable:!0}),e.prototype.createAvatar=function(t){var e;return i(this,void 0,void 0,function(){var n,r,o,i;return a(this,function(a){switch(a.label){case 0:return n=this.getAssetPath(),r=u.NodePool.instance,(o=r.getNode(n))?(this._avatar=o,[3,3]):[3,1];case 1:return[4,s.default.loadResAsync(n,cc.Prefab,null)];case 2:i=a.sent(),r.tryCreatePool(n,i),this._avatar=r.getNode(n),a.label=3;case 3:return t&&(t.parent&&(this._avatar.parent=t.parent),t.position&&this._avatar.setPosition(t.position)),this._anim=null===(e=this.avatar.getChildByName("img"))||void 0===e?void 0:e.getComponent(cc.Animation),this._animState=null,this.onAvatarReady(),[2]}})})},e.prototype.destroy=function(){null!=this._avatar&&(u.NodePool.instance.putNode(this._avatar),this._avatar=null,this._anim=null,this._animState=null)},e.prototype.setContext=function(t){var e=this;this._context=t,this._entityContext=t.entityManager,this._context.battleSpeed.onValueChange.add(function(t){e._animState&&(e._animState.speed=t)})},e.prototype.playAnim=function(t,e){this._anim?(this._animState=this._anim.play(t),this._animState.speed=this._context.battleSpeed.value,e&&this._anim.on("finished",function(){e&&e()})):e&&e()},e.prototype.stopAnim=function(){this._anim&&(this._anim.stop(),this._animState=null)},e}(cc.EventTarget);n.BaseEntity=l,cc._RF.pop()},{"../../Module/Loader":"Loader","../../Utils/NodePool":"NodePool"}],BaseSystem:[function(t,e,n){"use strict";cc._RF.push(e,"45fd9d1EhtJZqiy+D6TwR6T","BaseSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BaseSystem=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInitData=function(t,e){return void 0===e&&(e=1),t.version=e,t.magic=1,t},e}(cc.EventTarget);n.BaseSystem=i,cc._RF.pop()},{}],BattleEndView:[function(t,e,n){"use strict";cc._RF.push(e,"3255fysJppGGpyIfnMkJ0fS","BattleEndView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Module/ConfigManager"),s=a(t("../Module/Loader")),u=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),f=a(t("../Module/ViewHandler")),p=cc._decorator,h=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelTime=null,e.labelRefresh=null,e.labelScore=null,e.labelHeroScore=null,e.labelConfirm=null,e.rewardNodes=null,e.rewardNode=null,e.dpsNodes=null,e.dpsNode=null,e._callback=null,e._gurads=null,e._rewards=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.battleResult,n=t.cb;this._callback=n,this._gurads=e.damageStats,this._rewards=e.rewards;var r=c.ConfigManager.instance.getLanConfig("ui_success"),o=c.ConfigManager.instance.getLanConfig("ui_failed"),i=c.ConfigManager.instance.getLanConfig("ui_confirm");this.labelTitle.string=1==e.success?r:o,this.labelConfirm.string=i,this.labelScore.string=""+e.score,this.labelHeroScore.string=""+e.heroSoulCount,this.labelTime.string=""+e.timeSec,this.initGuardNode(),this.initRewardNode()},e.prototype.initGuardNode=function(){this.dpsNodes.removeAllChildren();for(var t=Math.min(3,this._gurads.length),e=function(t){var e=n._gurads[t].id,r=cc.instantiate(n.dpsNode);r.parent=n.dpsNodes;var o="guard_"+e+"_name";r.getChildByName("labelName").getComponent(cc.Label).string=c.ConfigManager.instance.getLanConfig(o),r.getChildByName("labelDps").getComponent(cc.Label).string=""+n._gurads[t].damage;var i=r.getChildByName("img").getComponent(cc.Sprite),a=u.default.guardImgPath(e);s.default.loadRes(a,cc.SpriteFrame,function(t){i.spriteFrame=t,l.default.scaleImg(i.node,t,150)},n)},n=this,r=0;r<t;r++)e(r)},e.prototype.initRewardNode=function(){this.rewardNodes.removeAllChildren();for(var t=function(t){var n=e._rewards[t],r=cc.instantiate(e.rewardNode);r.parent=e.rewardNodes,r.getChildByName("labelNum").getComponent(cc.Label).string=""+n.count;var o=r.getChildByName("img").getComponent(cc.Sprite),i=r.getChildByName("imgOutline").getComponent(cc.Sprite),a=u.default.getItemPath(n.id),c=u.default.getItemOutlinePath(n.quality);s.default.loadRes(a,cc.SpriteFrame,function(t){o.spriteFrame=t,l.default.scaleImg(o.node,t,60)},e),s.default.loadRes(c,cc.SpriteFrame,function(t){i.spriteFrame=t,l.default.scaleImg(i.node,t,100)},e)},e=this,n=0;n<this._rewards.length;n++)t(n)},e.prototype.onConfirm=function(){this.close(),this._callback()},i([d(cc.Label)],e.prototype,"labelTitle",void 0),i([d(cc.Label)],e.prototype,"labelTime",void 0),i([d(cc.Label)],e.prototype,"labelRefresh",void 0),i([d(cc.Label)],e.prototype,"labelScore",void 0),i([d(cc.Label)],e.prototype,"labelHeroScore",void 0),i([d(cc.Label)],e.prototype,"labelConfirm",void 0),i([d(cc.Node)],e.prototype,"rewardNodes",void 0),i([d(cc.Prefab)],e.prototype,"rewardNode",void 0),i([d(cc.Node)],e.prototype,"dpsNodes",void 0),i([d(cc.Prefab)],e.prototype,"dpsNode",void 0),i([h],e)}(f.default);n.default=y,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Module/ViewHandler":"ViewHandler","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleFlow:[function(t,e,n){"use strict";cc._RF.push(e,"31da3gE7f5Jma2feLKjHQ3X","BattleFlow");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleFlow=void 0;var o=r(t("lodash")),i=t("../Module/ConfigManager"),a=r(t("../Utils/Utils")),c=function(){function t(t,e){this.tick=0,this.delay=0,this.waveDuration=0,this.totalDuration=0,this.totalSpawnCount=0,this.currentSpawnCount=0,this.config=t,this.flowConfig=i.ConfigManager.instance.getLevelFlowConfig(t.waves[e]),this.delay=t.waveDelay[e],this.waveDuration=t.waveDuration[e],this.totalDuration=this.delay+this.waveDuration,this.totalSpawnCount=this.flowConfig.idArray.reduce(function(t,e){return t+e.enemyCount},0),this.toSpawnEnemys=o.default.cloneDeep(this.flowConfig.idArray)}return t.prototype.tickToGetGenerateEnemy=function(t){return this.tick+=t,this.tick>this.delay&&this.currentSpawnCount<this.totalSpawnCount&&this.tick-this.delay>=this.currentSpawnCount/this.totalSpawnCount*this.waveDuration?this.getRandEnemyId():0},t.prototype.getRandEnemyId=function(){var t=a.default.randomRangeInt(0,this.toSpawnEnemys.length),e=this.toSpawnEnemys[t],n=e.enemyId;return e.enemyCount-=1,e.enemyCount<=0&&this.toSpawnEnemys.splice(t,1),this.currentSpawnCount++,n},t.prototype.isFinish=function(){return this.tick>=this.totalDuration},t}();n.BattleFlow=c,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Utils/Utils":"Utils",lodash:10}],BattleStats:[function(t,e,n){"use strict";cc._RF.push(e,"75e5cy7MapP4obU3fFjbg8F","BattleStats");var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleStats=void 0;var i=function(){function t(){this._id2damage=new Map,this._score=0}return t.prototype.addScore=function(t){this._score+=t},t.prototype.getScore=function(){return this._score},t.prototype.recordDamage=function(t,e){var n=this._id2damage.get(t)||0;n+=e,this._id2damage.set(t,n)},t.prototype.clear=function(){this._score=0,this._id2damage.clear()},t.prototype.getDamage=function(t){return this._id2damage.get(t)||0},t.prototype.getAllDamages=function(){var t,e,n=[];try{for(var i=r(this._id2damage.entries()),a=i.next();!a.done;a=i.next()){var c=o(a.value,2),s=c[0],u=c[1];n.push({id:s,damage:u})}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t}();n.BattleStats=i,cc._RF.pop()},{}],BattleSystem:[function(t,e,n){"use strict";cc._RF.push(e,"55aedCHnDZOKblLTS9rkiyl","BattleSystem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.BattleSystem=void 0;var s=t("../../Module/ConfigManager"),u=c(t("../../Module/ViewModule")),l=c(t("../../Utils/Path")),f=t("../Battle"),p={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="BattleSystem",e._curLevel=1,e}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.logicUpdate=function(t){this._battle&&this._battle.update(t)},e.prototype.destroy=function(){},e.prototype.startBattle=function(t){return i(this,void 0,void 0,function(){var e;return a(this,function(){return this._battle&&this._battle.destroy(),this._curLevel=t,e=s.ConfigManager.instance.getLevelConfig(this._curLevel),this._battle=new f.Battle(e),this._battle.on(f.Battle.Events.BattleEnd,this.onBattleEnd,this),u.default.instance.pushView("BattleView",this._battle,{bundle:l.default.BATTLE_BUNDLE,onLoaded:this.onBattleViewLoaded.bind(this)}),[2]})})},e.prototype.onBattleViewLoaded=function(t){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.emit(p.BattleStart,this._curLevel),this._battleView=t,this._battle.setView(t),[4,this._battle.load()];case 1:return e.sent(),this._battle.startBattle(),[2]}})})},e.prototype.onBattleEnd=function(){this._battleView&&(this._battleView.close(),this._battleView=null),this._battle&&(this._battle.destroy(),this._battle=null),this.emit(p.BattleEnd)},e._instance=null,e.Events=p,e}(cc.EventTarget);n.BattleSystem=h,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path","../Battle":"Battle"}],BattleUI:[function(t,e,n){"use strict";cc._RF.push(e,"b7d567lHMFEsJYlLRg3HeIz","BattleUI");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Gameplay/Entity/EntityManager"),s=t("../Gameplay/Entity/Player"),u=a(t("../Module/Loader")),l=a(t("../Utils/Path")),f=a(t("../Utils/Utils")),p=cc._decorator,h=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSpeedUp=null,e.hpBar=null,e.hpLabel=null,e.expBar=null,e.expLabel=null,e.labelSpeed=null,e.rightInfoNode=null,e.guardNode=null,e._guardNode={},e}return o(e,t),e.prototype.init=function(t){var e=this;this.battleContext=t,this.entityManager=t.entityManager;var n=this.entityManager.getPlayer();this.hpBar.progress=1,this.hpLabel.string=n.hp+"/"+n.maxHp,n.on(s.Player.Events.Hp,function(t,n){e.hpBar.progress=cc.misc.clamp01(t/n),e.hpLabel.string=t+"/"+n}),this.expBar.progress=0,this.expLabel.string=n.exp+"/"+n.upgradeExp,n.on(s.Player.Events.Exp,function(t,n){e.expBar.progress=cc.misc.clamp01(t/n),e.expLabel.string=t+"/"+n}),this.btnSpeedUp.node.targetOff(this),this.btnSpeedUp.node.on("click",function(){var t=e.battleContext.battleSpeed.value;(t+=1)>3&&(t=1),e.battleContext.battleSpeed.value=t,e.labelSpeed.string="x"+t},this),this.entityManager.on(c.EntityManager.Events.GuardCreate,this.onGuardCreate,this),this.entityManager.on(c.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this)},e.prototype.onGuardCreate=function(t){var e={count:1,type:t.type,node:null};this._guardNode[t.id]?this._guardNode[t.id].count++:this._guardNode[t.id]=e;var n=this._guardNode[t.id],r=null;if(n.node)r=this._guardNode[t.id].node;else{(r=cc.instantiate(this.guardNode)).parent=this.rightInfoNode,n.node=r;var o=l.default.guardImgPath(t.id),i=r.getChildByName("img").getComponent(cc.Sprite);u.default.loadRes(o,cc.SpriteFrame,function(t){i.spriteFrame=t,f.default.scaleImg(i.node,t,40)},this)}var a=r.getChildByName("num");a.active=n.count>0,n.count>0&&(a.getComponent(cc.Label).string="x"+n.count)},e.prototype.onGuardDestroy=function(t){this._guardNode[t.id].count--,this._guardNode[t.id].count<=0?(this._guardNode[t.id].node.removeFromParent(),this._guardNode[t.id].node.destroy(),delete this._guardNode[t.id]):this._guardNode[t.id].node.getChildByName("num").getComponent(cc.Label).string="x"+this._guardNode[t.id].count},i([d(cc.Button)],e.prototype,"btnSpeedUp",void 0),i([d(cc.ProgressBar)],e.prototype,"hpBar",void 0),i([d(cc.Label)],e.prototype,"hpLabel",void 0),i([d(cc.ProgressBar)],e.prototype,"expBar",void 0),i([d(cc.Label)],e.prototype,"expLabel",void 0),i([d(cc.Label)],e.prototype,"labelSpeed",void 0),i([d(cc.Node)],e.prototype,"rightInfoNode",void 0),i([d(cc.Prefab)],e.prototype,"guardNode",void 0),i([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../Gameplay/Entity/EntityManager":"EntityManager","../Gameplay/Entity/Player":"Player","../Module/Loader":"Loader","../Utils/Path":"Path","../Utils/Utils":"Utils"}],BattleView:[function(t,e,n){"use strict";cc._RF.push(e,"1fee5/11r9LKLgHc96Xh8Ju","BattleView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=a(t("../../Enum/ViewType")),s=a(t("../../Module/ViewHandler")),u=a(t("../../Module/ViewModule")),l=a(t("../../UI/BattleUI")),f=a(t("../../Utils/Path")),p=cc._decorator,h=p.ccclass,d=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=c.default.Normal,e.battleRoot=null,e.battleUI=null,e.btnPause=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.initiateView=function(t){this.battle=t,this.btnPause.targetOff(this),this.btnPause.on("click",this.onPause,this)},e.prototype.showBattleEndView=function(t,e){u.default.instance.pushView("BattleEndView",{battleResult:t,cb:e},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.showUpgradeView=function(t,e,n){u.default.instance.pushView("UpgradeView",{entityManager:t,upgradeConfig:e,onClose:n},{bundle:f.default.BATTLE_BUNDLE})},e.prototype.onPause=function(){var t=this;this.battle.pause(),u.default.instance.pushView("SettingView",{cb:function(){t.battle.resume()}},{bundle:f.default.BATTLE_BUNDLE})},i([d(cc.Node)],e.prototype,"battleRoot",void 0),i([d(l.default)],e.prototype,"battleUI",void 0),i([d(cc.Node)],e.prototype,"btnPause",void 0),i([h],e)}(s.default);n.default=y,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Module/ViewHandler":"ViewHandler","../../Module/ViewModule":"ViewModule","../../UI/BattleUI":"BattleUI","../../Utils/Path":"Path"}],Battle:[function(t,e,n){"use strict";cc._RF.push(e,"06a7fEU4HxFHYDug+xd+cR1","Battle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Battle=void 0;var f=l(t("../Component/Terrain/Terrain")),p=t("../Module/ConfigManager"),h=t("../Interface/Config/UpgradeConfig"),d=l(t("../Module/Loader")),y=l(t("../Utils/Utils")),_=l(t("../Utils/Path")),g=t("./BattleFlow"),v=t("./Entity/EntityManager"),m=t("../Utils/Property"),b=l(t("./GameDefine")),w=t("./BattleStats"),S={BattleStart:"BattleStart",BattleEnd:"BattleEnd"},C=function(t){function e(e){var n=t.call(this)||this;return n.battleSpeed=new m.ReactNumber(1),n.isPlaying=!1,n.battleTick=0,n.enemyFlowIndex=0,n.config=e,n}return o(e,t),e.prototype.setView=function(t){this.battleView=t},e.prototype.load=function(){return i(this,void 0,void 0,function(){var t,e,n,r;return a(this,function(o){switch(o.label){case 0:return[4,d.default.loadResAsync(_.default.getLevelPath(this.config.asset),cc.Prefab,null)];case 1:return t=o.sent(),(e=cc.instantiate(t)).parent=this.battleView.battleRoot,this.terrain=e.getComponent(f.default),this.terrain.init(),this.battleStats=new w.BattleStats,(n=this.entityManager=new v.EntityManager(this)).on(v.EntityManager.Events.GuardCreate,this.onGuardCreate,this),n.on(v.EntityManager.Events.GuardDestroy,this.onGuardDestroy,this),r={hp:500,maxLevel:10,upgradeExp:[10,20,50,100,200,200,200,200,200,200]},[4,(this.player=this.entityManager.createPlayer(r)).createAvatar({parent:e,position:this.terrain.playerPosition})];case 2:return o.sent(),this.battleView.battleUI.init(this),[2]}})})},e.prototype.startBattle=function(){this.emit(S.BattleStart),cc.director.getCollisionManager().enabled=!0,this.isPlaying=!0,this.battleTick=0,this.enemyFlowIndex=0,this.createFlow(),this.entityManager.createGuard(b.default.InitGuardId)},e.prototype.createFlow=function(){this.currentFlow=new g.BattleFlow(this.config,this.enemyFlowIndex),cc.log("\u5f00\u59cb\u65b0\u6ce2\u6b21\uff1a "+this.enemyFlowIndex)},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.resume=function(){this.isPlaying=!0},e.prototype.update=function(t){var e,n,r,o,i,a;if(this.isPlaying&&null!=this.player){if(this.player.canUpgrade()&&(this.player.upgrade(),this.showUpgradeAndPause()),t*=this.battleSpeed.value,this.battleTick+=t,this.currentFlow){var s=this.currentFlow.tickToGetGenerateEnemy(t);if(s>0){var u=this.entityManager.createEnemy(s);u.setConfigFactors(this.config.hpFactor,this.config.atkFactor,this.config.speedFactor),u.createAvatar({parent:this.terrain.node,position:this.terrain.getRandEnemyPos()})}this.currentFlow.isFinish()&&(this.enemyFlowIndex+=1,this.enemyFlowIndex<this.config.waves.length?this.createFlow():this.currentFlow=null)}try{for(var l=c(this.entityManager.getAllGuards().values()),f=l.next();!f.done;f=l.next())f.value.update(t)}catch(v){e={error:v}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}try{for(var p=c(this.entityManager.getAllBullets().values()),h=p.next();!h.done;h=p.next())h.value.update(t)}catch(m){r={error:m}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}try{for(var d=c(this.entityManager.getAllEnemies().values()),y=d.next();!y.done;y=d.next())y.value.update(t)}catch(b){i={error:b}}finally{try{y&&!y.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}if(!this.player.isAlive()||!this.currentFlow&&0===this.entityManager.getAllEnemies().size){var _=this.battleStats.getAllDamages();_.sort(function(t,e){return e.damage-t.damage});var g={success:this.player.isAlive(),timeSec:Math.ceil(this.battleTick),score:this.battleStats.getScore(),heroSoulCount:1,damageStats:_,rewards:[{id:1,count:1,quality:1},{id:2,count:2,quality:1}]};this.finishBattle(g)}}},e.prototype.showUpgradeAndPause=function(){this.pause(),this.battleView.showUpgradeView(this.entityManager,this.randomUpgradeOptions(),this.resume.bind(this))},e.prototype.randomUpgradeOptions=function(){var t,e,n,r,o,i,a,s,l=[],f=Array.from(this.entityManager.getAllGuards().values()),d=y.default.createMultiMap(f,function(t){return[t.id,t]}),_=y.default.createMultiMap(f,function(t){return[t.type,t]}),g=[],v=[],m=p.ConfigManager.instance.getGuardConfigs();try{for(var b=c(m.values()),w=b.next();!w.done;w=b.next()){var S=w.value;if(null==S.summonCondition)g.push(S);else{var C=!0;try{for(var M=(n=void 0,c(S.summonCondition)),E=M.next();!E.done;E=M.next()){var P=E.value,O=P.guardId,R=P.guardType,A=P.count;if(O){if(d.has(O)&&d.get(O).length>=A)continue;C=!1;break}if(!(_.has(R)&&_.get(R).length>=A)){C=!1;break}}}catch(G){n={error:G}}finally{try{E&&!E.done&&(r=M.return)&&r.call(M)}finally{if(n)throw n.error}}C&&v.push(S)}}}catch(z){t={error:z}}finally{try{w&&!w.done&&(e=b.return)&&e.call(b)}finally{if(t)throw t.error}}var x=g.concat(v),B=[];if(3==x.length)B=x;else if(x.length>3)for(var N=0;N<3;N++){var j=y.default.randomRangeInt(0,x.length);B.push(x[j]),x.splice(j,1)}else for(B=x;B.length<3;)B.push(y.default.randomSelect(g));try{for(var T=c(B),I=T.next();!I.done;I=T.next()){var L=I.value;if(null==L.summonCondition)l.push({type:h.UpgradeType.SummonGuard,guardId:L.id});else{var k=[];try{for(var D=(a=void 0,c(L.summonCondition)),U=D.next();!U.done;U=D.next()){var F=U.value,V=(O=F.guardId,R=F.guardType,A=F.count,O?d.get(O):_.get(R));if(A===V.length)k.push.apply(k,u(V));else for(N=0;N<A;++N)j=y.default.randomRangeInt(0,V.length),k.push(V[j]),V.splice(j,1)}}catch(H){a={error:H}}finally{try{U&&!U.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}l.push({type:h.UpgradeType.UpgradeGuard,guardId:L.id,destroyUids:k.map(function(t){return t.uid})})}}}catch(W){o={error:W}}finally{try{I&&!I.done&&(i=T.return)&&i.call(T)}finally{if(o)throw o.error}}return{upgradeOptions:l}},e.prototype.finishBattle=function(t){var e=this;this.pause(),cc.director.getCollisionManager().enabled=!1,this.battleView.showBattleEndView(t,function(){e.emit(S.BattleEnd)})},e.prototype.destroy=function(){this.entityManager.clear(),this.terrain&&(this.terrain.node.destroy(),this.terrain=null),cc.director.getCollisionManager().enabled=!1},e.prototype.onGuardCreate=function(t){return i(this,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return(e=this.terrain.guardSpawnPosition).addSelf(cc.v2(y.default.randomRange(-200,200),0)),[4,t.createAvatar({parent:this.terrain.node,position:e})];case 1:return n.sent(),[2]}})})},e.prototype.onGuardDestroy=function(){},e.prototype.onPlayerCreate=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.onEnemyCreate=function(){return i(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.Events=S,e}(cc.EventTarget);n.Battle=C,cc._RF.pop()},{"../Component/Terrain/Terrain":"Terrain","../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Utils/Path":"Path","../Utils/Property":"Property","../Utils/Utils":"Utils","./BattleFlow":"BattleFlow","./BattleStats":"BattleStats","./Entity/EntityManager":"EntityManager","./GameDefine":"GameDefine"}],BulletConfig:[function(t,e,n){"use strict";cc._RF.push(e,"35cb5TnC3RFGrK0IXJpphOd","BulletConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Bullet:[function(t,e,n){"use strict";cc._RF.push(e,"8a46162XRFEuZAPPyC17BFo","Bullet");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Bullet=void 0;var a=i(t("../../Component/Gameplay/CollisionWrapper")),c=i(t("../../Component/Gameplay/EntityTag")),s=t("../../Module/ConfigManager"),u=i(t("../../Utils/Path")),l=i(t("../../Utils/Utils")),f=t("./BaseEntity"),p=t("./Enemy"),h=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.config=s.ConfigManager.instance.getBulletConfig(r.id),r}return o(e,t),e.prototype.onAvatarReady=function(){var t=this.avatar.getComponent(cc.Collider);l.default.getOrAddComponent(t.node,c.default).entity=this;var e=l.default.getOrAddComponent(t.node,a.default);e.onEnter.clear(),e.onEnter.add(this.onCollisionEnter,this),this.avatar.zIndex=3e3},e.prototype.getAssetPath=function(){return u.default.getEntityPath(this.config.asset)},e.prototype.update=function(t){if(this.avatar){if(this.trackTarget){var n=this.direction=this.trackTarget.avatar.getPosition(cc.v2()).sub(this.position);n.normalizeSelf(),n.mulSelf(t),n.addSelf(this.position),this.position=n}else{var r=this.direction.mul(t*this.config.moveSpeed);r.addSelf(this.position),this.position=r}var o=l.default.directionToAngle(this.direction);this.avatar.angle=o-e.BulletInitRotation;var i=this.position;(Math.abs(i.x)>500||Math.abs(i.y)>800)&&this._context.entityManager.removeBullet(this.uid)}},e.prototype.onCollisionEnter=function(t){var e=t.node.getComponent(c.default);null!=e.entity?e.entity instanceof p.Enemy?(e.entity.hurt(this.config.attack,this.owner),this._context.entityManager.removeBullet(this.uid)):cc.error("[Bullet] onCollision, other entity is not Enemy: "+e.entity):cc.error("[Bullet] onCollision, other entity is null")},e.prototype.toString=function(){return"Bullet: "+this.config.name+"["+this.uid+"]"},e.BulletInitRotation=90,e}(f.BaseEntity);n.Bullet=h,cc._RF.pop()},{"../../Component/Gameplay/CollisionWrapper":"CollisionWrapper","../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./BaseEntity":"BaseEntity","./Enemy":"Enemy"}],BusyCircle:[function(t,e,n){"use strict";cc._RF.push(e,"f4b47t7xEdBQbt6zGoOWzCc","BusyCircle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstTile=null,e.tiles=12,e.minOpacity=120,e.startColor=cc.Color.GRAY,e.endColor=cc.Color.WHITE,e}return o(e,t),e.prototype.onLoad=function(){var t=360/this.tiles,e=this.firstTile.parent,n=this.firstTile;n.angle=0,n.opacity=255;for(var r=[n],o=n.getPosition(),i=1;i<this.tiles;++i)(a=cc.instantiate(this.firstTile)).parent=e,a.setPosition(o),a.angle=i*t,r.push(a);for(i=0;i<r.length;++i){var a=r[i],c=i/r.length,s=1*(1-c),u=cc.Color.lerp(cc.color(),this.startColor,this.endColor,c);a.color=u,cc.tween(a).to(s,{color:this.endColor}).sequence(cc.tween().set({color:this.startColor}),cc.tween().to(1,{color:this.endColor})).repeatForever().start()}},i([s(cc.Node)],e.prototype,"firstTile",void 0),i([s],e.prototype,"tiles",void 0),i([s],e.prototype,"minOpacity",void 0),i([s(cc.Color)],e.prototype,"startColor",void 0),i([s(cc.Color)],e.prototype,"endColor",void 0),i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],BusyView:[function(t,e,n){"use strict";cc._RF.push(e,"d1a76Dp/xdNSqN/w5aQFq3Z","BusyView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var u=s(t("../../../Module/Loader")),l=s(t("../../../Utils/Path")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circlePrefab=null,e}var n;return o(e,t),n=e,e.show=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(r){switch(r.label){case 0:return this._isLoading?(this._show=!0,[2]):(this._show=!0,cc.isValid(this._node)?[3,2]:(this._isLoading=!0,[4,u.default.loadPrefabAsync(l.default.viewPath("BusyView"),null)]));case 1:t=r.sent(),this._isLoading=!1,this._node=cc.instantiate(t),e=cc.Canvas.instance,this._node.parent=e.node,r.label=2;case 2:return this._show?this._node.getComponent(n).show():this._node.getComponent(n).hide(),[2]}})})},e.hide=function(){this._isLoading?this._show=!1:cc.isValid(this._node)&&this._node.getComponent(n).hide()},e.prototype.show=function(){this.node.active=!0,this._circle||(this._circle=cc.instantiate(this.circlePrefab),this._circle.parent=this.node)},e.prototype.hide=function(){this._circle&&(this._circle.destroy(),this._circle=null),this.node.active=!1},e._isLoading=!1,e._show=!1,i([h(cc.Prefab)],e.prototype,"circlePrefab",void 0),n=i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Module/Loader":"Loader","../../../Utils/Path":"Path"}],ClawGuideType:[function(t,e,n){"use strict";cc._RF.push(e,"1a2a5jnX8RGx64Tpo4mUf2Q","ClawGuideType"),Object.defineProperty(n,"__esModule",{value:!0}),n.ClawGuideType=void 0,function(t){t[t.TREASURE_PROGRESS=0]="TREASURE_PROGRESS",t[t.NPC_PROGRESS=1]="NPC_PROGRESS",t[t.COOK_SPEED_UP=2]="COOK_SPEED_UP",t[t.BUILDING_UPGRADE=3]="BUILDING_UPGRADE",t[t.HUNGRY_SALE=4]="HUNGRY_SALE",t[t.BUILDING_SKIN=5]="BUILDING_SKIN",t[t.GUEST_ORDER=6]="GUEST_ORDER",t[t.TIME_RESEARCH_SUCCESS_RATE=7]="TIME_RESEARCH_SUCCESS_RATE",t[t.OPEN_STATUE=8]="OPEN_STATUE"}(n.ClawGuideType||(n.ClawGuideType={})),cc._RF.pop()},{}],CollisionWrapper:[function(t,e,n){"use strict";cc._RF.push(e,"2b006x3fI5HCI8wS6ie8LKH","CollisionWrapper");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Utils/Action"),c=cc._decorator,s=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onEnter=new a.Action2,e.onStay=new a.Action2,e.onExit=new a.Action2,e}return o(e,t),e.prototype.onCollisionEnter=function(t,e){this.onEnter.call(t,e)},e.prototype.onCollisionStay=function(t,e){this.onStay.call(t,e)},e.prototype.onCollisionExit=function(t,e){this.onExit.call(t,e)},i([s],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Utils/Action":"Action"}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"a9839GlDRJEL6lLAOb/Ez4w","Common"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ConfigManager:[function(t,e,n){"use strict";cc._RF.push(e,"4233ecUPplERpCUvnSrTMTZ","ConfigManager");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigManager=void 0;var o=r(t("./Loader")),i=r(t("../Utils/Path")),a=t("../Interface/Config/LanConfig"),c=function(){function t(){this._allConfigMap=null,this._guardMap=new Map,this._bulletMap=new Map,this._enemyMap=new Map,this._levelMap=new Map,this._levelFlowMap=new Map,this._lanMap=new Map,this._lanType=a.LanType.cn}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;return new Promise(function(e){o.default.loadRes(i.default.getConfigPath(),cc.JsonAsset,function(n){t._allConfigMap=n.json,t.initConfig("Guard",t._guardMap),t.initConfig("Bullet",t._bulletMap),t.initConfig("Enemy",t._enemyMap),t.initConfig("Level",t._levelMap),t.initConfig("LevelFlow",t._levelFlowMap),t.initLanConfig("Lan",t._lanMap),e()},null)})},t.prototype.initLanConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var r in n){var o=r;e.set(o,n[r])}}},t.prototype.initConfig=function(t,e){if(e.clear(),t in this._allConfigMap){var n=this._allConfigMap[t];for(var r in n){var o=+r;e.set(o,n[r])}}},t.prototype.getConfig=function(t){return this._allConfigMap[t]},t.prototype.addGuardConfig=function(t){this._guardMap.set(t.id,t)},t.prototype.addEnemyConfig=function(t){this._enemyMap.set(t.id,t)},t.prototype.getGuardConfigs=function(){return this._guardMap},t.prototype.getGuardConfig=function(t){return this._guardMap.get(t)},t.prototype.getBulletConfig=function(t){return this._bulletMap.get(t)},t.prototype.getEnemyConfig=function(t){return this._enemyMap.get(t)},t.prototype.getLanConfig=function(t){return this._lanMap.get(t)[this._lanType]},t.prototype.getLevelConfigs=function(){return this._levelMap},t.prototype.getLevelConfig=function(t){return this._levelMap.get(t)},t.prototype.getLevelFlowConfig=function(t){return this._levelFlowMap.get(t)},t}();n.ConfigManager=c,cc._RF.pop()},{"../Interface/Config/LanConfig":"LanConfig","../Utils/Path":"Path","./Loader":"Loader"}],CryptoJsMini:[function(t,e,n){"use strict";cc._RF.push(e,"be65azbMBxNgqaDC+gP74Or","CryptoJsMini");var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),t("crypto-js/aes"),t("crypto-js/md5");var a=i(t("crypto-js/core"));n.default=a,cc._RF.pop()},{"crypto-js/aes":1,"crypto-js/core":3,"crypto-js/md5":7}],1:[function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.BlockCipher,r=e.algo,o=[],i=[],a=[],c=[],s=[],u=[],l=[],f=[],p=[],h=[];(function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var d=r^r<<1^r<<2^r<<3^r<<4;d=d>>>8^255&d^99,o[n]=d,i[d]=n;var y=t[n],_=t[y],g=t[_],v=257*t[d]^16843008*d;a[n]=v<<24|v>>>8,c[n]=v<<16|v>>>16,s[n]=v<<8|v>>>24,u[n]=v,v=16843009*g^65537*_^257*y^16843008*n,l[d]=v<<24|v>>>8,f[d]=v<<16|v>>>16,p[d]=v<<8|v>>>24,h[d]=v,n?(n=y^t[t[t[g^y]]],r^=t[t[r]]):n=r=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)a<n?i[a]=e[a]:(u=i[a-1],a%n?n>6&&a%n==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=o[(u=u<<8|u>>>24)>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=d[a/n|0]<<24),i[a]=i[a-n]^u);for(var c=this._invKeySchedule=[],s=0;s<r;s++){if(a=r-s,s%4)var u=i[a];else u=i[a-4];c[s]=s<4||a<=4?u:l[o[u>>>24]]^f[o[u>>>16&255]]^p[o[u>>>8&255]]^h[o[255&u]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,c,s,u,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,f,p,h,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,a,c){for(var s=this._nRounds,u=t[e]^n[0],l=t[e+1]^n[1],f=t[e+2]^n[2],p=t[e+3]^n[3],h=4,d=1;d<s;d++){var y=r[u>>>24]^o[l>>>16&255]^i[f>>>8&255]^a[255&p]^n[h++],_=r[l>>>24]^o[f>>>16&255]^i[p>>>8&255]^a[255&u]^n[h++],g=r[f>>>24]^o[p>>>16&255]^i[u>>>8&255]^a[255&l]^n[h++],v=r[p>>>24]^o[u>>>16&255]^i[l>>>8&255]^a[255&f]^n[h++];u=y,l=_,f=g,p=v}y=(c[u>>>24]<<24|c[l>>>16&255]<<16|c[f>>>8&255]<<8|c[255&p])^n[h++],_=(c[l>>>24]<<24|c[f>>>16&255]<<16|c[p>>>8&255]<<8|c[255&u])^n[h++],g=(c[f>>>24]<<24|c[p>>>16&255]<<16|c[u>>>8&255]<<8|c[255&l])^n[h++],v=(c[p>>>24]<<24|c[u>>>16&255]<<16|c[l>>>8&255]<<8|c[255&f])^n[h++],t[e]=y,t[e+1]=_,t[e+2]=g,t[e+3]=v},keySize:8});e.AES=n._createHelper(y)}(),t.AES},"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(this.CryptoJS)},{"./cipher-core":2,"./core":3,"./enc-base64":4,"./evpkdf":5,"./md5":7}],2:[function(t,e,n){var r;r=function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,o=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,c=n.enc,s=(c.Utf8,c.Base64),u=n.algo.EvpKDF,l=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?m:g}return function(e){return{encrypt:function(n,r,o){return t(r).encrypt(e,n,r,o)},decrypt:function(n,r,o){return t(r).decrypt(e,n,r,o)}}}}()}),f=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),h=f.CBC=function(){var t=p.extend();function n(t,n,r){var o,i=this._iv;i?(o=i,this._iv=e):o=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize;n.call(this,t,e,o),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+o)}}),t.Decryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize,i=t.slice(e,e+o);r.decryptBlock(t,e),n.call(this,t,e,o),this._prevBlock=i}}),t}(),d=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],c=0;c<r;c+=4)a.push(o);var s=i.create(a,r);t.concat(s)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:d}),reset:function(){var t;l.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),_=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(e):e).toString(s)},parse:function(t){var e,n=s.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),y.create({ciphertext:n,salt:e})}},g=r.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r),i=o.finalize(e),a=o.cfg;return y.create({ciphertext:i,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),v=(n.kdf={}).OpenSSL={execute:function(t,e,n,r,o){if(r||(r=i.random(8)),o)a=u.create({keySize:e+n,hasher:o}).compute(t,r);else var a=u.create({keySize:e+n}).compute(t,r);var c=i.create(a.words.slice(e),4*n);return a.sigBytes=4*e,y.create({key:a,iv:c,salt:r})}},m=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(t,e,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize,r.salt,r.hasher);r.iv=o.iv;var i=g.encrypt.call(this,t,e,o.key,r);return i.mixIn(o),i},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var o=r.kdf.execute(n,t.keySize,t.ivSize,e.salt,r.hasher);return r.iv=o.iv,g.decrypt.call(this,t,e,o.key,r)}})}()},"object"==typeof n?e.exports=n=r(t("./core"),t("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],r):r(this.CryptoJS)},{"./core":3,"./evpkdf":5}],3:[function(t,e,n){(function(r){var o;o=function(){var e=e||function(e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==r&&r.crypto&&(n=r.crypto),!n&&"function"==typeof t)try{n=t("crypto")}catch(_){}var o=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(_){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(_){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},c=a.lib={},s=c.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var c=0;c<o;c+=4)e[r+c>>>2]=n[c>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(o());return new u.init(e,t)}}),l=a.enc={},f=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(n,e/2)}},p=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},d=c.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,c=i/(4*a),s=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*a,l=e.min(4*s,i);if(s){for(var f=0;f<s;f+=a)this._doProcessBlock(o,f);n=o.splice(0,s),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(c.Hasher=d.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math);return e},"object"==typeof n?e.exports=n=o():"function"==typeof define&&define.amd?define([],o):this.CryptoJS=o()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:11}],4:[function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.WordArray;function r(t,e,r){for(var o=[],i=0,a=0;a<e;a++)if(a%4){var c=r[t.charCodeAt(a-1)]<<a%4*2|r[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=c<<24-i%4*8,i++}return n.create(o,i)}e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)o.push(r.charAt(a>>>6*(3-c)&63));var s=r.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var c=t.indexOf(a);-1!==c&&(e=c)}return r(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],5:[function(t,e,n){var r;r=function(t){var e,n,r,o,i,a,c;return r=(n=(e=t).lib).Base,o=n.WordArray,a=(i=e.algo).MD5,c=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),a=o.create(),c=a.words,s=r.keySize,u=r.iterations;c.length<s;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*s,a}}),e.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},t.EvpKDF},"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(this.CryptoJS)},{"./core":3,"./hmac":6,"./sha1":8}],6:[function(t,e,n){var r;r=function(t){var e,n,r;n=(e=t).lib.Base,r=e.enc.Utf8,e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,o=4*n;e.sigBytes>o&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),c=i.words,s=a.words,u=0;u<n;u++)c[u]^=1549556828,s[u]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],7:[function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,c=[];(function(){for(var t=0;t<64;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0})();var s=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,o=t[r];t[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=t[e+0],s=t[e+1],h=t[e+2],d=t[e+3],y=t[e+4],_=t[e+5],g=t[e+6],v=t[e+7],m=t[e+8],b=t[e+9],w=t[e+10],S=t[e+11],C=t[e+12],M=t[e+13],E=t[e+14],P=t[e+15],O=i[0],R=i[1],A=i[2],x=i[3];O=u(O,R,A,x,a,7,c[0]),x=u(x,O,R,A,s,12,c[1]),A=u(A,x,O,R,h,17,c[2]),R=u(R,A,x,O,d,22,c[3]),O=u(O,R,A,x,y,7,c[4]),x=u(x,O,R,A,_,12,c[5]),A=u(A,x,O,R,g,17,c[6]),R=u(R,A,x,O,v,22,c[7]),O=u(O,R,A,x,m,7,c[8]),x=u(x,O,R,A,b,12,c[9]),A=u(A,x,O,R,w,17,c[10]),R=u(R,A,x,O,S,22,c[11]),O=u(O,R,A,x,C,7,c[12]),x=u(x,O,R,A,M,12,c[13]),A=u(A,x,O,R,E,17,c[14]),O=l(O,R=u(R,A,x,O,P,22,c[15]),A,x,s,5,c[16]),x=l(x,O,R,A,g,9,c[17]),A=l(A,x,O,R,S,14,c[18]),R=l(R,A,x,O,a,20,c[19]),O=l(O,R,A,x,_,5,c[20]),x=l(x,O,R,A,w,9,c[21]),A=l(A,x,O,R,P,14,c[22]),R=l(R,A,x,O,y,20,c[23]),O=l(O,R,A,x,b,5,c[24]),x=l(x,O,R,A,E,9,c[25]),A=l(A,x,O,R,d,14,c[26]),R=l(R,A,x,O,m,20,c[27]),O=l(O,R,A,x,M,5,c[28]),x=l(x,O,R,A,h,9,c[29]),A=l(A,x,O,R,v,14,c[30]),O=f(O,R=l(R,A,x,O,C,20,c[31]),A,x,_,4,c[32]),x=f(x,O,R,A,m,11,c[33]),A=f(A,x,O,R,S,16,c[34]),R=f(R,A,x,O,E,23,c[35]),O=f(O,R,A,x,s,4,c[36]),x=f(x,O,R,A,y,11,c[37]),A=f(A,x,O,R,v,16,c[38]),R=f(R,A,x,O,w,23,c[39]),O=f(O,R,A,x,M,4,c[40]),x=f(x,O,R,A,a,11,c[41]),A=f(A,x,O,R,d,16,c[42]),R=f(R,A,x,O,g,23,c[43]),O=f(O,R,A,x,b,4,c[44]),x=f(x,O,R,A,C,11,c[45]),A=f(A,x,O,R,P,16,c[46]),O=p(O,R=f(R,A,x,O,h,23,c[47]),A,x,a,6,c[48]),x=p(x,O,R,A,v,10,c[49]),A=p(A,x,O,R,E,15,c[50]),R=p(R,A,x,O,_,21,c[51]),O=p(O,R,A,x,C,6,c[52]),x=p(x,O,R,A,d,10,c[53]),A=p(A,x,O,R,w,15,c[54]),R=p(R,A,x,O,s,21,c[55]),O=p(O,R,A,x,m,6,c[56]),x=p(x,O,R,A,P,10,c[57]),A=p(A,x,O,R,g,15,c[58]),R=p(R,A,x,O,M,21,c[59]),O=p(O,R,A,x,y,6,c[60]),x=p(x,O,R,A,S,10,c[61]),A=p(A,x,O,R,h,15,c[62]),R=p(R,A,x,O,b,21,c[63]),i[0]=i[0]+O|0,i[1]=i[1]+R|0,i[2]=i[2]+A|0,i[3]=i[3]+x|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var c=this._hash,s=c.words,u=0;u<4;u++){var l=s[u];s[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return c},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function u(t,e,n,r,o,i,a){var c=t+(e&n|~e&r)+o+a;return(c<<i|c>>>32-i)+e}function l(t,e,n,r,o,i,a){var c=t+(e&r|n&~r)+o+a;return(c<<i|c>>>32-i)+e}function f(t,e,n,r,o,i,a){var c=t+(e^n^r)+o+a;return(c<<i|c>>>32-i)+e}function p(t,e,n,r,o,i,a){var c=t+(n^(e|~r))+o+a;return(c<<i|c>>>32-i)+e}n.MD5=i._createHelper(s),n.HmacMD5=i._createHmacHelper(s)}(Math),t.MD5},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],8:[function(t,e,n){var r;r=function(t){var e,n,r,o,i,a,c;return n=(e=t).lib,r=n.WordArray,o=n.Hasher,i=e.algo,a=[],c=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],c=n[3],s=n[4],u=0;u<80;u++){if(u<16)a[u]=0|t[e+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+s+a[u];f+=u<20?1518500249+(o&i|~o&c):u<40?1859775393+(o^i^c):u<60?(o&i|o&c|i&c)-1894007588:(o^i^c)-899497514,s=c,c=i,i=o<<30|o>>>2,o=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+c|0,n[4]=n[4]+s|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=o._createHelper(c),e.HmacSHA1=o._createHmacHelper(c),t.SHA1},"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(this.CryptoJS)},{"./core":3}],9:[function(t,e){"use strict";function n(t,e){e=e||{},this._capacity=e.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}n.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var n=this.size();if(!(e>=n||e<-n))return e<0&&(e+=n),e=this._head+e&this._capacityMask,this._list[e]}},n.prototype.get=function(t){return this.peekAt(t)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(t){if(0===arguments.length)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},n.prototype.push=function(t){if(0===arguments.length)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),n}},n.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(e>=n||e<-n)){e<0&&(e+=n),e=this._head+e&this._capacityMask;var o,i=this._list[e];if(t<n/2){for(o=t;o>0;o--)this._list[e]=this._list[e=e-1+r&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(o=n-1-t;o>0;o--)this._list[e]=this._list[e=e+1+r&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+r&this._capacityMask}return i}}},n.prototype.remove=function(t,e){var n,r=t,o=e;if(r===(0|r)&&this._head!==this._tail){var i=this.size(),a=this._list.length;if(!(r>=i||r<-i||e<1)){if(r<0&&(r+=i),1===e||!e)return(n=new Array(1))[0]=this.removeOne(r),n;if(0===r&&r+e>=i)return n=this.toArray(),this.clear(),n;var c;for(r+e>i&&(e=i-r),n=new Array(e),c=0;c<e;c++)n[c]=this._list[this._head+r+c&this._capacityMask];if(r=this._head+r&this._capacityMask,t+e===i){for(this._tail=this._tail-e+a&this._capacityMask,c=e;c>0;c--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(0===t){for(this._head=this._head+e+a&this._capacityMask,c=e-1;c>0;c--)this._list[r=r+1+a&this._capacityMask]=void 0;return n}if(r<i/2){for(this._head=this._head+t+e+a&this._capacityMask,c=t;c>0;c--)this.unshift(this._list[r=r-1+a&this._capacityMask]);for(r=this._head-1+a&this._capacityMask;o>0;)this._list[r=r-1+a&this._capacityMask]=void 0,o--;t<0&&(this._tail=r)}else{for(this._tail=r,r=r+e+a&this._capacityMask,c=i-(e+t);c>0;c--)this.push(this._list[r++]);for(r=this._tail;o>0;)this._list[r=r+1+a&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}},n.prototype.splice=function(t,e){var n=t;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var o,i,a,c=arguments.length,s=this._list.length,u=2;if(!r||n<r/2){for(i=new Array(n),o=0;o<n;o++)i[o]=this._list[this._head+o&this._capacityMask];for(0===e?(a=[],n>0&&(this._head=this._head+n+s&this._capacityMask)):(a=this.remove(n,e),this._head=this._head+n+s&this._capacityMask);c>u;)this.unshift(arguments[--c]);for(o=n;o>0;o--)this.unshift(i[o-1])}else{var l=(i=new Array(r-(n+e))).length;for(o=0;o<l;o++)i[o]=this._list[this._head+n+e+o&this._capacityMask];for(0===e?(a=[],n!=r&&(this._tail=this._head+n+s&this._capacityMask)):(a=this.remove(n,e),this._tail=this._tail-l+s&this._capacityMask);u<c;)this.push(arguments[u++]);for(o=0;o<l;o++)this.push(i[o])}return a}return this.remove(n,e)}}},n.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(t){var e=t.length,n=this._nextPowerOf2(e);this._list=new Array(n),this._capacityMask=n-1,this._tail=e;for(var r=0;r<e;r++)this._list[r]=t[r]},n.prototype._copyArray=function(t,e){var n=this._list,r=n.length,o=this.length;if((e|=o)==o&&this._head<this._tail)return this._list.slice(this._head,this._tail);var i,a=new Array(e),c=0;if(t||this._head>this._tail){for(i=this._head;i<r;i++)a[c++]=n[i];for(i=0;i<this._tail;i++)a[c++]=n[i]}else for(i=this._head;i<this._tail;i++)a[c++]=n[i];return a},n.prototype._growArray=function(){if(0!=this._head){var t=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=t}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},n.prototype._nextPowerOf2=function(t){var e=1<<Math.log(t)/Math.log(2)+1;return Math.max(e,4)},e.exports=n},{}],10:[function(t,e,n){(function(t){(function(){var r,o=200,i="Expected a function",a="__lodash_placeholder__",c=1,s=2,u=4,l=1,f=2,p=1,h=2,d=4,y=8,_=16,g=32,v=64,m=128,b=256,w=512,S=800,C=16,M=1/0,E=9007199254740991,P=17976931348623157e292,O=NaN,R=4294967295,A=R-1,x=R>>>1,B=[["ary",m],["bind",p],["bindKey",h],["curry",y],["curryRight",_],["flip",w],["partial",g],["partialRight",v],["rearg",b]],N="[object Arguments]",j="[object Array]",T="[object AsyncFunction]",I="[object Boolean]",L="[object Date]",k="[object DOMException]",D="[object Error]",U="[object Function]",F="[object GeneratorFunction]",V="[object Map]",G="[object Number]",z="[object Null]",H="[object Object]",W="[object Proxy]",q="[object RegExp]",K="[object Set]",Y="[object String]",J="[object Symbol]",X="[object Undefined]",Q="[object WeakMap]",Z="[object ArrayBuffer]",$="[object DataView]",tt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",rt="[object Int16Array]",ot="[object Int32Array]",it="[object Uint8Array]",at="[object Uint8ClampedArray]",ct="[object Uint16Array]",st="[object Uint32Array]",ut=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,ht=/[&<>"']/g,dt=RegExp(pt.source),yt=RegExp(ht.source),_t=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(St.source),Mt=/^\s+/,Et=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,Rt=/,? & /,At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xt=/[()=,{}\[\]\/\s]/,Bt=/\\(\\)?/g,Nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jt=/\w*$/,Tt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,Lt=/^\[object .+?Constructor\]$/,kt=/^0o[0-7]+$/i,Dt=/^(?:0|[1-9]\d*)$/,Ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ft=/($^)/,Vt=/['\n\r\u2028\u2029\\]/g,Gt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ht="["+zt+"]",Wt="["+Gt+"]",qt="\\d+",Kt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Yt="[^\\ud800-\\udfff"+zt+qt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Jt="\\ud83c[\\udffb-\\udfff]",Xt="[^\\ud800-\\udfff]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Zt="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",te="(?:"+Kt+"|"+Yt+")",ee="(?:"+$t+"|"+Yt+")",ne="(?:"+Wt+"|"+Jt+")?",re="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[Xt,Qt,Zt].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",oe="(?:"+["[\\u2700-\\u27bf]",Qt,Zt].join("|")+")"+re,ie="(?:"+[Xt+Wt+"?",Wt,Qt,Zt,"[\\ud800-\\udfff]"].join("|")+")",ae=RegExp("['\u2019]","g"),ce=RegExp(Wt,"g"),se=RegExp(Jt+"(?="+Jt+")|"+ie+re,"g"),ue=RegExp([$t+"?"+Kt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Ht,$t,"$"].join("|")+")",ee+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Ht,$t+te,"$"].join("|")+")",$t+"?"+te+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$t+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qt,oe].join("|"),"g"),le=RegExp("[\\u200d\\ud800-\\udfff"+Gt+"\\ufe0e\\ufe0f]"),fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],he=-1,de={};de[tt]=de[et]=de[nt]=de[rt]=de[ot]=de[it]=de[at]=de[ct]=de[st]=!0,de[N]=de[j]=de[Z]=de[I]=de[$]=de[L]=de[D]=de[U]=de[V]=de[G]=de[H]=de[q]=de[K]=de[Y]=de[Q]=!1;var ye={};ye[N]=ye[j]=ye[Z]=ye[$]=ye[I]=ye[L]=ye[tt]=ye[et]=ye[nt]=ye[rt]=ye[ot]=ye[V]=ye[G]=ye[H]=ye[q]=ye[K]=ye[Y]=ye[J]=ye[it]=ye[at]=ye[ct]=ye[st]=!0,ye[D]=ye[U]=ye[Q]=!1;var _e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ge=parseFloat,ve=parseInt,me="object"==typeof t&&t&&t.Object===Object&&t,be="object"==typeof self&&self&&self.Object===Object&&self,we=me||be||Function("","return this")(),Se="object"==typeof n&&n&&!n.nodeType&&n,Ce=Se&&"object"==typeof e&&e&&!e.nodeType&&e,Me=Ce&&Ce.exports===Se,Ee=Me&&me.process,Pe=function(){try{return Ce&&Ce.require&&Ce.require("util").types||Ee&&Ee.binding&&Ee.binding("util")}catch(t){}}(),Oe=Pe&&Pe.isArrayBuffer,Re=Pe&&Pe.isDate,Ae=Pe&&Pe.isMap,xe=Pe&&Pe.isRegExp,Be=Pe&&Pe.isSet,Ne=Pe&&Pe.isTypedArray;function je(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Te(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function De(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}function Ue(t,e){return!(null==t||!t.length)&&Qe(t,e,0)>-1}function Fe(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Ve(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ge(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function ze(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function He(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function We(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var qe=en("length");function Ke(t){return t.split("")}function Ye(t){return t.match(At)||[]}function Je(t,e,n){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=n,!1}),r}function Xe(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Qe(t,e,n){return e==e?Rn(t,e,n):Xe(t,$e,n)}function Ze(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function $e(t){return t!=t}function tn(t,e){var n=null==t?0:t.length;return n?an(t,e)/n:O}function en(t){return function(e){return null==e?r:e[t]}}function nn(t){return function(e){return null==t?r:t[e]}}function rn(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function on(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function an(t,e){for(var n,o=-1,i=t.length;++o<i;){var a=e(t[o]);a!==r&&(n=n===r?a:n+a)}return n}function cn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function sn(t,e){return Ve(e,function(e){return[e,t[e]]})}function un(t){return t?t.slice(0,Nn(t)+1).replace(Mt,""):t}function ln(t){return function(e){return t(e)}}function fn(t,e){return Ve(e,function(e){return t[e]})}function pn(t,e){return t.has(e)}function hn(t,e){for(var n=-1,r=t.length;++n<r&&Qe(e,t[n],0)>-1;);return n}function dn(t,e){for(var n=t.length;n--&&Qe(e,t[n],0)>-1;);return n}function yn(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var _n=nn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),gn=nn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function vn(t){return"\\"+_e[t]}function mn(t,e){return null==t?r:t[e]}function bn(t){return le.test(t)}function wn(t){return fe.test(t)}function Sn(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function Mn(t,e){return function(n){return t(e(n))}}function En(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var c=t[n];c!==e&&c!==a||(t[n]=a,i[o++]=n)}return i}function Pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Rn(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function An(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function xn(t){return bn(t)?Tn(t):qe(t)}function Bn(t){return bn(t)?In(t):Ke(t)}function Nn(t){for(var e=t.length;e--&&Et.test(t.charAt(e)););return e}var jn=nn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});function Tn(t){for(var e=se.lastIndex=0;se.test(t);)++e;return e}function In(t){return t.match(se)||[]}function Ln(t){return t.match(ue)||[]}var kn=function t(e){var n,Et=(e=null==e?we:kn.defaults(we.Object(),e,kn.pick(we,pe))).Array,At=e.Date,Gt=e.Error,zt=e.Function,Ht=e.Math,Wt=e.Object,qt=e.RegExp,Kt=e.String,Yt=e.TypeError,Jt=Et.prototype,Xt=zt.prototype,Qt=Wt.prototype,Zt=e["__core-js_shared__"],$t=Xt.toString,te=Qt.hasOwnProperty,ee=0,ne=(n=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",re=Qt.toString,oe=$t.call(Wt),ie=we._,se=qt("^"+$t.call(te).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=Me?e.Buffer:r,le=e.Symbol,fe=e.Uint8Array,_e=ue?ue.allocUnsafe:r,me=Mn(Wt.getPrototypeOf,Wt),be=Wt.create,Se=Qt.propertyIsEnumerable,Ce=Jt.splice,Ee=le?le.isConcatSpreadable:r,Pe=le?le.iterator:r,qe=le?le.toStringTag:r,Ke=function(){try{var t=oa(Wt,"defineProperty");return t({},"",{}),t}catch(e){}}(),nn=e.clearTimeout!==we.clearTimeout&&e.clearTimeout,Rn=At&&At.now!==we.Date.now&&At.now,Tn=e.setTimeout!==we.setTimeout&&e.setTimeout,In=Ht.ceil,Dn=Ht.floor,Un=Wt.getOwnPropertySymbols,Fn=ue?ue.isBuffer:r,Vn=e.isFinite,Gn=Jt.join,zn=Mn(Wt.keys,Wt),Hn=Ht.max,Wn=Ht.min,qn=At.now,Kn=e.parseInt,Yn=Ht.random,Jn=Jt.reverse,Xn=oa(e,"DataView"),Qn=oa(e,"Map"),Zn=oa(e,"Promise"),$n=oa(e,"Set"),tr=oa(e,"WeakMap"),er=oa(Wt,"create"),nr=tr&&new tr,rr={},or=Fa(Xn),ir=Fa(Qn),ar=Fa(Zn),cr=Fa($n),sr=Fa(tr),ur=le?le.prototype:r,lr=ur?ur.valueOf:r,fr=ur?ur.toString:r;function pr(t){if(os(t)&&!Kc(t)&&!(t instanceof _r)){if(t instanceof yr)return t;if(te.call(t,"__wrapped__"))return Ga(t)}return new yr(t)}var hr=function(){function t(){}return function(e){if(!rs(e))return{};if(be)return be(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function dr(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function _r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function gr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new mr;++e<n;)this.add(t[e])}function wr(t){var e=this.__data__=new vr(t);this.size=e.size}function Sr(t,e){var n=Kc(t),r=!n&&qc(t),o=!n&&!r&&Qc(t),i=!n&&!r&&!o&&ps(t),a=n||r||o||i,c=a?cn(t.length,Kt):[],s=c.length;for(var u in t)!e&&!te.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ga(u,s))||c.push(u);return c}function Cr(t){var e=t.length;return e?t[xo(0,e-1)]:r}function Mr(t,e){return ka(yi(t),Tr(e,0,t.length))}function Er(t){return ka(yi(t))}function Pr(t,e,n){(n===r||zc(t[e],n))&&(n!==r||e in t)||Nr(t,e,n)}function Or(t,e,n){var o=t[e];te.call(t,e)&&zc(o,n)&&(n!==r||e in t)||Nr(t,e,n)}function Rr(t,e){for(var n=t.length;n--;)if(zc(t[n][0],e))return n;return-1}function Ar(t,e,n,r){return Fr(t,function(t,o,i){e(r,t,n(t),i)}),r}function xr(t,e){return t&&_i(e,Ts(e),t)}function Br(t,e){return t&&_i(e,Is(e),t)}function Nr(t,e,n){"__proto__"==e&&Ke?Ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function jr(t,e){for(var n=-1,o=e.length,i=Et(o),a=null==t;++n<o;)i[n]=a?r:As(t,e[n]);return i}function Tr(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function Ir(t,e,n,o,i,a){var l,f=e&c,p=e&s,h=e&u;if(n&&(l=i?n(t,o,i,a):n(t)),l!==r)return l;if(!rs(t))return t;var d=Kc(t);if(d){if(l=pa(t),!f)return yi(t,l)}else{var y=sa(t),_=y==U||y==F;if(Qc(t))return ai(t,f);if(y==H||y==N||_&&!i){if(l=p||_?{}:ha(t),!f)return p?vi(t,Br(l,t)):gi(t,xr(l,t))}else{if(!ye[y])return i?t:{};l=da(t,y,f)}}a||(a=new wr);var g=a.get(t);if(g)return g;a.set(t,l),us(t)?t.forEach(function(r){l.add(Ir(r,e,n,r,t,a))}):is(t)&&t.forEach(function(r,o){l.set(o,Ir(r,e,n,o,t,a))});var v=d?r:(h?p?Qi:Xi:p?Is:Ts)(t);return Ie(v||t,function(r,o){v&&(r=t[o=r]),Or(l,o,Ir(r,e,n,o,t,a))}),l}function Lr(t){var e=Ts(t);return function(n){return kr(n,t,e)}}function kr(t,e,n){var o=n.length;if(null==t)return!o;for(t=Wt(t);o--;){var i=n[o],a=e[i],c=t[i];if(c===r&&!(i in t)||!a(c))return!1}return!0}function Dr(t,e,n){if("function"!=typeof t)throw new Yt(i);return ja(function(){t.apply(r,n)},e)}function Ur(t,e,n,r){var i=-1,a=Ue,c=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Ve(e,ln(n))),r?(a=Fe,c=!1):e.length>=o&&(a=pn,c=!1,e=new br(e));t:for(;++i<s;){var f=t[i],p=null==n?f:n(f);if(f=r||0!==f?f:0,c&&p==p){for(var h=l;h--;)if(e[h]===p)continue t;u.push(f)}else a(e,p,r)||u.push(f)}return u}pr.templateSettings={escape:_t,evaluate:gt,interpolate:vt,variable:"",imports:{_:pr}},pr.prototype=dr.prototype,pr.prototype.constructor=pr,yr.prototype=hr(dr.prototype),yr.prototype.constructor=yr,_r.prototype=hr(dr.prototype),_r.prototype.constructor=_r,gr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},gr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return"__lodash_hash_undefined__"===n?r:n}return te.call(e,t)?e[t]:r},gr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==r:te.call(e,t)},gr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===r?"__lodash_hash_undefined__":e,this},vr.prototype.clear=function(){this.__data__=[],this.size=0},vr.prototype.delete=function(t){var e=this.__data__,n=Rr(e,t);return!(n<0||(n==e.length-1?e.pop():Ce.call(e,n,1),--this.size,0))},vr.prototype.get=function(t){var e=this.__data__,n=Rr(e,t);return n<0?r:e[n][1]},vr.prototype.has=function(t){return Rr(this.__data__,t)>-1},vr.prototype.set=function(t,e){var n=this.__data__,r=Rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},mr.prototype.clear=function(){this.size=0,this.__data__={hash:new gr,map:new(Qn||vr),string:new gr}},mr.prototype.delete=function(t){var e=na(this,t).delete(t);return this.size-=e?1:0,e},mr.prototype.get=function(t){return na(this,t).get(t)},mr.prototype.has=function(t){return na(this,t).has(t)},mr.prototype.set=function(t,e){var n=na(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},br.prototype.add=br.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},br.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.clear=function(){this.__data__=new vr,this.size=0},wr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wr.prototype.get=function(t){return this.__data__.get(t)},wr.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vr){var r=n.__data__;if(!Qn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mr(r)}return n.set(t,e),this.size=n.size,this};var Fr=wi(Jr),Vr=wi(Xr,!0);function Gr(t,e){var n=!0;return Fr(t,function(t,r,o){return n=!!e(t,r,o)}),n}function zr(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],c=e(a);if(null!=c&&(s===r?c==c&&!fs(c):n(c,s)))var s=c,u=a}return u}function Hr(t,e,n,o){var i=t.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:gs(o))<0&&(o+=i),o=n>o?0:vs(o);n<o;)t[n++]=e;return t}function Wr(t,e){var n=[];return Fr(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function qr(t,e,n,r,o){var i=-1,a=t.length;for(n||(n=_a),o||(o=[]);++i<a;){var c=t[i];e>0&&n(c)?e>1?qr(c,e-1,n,r,o):Ge(o,c):r||(o[o.length]=c)}return o}var Kr=Si(),Yr=Si(!0);function Jr(t,e){return t&&Kr(t,e,Ts)}function Xr(t,e){return t&&Yr(t,e,Ts)}function Qr(t,e){return De(e,function(e){return ts(t[e])})}function Zr(t,e){for(var n=0,o=(e=ni(e,t)).length;null!=t&&n<o;)t=t[Ua(e[n++])];return n&&n==o?t:r}function $r(t,e,n){var r=e(t);return Kc(t)?r:Ge(r,n(t))}function to(t){return null==t?t===r?X:z:qe&&qe in Wt(t)?ia(t):Oa(t)}function eo(t,e){return t>e}function no(t,e){return null!=t&&te.call(t,e)}function ro(t,e){return null!=t&&e in Wt(t)}function oo(t,e,n){return t>=Wn(e,n)&&t<Hn(e,n)}function io(t,e,n){for(var o=n?Fe:Ue,i=t[0].length,a=t.length,c=a,s=Et(a),u=1/0,l=[];c--;){var f=t[c];c&&e&&(f=Ve(f,ln(e))),u=Wn(f.length,u),s[c]=!n&&(e||i>=120&&f.length>=120)?new br(c&&f):r}f=t[0];var p=-1,h=s[0];t:for(;++p<i&&l.length<u;){var d=f[p],y=e?e(d):d;if(d=n||0!==d?d:0,!(h?pn(h,y):o(l,y,n))){for(c=a;--c;){var _=s[c];if(!(_?pn(_,y):o(t[c],y,n)))continue t}h&&h.push(y),l.push(d)}}return l}function ao(t,e,n,r){return Jr(t,function(t,o,i){e(r,n(t),o,i)}),r}function co(t,e,n){var o=null==(t=Aa(t,e=ni(e,t)))?t:t[Ua($a(e))];return null==o?r:je(o,t,n)}function so(t){return os(t)&&to(t)==N}function uo(t,e,n,r,o){return t===e||(null==t||null==e||!os(t)&&!os(e)?t!=t&&e!=e:lo(t,e,n,r,uo,o))}function lo(t,e,n,r,o,i){var a=Kc(t),c=Kc(e),s=a?j:sa(t),u=c?j:sa(e),f=(s=s==N?H:s)==H,p=(u=u==N?H:u)==H,h=s==u;if(h&&Qc(t)){if(!Qc(e))return!1;a=!0,f=!1}if(h&&!f)return i||(i=new wr),a||ps(t)?qi(t,e,n,r,o,i):Ki(t,e,s,n,r,o,i);if(!(n&l)){var d=f&&te.call(t,"__wrapped__"),y=p&&te.call(e,"__wrapped__");if(d||y){var _=d?t.value():t,g=y?e.value():e;return i||(i=new wr),o(_,g,n,r,i)}}return!!h&&(i||(i=new wr),Yi(t,e,n,r,o,i))}function fo(t,e,n,o){var i=n.length,a=i,c=!o;if(null==t)return!a;for(t=Wt(t);i--;){var s=n[i];if(c&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=n[i])[0],p=t[u],h=s[1];if(c&&s[2]){if(p===r&&!(u in t))return!1}else{var d=new wr;if(o)var y=o(p,h,u,t,e,d);if(!(y===r?uo(h,p,l|f,o,d):y))return!1}}return!0}function po(t){return!(!rs(t)||(e=t,ne&&ne in e))&&(ts(t)?se:Lt).test(Fa(t));var e}function ho(t){return"function"==typeof t?t:null==t?au:"object"==typeof t?Kc(t)?bo(t[0],t[1]):mo(t):yu(t)}function yo(t){if(!Sa(t))return zn(t);var e=[];for(var n in Wt(t))te.call(t,n)&&"constructor"!=n&&e.push(n);return e}function _o(t){if(!rs(t))return Pa(t);var e=Sa(t),n=[];for(var r in t)("constructor"!=r||!e&&te.call(t,r))&&n.push(r);return n}function go(t,e){return t<e}function vo(t,e){var n=-1,r=Jc(t)?Et(t.length):[];return Fr(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function mo(t){var e=ra(t);return 1==e.length&&e[0][2]?Ma(e[0][0],e[0][1]):function(n){return n===t||fo(n,t,e)}}function bo(t,e){return ma(t)&&Ca(e)?Ma(Ua(t),e):function(n){var o=As(n,t);return o===r&&o===e?xs(n,t):uo(e,o,l|f)}}function wo(t,e,n,o,i){t!==e&&Kr(e,function(a,c){if(i||(i=new wr),rs(a))So(t,e,c,n,wo,o,i);else{var s=o?o(Ba(t,c),a,c+"",t,e,i):r;s===r&&(s=a),Pr(t,c,s)}},Is)}function So(t,e,n,o,i,a,c){var s=Ba(t,n),u=Ba(e,n),l=c.get(u);if(l)Pr(t,n,l);else{var f=a?a(s,u,n+"",t,e,c):r,p=f===r;if(p){var h=Kc(u),d=!h&&Qc(u),y=!h&&!d&&ps(u);f=u,h||d||y?Kc(s)?f=s:Xc(s)?f=yi(s):d?(p=!1,f=ai(u,!0)):y?(p=!1,f=li(u,!0)):f=[]:cs(u)||qc(u)?(f=s,qc(s)?f=bs(s):rs(s)&&!ts(s)||(f=ha(u))):p=!1}p&&(c.set(u,f),i(f,u,o,a,c),c.delete(u)),Pr(t,n,f)}}function Co(t,e){var n=t.length;if(n)return ga(e+=e<0?n:0,n)?t[e]:r}function Mo(t,e,n){e=e.length?Ve(e,function(t){return Kc(t)?function(e){return Zr(e,1===t.length?t[0]:t)}:t}):[au];var r=-1;return e=Ve(e,ln(ea())),on(vo(t,function(t){return{criteria:Ve(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return pi(t,e,n)})}function Eo(t,e){return Po(t,e,function(e,n){return xs(t,n)})}function Po(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var a=e[r],c=Zr(t,a);n(c,a)&&Lo(i,ni(a,t),c)}return i}function Oo(t){return function(e){return Zr(e,t)}}function Ro(t,e,n,r){var o=r?Ze:Qe,i=-1,a=e.length,c=t;for(t===e&&(e=yi(e)),n&&(c=Ve(t,ln(n)));++i<a;)for(var s=0,u=e[i],l=n?n(u):u;(s=o(c,l,s,r))>-1;)c!==t&&Ce.call(c,s,1),Ce.call(t,s,1);return t}function Ao(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;ga(o)?Ce.call(t,o,1):Yo(t,o)}}return t}function xo(t,e){return t+Dn(Yn()*(e-t+1))}function Bo(t,e,n,r){for(var o=-1,i=Hn(In((e-t)/(n||1)),0),a=Et(i);i--;)a[r?i:++o]=t,t+=n;return a}function No(t,e){var n="";if(!t||e<1||e>E)return n;do{e%2&&(n+=t),(e=Dn(e/2))&&(t+=t)}while(e);return n}function jo(t,e){return Ta(Ra(t,e,au),t+"")}function To(t){return Cr(zs(t))}function Io(t,e){var n=zs(t);return ka(n,Tr(e,0,n.length))}function Lo(t,e,n,o){if(!rs(t))return t;for(var i=-1,a=(e=ni(e,t)).length,c=a-1,s=t;null!=s&&++i<a;){var u=Ua(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=c){var f=s[u];(l=o?o(f,u,s):r)===r&&(l=rs(f)?f:ga(e[i+1])?[]:{})}Or(s,u,l),s=s[u]}return t}var ko=nr?function(t,e){return nr.set(t,e),t}:au,Do=Ke?function(t,e){return Ke(t,"toString",{configurable:!0,enumerable:!1,value:ru(e),writable:!0})}:au;function Uo(t){return ka(zs(t))}function Fo(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Et(o);++r<o;)i[r]=t[r+e];return i}function Vo(t,e){var n;return Fr(t,function(t,r,o){return!(n=e(t,r,o))}),!!n}function Go(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=x){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!fs(a)&&(n?a<=e:a<e)?r=i+1:o=i}return o}return zo(t,e,au,n)}function zo(t,e,n,o){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var c=(e=n(e))!=e,s=null===e,u=fs(e),l=e===r;i<a;){var f=Dn((i+a)/2),p=n(t[f]),h=p!==r,d=null===p,y=p==p,_=fs(p);if(c)var g=o||y;else g=l?y&&(o||h):s?y&&h&&(o||!d):u?y&&h&&!d&&(o||!_):!d&&!_&&(o?p<=e:p<e);g?i=f+1:a=f}return Wn(a,A)}function Ho(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var a=t[n],c=e?e(a):a;if(!n||!zc(c,s)){var s=c;i[o++]=0===a?0:a}}return i}function Wo(t){return"number"==typeof t?t:fs(t)?O:+t}function qo(t){if("string"==typeof t)return t;if(Kc(t))return Ve(t,qo)+"";if(fs(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Ko(t,e,n){var r=-1,i=Ue,a=t.length,c=!0,s=[],u=s;if(n)c=!1,i=Fe;else if(a>=o){var l=e?null:Fi(t);if(l)return Pn(l);c=!1,i=pn,u=new br}else u=e?[]:s;t:for(;++r<a;){var f=t[r],p=e?e(f):f;if(f=n||0!==f?f:0,c&&p==p){for(var h=u.length;h--;)if(u[h]===p)continue t;e&&u.push(p),s.push(f)}else i(u,p,n)||(u!==s&&u.push(p),s.push(f))}return s}function Yo(t,e){return null==(t=Aa(t,e=ni(e,t)))||delete t[Ua($a(e))]}function Jo(t,e,n,r){return Lo(t,e,n(Zr(t,e)),r)}function Xo(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?Fo(t,r?0:i,r?i+1:o):Fo(t,r?i+1:0,r?o:i)}function Qo(t,e){var n=t;return n instanceof _r&&(n=n.value()),ze(e,function(t,e){return e.func.apply(e.thisArg,Ge([t],e.args))},n)}function Zo(t,e,n){var r=t.length;if(r<2)return r?Ko(t[0]):[];for(var o=-1,i=Et(r);++o<r;)for(var a=t[o],c=-1;++c<r;)c!=o&&(i[o]=Ur(i[o]||a,t[c],e,n));return Ko(qr(i,1),e,n)}function $o(t,e,n){for(var o=-1,i=t.length,a=e.length,c={};++o<i;){var s=o<a?e[o]:r;n(c,t[o],s)}return c}function ti(t){return Xc(t)?t:[]}function ei(t){return"function"==typeof t?t:au}function ni(t,e){return Kc(t)?t:ma(t,e)?[t]:Da(ws(t))}var ri=jo;function oi(t,e,n){var o=t.length;return n=n===r?o:n,!e&&n>=o?t:Fo(t,e,n)}var ii=nn||function(t){return we.clearTimeout(t)};function ai(t,e){if(e)return t.slice();var n=t.length,r=_e?_e(n):new t.constructor(n);return t.copy(r),r}function ci(t){var e=new t.constructor(t.byteLength);return new fe(e).set(new fe(t)),e}function si(t,e){var n=e?ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function ui(t){var e=new t.constructor(t.source,jt.exec(t));return e.lastIndex=t.lastIndex,e}function li(t,e){var n=e?ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fi(t,e){if(t!==e){var n=t!==r,o=null===t,i=t==t,a=fs(t),c=e!==r,s=null===e,u=e==e,l=fs(e);if(!s&&!l&&!a&&t>e||a&&c&&u&&!s&&!l||o&&c&&u||!n&&u||!i)return 1;if(!o&&!a&&!l&&t<e||l&&n&&i&&!o&&!a||s&&n&&i||!c&&i||!u)return-1}return 0}function pi(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,a=o.length,c=n.length;++r<a;){var s=fi(o[r],i[r]);if(s)return r>=c?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}function hi(t,e,n,r){for(var o=-1,i=t.length,a=n.length,c=-1,s=e.length,u=Hn(i-a,0),l=Et(s+u),f=!r;++c<s;)l[c]=e[c];for(;++o<a;)(f||o<i)&&(l[n[o]]=t[o]);for(;u--;)l[c++]=t[o++];return l}function di(t,e,n,r){for(var o=-1,i=t.length,a=-1,c=n.length,s=-1,u=e.length,l=Hn(i-c,0),f=Et(l+u),p=!r;++o<l;)f[o]=t[o];for(var h=o;++s<u;)f[h+s]=e[s];for(;++a<c;)(p||o<i)&&(f[h+n[a]]=t[o++]);return f}function yi(t,e){var n=-1,r=t.length;for(e||(e=Et(r));++n<r;)e[n]=t[n];return e}function _i(t,e,n,o){var i=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var s=e[a],u=o?o(n[s],t[s],s,n,t):r;u===r&&(u=t[s]),i?Nr(n,s,u):Or(n,s,u)}return n}function gi(t,e){return _i(t,aa(t),e)}function vi(t,e){return _i(t,ca(t),e)}function mi(t,e){return function(n,r){var o=Kc(n)?Te:Ar,i=e?e():{};return o(n,t,ea(r,2),i)}}function bi(t){return jo(function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,c=i>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(i--,a):r,c&&va(n[0],n[1],c)&&(a=i<3?r:a,i=1),e=Wt(e);++o<i;){var s=n[o];s&&t(e,s,o,a)}return e})}function wi(t,e){return function(n,r){if(null==n)return n;if(!Jc(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Wt(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function Si(t){return function(e,n,r){for(var o=-1,i=Wt(e),a=r(e),c=a.length;c--;){var s=a[t?c:++o];if(!1===n(i[s],s,i))break}return e}}function Ci(t,e,n){var r=e&p,o=Pi(t);return function e(){return(this&&this!==we&&this instanceof e?o:t).apply(r?n:this,arguments)}}function Mi(t){return function(e){var n=bn(e=ws(e))?Bn(e):r,o=n?n[0]:e.charAt(0),i=n?oi(n,1).join(""):e.slice(1);return o[t]()+i}}function Ei(t){return function(e){return ze(tu(qs(e).replace(ae,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=hr(t.prototype),r=t.apply(n,e);return rs(r)?r:n}}function Oi(t,e,n){var o=Pi(t);return function i(){for(var a=arguments.length,c=Et(a),s=a,u=ta(i);s--;)c[s]=arguments[s];var l=a<3&&c[0]!==u&&c[a-1]!==u?[]:En(c,u);return(a-=l.length)<n?Di(t,e,xi,i.placeholder,r,c,l,r,r,n-a):je(this&&this!==we&&this instanceof i?o:t,this,c)}}function Ri(t){return function(e,n,o){var i=Wt(e);if(!Jc(e)){var a=ea(n,3);e=Ts(e),n=function(t){return a(i[t],t,i)}}var c=t(e,n,o);return c>-1?i[a?e[c]:c]:r}}function Ai(t){return Ji(function(e){var n=e.length,o=n,a=yr.prototype.thru;for(t&&e.reverse();o--;){var c=e[o];if("function"!=typeof c)throw new Yt(i);if(a&&!s&&"wrapper"==$i(c))var s=new yr([],!0)}for(o=s?o:n;++o<n;){var u=$i(c=e[o]),l="wrapper"==u?Zi(c):r;s=l&&ba(l[0])&&l[1]==(m|y|g|b)&&!l[4].length&&1==l[9]?s[$i(l[0])].apply(s,l[3]):1==c.length&&ba(c)?s[u]():s.thru(c)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Kc(r))return s.plant(r).value();for(var o=0,i=n?e[o].apply(this,t):r;++o<n;)i=e[o].call(this,i);return i}})}function xi(t,e,n,o,i,a,c,s,u,l){var f=e&m,d=e&p,g=e&h,v=e&(y|_),b=e&w,S=g?r:Pi(t);return function r(){for(var p=arguments.length,h=Et(p),y=p;y--;)h[y]=arguments[y];if(v)var _=ta(r),m=yn(h,_);if(o&&(h=hi(h,o,i,v)),a&&(h=di(h,a,c,v)),p-=m,v&&p<l){var w=En(h,_);return Di(t,e,xi,r.placeholder,n,h,w,s,u,l-p)}var C=d?n:this,M=g?C[t]:t;return p=h.length,s?h=xa(h,s):b&&p>1&&h.reverse(),f&&u<p&&(h.length=u),this&&this!==we&&this instanceof r&&(M=S||Pi(M)),M.apply(C,h)}}function Bi(t,e){return function(n,r){return ao(n,t,e(r),{})}}function Ni(t,e){return function(n,o){var i;if(n===r&&o===r)return e;if(n!==r&&(i=n),o!==r){if(i===r)return o;"string"==typeof n||"string"==typeof o?(n=qo(n),o=qo(o)):(n=Wo(n),o=Wo(o)),i=t(n,o)}return i}}function ji(t){return Ji(function(e){return e=Ve(e,ln(ea())),jo(function(n){var r=this;return t(e,function(t){return je(t,r,n)})})})}function Ti(t,e){var n=(e=e===r?" ":qo(e)).length;if(n<2)return n?No(e,t):e;var o=No(e,In(t/xn(e)));return bn(e)?oi(Bn(o),0,t).join(""):o.slice(0,t)}function Ii(t,e,n,r){var o=e&p,i=Pi(t);return function e(){for(var a=-1,c=arguments.length,s=-1,u=r.length,l=Et(u+c),f=this&&this!==we&&this instanceof e?i:t;++s<u;)l[s]=r[s];for(;c--;)l[s++]=arguments[++a];return je(f,o?n:this,l)}}function Li(t){return function(e,n,o){return o&&"number"!=typeof o&&va(e,n,o)&&(n=o=r),e=_s(e),n===r?(n=e,e=0):n=_s(n),Bo(e,n,o=o===r?e<n?1:-1:_s(o),t)}}function ki(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ms(e),n=ms(n)),t(e,n)}}function Di(t,e,n,o,i,a,c,s,u,l){var f=e&y;e|=f?g:v,(e&=~(f?v:g))&d||(e&=~(p|h));var _=[t,e,i,f?a:r,f?c:r,f?r:a,f?r:c,s,u,l],m=n.apply(r,_);return ba(t)&&Na(m,_),m.placeholder=o,Ia(m,t,e)}function Ui(t){var e=Ht[t];return function(t,n){if(t=ms(t),(n=null==n?0:Wn(gs(n),292))&&Vn(t)){var r=(ws(t)+"e").split("e");return+((r=(ws(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Fi=$n&&1/Pn(new $n([,-0]))[1]==M?function(t){return new $n(t)}:fu;function Vi(t){return function(e){var n=sa(e);return n==V?Cn(e):n==K?On(e):sn(e,t(e))}}function Gi(t,e,n,o,a,c,s,u){var l=e&h;if(!l&&"function"!=typeof t)throw new Yt(i);var f=o?o.length:0;if(f||(e&=~(g|v),o=a=r),s=s===r?s:Hn(gs(s),0),u=u===r?u:gs(u),f-=a?a.length:0,e&v){var d=o,m=a;o=a=r}var b=l?r:Zi(t),w=[t,e,n,o,a,d,m,c,s,u];if(b&&Ea(w,b),t=w[0],e=w[1],n=w[2],o=w[3],a=w[4],!(u=w[9]=w[9]===r?l?0:t.length:Hn(w[9]-f,0))&&e&(y|_)&&(e&=~(y|_)),e&&e!=p)S=e==y||e==_?Oi(t,e,u):e!=g&&e!=(p|g)||a.length?xi.apply(r,w):Ii(t,e,n,o);else var S=Ci(t,e,n);return Ia((b?ko:Na)(S,w),t,e)}function zi(t,e,n,o){return t===r||zc(t,Qt[n])&&!te.call(o,n)?e:t}function Hi(t,e,n,o,i,a){return rs(t)&&rs(e)&&(a.set(e,t),wo(t,e,r,Hi,a),a.delete(e)),t}function Wi(t){return cs(t)?r:t}function qi(t,e,n,o,i,a){var c=n&l,s=t.length,u=e.length;if(s!=u&&!(c&&u>s))return!1;var p=a.get(t),h=a.get(e);if(p&&h)return p==e&&h==t;var d=-1,y=!0,_=n&f?new br:r;for(a.set(t,e),a.set(e,t);++d<s;){var g=t[d],v=e[d];if(o)var m=c?o(v,g,d,e,t,a):o(g,v,d,t,e,a);if(m!==r){if(m)continue;y=!1;break}if(_){if(!We(e,function(t,e){if(!pn(_,e)&&(g===t||i(g,t,n,o,a)))return _.push(e)})){y=!1;break}}else if(g!==v&&!i(g,v,n,o,a)){y=!1;break}}return a.delete(t),a.delete(e),y}function Ki(t,e,n,r,o,i,a){switch(n){case $:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z:return!(t.byteLength!=e.byteLength||!i(new fe(t),new fe(e)));case I:case L:case G:return zc(+t,+e);case D:return t.name==e.name&&t.message==e.message;case q:case Y:return t==e+"";case V:var c=Cn;case K:var s=r&l;if(c||(c=Pn),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;r|=f,a.set(t,e);var p=qi(c(t),c(e),r,o,i,a);return a.delete(t),p;case J:if(lr)return lr.call(t)==lr.call(e)}return!1}function Yi(t,e,n,o,i,a){var c=n&l,s=Xi(t),u=s.length;if(u!=Xi(e).length&&!c)return!1;for(var f=u;f--;){var p=s[f];if(!(c?p in e:te.call(e,p)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var y=!0;a.set(t,e),a.set(e,t);for(var _=c;++f<u;){var g=t[p=s[f]],v=e[p];if(o)var m=c?o(v,g,p,e,t,a):o(g,v,p,t,e,a);if(!(m===r?g===v||i(g,v,n,o,a):m)){y=!1;break}_||(_="constructor"==p)}if(y&&!_){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(y=!1)}return a.delete(t),a.delete(e),y}function Ji(t){return Ta(Ra(t,r,Ya),t+"")}function Xi(t){return $r(t,Ts,aa)}function Qi(t){return $r(t,Is,ca)}var Zi=nr?function(t){return nr.get(t)}:fu;function $i(t){for(var e=t.name+"",n=rr[e],r=te.call(rr,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function ta(t){return(te.call(pr,"placeholder")?pr:t).placeholder}function ea(){var t=pr.iteratee||cu;return t=t===cu?ho:t,arguments.length?t(arguments[0],arguments[1]):t}function na(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ra(t){for(var e=Ts(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Ca(o)]}return e}function oa(t,e){var n=mn(t,e);return po(n)?n:r}function ia(t){var e=te.call(t,qe),n=t[qe];try{t[qe]=r;var o=!0}catch(a){}var i=re.call(t);return o&&(e?t[qe]=n:delete t[qe]),i}var aa=Un?function(t){return null==t?[]:(t=Wt(t),De(Un(t),function(e){return Se.call(t,e)}))}:vu,ca=Un?function(t){for(var e=[];t;)Ge(e,aa(t)),t=me(t);return e}:vu,sa=to;function ua(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wn(e,t+a);break;case"takeRight":t=Hn(t,e-a)}}return{start:t,end:e}}function la(t){var e=t.match(Ot);return e?e[1].split(Rt):[]}function fa(t,e,n){for(var r=-1,o=(e=ni(e,t)).length,i=!1;++r<o;){var a=Ua(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ns(o)&&ga(a,o)&&(Kc(t)||qc(t))}function pa(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&te.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ha(t){return"function"!=typeof t.constructor||Sa(t)?{}:hr(me(t))}function da(t,e,n){var r,o=t.constructor;switch(e){case Z:return ci(t);case I:case L:return new o(+t);case $:return si(t,n);case tt:case et:case nt:case rt:case ot:case it:case at:case ct:case st:return li(t,n);case V:return new o;case G:case Y:return new o(t);case q:return ui(t);case K:return new o;case J:return r=t,lr?Wt(lr.call(r)):{}}}function ya(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Pt,"{\n/* [wrapped with "+e+"] */\n")}function _a(t){return Kc(t)||qc(t)||!!(Ee&&t&&t[Ee])}function ga(t,e){var n=typeof t;return!!(e=null==e?E:e)&&("number"==n||"symbol"!=n&&Dt.test(t))&&t>-1&&t%1==0&&t<e}function va(t,e,n){if(!rs(n))return!1;var r=typeof e;return!!("number"==r?Jc(n)&&ga(e,n.length):"string"==r&&e in n)&&zc(n[e],t)}function ma(t,e){if(Kc(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fs(t))||bt.test(t)||!mt.test(t)||null!=e&&t in Wt(e)}function ba(t){var e=$i(t),n=pr[e];if("function"!=typeof n||!(e in _r.prototype))return!1;if(t===n)return!0;var r=Zi(n);return!!r&&t===r[0]}(Xn&&sa(new Xn(new ArrayBuffer(1)))!=$||Qn&&sa(new Qn)!=V||Zn&&"[object Promise]"!=sa(Zn.resolve())||$n&&sa(new $n)!=K||tr&&sa(new tr)!=Q)&&(sa=function(t){var e=to(t),n=e==H?t.constructor:r,o=n?Fa(n):"";if(o)switch(o){case or:return $;case ir:return V;case ar:return"[object Promise]";case cr:return K;case sr:return Q}return e});var wa=Zt?ts:mu;function Sa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function Ca(t){return t==t&&!rs(t)}function Ma(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Wt(n))}}function Ea(t,e){var n=t[1],r=e[1],o=n|r,i=o<(p|h|m),c=r==m&&n==y||r==m&&n==b&&t[7].length<=e[8]||r==(m|b)&&e[7].length<=e[8]&&n==y;if(!i&&!c)return t;r&p&&(t[2]=e[2],o|=n&p?0:d);var s=e[3];if(s){var u=t[3];t[3]=u?hi(u,s,e[4]):s,t[4]=u?En(t[3],a):e[4]}return(s=e[5])&&(u=t[5],t[5]=u?di(u,s,e[6]):s,t[6]=u?En(t[5],a):e[6]),(s=e[7])&&(t[7]=s),r&m&&(t[8]=null==t[8]?e[8]:Wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function Pa(t){var e=[];if(null!=t)for(var n in Wt(t))e.push(n);return e}function Oa(t){return re.call(t)}function Ra(t,e,n){return e=Hn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Hn(r.length-e,0),a=Et(i);++o<i;)a[o]=r[e+o];o=-1;for(var c=Et(e+1);++o<e;)c[o]=r[o];return c[e]=n(a),je(t,this,c)}}function Aa(t,e){return e.length<2?t:Zr(t,Fo(e,0,-1))}function xa(t,e){for(var n=t.length,o=Wn(e.length,n),i=yi(t);o--;){var a=e[o];t[o]=ga(a,n)?i[a]:r}return t}function Ba(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Na=La(ko),ja=Tn||function(t,e){return we.setTimeout(t,e)},Ta=La(Do);function Ia(t,e,n){var r=e+"";return Ta(t,ya(r,Va(la(r),n)))}function La(t){var e=0,n=0;return function(){var o=qn(),i=C-(o-n);if(n=o,i>0){if(++e>=S)return arguments[0]}else e=0;return t.apply(r,arguments)}}function ka(t,e){var n=-1,o=t.length,i=o-1;for(e=e===r?o:e;++n<e;){var a=xo(n,i),c=t[a];t[a]=t[n],t[n]=c}return t.length=e,t}var Da=function(){var t=kc(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(wt,function(t,n,r,o){e.push(r?o.replace(Bt,"$1"):n||t)}),e},function(t){return 500===e.size&&e.clear(),t}),e=t.cache;return t}();function Ua(t){if("string"==typeof t||fs(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Fa(t){if(null!=t){try{return $t.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Va(t,e){return Ie(B,function(n){var r="_."+n[0];e&n[1]&&!Ue(t,r)&&t.push(r)}),t.sort()}function Ga(t){if(t instanceof _r)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var za=jo(function(t,e){return Xc(t)?Ur(t,qr(e,1,Xc,!0)):[]}),Ha=jo(function(t,e){var n=$a(e);return Xc(n)&&(n=r),Xc(t)?Ur(t,qr(e,1,Xc,!0),ea(n,2)):[]}),Wa=jo(function(t,e){var n=$a(e);return Xc(n)&&(n=r),Xc(t)?Ur(t,qr(e,1,Xc,!0),r,n):[]});function qa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=Hn(r+o,0)),Xe(t,ea(e,3),o)}function Ka(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=o-1;return n!==r&&(i=gs(n),i=n<0?Hn(o+i,0):Wn(i,o-1)),Xe(t,ea(e,3),i,!0)}function Ya(t){return null!=t&&t.length?qr(t,1):[]}function Ja(t){return t&&t.length?t[0]:r}var Xa=jo(function(t){var e=Ve(t,ti);return e.length&&e[0]===t[0]?io(e):[]}),Qa=jo(function(t){var e=$a(t),n=Ve(t,ti);return e===$a(n)?e=r:n.pop(),n.length&&n[0]===t[0]?io(n,ea(e,2)):[]}),Za=jo(function(t){var e=$a(t),n=Ve(t,ti);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?io(n,r,e):[]});function $a(t){var e=null==t?0:t.length;return e?t[e-1]:r}var tc=jo(ec);function ec(t,e){return t&&t.length&&e&&e.length?Ro(t,e):t}var nc=Ji(function(t,e){var n=null==t?0:t.length,r=jr(t,e);return Ao(t,Ve(e,function(t){return ga(t,n)?+t:t}).sort(fi)),r});function rc(t){return null==t?t:Jn.call(t)}var oc=jo(function(t){return Ko(qr(t,1,Xc,!0))}),ic=jo(function(t){var e=$a(t);return Xc(e)&&(e=r),Ko(qr(t,1,Xc,!0),ea(e,2))}),ac=jo(function(t){var e=$a(t);return e="function"==typeof e?e:r,Ko(qr(t,1,Xc,!0),r,e)});function cc(t){if(!t||!t.length)return[];var e=0;return t=De(t,function(t){if(Xc(t))return e=Hn(t.length,e),!0}),cn(e,function(e){return Ve(t,en(e))})}function sc(t,e){if(!t||!t.length)return[];var n=cc(t);return null==e?n:Ve(n,function(t){return je(e,r,t)})}var uc=jo(function(t,e){return Xc(t)?Ur(t,e):[]}),lc=jo(function(t){return Zo(De(t,Xc))}),fc=jo(function(t){var e=$a(t);return Xc(e)&&(e=r),Zo(De(t,Xc),ea(e,2))}),pc=jo(function(t){var e=$a(t);return e="function"==typeof e?e:r,Zo(De(t,Xc),r,e)}),hc=jo(cc),dc=jo(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,sc(t,n)});function yc(t){var e=pr(t);return e.__chain__=!0,e}function _c(t,e){return e(t)}var gc=Ji(function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,i=function(e){return jr(e,t)};return!(e>1||this.__actions__.length)&&o instanceof _r&&ga(n)?((o=o.slice(n,+n+(e?1:0))).__actions__.push({func:_c,args:[i],thisArg:r}),new yr(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(i)}),vc=mi(function(t,e,n){te.call(t,n)?++t[n]:Nr(t,n,1)}),mc=Ri(qa),bc=Ri(Ka);function wc(t,e){return(Kc(t)?Ie:Fr)(t,ea(e,3))}function Sc(t,e){return(Kc(t)?Le:Vr)(t,ea(e,3))}var Cc=mi(function(t,e,n){te.call(t,n)?t[n].push(e):Nr(t,n,[e])}),Mc=jo(function(t,e,n){var r=-1,o="function"==typeof e,i=Jc(t)?Et(t.length):[];return Fr(t,function(t){i[++r]=o?je(e,t,n):co(t,e,n)}),i}),Ec=mi(function(t,e,n){Nr(t,n,e)});function Pc(t,e){return(Kc(t)?Ve:vo)(t,ea(e,3))}var Oc=mi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Rc=jo(function(t,e){if(null==t)return[];var n=e.length;return n>1&&va(t,e[0],e[1])?e=[]:n>2&&va(e[0],e[1],e[2])&&(e=[e[0]]),Mo(t,qr(e,1),[])}),Ac=Rn||function(){return we.Date.now()};function xc(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Gi(t,m,r,r,r,r,e)}function Bc(t,e){var n;if("function"!=typeof e)throw new Yt(i);return t=gs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Nc=jo(function(t,e,n){var r=p;if(n.length){var o=En(n,ta(Nc));r|=g}return Gi(t,r,e,n,o)}),jc=jo(function(t,e,n){var r=p|h;if(n.length){var o=En(n,ta(jc));r|=g}return Gi(e,r,t,n,o)});function Tc(t,e,n){var o,a,c,s,u,l,f=0,p=!1,h=!1,d=!0;if("function"!=typeof t)throw new Yt(i);function y(e){var n=o,i=a;return o=a=r,f=e,s=t.apply(i,n)}function _(t){return f=t,u=ja(m,e),p?y(t):s}function g(t){var n=e-(t-l);return h?Wn(n,c-(t-f)):n}function v(t){var n=t-l;return l===r||n>=e||n<0||h&&t-f>=c}function m(){var t=Ac();if(v(t))return b(t);u=ja(m,g(t))}function b(t){return u=r,d&&o?y(t):(o=a=r,s)}function w(){var t=Ac(),n=v(t);if(o=arguments,a=this,l=t,n){if(u===r)return _(l);if(h)return ii(u),u=ja(m,e),y(l)}return u===r&&(u=ja(m,e)),s}return e=ms(e)||0,rs(n)&&(p=!!n.leading,c=(h="maxWait"in n)?Hn(ms(n.maxWait)||0,e):c,d="trailing"in n?!!n.trailing:d),w.cancel=function(){u!==r&&ii(u),f=0,o=l=a=u=r},w.flush=function(){return u===r?s:b(Ac())},w}var Ic=jo(function(t,e){return Dr(t,1,e)}),Lc=jo(function(t,e,n){return Dr(t,ms(e)||0,n)});function kc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Yt(i);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(kc.Cache||mr),n}function Dc(t){if("function"!=typeof t)throw new Yt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}kc.Cache=mr;var Uc=ri(function(t,e){var n=(e=1==e.length&&Kc(e[0])?Ve(e[0],ln(ea())):Ve(qr(e,1),ln(ea()))).length;return jo(function(r){for(var o=-1,i=Wn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return je(t,this,r)})}),Fc=jo(function(t,e){var n=En(e,ta(Fc));return Gi(t,g,r,e,n)}),Vc=jo(function(t,e){var n=En(e,ta(Vc));return Gi(t,v,r,e,n)}),Gc=Ji(function(t,e){return Gi(t,b,r,r,r,e)});function zc(t,e){return t===e||t!=t&&e!=e}var Hc=ki(eo),Wc=ki(function(t,e){return t>=e}),qc=so(function(){return arguments}())?so:function(t){return os(t)&&te.call(t,"callee")&&!Se.call(t,"callee")},Kc=Et.isArray,Yc=Oe?ln(Oe):function(t){return os(t)&&to(t)==Z};function Jc(t){return null!=t&&ns(t.length)&&!ts(t)}function Xc(t){return os(t)&&Jc(t)}var Qc=Fn||mu,Zc=Re?ln(Re):function(t){return os(t)&&to(t)==L};function $c(t){if(!os(t))return!1;var e=to(t);return e==D||e==k||"string"==typeof t.message&&"string"==typeof t.name&&!cs(t)}function ts(t){if(!rs(t))return!1;var e=to(t);return e==U||e==F||e==T||e==W}function es(t){return"number"==typeof t&&t==gs(t)}function ns(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}function rs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function os(t){return null!=t&&"object"==typeof t}var is=Ae?ln(Ae):function(t){return os(t)&&sa(t)==V};function as(t){return"number"==typeof t||os(t)&&to(t)==G}function cs(t){if(!os(t)||to(t)!=H)return!1;var e=me(t);if(null===e)return!0;var n=te.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$t.call(n)==oe}var ss=xe?ln(xe):function(t){return os(t)&&to(t)==q},us=Be?ln(Be):function(t){return os(t)&&sa(t)==K};function ls(t){return"string"==typeof t||!Kc(t)&&os(t)&&to(t)==Y}function fs(t){return"symbol"==typeof t||os(t)&&to(t)==J}var ps=Ne?ln(Ne):function(t){return os(t)&&ns(t.length)&&!!de[to(t)]},hs=ki(go),ds=ki(function(t,e){return t<=e});function ys(t){if(!t)return[];if(Jc(t))return ls(t)?Bn(t):yi(t);if(Pe&&t[Pe])return Sn(t[Pe]());var e=sa(t);return(e==V?Cn:e==K?Pn:zs)(t)}function _s(t){return t?(t=ms(t))===M||t===-M?(t<0?-1:1)*P:t==t?t:0:0===t?t:0}function gs(t){var e=_s(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t?Tr(gs(t),0,R):0}function ms(t){if("number"==typeof t)return t;if(fs(t))return O;if(rs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=un(t);var n=It.test(t);return n||kt.test(t)?ve(t.slice(2),n?2:8):Tt.test(t)?O:+t}function bs(t){return _i(t,Is(t))}function ws(t){return null==t?"":qo(t)}var Ss=bi(function(t,e){if(Sa(e)||Jc(e))_i(e,Ts(e),t);else for(var n in e)te.call(e,n)&&Or(t,n,e[n])}),Cs=bi(function(t,e){_i(e,Is(e),t)}),Ms=bi(function(t,e,n,r){_i(e,Is(e),t,r)}),Es=bi(function(t,e,n,r){_i(e,Ts(e),t,r)}),Ps=Ji(jr),Os=jo(function(t,e){t=Wt(t);var n=-1,o=e.length,i=o>2?e[2]:r;for(i&&va(e[0],e[1],i)&&(o=1);++n<o;)for(var a=e[n],c=Is(a),s=-1,u=c.length;++s<u;){var l=c[s],f=t[l];(f===r||zc(f,Qt[l])&&!te.call(t,l))&&(t[l]=a[l])}return t}),Rs=jo(function(t){return t.push(r,Hi),je(ks,r,t)});function As(t,e,n){var o=null==t?r:Zr(t,e);return o===r?n:o}function xs(t,e){return null!=t&&fa(t,e,ro)}var Bs=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=re.call(e)),t[e]=n},ru(au)),Ns=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=re.call(e)),te.call(t,e)?t[e].push(n):t[e]=[n]},ea),js=jo(co);function Ts(t){return Jc(t)?Sr(t):yo(t)}function Is(t){return Jc(t)?Sr(t,!0):_o(t)}var Ls=bi(function(t,e,n){wo(t,e,n)}),ks=bi(function(t,e,n,r){wo(t,e,n,r)}),Ds=Ji(function(t,e){var n={};if(null==t)return n;var r=!1;e=Ve(e,function(e){return e=ni(e,t),r||(r=e.length>1),e}),_i(t,Qi(t),n),r&&(n=Ir(n,c|s|u,Wi));for(var o=e.length;o--;)Yo(n,e[o]);return n}),Us=Ji(function(t,e){return null==t?{}:Eo(t,e)});function Fs(t,e){if(null==t)return{};var n=Ve(Qi(t),function(t){return[t]});return e=ea(e),Po(t,n,function(t,n){return e(t,n[0])})}var Vs=Vi(Ts),Gs=Vi(Is);function zs(t){return null==t?[]:fn(t,Ts(t))}var Hs=Ei(function(t,e,n){return e=e.toLowerCase(),t+(n?Ws(e):e)});function Ws(t){return $s(ws(t).toLowerCase())}function qs(t){return(t=ws(t))&&t.replace(Ut,_n).replace(ce,"")}var Ks=Ei(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ys=Ei(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Js=Mi("toLowerCase"),Xs=Ei(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qs=Ei(function(t,e,n){return t+(n?" ":"")+$s(e)}),Zs=Ei(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),$s=Mi("toUpperCase");function tu(t,e,n){return t=ws(t),(e=n?r:e)===r?wn(t)?Ln(t):Ye(t):t.match(e)||[]}var eu=jo(function(t,e){try{return je(t,r,e)}catch(n){return $c(n)?n:new Gt(n)}}),nu=Ji(function(t,e){return Ie(e,function(e){e=Ua(e),Nr(t,e,Nc(t[e],t))}),t});function ru(t){return function(){return t}}var ou=Ai(),iu=Ai(!0);function au(t){return t}function cu(t){return ho("function"==typeof t?t:Ir(t,c))}var su=jo(function(t,e){return function(n){return co(n,t,e)}}),uu=jo(function(t,e){return function(n){return co(t,n,e)}});function lu(t,e,n){var r=Ts(e),o=Qr(e,r);null!=n||rs(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=Qr(e,Ts(e)));var i=!(rs(n)&&"chain"in n&&!n.chain),a=ts(t);return Ie(o,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__),o=n.__actions__=yi(this.__actions__);return o.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ge([this.value()],arguments))})}),t}function fu(){}var pu=ji(Ve),hu=ji(ke),du=ji(We);function yu(t){return ma(t)?en(Ua(t)):Oo(t)}var _u=Li(),gu=Li(!0);function vu(){return[]}function mu(){return!1}var bu,wu=Ni(function(t,e){return t+e},0),Su=Ui("ceil"),Cu=Ni(function(t,e){return t/e},1),Mu=Ui("floor"),Eu=Ni(function(t,e){return t*e},1),Pu=Ui("round"),Ou=Ni(function(t,e){return t-e},0);return pr.after=function(t,e){if("function"!=typeof e)throw new Yt(i);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},pr.ary=xc,pr.assign=Ss,pr.assignIn=Cs,pr.assignInWith=Ms,pr.assignWith=Es,pr.at=Ps,pr.before=Bc,pr.bind=Nc,pr.bindAll=nu,pr.bindKey=jc,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Kc(t)?t:[t]},pr.chain=yc,pr.chunk=function(t,e,n){e=(n?va(t,e,n):e===r)?1:Hn(gs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var i=0,a=0,c=Et(In(o/e));i<o;)c[a++]=Fo(t,i,i+=e);return c},pr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Et(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ge(Kc(n)?yi(n):[n],qr(e,1))},pr.cond=function(t){var e=null==t?0:t.length,n=ea();return t=e?Ve(t,function(t){if("function"!=typeof t[1])throw new Yt(i);return[n(t[0]),t[1]]}):[],jo(function(n){for(var r=-1;++r<e;){var o=t[r];if(je(o[0],this,n))return je(o[1],this,n)}})},pr.conforms=function(t){return Lr(Ir(t,c))},pr.constant=ru,pr.countBy=vc,pr.create=function(t,e){var n=hr(t);return null==e?n:xr(n,e)},pr.curry=function t(e,n,o){var i=Gi(e,y,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},pr.curryRight=function t(e,n,o){var i=Gi(e,_,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},pr.debounce=Tc,pr.defaults=Os,pr.defaultsDeep=Rs,pr.defer=Ic,pr.delay=Lc,pr.difference=za,pr.differenceBy=Ha,pr.differenceWith=Wa,pr.drop=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,(e=n||e===r?1:gs(e))<0?0:e,o):[]},pr.dropRight=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,0,(e=o-(e=n||e===r?1:gs(e)))<0?0:e):[]},pr.dropRightWhile=function(t,e){return t&&t.length?Xo(t,ea(e,3),!0,!0):[]},pr.dropWhile=function(t,e){return t&&t.length?Xo(t,ea(e,3),!0):[]},pr.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&va(t,e,n)&&(n=0,r=o),Hr(t,e,n,r)):[]},pr.filter=function(t,e){return(Kc(t)?De:Wr)(t,ea(e,3))},pr.flatMap=function(t,e){return qr(Pc(t,e),1)},pr.flatMapDeep=function(t,e){return qr(Pc(t,e),M)},pr.flatMapDepth=function(t,e,n){return n=n===r?1:gs(n),qr(Pc(t,e),n)},pr.flatten=Ya,pr.flattenDeep=function(t){return null!=t&&t.length?qr(t,M):[]},pr.flattenDepth=function(t,e){return null!=t&&t.length?qr(t,e=e===r?1:gs(e)):[]},pr.flip=function(t){return Gi(t,w)},pr.flow=ou,pr.flowRight=iu,pr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},pr.functions=function(t){return null==t?[]:Qr(t,Ts(t))},pr.functionsIn=function(t){return null==t?[]:Qr(t,Is(t))},pr.groupBy=Cc,pr.initial=function(t){return null!=t&&t.length?Fo(t,0,-1):[]},pr.intersection=Xa,pr.intersectionBy=Qa,pr.intersectionWith=Za,pr.invert=Bs,pr.invertBy=Ns,pr.invokeMap=Mc,pr.iteratee=cu,pr.keyBy=Ec,pr.keys=Ts,pr.keysIn=Is,pr.map=Pc,pr.mapKeys=function(t,e){var n={};return e=ea(e,3),Jr(t,function(t,r,o){Nr(n,e(t,r,o),t)}),n},pr.mapValues=function(t,e){var n={};return e=ea(e,3),Jr(t,function(t,r,o){Nr(n,r,e(t,r,o))}),n},pr.matches=function(t){return mo(Ir(t,c))},pr.matchesProperty=function(t,e){return bo(t,Ir(e,c))},pr.memoize=kc,pr.merge=Ls,pr.mergeWith=ks,pr.method=su,pr.methodOf=uu,pr.mixin=lu,pr.negate=Dc,pr.nthArg=function(t){return t=gs(t),jo(function(e){return Co(e,t)})},pr.omit=Ds,pr.omitBy=function(t,e){return Fs(t,Dc(ea(e)))},pr.once=function(t){return Bc(2,t)},pr.orderBy=function(t,e,n,o){return null==t?[]:(Kc(e)||(e=null==e?[]:[e]),Kc(n=o?r:n)||(n=null==n?[]:[n]),Mo(t,e,n))},pr.over=pu,pr.overArgs=Uc,pr.overEvery=hu,pr.overSome=du,pr.partial=Fc,pr.partialRight=Vc,pr.partition=Oc,pr.pick=Us,pr.pickBy=Fs,pr.property=yu,pr.propertyOf=function(t){return function(e){return null==t?r:Zr(t,e)}},pr.pull=tc,pr.pullAll=ec,pr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ro(t,e,ea(n,2)):t},pr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ro(t,e,r,n):t},pr.pullAt=nc,pr.range=_u,pr.rangeRight=gu,pr.rearg=Gc,pr.reject=function(t,e){return(Kc(t)?De:Wr)(t,Dc(ea(e,3)))},pr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ea(e,3);++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Ao(t,o),n},pr.rest=function(t,e){if("function"!=typeof t)throw new Yt(i);return jo(t,e=e===r?e:gs(e))},pr.reverse=rc,pr.sampleSize=function(t,e,n){return e=(n?va(t,e,n):e===r)?1:gs(e),(Kc(t)?Mr:Io)(t,e)},pr.set=function(t,e,n){return null==t?t:Lo(t,e,n)},pr.setWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:Lo(t,e,n,o)},pr.shuffle=function(t){return(Kc(t)?Er:Uo)(t)},pr.slice=function(t,e,n){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&va(t,e,n)?(e=0,n=o):(e=null==e?0:gs(e),n=n===r?o:gs(n)),Fo(t,e,n)):[]},pr.sortBy=Rc,pr.sortedUniq=function(t){return t&&t.length?Ho(t):[]},pr.sortedUniqBy=function(t,e){return t&&t.length?Ho(t,ea(e,2)):[]},pr.split=function(t,e,n){return n&&"number"!=typeof n&&va(t,e,n)&&(e=n=r),(n=n===r?R:n>>>0)?(t=ws(t))&&("string"==typeof e||null!=e&&!ss(e))&&!(e=qo(e))&&bn(t)?oi(Bn(t),0,n):t.split(e,n):[]},pr.spread=function(t,e){if("function"!=typeof t)throw new Yt(i);return e=null==e?0:Hn(gs(e),0),jo(function(n){var r=n[e],o=oi(n,0,e);return r&&Ge(o,r),je(t,this,o)})},pr.tail=function(t){var e=null==t?0:t.length;return e?Fo(t,1,e):[]},pr.take=function(t,e,n){return t&&t.length?Fo(t,0,(e=n||e===r?1:gs(e))<0?0:e):[]},pr.takeRight=function(t,e,n){var o=null==t?0:t.length;return o?Fo(t,(e=o-(e=n||e===r?1:gs(e)))<0?0:e,o):[]},pr.takeRightWhile=function(t,e){return t&&t.length?Xo(t,ea(e,3),!1,!0):[]},pr.takeWhile=function(t,e){return t&&t.length?Xo(t,ea(e,3)):[]},pr.tap=function(t,e){return e(t),t},pr.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Yt(i);return rs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Tc(t,e,{leading:r,maxWait:e,trailing:o})},pr.thru=_c,pr.toArray=ys,pr.toPairs=Vs,pr.toPairsIn=Gs,pr.toPath=function(t){return Kc(t)?Ve(t,Ua):fs(t)?[t]:yi(Da(ws(t)))},pr.toPlainObject=bs,pr.transform=function(t,e,n){var r=Kc(t),o=r||Qc(t)||ps(t);if(e=ea(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:rs(t)&&ts(i)?hr(me(t)):{}}return(o?Ie:Jr)(t,function(t,r,o){return e(n,t,r,o)}),n},pr.unary=function(t){return xc(t,1)},pr.union=oc,pr.unionBy=ic,pr.unionWith=ac,pr.uniq=function(t){return t&&t.length?Ko(t):[]},pr.uniqBy=function(t,e){return t&&t.length?Ko(t,ea(e,2)):[]},pr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?Ko(t,r,e):[]},pr.unset=function(t,e){return null==t||Yo(t,e)},pr.unzip=cc,pr.unzipWith=sc,pr.update=function(t,e,n){return null==t?t:Jo(t,e,ei(n))},pr.updateWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:Jo(t,e,ei(n),o)},pr.values=zs,pr.valuesIn=function(t){return null==t?[]:fn(t,Is(t))},pr.without=uc,pr.words=tu,pr.wrap=function(t,e){return Fc(ei(e),t)},pr.xor=lc,pr.xorBy=fc,pr.xorWith=pc,pr.zip=hc,pr.zipObject=function(t,e){return $o(t||[],e||[],Or)},pr.zipObjectDeep=function(t,e){return $o(t||[],e||[],Lo)},pr.zipWith=dc,pr.entries=Vs,pr.entriesIn=Gs,pr.extend=Cs,pr.extendWith=Ms,lu(pr,pr),pr.add=wu,pr.attempt=eu,pr.camelCase=Hs,pr.capitalize=Ws,pr.ceil=Su,pr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=ms(n))==n?n:0),e!==r&&(e=(e=ms(e))==e?e:0),Tr(ms(t),e,n)},pr.clone=function(t){return Ir(t,u)},pr.cloneDeep=function(t){return Ir(t,c|u)},pr.cloneDeepWith=function(t,e){return Ir(t,c|u,e="function"==typeof e?e:r)},pr.cloneWith=function(t,e){return Ir(t,u,e="function"==typeof e?e:r)},pr.conformsTo=function(t,e){return null==e||kr(t,e,Ts(e))},pr.deburr=qs,pr.defaultTo=function(t,e){return null==t||t!=t?e:t},pr.divide=Cu,pr.endsWith=function(t,e,n){t=ws(t),e=qo(e);var o=t.length,i=n=n===r?o:Tr(gs(n),0,o);return(n-=e.length)>=0&&t.slice(n,i)==e},pr.eq=zc,pr.escape=function(t){return(t=ws(t))&&yt.test(t)?t.replace(ht,gn):t},pr.escapeRegExp=function(t){return(t=ws(t))&&Ct.test(t)?t.replace(St,"\\$&"):t},pr.every=function(t,e,n){var o=Kc(t)?ke:Gr;return n&&va(t,e,n)&&(e=r),o(t,ea(e,3))},pr.find=mc,pr.findIndex=qa,pr.findKey=function(t,e){return Je(t,ea(e,3),Jr)},pr.findLast=bc,pr.findLastIndex=Ka,pr.findLastKey=function(t,e){return Je(t,ea(e,3),Xr)},pr.floor=Mu,pr.forEach=wc,pr.forEachRight=Sc,pr.forIn=function(t,e){return null==t?t:Kr(t,ea(e,3),Is)},pr.forInRight=function(t,e){return null==t?t:Yr(t,ea(e,3),Is)},pr.forOwn=function(t,e){return t&&Jr(t,ea(e,3))},pr.forOwnRight=function(t,e){return t&&Xr(t,ea(e,3))},pr.get=As,pr.gt=Hc,pr.gte=Wc,pr.has=function(t,e){return null!=t&&fa(t,e,no)},pr.hasIn=xs,pr.head=Ja,pr.identity=au,pr.includes=function(t,e,n,r){t=Jc(t)?t:zs(t),n=n&&!r?gs(n):0;var o=t.length;return n<0&&(n=Hn(o+n,0)),ls(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Qe(t,e,n)>-1},pr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=Hn(r+o,0)),Qe(t,e,o)},pr.inRange=function(t,e,n){return e=_s(e),n===r?(n=e,e=0):n=_s(n),oo(t=ms(t),e,n)},pr.invoke=js,pr.isArguments=qc,pr.isArray=Kc,pr.isArrayBuffer=Yc,pr.isArrayLike=Jc,pr.isArrayLikeObject=Xc,pr.isBoolean=function(t){return!0===t||!1===t||os(t)&&to(t)==I},pr.isBuffer=Qc,pr.isDate=Zc,pr.isElement=function(t){return os(t)&&1===t.nodeType&&!cs(t)},pr.isEmpty=function(t){if(null==t)return!0;if(Jc(t)&&(Kc(t)||"string"==typeof t||"function"==typeof t.splice||Qc(t)||ps(t)||qc(t)))return!t.length;var e=sa(t);if(e==V||e==K)return!t.size;if(Sa(t))return!yo(t).length;for(var n in t)if(te.call(t,n))return!1;return!0},pr.isEqual=function(t,e){return uo(t,e)},pr.isEqualWith=function(t,e,n){var o=(n="function"==typeof n?n:r)?n(t,e):r;return o===r?uo(t,e,r,n):!!o},pr.isError=$c,pr.isFinite=function(t){return"number"==typeof t&&Vn(t)},pr.isFunction=ts,pr.isInteger=es,pr.isLength=ns,pr.isMap=is,pr.isMatch=function(t,e){return t===e||fo(t,e,ra(e))},pr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,fo(t,e,ra(e),n)},pr.isNaN=function(t){return as(t)&&t!=+t},pr.isNative=function(t){if(wa(t))throw new Gt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return po(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=as,pr.isObject=rs,pr.isObjectLike=os,pr.isPlainObject=cs,pr.isRegExp=ss,pr.isSafeInteger=function(t){return es(t)&&t>=-E&&t<=E},pr.isSet=us,pr.isString=ls,pr.isSymbol=fs,pr.isTypedArray=ps,pr.isUndefined=function(t){return t===r},pr.isWeakMap=function(t){return os(t)&&sa(t)==Q},pr.isWeakSet=function(t){return os(t)&&"[object WeakSet]"==to(t)},pr.join=function(t,e){return null==t?"":Gn.call(t,e)},pr.kebabCase=Ks,pr.last=$a,pr.lastIndexOf=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=o;return n!==r&&(i=(i=gs(n))<0?Hn(o+i,0):Wn(i,o-1)),e==e?An(t,e,i):Xe(t,$e,i,!0)},pr.lowerCase=Ys,pr.lowerFirst=Js,pr.lt=hs,pr.lte=ds,pr.max=function(t){return t&&t.length?zr(t,au,eo):r},pr.maxBy=function(t,e){return t&&t.length?zr(t,ea(e,2),eo):r},pr.mean=function(t){return tn(t,au)},pr.meanBy=function(t,e){return tn(t,ea(e,2))},pr.min=function(t){return t&&t.length?zr(t,au,go):r},pr.minBy=function(t,e){return t&&t.length?zr(t,ea(e,2),go):r},pr.stubArray=vu,pr.stubFalse=mu,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Eu,pr.nth=function(t,e){return t&&t.length?Co(t,gs(e)):r},pr.noConflict=function(){return we._===this&&(we._=ie),this},pr.noop=fu,pr.now=Ac,pr.pad=function(t,e,n){t=ws(t);var r=(e=gs(e))?xn(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Ti(Dn(o),n)+t+Ti(In(o),n)},pr.padEnd=function(t,e,n){t=ws(t);var r=(e=gs(e))?xn(t):0;return e&&r<e?t+Ti(e-r,n):t},pr.padStart=function(t,e,n){t=ws(t);var r=(e=gs(e))?xn(t):0;return e&&r<e?Ti(e-r,n)+t:t},pr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Kn(ws(t).replace(Mt,""),e||0)},pr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&va(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=_s(t),e===r?(e=t,t=0):e=_s(e)),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var i=Yn();return Wn(t+i*(e-t+ge("1e-"+((i+"").length-1))),e)}return xo(t,e)},pr.reduce=function(t,e,n){var r=Kc(t)?ze:rn,o=arguments.length<3;return r(t,ea(e,4),n,o,Fr)},pr.reduceRight=function(t,e,n){var r=Kc(t)?He:rn,o=arguments.length<3;return r(t,ea(e,4),n,o,Vr)},pr.repeat=function(t,e,n){return e=(n?va(t,e,n):e===r)?1:gs(e),No(ws(t),e)},pr.replace=function(){var t=arguments,e=ws(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pr.result=function(t,e,n){var o=-1,i=(e=ni(e,t)).length;for(i||(i=1,t=r);++o<i;){var a=null==t?r:t[Ua(e[o])];a===r&&(o=i,a=n),t=ts(a)?a.call(t):a}return t},pr.round=Pu,pr.runInContext=t,pr.sample=function(t){return(Kc(t)?Cr:To)(t)},pr.size=function(t){if(null==t)return 0;if(Jc(t))return ls(t)?xn(t):t.length;var e=sa(t);return e==V||e==K?t.size:yo(t).length},pr.snakeCase=Xs,pr.some=function(t,e,n){var o=Kc(t)?We:Vo;return n&&va(t,e,n)&&(e=r),o(t,ea(e,3))},pr.sortedIndex=function(t,e){return Go(t,e)},pr.sortedIndexBy=function(t,e,n){return zo(t,e,ea(n,2))},pr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Go(t,e);if(r<n&&zc(t[r],e))return r}return-1},pr.sortedLastIndex=function(t,e){return Go(t,e,!0)},pr.sortedLastIndexBy=function(t,e,n){return zo(t,e,ea(n,2),!0)},pr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Go(t,e,!0)-1;if(zc(t[n],e))return n}return-1},pr.startCase=Qs,pr.startsWith=function(t,e,n){return t=ws(t),n=null==n?0:Tr(gs(n),0,t.length),e=qo(e),t.slice(n,n+e.length)==e},pr.subtract=Ou,pr.sum=function(t){return t&&t.length?an(t,au):0},pr.sumBy=function(t,e){return t&&t.length?an(t,ea(e,2)):0},pr.template=function(t,e,n){var o=pr.templateSettings;n&&va(t,e,n)&&(e=r),t=ws(t),e=Ms({},e,o,zi);var i,a,c=Ms({},e.imports,o.imports,zi),s=Ts(c),u=fn(c,s),l=0,f=e.interpolate||Ft,p="__p += '",h=qt((e.escape||Ft).source+"|"+f.source+"|"+(f===vt?Nt:Ft).source+"|"+(e.evaluate||Ft).source+"|$","g"),d="//# sourceURL="+(te.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++he+"]")+"\n";t.replace(h,function(e,n,r,o,c,s){return r||(r=o),p+=t.slice(l,s).replace(Vt,vn),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),c&&(a=!0,p+="';\n"+c+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),p+="';\n";var y=te.call(e,"variable")&&e.variable;if(y){if(xt.test(y))throw new Gt("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(ut,""):p).replace(lt,"$1").replace(ft,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=eu(function(){return zt(s,d+"return "+p).apply(r,u)});if(_.source=p,$c(_))throw _;return _},pr.times=function(t,e){if((t=gs(t))<1||t>E)return[];var n=R,r=Wn(t,R);e=ea(e),t-=R;for(var o=cn(r,e);++n<t;)e(n);return o},pr.toFinite=_s,pr.toInteger=gs,pr.toLength=vs,pr.toLower=function(t){return ws(t).toLowerCase()},pr.toNumber=ms,pr.toSafeInteger=function(t){return t?Tr(gs(t),-E,E):0===t?t:0},pr.toString=ws,pr.toUpper=function(t){return ws(t).toUpperCase()},pr.trim=function(t,e,n){if((t=ws(t))&&(n||e===r))return un(t);if(!t||!(e=qo(e)))return t;var o=Bn(t),i=Bn(e);return oi(o,hn(o,i),dn(o,i)+1).join("")},pr.trimEnd=function(t,e,n){if((t=ws(t))&&(n||e===r))return t.slice(0,Nn(t)+1);if(!t||!(e=qo(e)))return t;var o=Bn(t);return oi(o,0,dn(o,Bn(e))+1).join("")},pr.trimStart=function(t,e,n){if((t=ws(t))&&(n||e===r))return t.replace(Mt,"");if(!t||!(e=qo(e)))return t;var o=Bn(t);return oi(o,hn(o,Bn(e))).join("")},pr.truncate=function(t,e){var n=30,o="...";if(rs(e)){var i="separator"in e?e.separator:i;n="length"in e?gs(e.length):n,o="omission"in e?qo(e.omission):o}var a=(t=ws(t)).length;if(bn(t)){var c=Bn(t);a=c.length}if(n>=a)return t;var s=n-xn(o);if(s<1)return o;var u=c?oi(c,0,s).join(""):t.slice(0,s);if(i===r)return u+o;if(c&&(s+=u.length-s),ss(i)){if(t.slice(s).search(i)){var l,f=u;for(i.global||(i=qt(i.source,ws(jt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var p=l.index;u=u.slice(0,p===r?s:p)}}else if(t.indexOf(qo(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+o},pr.unescape=function(t){return(t=ws(t))&&dt.test(t)?t.replace(pt,jn):t},pr.uniqueId=function(t){var e=++ee;return ws(t)+e},pr.upperCase=Zs,pr.upperFirst=$s,pr.each=wc,pr.eachRight=Sc,pr.first=Ja,lu(pr,(bu={},Jr(pr,function(t,e){te.call(pr.prototype,e)||(bu[e]=t)}),bu),{chain:!1}),pr.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),Ie(["drop","take"],function(t,e){_r.prototype[t]=function(n){n=n===r?1:Hn(gs(n),0);var o=this.__filtered__&&!e?new _r(this):this.clone();return o.__filtered__?o.__takeCount__=Wn(n,o.__takeCount__):o.__views__.push({size:Wn(n,R),type:t+(o.__dir__<0?"Right":"")}),o},_r.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ie(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;_r.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ea(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Ie(["head","last"],function(t,e){var n="take"+(e?"Right":"");_r.prototype[t]=function(){return this[n](1).value()[0]}}),Ie(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_r.prototype[t]=function(){return this.__filtered__?new _r(this):this[n](1)}}),_r.prototype.compact=function(){return this.filter(au)},_r.prototype.find=function(t){return this.filter(t).head()},_r.prototype.findLast=function(t){return this.reverse().find(t)},_r.prototype.invokeMap=jo(function(t,e){return"function"==typeof t?new _r(this):this.map(function(n){return co(n,t,e)})}),_r.prototype.reject=function(t){return this.filter(Dc(ea(t)))},_r.prototype.slice=function(t,e){t=gs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new _r(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=gs(e))<0?n.dropRight(-e):n.take(e-t)),n)},_r.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_r.prototype.toArray=function(){return this.take(R)},Jr(_r.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),i=pr[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);i&&(pr.prototype[e]=function(){var e=this.__wrapped__,c=o?[1]:arguments,s=e instanceof _r,u=c[0],l=s||Kc(e),f=function(t){var e=i.apply(pr,Ge([t],c));return o&&p?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(s=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=a&&!p,y=s&&!h;if(!a&&l){e=y?e:new _r(this);var _=t.apply(e,c);return _.__actions__.push({func:_c,args:[f],thisArg:r}),new yr(_,p)}return d&&y?t.apply(this,c):(_=this.thru(f),d?o?_.value()[0]:_.value():_)})}),Ie(["pop","push","shift","sort","splice","unshift"],function(t){var e=Jt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(Kc(o)?o:[],t)}return this[n](function(n){return e.apply(Kc(n)?n:[],t)})}}),Jr(_r.prototype,function(t,e){var n=pr[e];if(n){var r=n.name+"";te.call(rr,r)||(rr[r]=[]),rr[r].push({name:e,func:n})}}),rr[xi(r,h).name]=[{name:"wrapper",func:r}],_r.prototype.clone=function(){var t=new _r(this.__wrapped__);return t.__actions__=yi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yi(this.__views__),t},_r.prototype.reverse=function(){if(this.__filtered__){var t=new _r(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},_r.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Kc(t),r=e<0,o=n?t.length:0,i=ua(0,o,this.__views__),a=i.start,c=i.end,s=c-a,u=r?c:a-1,l=this.__iteratees__,f=l.length,p=0,h=Wn(s,this.__takeCount__);if(!n||!r&&o==s&&h==s)return Qo(t,this.__actions__);var d=[];t:for(;s--&&p<h;){for(var y=-1,_=t[u+=e];++y<f;){var g=l[y],v=g.iteratee,m=g.type,b=v(_);if(2==m)_=b;else if(!b){if(1==m)continue t;break t}}d[p++]=_}return d},pr.prototype.at=gc,pr.prototype.chain=function(){return yc(this)},pr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===r&&(this.__values__=ys(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var e,n=this;n instanceof dr;){var o=Ga(n);o.__index__=0,o.__values__=r,e?i.__wrapped__=o:e=o;var i=o;n=n.__wrapped__}return i.__wrapped__=t,e},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _r){var e=t;return this.__actions__.length&&(e=new _r(this)),(e=e.reverse()).__actions__.push({func:_c,args:[rc],thisArg:r}),new yr(e,this.__chain__)}return this.thru(rc)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Qo(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,Pe&&(pr.prototype[Pe]=function(){return this}),pr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(we._=kn,define(function(){return kn})):Ce?((Ce.exports=kn)._=kn,Se._=kn):we._=kn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(){},{}],DbMap:[function(t,e,n){"use strict";cc._RF.push(e,"bcb2agHxHBDnLQAXiVH1tDO","DbMap"),Object.defineProperty(n,"__esModule",{value:!0}),n.CLEAR_USER_DATA_EXCEPT_KEYS=n.NO_ENCRYPT_KEYS=n.ENABLE_ENCRYPT=n.LOAD_KEYS=void 0,n.LOAD_KEYS=["local","bag","battle","userInfo"],n.ENABLE_ENCRYPT=!1,n.NO_ENCRYPT_KEYS=["local"],n.CLEAR_USER_DATA_EXCEPT_KEYS=["local"],cc._RF.pop()},{}],Db:[function(t,e,n){"use strict";cc._RF.push(e,"e97ecKewSlMh5TYYopGNbCJ","Db");var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=a(t("../../Utils/Utils")),s=t("./LocalStorage"),u=t("./DbMap"),l=function(){function t(){this._saveRequests=[],this._maxQueryPerFrame=5,this._maxTimePerFrame=5,this._nextTaskId=0,this._dataMap=cc.js.createMap(!0),this._pendingSaveTasks=cc.js.createMap(!0)}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._saveHandle||(this._saveHandle=setInterval(this.update.bind(this),16)),this.loadAll()},t.prototype.update=function(){if(0!==this._saveRequests.length){var t=Date.now(),e=0;do{var n=this._saveRequests.shift();this._handlerSaveRequest(n),e++}while(this._saveRequests.length>0&&e<this._maxQueryPerFrame&&Date.now()-t<this._maxTimePerFrame)}},t.prototype.isUpdating=function(){return!!this._saveHandle},t.prototype._handlerSaveRequest=function(t){var e=this.getData(t.key);this.saveData(t.key,e),t.callbacks&&t.callbacks.forEach(function(t){return t&&t()})},t.prototype.loadAll=function(){var t=this;u.LOAD_KEYS.forEach(function(e){return t.loadData(e)})},t.prototype.saveAll=function(){return r(this,void 0,void 0,function(){var t;return o(this,function(){return this._saveRequests.forEach(this._handlerSaveRequest.bind(this)),this._saveRequests.length=0,t=Object.values(this._pendingSaveTasks),[2,Promise.all(t)]})})},t.prototype.clearUserData=function(){var t,e;try{for(var n=i(u.LOAD_KEYS),r=n.next();!r.done;r=n.next()){var o=r.value;u.CLEAR_USER_DATA_EXCEPT_KEYS.includes(o)||(this._dataMap[o]=null,s.LocalStorage.removeItem(o))}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.destroy=function(){this._saveRequests.length=0,this._dataMap=null,this._pendingSaveTasks=null,this._saveHandle&&(clearInterval(this._saveHandle),this._saveHandle=null)},t.prototype.getAllData=function(){return this._dataMap},t.prototype.getData=function(t){return this._dataMap[t]},t.prototype.setData=function(t,e,n){"magic"in e&&(e.magic=(e.magic||0)+1),this._dataMap[t]=e;var r=this._saveRequests.findIndex(function(e){return e.key===t});if(r>=0){if(n){var o=this._saveRequests[r];o.callbacks=o.callbacks||[],o.callbacks.push(n)}}else n?this._saveRequests.push({key:t,callbacks:[n]}):this._saveRequests.push({key:t})},t.prototype.loadData=function(t){var e=s.LocalStorage.getItem(t);if(e){var n=this.decodeObj(t,e);return this._dataMap[t]=n,n}return null},t.prototype.loadDataAsync=function(t,e){var n=this;if(!e)return s.LocalStorage.getItemAsync(t).then(function(e){if(e){var r=n.decodeObj(t,e);return n._dataMap[t]=r,r}return null});this.loadDataAsync(t).then(e)},t.prototype.saveData=function(t,e){var n=this.encodeObj(t,e);s.LocalStorage.setItem(t,n)},t.prototype.saveDataAsync=function(t,e){var n=this;if(!e){var r=this.getData(t),o=this.encodeObj(t,r),i=this._nextTaskId++,a=!1,c=s.LocalStorage.setItemAsync(t,o).then(function(t){return delete n._pendingSaveTasks[i],a=!0,t});return a||(this._pendingSaveTasks[i]=c),c}this.saveDataAsync(t).then(e)},t.prototype.encodeObj=function(t,e){var n=JSON.stringify(e);return u.ENABLE_ENCRYPT&&!u.NO_ENCRYPT_KEYS.includes(t)&&(n=c.default.encode(n)),n},t.prototype.decodeObj=function(t,e){return u.ENABLE_ENCRYPT&&!u.NO_ENCRYPT_KEYS.includes(t)&&(e=c.default.decode(e)),JSON.parse(e)},t._instance=null,t}();n.default=l,cc._RF.pop()},{"../../Utils/Utils":"Utils","./DbMap":"DbMap","./LocalStorage":"LocalStorage"}],EnemyConfig:[function(t,e,n){"use strict";cc._RF.push(e,"3b4baekK7BCxZhfktdqys2i","EnemyConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],EnemyStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"2bad5EVIphDsahstBaHct8c","EnemyStateMachine");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EnemyStateMachine=n.EnemyStatus=void 0;var i,a=t("../../../Utils/StateMachine");(function(t){t[t.Move=0]="Move",t[t.Attack=1]="Attack",t[t.Die=2]="Die"})(i=n.EnemyStatus||(n.EnemyStatus={}));var c=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return o(e,t),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),e}(a.BaseState),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Move,e}return o(e,t),e.prototype.onEnter=function(){var t=this.avatar.getChildByName("img").getComponent(cc.Animation),e="enemy_"+this.context.id+"_walk";t.play(e)},e.prototype.update=function(t){var e=this.context.position,n=this.entityContext.getPlayer().avatar.y;if(e.y<n)e.y=n;else{var r=Math.min(this.context.moveSpeed*t,e.y-n);e.y-=r,e.y<n&&(e.y=n)}this.context.position=e,e.y<=n&&this.changeState(i.Attack)},e}(c),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Attack,e}return o(e,t),e.prototype.onEnter=function(){this._attackCd=0},e.prototype.update=function(t){this._attackCd-=t;for(var e=this.entityContext.getPlayer();this._attackCd<=0&&(this._attackCd+=Math.max(this.config.attackInterval,.01),e.hurt(this.context.attack),e.isAlive()););},e}(c),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=i.Die,e}return o(e,t),e.prototype.onEnter=function(){var t=this,e=this.avatar.getChildByName("img").getComponent(cc.Animation);e.play("enemy_death"),e.on("finished",function(){t.entityContext.removeEnemy(t.context.uid)},this)},e}(c),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.addInitState(new s(n)),r.addState(new u(n)),r.addState(new l(n)),r}return o(e,t),e}(a.StateMachine);n.EnemyStateMachine=f,cc._RF.pop()},{"../../../Utils/StateMachine":"StateMachine"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"4951bvgGoVA7YqNzcaKeiQ5","Enemy");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Enemy=void 0;var a=i(t("../../Component/Gameplay/EntityTag")),c=t("../../Module/ConfigManager"),s=i(t("../../Utils/Path")),u=i(t("../../Utils/Utils")),l=t("./AI/EnemyStateMachine"),f=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.config=c.ConfigManager.instance.getEnemyConfig(r.id),r._hp=r._maxHp=r.config.hp,r._attack=r.config.attack,r._moveSpeed=r.config.moveSpeed,r}return o(e,t),Object.defineProperty(e.prototype,"attack",{get:function(){return this._attack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moveSpeed",{get:function(){return this._moveSpeed},enumerable:!1,configurable:!0}),e.prototype.setConfigFactors=function(t,e,n){this._hp=this._maxHp=Math.floor(this.config.hp*t),this._attack=Math.floor(this.config.attack*e),this._moveSpeed=Math.floor(this.config.moveSpeed*n)},e.prototype.getName=function(){var t="enemy_"+this.id+"_name";return c.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}var n=this.avatar.getComponent(cc.Collider);u.default.getOrAddComponent(n.node,a.default).entity=this},e.prototype.getAssetPath=function(){return s.default.getEntityPath(this.config.asset)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new l.EnemyStateMachine(this,this._context)},e.prototype.isAlive=function(){return this._hp>0},e.prototype.hurt=function(t,e){if(!(t<=0)){var n=Math.min(t,this._hp);this._hp-=n,this._context.battleStats.recordDamage(e.id,n),this._hp<=0&&(this._context.battleStats.addScore(1),this.die())}},e.prototype.heal=function(t){t<=0||(this._hp=Math.min(this._hp+t,this.config.hp))},e.prototype.die=function(){this._entityContext.getPlayer().addExp(this.config.exp),this._sm.changeState(l.EnemyStatus.Die)},e.prototype.update=function(t){this._sm.update(t),this._avatar&&this.isAlive()&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Enemy: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Enemy=f,cc._RF.pop()},{"../../Component/Gameplay/EntityTag":"EntityTag","../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","../../Utils/Utils":"Utils","./AI/EnemyStateMachine":"EnemyStateMachine","./BaseEntity":"BaseEntity"}],EntityManager:[function(t,e,n){"use strict";cc._RF.push(e,"d9fdcWlC35K05kBcN2kW7WF","EntityManager");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityManager=void 0;var a=t("./Bullet"),c=t("./Enemy"),s=t("./Guard"),u=t("./Player"),l={GuardCreate:"GuardCreate",GuardDestroy:"GuardDestroy",BulletCreate:"BulletCreate",BulletDestroy:"BulletDestroy",EnemyCreate:"EnemyCreate",EnemyDestroy:"EnemyDestroy",PlayerCreate:"PlayerCreate"},f=function(t){function e(e){var n=t.call(this)||this;return n._guards=new Map,n._bullets=new Map,n._enemies=new Map,n._nextUid=1,n.battleContext=e,n}return o(e,t),e.prototype.createGuard=function(t){var e=this._nextUid++,n=new s.Guard(e,t);return n.setContext(this.battleContext),this._guards.set(e,n),this.emit(l.GuardCreate,n),n},e.prototype.createBullet=function(t){var e=this._nextUid++,n=new a.Bullet(e,t);return n.setContext(this.battleContext),this._bullets.set(e,n),this.emit(l.BulletCreate,n),n},e.prototype.createEnemy=function(t){var e=this._nextUid++,n=new c.Enemy(e,t);return n.setContext(this.battleContext),this._enemies.set(e,n),this.emit(l.EnemyCreate,n),n},e.prototype.createPlayer=function(t){return this._player=new u.Player(t),this.emit(l.PlayerCreate,this._player),this._player},e.prototype.upgradeGuard=function(t,e){var n=this;e.every(function(t){return null!=n._guards.get(t)})&&(e.forEach(function(t){return n.removeGuard(t)}),this.createGuard(t))},e.prototype.removeGuard=function(t){var e=this._guards.get(t);null!=e&&(e.destroy(),this._guards.delete(t),this.emit(l.GuardDestroy,e))},e.prototype.removeBullet=function(t){var e=this._bullets.get(t);null!=e&&(e.destroy(),this._bullets.delete(t),this.emit(l.BulletDestroy,e))},e.prototype.removeEnemy=function(t){var e=this._enemies.get(t);null!=e&&(e.destroy(),this._enemies.delete(t),this.emit(l.EnemyDestroy,e))},e.prototype.getGuard=function(t){return this._guards.get(t)},e.prototype.getAllGuards=function(){return this._guards},e.prototype.getBullet=function(t){return this._bullets.get(t)},e.prototype.getAllBullets=function(){return this._bullets},e.prototype.getEnemy=function(t){return this._enemies.get(t)},e.prototype.getAllEnemies=function(){return this._enemies},e.prototype.getPlayer=function(){return this._player},e.prototype.destroy=function(){var t,e,n,r,o,a;try{for(var c=i(this._guards.keys()),s=c.next();!s.done;s=c.next()){var u=s.value;this.removeGuard(u)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}this._guards.clear();try{for(var l=i(this._bullets.keys()),f=l.next();!f.done;f=l.next())u=f.value,this.removeBullet(u)}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}this._bullets.clear();try{for(var p=i(this._enemies.keys()),h=p.next();!h.done;h=p.next())u=h.value,this.removeEnemy(u)}catch(_){o={error:_}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}this._enemies.clear(),this._player&&(this._player.destroy(),this._player=null)},e.Events=l,e}(cc.EventTarget);n.EntityManager=f,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Guard":"Guard","./Player":"Player"}],EntityTag:[function(t,e,n){"use strict";cc._RF.push(e,"3be69fxeqBDuYLXZxD/i0/a","EntityTag");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],FFComponent:[function(t,e,n){"use strict";cc._RF.push(e,"07750AVKTxCaZdh9/NziAnw","FFComponent");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator.ccclass,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._res=[],e}return o(e,t),e.prototype.onDestroy=function(){for(var t=0;t<this._res.length;t++){var e=this._res[t];cc.isValid(e)&&this.releaseAsset(e)}this._res.length=0},e.prototype.loadAutoRes=function(t,e,n,r){var o=this;r||(r=this),u.default.loadRes(t,e,function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];o.retainAsset(r),o._res.push(r)}else o.retainAsset(t),o._res.push(t);n&&n(t)},r)},e.prototype.loadAutoResAsync=function(t,e,n){var r=this;return n||(n=this),u.default.loadResAsync(t,e,n).then(function(t){return r.retainAsset(t),r._res.push(t),t})},e.prototype.retainAsset=function(){},e.prototype.releaseAsset=function(){},i([c],e)}(cc.Component);n.default=s;var u=a(t("./Loader"));cc._RF.pop()},{"./Loader":"Loader"}],GameDefine:[function(t,e,n){"use strict";cc._RF.push(e,"cd8d69FOLlB176+5MoyeEMa","GameDefine"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.InitGuardId=1,t}();n.default=r,cc._RF.pop()},{}],GameScene:[function(t,e,n){"use strict";cc._RF.push(e,"e68c0oV6G1DEJzPMEqGZ3aG","GameScene");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../../Gameplay/System/BagSystem"),f=t("../../Debug/EasyMenu/eMenu"),p=t("../../Gameplay/System/BattleSystem"),h=u(t("../../Module/Audio")),d=t("../../Module/ConfigManager"),y=u(t("../../Module/Loader")),_=u(t("../../Module/ViewModule")),g=u(t("../../Utils/Path")),v=cc._decorator,m=v.ccclass,b=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topUI=null,e.bottomUI=null,e.labelGamecircle=null,e.labelMail=null,e.labelCoin=null,e.labelHeroSoul=null,e.labelEnergy=null,e.labelUserName=null,e.labelCall=null,e.labelBag=null,e}return o(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){return c(this,function(){return this.initUI(),this.initBGM(),this.initUserInfo(),this.initDebug(),[2]})})},e.prototype.initUI=function(){_.default.instance.translateView("HomeWorld");var t=d.ConfigManager.instance.getLanConfig("ui_mail"),e=d.ConfigManager.instance.getLanConfig("ui_gamecircle"),n=d.ConfigManager.instance.getLanConfig("ui_call"),r=d.ConfigManager.instance.getLanConfig("ui_bag");this.labelMail.string=t,this.labelGamecircle.string=e,this.labelCall.string=n,this.labelBag.string=r,p.BattleSystem.instance.targetOff(this),p.BattleSystem.instance.on(p.BattleSystem.Events.BattleStart,this.onBattleStart,this),p.BattleSystem.instance.on(p.BattleSystem.Events.BattleEnd,this.onBattleEnd,this)},e.prototype.initBGM=function(){var t=g.default.getAudioBGM(2);h.default.instance.stopMusic(),h.default.instance.playMusic(t)},e.prototype.initUserInfo=function(){var t=l.BagSystem.instance.getItemCount(1),e=l.BagSystem.instance.getItemCount(2),n=l.BagSystem.instance.getItemCount(3);this.labelCoin.string=""+t,this.labelEnergy.string=""+e,this.labelHeroSoul.string=""+n,this.labelUserName.string=""},e.prototype.initDebug=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,i,a,u,l,h;return c(this,function(c){switch(c.label){case 0:return[4,y.default.loadPrefabAsync(g.default.DEBUG_BUNDLE_PREFIX+"EasyMenu/EasyMenu",this)];case 1:t=c.sent(),(e=cc.instantiate(t)).parent=cc.Camera.main.node,n=e.getComponent(f.eMenu),r=n.addGroup("Level"),o=function(t){var e="Level "+t.level;r.addItem(e,function(){p.BattleSystem.instance.startBattle(t.level)})};try{for(i=s(d.ConfigManager.instance.getLevelConfigs().values()),a=i.next();!a.done;a=i.next())u=a.value,o(u)}catch(_){l={error:_}}finally{try{a&&!a.done&&(h=i.return)&&h.call(i)}finally{if(l)throw l.error}}return[2]}})})},e.prototype.onSetting=function(){},e.prototype.onAddEnergy=function(){},e.prototype.onAddHeroSoul=function(){},e.prototype.onMail=function(){},e.prototype.onGamecircle=function(){},e.prototype.onCall=function(){},e.prototype.onBag=function(){},e.prototype.onBattleStart=function(){this.topUI.active=!1,this.bottomUI.active=!1},e.prototype.onBattleEnd=function(){this.topUI.active=!0,this.bottomUI.active=!0},i([b(cc.Node)],e.prototype,"topUI",void 0),i([b(cc.Node)],e.prototype,"bottomUI",void 0),i([b(cc.Label)],e.prototype,"labelGamecircle",void 0),i([b(cc.Label)],e.prototype,"labelMail",void 0),i([b(cc.Label)],e.prototype,"labelCoin",void 0),i([b(cc.Label)],e.prototype,"labelHeroSoul",void 0),i([b(cc.Label)],e.prototype,"labelEnergy",void 0),i([b(cc.Label)],e.prototype,"labelUserName",void 0),i([b(cc.Label)],e.prototype,"labelCall",void 0),i([b(cc.Label)],e.prototype,"labelBag",void 0),i([m],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../../Debug/EasyMenu/eMenu":"eMenu","../../Gameplay/System/BagSystem":"BagSystem","../../Gameplay/System/BattleSystem":"BattleSystem","../../Module/Audio":"Audio","../../Module/ConfigManager":"ConfigManager","../../Module/Loader":"Loader","../../Module/ViewModule":"ViewModule","../../Utils/Path":"Path"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"a3f38mvysRA1ZPXCcZGv0Pa","Game");var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./System/BagSystem"),c=t("./System/BattleSystem"),s=function(){function t(){this._scheduleHandler=null,this._scene=null,this._systems=null,this._isInited=!1}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:cc.game.setFrameRate(60),this._systems=[a.BagSystem.instance,c.BattleSystem.instance],console.log("[Game] system init start ==============="),t=0,n.label=1;case 1:return t<this._systems.length?(e=this._systems[t],console.log("[Game] init system "+e.name),[4,e.init()]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:console.log("[Game] system lateInit start ==============="),t=0,n.label=5;case 5:return t<this._systems.length?(e=this._systems[t]).lateInit?(console.log("[Game] lateInit system "+e.name),[4,e.lateInit()]):[3,7]:[3,8];case 6:n.sent(),n.label=7;case 7:return t++,[3,5];case 8:return this._isInited=!0,console.log("[Game] init finish ==============="),this.startInterval(),[2]}})})},t.prototype.isInited=function(){return this._isInited},t.prototype.setAttachScene=function(t){this._scene=t,this.startInterval()},t.prototype.startInterval=function(){cc.director.getScheduler().scheduleUpdate(this,0,!1)},t.prototype.clearInterval=function(){cc.director.getScheduler().unscheduleUpdate(this)},t.prototype.destroy=function(){var e,n;if(this._systems){try{for(var r=i(this._systems),o=r.next();!o.done;o=r.next()){var a=o.value;a.destroy&&a.destroy()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}this.clearInterval(),this._systems=null,t._instance=null,cc.director.getScheduler().unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_NON_SYSTEM)}},t.prototype.update=function(t){var e,n,r,o;try{try{for(var a=i(this._systems),c=a.next();!c.done;c=a.next())(l=c.value).logicUpdate(t)}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var s=i(this._systems),u=s.next();!u.done;u=s.next()){var l;(l=u.value).lateLogicUpdate&&l.lateLogicUpdate(t)}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}}catch(h){}},t._instance=null,t}();n.default=s,cc._RF.pop()},{"./System/BagSystem":"BagSystem","./System/BattleSystem":"BattleSystem"}],GuardConfig:[function(t,e,n){"use strict";cc._RF.push(e,"48749CxSFBKvokEhCTbmgjX","GuardConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GuardStateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"d12a6QOCVpN4bnE6f6gC3Hc","GuardStateMachine");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GuardStateMachine=n.GuardStatus=void 0;var a,c=t("../../../Utils/StateMachine");(function(t){t[t.Idle=0]="Idle",t[t.Chase=1]="Chase",t[t.Attack=2]="Attack"})(a=n.GuardStatus||(n.GuardStatus={}));var s=function(t){function e(e){var n=t.call(this)||this;return n.battleContext=e,n.entityContext=e.entityManager,n}return o(e,t),Object.defineProperty(e.prototype,"guard",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.context.avatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attackTarget",{get:function(){return this.context.attackTarget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.context.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anim",{get:function(){return this.avatar.getChildByName("img").getComponent(cc.Animation)||null},enumerable:!1,configurable:!0}),e}(c.BaseState),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Idle,e.searchCd=0,e}return o(e,t),e.prototype.onEnter=function(){var t=this,e="guard_"+this.guard.id+"_idle";this.guard.playAnim(e,function(){t.searchCd=0})},e.prototype.onExit=function(){this.anim&&this.anim.stop()},e.prototype.update=function(t){if(null!=this.avatar&&(this.searchCd>0&&(this.searchCd-=t),this.searchCd<=0)){this.searchCd=e.SEARCH_CD;var n=void 0,r=this.guard.avatar.getPosition(),o=this.battleContext.terrain.guardFrontierY;if(r.y>=o){var i=this.config.attackRange*this.config.attackRange;n=this.getAllValidTargets(function(t){return t.position.y<o||cc.Vec2.squaredDistance(t.position,r)<=i})}else n=this.getAllValidTargets();if(!n)return;var c=new Set(Array.from(this.entityContext.getAllGuards().values()).map(function(t){return t.attackTarget}));this.guard.attackTarget=this.findTarget(n,c),this.guard.canMove()?this.changeState(a.Chase):this.changeState(a.Attack)}},e.prototype.getAllValidTargets=function(t){var e=this.entityContext.getAllEnemies();if(0==e.size)return null;var n=Array.from(e.values()).filter(function(e){return null!=e.avatar&&e.isAlive()&&(!t||t(e))});return 0==n.length?null:n},e.prototype.findTarget=function(t,e){var n,r,o,a;if(!t||0===t.length)return null;var c=null,s=this.avatar.getPosition(),u=Number.MAX_VALUE;try{for(var l=i(t),f=l.next();!f.done;f=l.next()){var p=f.value;e.has(p)||(y=cc.Vec2.squaredDistance(s,p.avatar.getPosition()))<u&&(u=y,c=p)}}catch(_){n={error:_}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(null==c){u=Number.MAX_VALUE;try{for(var h=i(t),d=h.next();!d.done;d=h.next()){var y;p=d.value,(y=cc.Vec2.squaredDistance(s,p.avatar.getPosition()))<u&&(u=y,c=p)}}catch(g){o={error:g}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}return c},e.SEARCH_CD=.1,e}(s),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Chase,e.isRechasing=!1,e}return o(e,t),e.prototype.onEnter=function(t){void 0===t&&(t=!1);var e="guard_"+this.guard.id+"_walk";this.guard.playAnim(e),this.isRechasing=t},e.prototype.onExit=function(){this.guard.stopAnim()},e.prototype.update=function(t){var e=this.guard.attackTarget;if(e&&e.isAlive()){var n=this.guard.config,r=this.guard.avatar.getPosition(),o=e.avatar.getPosition();if(r.y>=this.battleContext.terrain.guardFrontierY&&o.y>r.y)this.changeState(a.Idle);else{var i=cc.Vec2.distance(o,r),c=n.attackRange;if(this.isRechasing&&(c*=.7),i<=c)this.changeState(a.Attack);else{var s=Math.min(n.moveSpeed*t,i),u=o.sub(r);u.normalizeSelf(),u.mulSelf(s),r.addSelf(u),this.guard.avatar.setPosition(r)}}}else this.changeState(a.Idle)},e}(s),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=a.Attack,e}return o(e,t),e.prototype.onEnter=function(){this._attackCd=0},e.prototype.onExit=function(){},e.prototype.update=function(t){if(null==this.attackTarget||!this.attackTarget.isAlive())return this.guard.attackTarget=null,void this.changeState(a.Idle);for(this._attackCd-=t;this._attackCd<=0;){this._attackCd+=Math.max(this.config.attackInterval,.01);var e=this.guard.avatar.getPosition(),n=this.attackTarget.avatar.getPosition();if(cc.Vec2.squaredDistance(n,e)>this.config.attackRange*this.config.attackRange)return void(this.guard.canMove()?this.changeState(a.Chase,!0):(cc.warn("\u76ee\u6807\uff08"+this.guard.attackTarget+"\uff09\u8ddd\u79bb\u8fc7\u8fdc\uff0c\u5b88\u536b\uff08"+this.guard+"\uff09\u65e0\u6cd5\u79fb\u52a8\uff0c\u91cd\u65b0\u641c\u7d22"),this.guard.attackTarget=null,this.changeState(a.Idle)));var r="guard_"+this.guard.id+"_attack";if(this.guard.playAnim(r),this.config.bullet){var o=this.config.bullet,i=o.count>1?o.angleRange/(o.count-1):0,c=this.guard.position,s=this.attackTarget.position.sub(this.guard.position);s.normalizeSelf();for(var u=(o.count-1)/2,l=cc.v2(),f=-u;f<=u;f++){s.rotate(cc.misc.degreesToRadians(f*i),l);var p=this.entityContext.createBullet(o.bulletId);p.owner=this.guard,p.direction=l,p.createAvatar({parent:this.battleContext.terrain.node,position:c})}}else if(this.attackTarget.hurt(this.config.attack,this.guard),!this.attackTarget.isAlive()){this.guard.attackTarget=null,this.changeState(a.Idle);break}}},e}(s),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.addInitState(new u(n)),r.addState(new l(n)),r.addState(new f(n)),r}return o(e,t),e}(c.StateMachine);n.GuardStateMachine=p,cc._RF.pop()},{"../../../Utils/StateMachine":"StateMachine"}],Guard:[function(t,e,n){"use strict";cc._RF.push(e,"27994wYqlRF96uHmlb1zAtN","Guard");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Guard=void 0;var a=t("../../Module/ConfigManager"),c=i(t("../../Utils/Path")),s=t("./AI/GuardStateMachine"),u=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.config=a.ConfigManager.instance.getGuardConfig(r.id),r.type=r.config.type,r}return o(e,t),e.prototype.getName=function(){var t="guard_"+this.id+"_name";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.getDesc=function(){var t="guard_"+this.id+"_desc";return a.ConfigManager.instance.getLanConfig(t)},e.prototype.onAvatarReady=function(){this._sm.initState();var t=this.avatar.getChildByName("labelName");if(t){var e=t.getComponent(cc.Label);e&&(e.string=this.getName())}},e.prototype.getAssetPath=function(){return c.default.getEntityPath(this.config.asset)},e.prototype.setContext=function(e){t.prototype.setContext.call(this,e),this._sm=new s.GuardStateMachine(this,this._context)},e.prototype.canMove=function(){return this.config.moveSpeed>0},e.prototype.getDistance=function(t){return!this.avatar||t.avatar?Number.MAX_VALUE:cc.Vec2.distance(this.avatar.getPosition(),t.avatar.getPosition())},e.prototype.isAlive=function(){return!0},e.prototype.update=function(t){this._sm.update(t),this._avatar&&(this._avatar.zIndex=-this._avatar.getPosition().y)},e.prototype.toString=function(){return"Guard: "+this.getName()+"["+this.uid+"]"},e}(t("./BaseEntity").BaseEntity);n.Guard=u,cc._RF.pop()},{"../../Module/ConfigManager":"ConfigManager","../../Utils/Path":"Path","./AI/GuardStateMachine":"GuardStateMachine","./BaseEntity":"BaseEntity"}],Heap:[function(t,e,n){"use strict";cc._RF.push(e,"efb3fqYA8lIeaNfwiz2Umgc","Heap"),Object.defineProperty(n,"__esModule",{value:!0}),n.Heap=n.MaxNumberComparer=n.minNumberCompare=void 0,n.minNumberCompare=function(t,e){return t-e},n.MaxNumberComparer=function(t,e){return e-t};var r=function(){function t(t){this.items=[],this.itemToIndexMap=new Map,this.innerCompare=t}return t.prototype.peek=function(){return this.items[0]},t.prototype.add=function(t){if(this.itemToIndexMap.has(t))throw new Error("Connot add an item that is already in the heap.");this.items.push(t),this.itemToIndexMap.set(t,this.items.length-1),this.bubbleUpToPlace(this.items.length-1)},t.prototype.pop=function(){if(!this.isEmpty){var t=this.items[0];return this.removeAt(0),t}},Object.defineProperty(t.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){var e=this.itemToIndexMap.get(t);return void 0!==e&&(this.removeAt(e),!0)},t.prototype.clear=function(){this.items.length=0,this.itemToIndexMap.clear()},t.prototype.contains=function(t){return this.itemToIndexMap.has(t)},t.prototype[Symbol.iterator]=function(){return this.items[Symbol.iterator]()},t.prototype.compare=function(t,e){var n=this.innerCompare(t,e);if("number"!=typeof n)throw new Error("The typeof compare result cannot be different from number: "+n);if(isNaN(n))throw new Error("Compare result cannot be is NaN.");return n},t.prototype.removeAt=function(t){if(1!==this.items.length){if(t===this.items.length-1)return this.itemToIndexMap.delete(this.items[this.items.length-1]),void(this.items.length=this.items.length-1);var e=this.items[t];this.itemToIndexMap.delete(e),this.items[t]=this.items[this.items.length-1],this.items.splice(this.items.length-1,1),this.itemToIndexMap.set(this.items[t],t);var n=this.compare(this.items[t],e);n<0?this.bubbleUpToPlace(t):n>0&&this.bubbleDownToPlace(t)}else this.clear()},t.prototype.getLeftChildIndex=function(t){return 2*t+1},t.prototype.getParentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.getSmallerChildIndex=function(t,e){return e>=this.items.length?t>=this.items.length?void 0:t:t>=this.items.length?e:this.compare(this.items[t],this.items[e])<=0?t:e},t.prototype.bubbleUpToPlace=function(t){if(0!==t)for(var e=this.items[t];;){var n=this.getParentIndex(t),r=this.items[n];if(this.compare(r,e)<=0)break;if(this.swap(t,n,e,r),0===n)break;t=n}},t.prototype.bubbleDownToPlace=function(t){for(var e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1);void 0!==n;){var r=this.items[t],o=this.items[n];if(this.compare(r,o)<0)break;this.swap(t,n,r,o),t=n,e=this.getLeftChildIndex(t),n=this.getSmallerChildIndex(e,e+1)}},t.prototype.swap=function(t,e,n,r){n=n||this.items[t],r=r||this.items[e];var o=n;this.items[t]=r,this.items[e]=o,this.itemToIndexMap.set(n,e),this.itemToIndexMap.set(r,t)},t}();n.Heap=r,cc._RF.pop()},{}],HomeWorld:[function(t,e,n){"use strict";cc._RF.push(e,"55eb9DE7U9MUa1a/1erpYZE","HomeWorld");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=a(t("../../Enum/ViewType")),s=t("../../Gameplay/System/BattleSystem"),u=t("../../Module/ConfigManager"),l=a(t("../../Module/ViewHandler")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=c.default.World,e.labelStart=null,e}return o(e,t),e.prototype.start=function(){var t=u.ConfigManager.instance.getLanConfig("ui_start");this.labelStart.string=t},e.prototype.initiateView=function(){},e.prototype.onStart=function(){s.BattleSystem.instance.startBattle(1)},i([h(cc.Label)],e.prototype,"labelStart",void 0),i([p],e)}(l.default);n.default=d,cc._RF.pop()},{"../../Enum/ViewType":"ViewType","../../Gameplay/System/BattleSystem":"BattleSystem","../../Module/ConfigManager":"ConfigManager","../../Module/ViewHandler":"ViewHandler"}],IBaseData:[function(t,e,n){"use strict";cc._RF.push(e,"22057+z7bdKGI+ID4U/spoA","IBaseData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IBattleContext:[function(t,e,n){"use strict";cc._RF.push(e,"f5498sN/utKFJ0deWwxqdxq","IBattleContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IDGenerator:[function(t,e,n){"use strict";cc._RF.push(e,"a7d2bS2du5C86PRtr1aeBMD","IDGenerator"),Object.defineProperty(n,"__esModule",{value:!0});var r=".",o=function(){function t(t){this._id=0,this._prefix=null,this._id=0,this._prefix=t?t+r:""}return t.prototype.getNewId=function(){return this._prefix+ ++this._id},t}();n.default=o,cc._RF.pop()},{}],IEntityContext:[function(t,e,n){"use strict";cc._RF.push(e,"1c116wEEDxLQZUUOXZQ9CIt","IEntityContext"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISystem:[function(t,e,n){"use strict";cc._RF.push(e,"9c233bin2tHr6HSs6zSCFrr","ISystem"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LanConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a1242FlPRZOcK06+6zZfsK/","LanConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanType=void 0,function(t){t.cn="cn",t.tw="tw",t.en="en"}(n.LanType||(n.LanType={})),cc._RF.pop()},{}],LevelConfig:[function(t,e,n){"use strict";cc._RF.push(e,"170e4OMJIZNFbhep3LIbOt5","LevelConfig"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Loader:[function(t,e,n){"use strict";cc._RF.push(e,"dd1a6ygV1VBWpvlJhS4TLYY","Loader");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t("../Utils/Path")),i=r(t("./AutoRelease")),a=function(){function t(){}return t.loadPrefab=function(t,e,n){this.loadRes(t,cc.Prefab,e,n)},t.loadPrefabAsync=function(t,e){return this.loadResAsync(t,cc.Prefab,e)},t.loadRes=function(e,n,r,o){var i=t._parseParams(e),a=i.bundleName,c=i.resPath;t.loadBundle(a,function(t){function i(t){o&&!cc.isValid(o,!0)||r&&r(t)}t.load(c,n,function(t,n){t?console.warn("[Loader] loadRes failed, res: "+e.toString(),t):i(n)})})},t.loadResAsync=function(e,n,r){return new Promise(function(o,i){var a=t._parseParams(e),c=a.bundleName,s=a.resPath;t.loadBundle(c,function(t){t.load(s,n,function(t,n){if(t)return console.warn("[Loader] loadResAsync failed, res: "+e,t),void i(t);r&&!cc.isValid(r,!0)||o(n)})})})},t.loadBundle=function(e,n){var r;r=Array.isArray(e)?e:[e];var o=[];(function i(){if(r.length>0){var a=r.shift();t._loadBundle(a,function(t){o.push(t),i()})}else n&&(Array.isArray(e)?n(o):n(o[0]))})()},t._loadBundle=function(e,n){var r=t._loadQueue.find(function(t){return t.bundleName==e});r?n&&r.callbacks.push(n):t._loadQueue.push({bundleName:e,callbacks:n?[n]:[]}),t._handleQuery()},t._handleQuery=function(){if(!t._isLoading&&0!==t._loadQueue.length){t._isLoading=!0;var e=t._loadQueue.shift(),n=e.bundleName,r=e.callbacks,o=cc.assetManager.getBundle(n);o?(r.length&&r.forEach(function(t){return t(o)}),t._isLoading=!1,t._handleQuery()):cc.assetManager.loadBundle(n,null,function(e,o){e?console.warn("[Loader] loadBundle failed, bundle: "+n+", err: "+e):(r.length&&r.forEach(function(t){return t(o)}),t._isLoading=!1,t._handleQuery())})}},t._parseParams=function(t){var e,n;if(t instanceof Array)n=[],t.forEach(function(t){var r=o.default.parseBundleName(t);e=r.bundleName,n.push(r.path)});else{var r=o.default.parseBundleName(t);e=r.bundleName,n=r.path}return{bundleName:e,resPath:n}},t.instantiate=function(t){var e=cc.instantiate(t);return e.addComponent(i.default).init(t),e},t._loadQueue=[],t._isLoading=!1,t}();n.default=a,cc._RF.pop()},{"../Utils/Path":"Path","./AutoRelease":"AutoRelease"}],LoadingView:[function(t,e,n){"use strict";cc._RF.push(e,"58400skqeRIy52YWYBjQBME","LoadingView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}var n;return o(e,t),n=e,e.load=function(){return new Promise(function(t){cc.resources.load("View/LoadingView",cc.Prefab,function(e,r){var o=cc.instantiate(r);o.parent=cc.Canvas.instance.node;var i=o.getComponent(n);t(i)})})},e.prototype.init=function(t){this._loadingQuene=t,this._loadingQuene.onProgress=this.setProgress.bind(this);var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.node.parent=null,this.node.setPosition(e),cc.game.addPersistRootNode(this.node)},e.prototype.setProgress=function(t){this.labelLoading&&(this.labelLoading.string="Loading: "+t.toFixed(0)+"%")},e.prototype.finish=function(){var t=this;if(cc.isValid(this.node)){var e=cc.Camera.findCamera(this.node),n=e.node.convertToNodeSpaceAR(this.node.getPosition());this.node.parent=e.node,this.node.setPosition(n),this.scheduleOnce(function(){cc.game.removePersistRootNode(t.node),t.node.destroy()})}},i([s(cc.Label)],e.prototype,"labelLoading",void 0),n=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"5ddc0ovHztLN7miIStcX6pG","Loading"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this._progress=0,this._tweenObj={progress:0},this._tweenProgress=0,this._minLoadingSec=t}return Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tweenProgress",{get:function(){return this._tweenProgress},enumerable:!1,configurable:!0}),t.prototype.start=function(){var t;this._startTs=Date.now(),this._progress=0,this._tweenProgress=0,this._tweenObj.progress=0,this._tween=null,this._minEndTs=this._startTs+1e3*(null!==(t=this._minLoadingSec)&&void 0!==t?t:0),this._updateHandle=setInterval(this.update.bind(this),16)},t.prototype.stop=function(){this._updateHandle&&(clearInterval(this._updateHandle),this._updateHandle=null)},t.prototype.isFinished=function(){return this._tweenProgress>=100},t.prototype.update=function(){this._tweenObj.progress>this._tweenProgress&&(this._tweenProgress=this._tweenObj.progress,this.onProgress&&this.onProgress(this._tweenProgress),this._tweenProgress>=100&&(this.onComplete&&this.onComplete(),this.stop()))},t.prototype.addProgress=function(t){this.setProgress(this._progress+t)},t.prototype.setProgress=function(t){if(!(t<=this._progress)){this._progress=cc.misc.clampf(t,0,100),this._tween&&(this._tween.stop(),this._tween=null);var e=.5;if(t>=100){var n=Date.now();n+1e3*e<this._minEndTs&&(e=(this._minEndTs-n)/1e3)}else e=1;this._tween=cc.tween(this._tweenObj).to(e,{progress:this._progress}).start()}},t}();n.default=r,cc._RF.pop()},{}],LocalData:[function(t,e,n){"use strict";cc._RF.push(e,"fdb45odkdVHWZUqAslH71aA","LocalData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LocalStorage:[function(t,e,n){"use strict";cc._RF.push(e,"33a9eLsEDNAHqJCMlmnaZjF","LocalStorage");var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalStorage=void 0;var o=r(t("../../Utils/Platform")),i=window.wx||window.qq||window.tt,a=function(){function t(){}return t.getItem=function(t){return o.default.isMiniGame()?i.getStorageSync(t):cc.sys.localStorage.getItem(t)},t.getItemAsync=function(t,e){if(!e)return new Promise(function(e){if(o.default.isMiniGame())i.getStorage({key:t,complete:function(t){e(null==t?void 0:t.data)}});else{var n=cc.sys.localStorage.getItem(t);e(n)}});this.getItemAsync(t).then(e)},t.setItem=function(t,e){o.default.isMiniGame()?i.setStorageSync(t,e):cc.sys.localStorage.setItem(t,e)},t.setItemAsync=function(t,e,n){if(!n)return new Promise(function(n){o.default.isMiniGame()?i.setStorage({key:t,data:e,success:function(){n(!0)},fail:function(){n(!1)}}):(cc.sys.localStorage.setItem(t,e),n(!0))});this.setItemAsync(t,e).then(n)},t.removeItem=function(t){this.setItem(t,"")},t}();n.LocalStorage=a,cc._RF.pop()},{"../../Utils/Platform":"Platform"}],NodePool:[function(t,e,n){"use strict";cc._RF.push(e,"48d9bHILP9LLaWfHDJ77uQQ","NodePool");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NodePool=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabMap=new Map,e.templateMap=new Map,e.poolMap=new Map,e}var n;return o(e,t),n=e,e.getInstance=function(){return n._instance},Object.defineProperty(e,"instance",{get:function(){if(null==this._instance){var t=new cc.Node("NodePool");this._instance=t.addComponent(n)}return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){n._instance=this},e.prototype.registerPrefab=function(t,e){e.addRef(),this.prefabMap.set(t,e)},e.prototype.register=function(t,e){this.templateMap.set(t,e)},e.prototype.onDestroy=function(){this.prefabMap.forEach(function(t){return t.decRef()}),this.prefabMap.clear(),this.templateMap.clear(),this.poolMap.forEach(function(t){return t.clear()}),this.poolMap.clear(),n._instance=null},e.recycle=function(t){n.getInstance().putNode(t)},e.genPool=function(t,e){var n=this.getInstance();return e&&n.register(t,cc.instantiate(e)),{get:function(){return n.getNode(t)},put:function(e){n.putNode(e,t)}}},e.prototype.tryCreatePool=function(t,e){var n=this.poolMap.get(t);n||(n=new cc.NodePool,this.poolMap.set(t,n),this.registerPrefab(t,e))},e.prototype.getPool=function(t){return this.poolMap.get(t)},e.prototype.getNode=function(t){var e=this.getPool(t),n=null==e?void 0:e.get(),r=this.prefabMap.get(t);if(r)n?(n.scaleX=r.data.scaleX,n.scaleY=r.data.scaleY,n.setContentSize(r.data.getContentSize())):(n=cc.instantiate(r)).__pool_name__=t;else{var o=this.templateMap.get(t);o&&(n?(n.scaleX=o.scaleX,n.scaleY=o.scaleY,n.setContentSize(o.getContentSize())):(n=cc.instantiate(o)).__pool_name__=t)}return n},e.prototype.putNode=function(t,e){if(e=e||t.__pool_name__){var n=this.getPool(e);n&&n.put(t)}else cc.warn("[NodePool] putNode, cannot find pool name on node: "+t)},n=i([c],e)}(cc.Component));n.NodePool=s,cc._RF.pop()},{}],Path:[function(t,e,n){"use strict";cc._RF.push(e,"b72c1tsrSFLoreTYty+y1L2","Path"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.parseBundleName=function(e){for(var n=[t.START_BUNDLE,t.MAIN_BUNDLE,t.BATTLE_BUNDLE,t.AUDIO_BUNDLE,t.FONT_BUNDLE,!1,t.RESOURCE_BUNDLE],r=0;r<n.length;++r){var o=n[r],i=o+"/";if(e.startsWith(i))return{bundleName:o,path:e.slice(i.length)}}return{bundleName:t.MAIN_BUNDLE,path:e}},t.getBundlePath=function(t,e){var n=e+"/";return t.startsWith(n)||(t=n+t),t},t.getConfigPath=function(){return this.MAIN_BUNDLE_PREFIX+"Config/JsonCfg"},t.getAudioBGM=function(t){return this.AUDIO_BUNDLE_PREFIX+"Bgm/bgm_"+t},t.getLevelPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Level/"+t},t.getEntityPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Entity/"+t},t.guardImgPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/GuardImgs/guardHeadImgs/img"+t},t.getItemPath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/Items/img_"+t},t.getItemOutlinePath=function(t){return this.BATTLE_BUNDLE_PREFIX+"Res/Items/imgOutline_"+t},t.loadingScenePath=function(){return this.START_BUNDLE_PREFIX+"View/LoadingScene"},t.loadingBg=function(){return this.START_BUNDLE_PREFIX+"Prefab/loadingBg"},t.clickEffectPath=function(){return"Sounds/click"},t.soundPath=function(t){return"Sounds/"+t},t.viewPath=function(t){return"View/"+t},t.resourcesPath=function(t){return this.RESOURCE_BUNDLE+"/"+t},t.MAIN_BUNDLE="MainBundle",t.BATTLE_BUNDLE="BattleBundle",t.AUDIO_BUNDLE="AudioBundle",t.FONT_BUNDLE="FontBundle",t.START_BUNDLE="StartBundle",t.DEBUG_BUNDLE="DebugBundle",t.RESOURCE_BUNDLE="resources",t.MAIN_BUNDLE_PREFIX=t.MAIN_BUNDLE+"/",t.BATTLE_BUNDLE_PREFIX=t.BATTLE_BUNDLE+"/",t.AUDIO_BUNDLE_PREFIX=t.AUDIO_BUNDLE+"/",t.START_BUNDLE_PREFIX=t.START_BUNDLE+"/",t.DEBUG_BUNDLE_PREFIX=t.DEBUG_BUNDLE+"/",t}();n.default=r,cc._RF.pop()},{}],Platform:[function(t,e,n){"use strict";var r;cc._RF.push(e,"cc6dfLIrMpJ4rkiQoGgIJGl","Platform"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Default=0]="Default",t[t.Wx=1]="Wx",t[t.QQ=2]="QQ",t[t.TT_Douyin=3]="TT_Douyin",t[t.TT_Toutiao=4]="TT_Toutiao",t[t.Android=5]="Android",t[t.Android_Nog=6]="Android_Nog",t[t.Android_Ohayoo=7]="Android_Ohayoo",t[t.Android_Tap=8]="Android_Tap",t[t.iOS=9]="iOS"}(r||(r={}));var o=function(){function t(){}return t.isWx=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.wx&&null==window.qq||!1},t.isQQ=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&null!=window.qq||!1},t.isWxLike=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||!1},t.isBytedance=function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isBytedanceDouyin=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"DOUYIN"===this._bytedanceAppName)},t.isBytedanceToutiao=function(){return!!this.isBytedance()&&(this._bytedanceAppName||(this._bytedanceAppName=tt.getSystemInfoSync().appName.toUpperCase()),"TOUTIAO"===this._bytedanceAppName)},t.isMiniGame=function(){return cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.BYTEDANCE_GAME||!1},t.isAndroid=function(){return cc.sys.platform===cc.sys.ANDROID||!1},t.isOhayoo=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isOhayoo}return!1},t.isTap=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return t&&!!t.isTap}return!1},t.isNog=function(){if(cc.sys.platform===cc.sys.ANDROID){var t=SDKBridge.getInstance().getSystemInfo();return!(t&&(t.isOhayoo||t.isTap))}return!1},t.isIOS=function(){return cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD||!1},t.isMobile=function(){return this.isAndroid()||this.isIOS()},t.isNative=function(){return cc.sys.isNative||!1},t.isTest=function(){return!0},t._mockInPlatform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},t._mockPlatform=r.Android,t}();n.default=o,cc._RF.pop()},{}],PlayerData:[function(t,e,n){"use strict";cc._RF.push(e,"42b0bPL3chCE4HYe8tcrPGx","PlayerData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"f5262/u3rBEZK0O6sM/pRtx","Player");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Player=void 0;var a=i(t("../../Utils/Path")),c=t("./BaseEntity"),s={Hp:"Hp",Exp:"Exp",Upgrade:"Upgrade"},u=function(t){function e(e){var n=t.call(this,0,0)||this;return n._level=0,n._exp=0,n._upgradeExp=0,n.data=e,n._hp=e.hp,n._upgradeExp=n.getUpgradeExp(n._level),n}return o(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxHp",{get:function(){return this.data.hp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLevel",{get:function(){return this.data.maxLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upgradeExp",{get:function(){return this._upgradeExp},enumerable:!1,configurable:!0}),e.prototype.onAvatarReady=function(){},e.prototype.getAssetPath=function(){return a.default.getEntityPath("Wall")},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._hp=0},e.prototype.isAlive=function(){return this._hp>0},e.prototype.addExp=function(t){this._exp+=t,this.emit(s.Exp,this._exp,this._upgradeExp)},e.prototype.canUpgrade=function(){return this.level<this.maxLevel&&this.getUpgradeExp(this.level)<=this._exp},e.prototype.upgrade=function(){this.canUpgrade()&&(this._exp-=this._upgradeExp,this._level+=1,this._upgradeExp=this.getUpgradeExp(this._level),this.emit(s.Exp,this._exp,this._upgradeExp))},e.prototype.isFullLevel=function(){return this.level>=this.maxLevel},e.prototype.getUpgradeExp=function(t){return t>=this.data.upgradeExp.length&&this.data.upgradeExp[this.data.upgradeExp.length-1],this.data.upgradeExp[t]},e.prototype.hurt=function(t){this._hp=cc.misc.clampf(this._hp-t,0,this.maxHp),this.emit(s.Hp,this._hp,this.maxHp),this._hp<=0&&this.die()},e.prototype.die=function(){},e.Events=s,e}(c.BaseEntity);n.Player=u,cc._RF.pop()},{"../../Utils/Path":"Path","./BaseEntity":"BaseEntity"}],Profiler:[function(t,e,n){"use strict";var r;cc._RF.push(e,"8dff6YEK2xMWo2Ij8b4VXRJ","Profiler"),Object.defineProperty(n,"__esModule",{value:!0}),n.profile=n.Profiler=void 0,cc.sys.platform===cc.sys.WECHAT_GAME?wx.getPerformance&&(r=wx.getPerformance()):cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.getPerformance&&(r=tt.getPerformance()),r||(r=window&&window.performance||Date);var o=function(){function t(){}return t.now=function(){return r.now()},t.lazyInit=function(){},t.start=function(){},t.end=function(){},t.dump=function(){},t.inited=!1,t}();n.Profiler=o,n.profile=function(t,e){return void 0===e&&(e=!1),function(){}},cc._RF.pop()},{}],Property:[function(t,e,n){"use strict";cc._RF.push(e,"d5173DN6pRFxKg/uliZTgZ7","Property");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReactBool=n.ReactNumber=n.ReactProperty=n.CacheNode=n.CacheVec2=n.CacheBool=n.CacheNumber=n.CacheProperty=void 0;var i=t("./Action"),a=function(){function t(t){this._gettter=t}return Object.defineProperty(t.prototype,"value",{get:function(){return void 0===this._value&&(this._value=this._gettter()),this._value},enumerable:!1,configurable:!0}),t}();n.CacheProperty=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheNumber=c;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheBool=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);n.CacheVec2=u;var l=function(t){function e(e){return t.call(this,function(){return cc.find(e)})||this}return o(e,t),e}(a);n.CacheNode=l;var f=function(){function t(t){this.onValueChange=new i.Action1,this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this.onValueChange.call(t))},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){this.onValueChange.add(t,e)},t.prototype.addWithInitValue=function(t,e){this.onValueChange.add(t,e),t.call(e,this._value)},t}();n.ReactProperty=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(f);n.ReactNumber=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(f);n.ReactBool=h,cc._RF.pop()},{"./Action":"Action"}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"0d24aEHkpBMPqD+bg6rDdp0","Queue");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(e){return null!=e?t.call(this,null,{capacity:e})||this:t.call(this)||this}return o(e,t),e.prototype.enqueue=function(t){return this.push(t)},e.prototype.dequeue=function(){return this.shift()},e.prototype.peek=function(){return this.peekFront()},e}(i(t("denque")).default);n.default=a,cc._RF.pop()},{denque:9}],RemoteStorage:[function(t,e,n){"use strict";cc._RF.push(e,"1ddf1L0HdRH2bIS/PJL+QFL","RemoteStorage"),Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteStorage=void 0;var r=function(){function t(){}return t.init=function(){throw new Error("Not implemented")},t.getItemAsync=function(t,e){if(!e)throw new Error("Not implemented");this.getItemAsync(t).then(e)},t.setItemAsync=function(t,e,n){if(!n)throw new Error("Not implemented");this.setItemAsync(t,e).then(n)},t}();n.RemoteStorage=r,cc._RF.pop()},{}],SceneType:[function(t,e,n){"use strict";cc._RF.push(e,"bc8d6PtiQFIaae0CdQeMCcB","SceneType"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneType=void 0,function(t){t[t.HomeScene=1]="HomeScene",t[t.Count=1]="Count"}(n.SceneType||(n.SceneType={})),cc._RF.pop()},{}],SettingView:[function(t,e,n){"use strict";cc._RF.push(e,"9d3faEFZ3BHxLPgsFykmu+x","SettingView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Module/ConfigManager"),s=a(t("../Module/ViewHandler")),u=cc._decorator,l=u.ccclass,f=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelFeedback=null,e.labelGamecircle=null,e.labelUserName=null,e.labelUserUid=null,e.labelConfirm=null,e._callback=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.cb;this._callback=e;var n=c.ConfigManager.instance.getLanConfig("ui_feedback"),r=c.ConfigManager.instance.getLanConfig("ui_gamecircle"),o=c.ConfigManager.instance.getLanConfig("ui_confirm"),i=c.ConfigManager.instance.getLanConfig("ui_setting");this.labelTitle.string=i,this.labelConfirm.string=o,this.labelFeedback.string=n,this.labelGamecircle.string=r,this.labelUserName.string="\u7528\u6237\u540d\u79f0",this.labelUserUid.string="uid-000000001"},e.prototype.onConfirm=function(){this.close(),this._callback()},i([f(cc.Label)],e.prototype,"labelTitle",void 0),i([f(cc.Label)],e.prototype,"labelFeedback",void 0),i([f(cc.Label)],e.prototype,"labelGamecircle",void 0),i([f(cc.Label)],e.prototype,"labelUserName",void 0),i([f(cc.Label)],e.prototype,"labelUserUid",void 0),i([f(cc.Label)],e.prototype,"labelConfirm",void 0),i([l],e)}(s.default);n.default=p,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/ViewHandler":"ViewHandler"}],StartSceneLoading:[function(t,e,n){"use strict";cc._RF.push(e,"1af1a/DqwFF7YKH25qito0f","StartSceneLoading");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=i(t("../Gameplay/Game")),c=i(t("../Utils/Path")),s=t("./ConfigManager"),u=i(t("./Database/Db")),l=i(t("./Loader")),f=i(t("./Loading")),p=window.performance||Date,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this);var n=this.timeit("[Loading] loading"),r=function(t){return e.addProgress.bind(e,t)},o=this.loadScene().then(r(20)),i=this.loadBundle(40),a=this.loadConfig().then(r(10)).then(this.loadDatabase.bind(this)).then(r(10)).then(this.login.bind(this)).then(r(10)).then(this.loadGame.bind(this)).then(r(10));Promise.all([i,o,a]).then(function(){n()})},e.prototype.loadGame=function(){var t=this.timeit("[Loading] game");return a.default.instance.init().then(t)},e.prototype.login=function(){return new Promise(function(t){t()})},e.prototype.loadDatabase=function(){u.default.instance.init()},e.prototype.loadConfig=function(){var t=this.timeit("[Loading] config");return s.ConfigManager.instance.init().then(t)},e.prototype.loadScene=function(){var t=this;return this.loadBaseBundle().then(function(){return new Promise(function(e){var n=t.timeit("[Loading] loading scene");cc.director.preloadScene("GameScene",null,function(){n(),e()})})})},e.prototype.loadBaseBundle=function(){var t=this;return new Promise(function(e){var n=t.timeit("[Loading] loading font");l.default.loadBundle([c.default.MAIN_BUNDLE],function(){n(),e()})})},e.prototype.loadBundle=function(t){var e=this;return new Promise(function(n){var r=e.timeit("[Loading] loading bundle"),o=[c.default.MAIN_BUNDLE,c.default.BATTLE_BUNDLE],i=t/o.length,a=e;(function t(){0===o.length?(r(),n()):l.default.loadBundle(o.shift(),function(){a.addProgress(i),t()})})()})},e.prototype.timeit=function(t){var e=p.now();return console.log(t+" start"),function(){var n=p.now()-e;console.log(t+" finish: "+n+"ms")}},e}(f.default);n.default=h,cc._RF.pop()},{"../Gameplay/Game":"Game","../Utils/Path":"Path","./ConfigManager":"ConfigManager","./Database/Db":"Db","./Loader":"Loader","./Loading":"Loading"}],StartScene:[function(t,e,n){"use strict";cc._RF.push(e,"179adkLG4dM+r9siYAbK2+F","StartScene");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var u=s(t("../../Module/StartSceneLoading")),l=s(t("../View/LoadingView")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLoading=null,e._loadingQuene=null,e}return o(e,t),e.prototype.start=function(){cc.dynamicAtlasManager.enabled=!1,this._loadingQuene=new u.default(1),this._loadingQuene.start(),this._loadingQuene.onComplete=this.onComplete.bind(this),this.loadLoadingView()},e.prototype.loadLoadingView=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t=this,[4,l.default.load()];case 1:return t._loadingView=e.sent(),this._loadingView.init(this._loadingQuene),[2]}})})},e.prototype.onComplete=function(){var t=this._loadingView;cc.director.loadScene("GameScene",function(){t.finish()})},i([h(cc.Label)],e.prototype,"labelLoading",void 0),i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Module/StartSceneLoading":"StartSceneLoading","../View/LoadingView":"LoadingView"}],StateMachine:[function(t,e,n){"use strict";cc._RF.push(e,"3abc3hYypJAcqXQLNN4ZRfo","StateMachine");var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(n,"__esModule",{value:!0}),n.StateMachine=n.BaseState=void 0;var i=function(){function t(){}return t.prototype.setContext=function(t){this.context=t},t.prototype.getContext=function(){return this.context},t.prototype.setStateMachine=function(t){this.stateMachine=t},t.prototype.changeState=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=this.stateMachine).changeState.apply(e,o([t],n))},t.prototype.changeStateAsync=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];setTimeout(function(){var r;(r=e.stateMachine).changeState.apply(r,o([t],n))},1)},t}();n.BaseState=i;var a=function(){function t(t){this._context=t,this._statesMap=new Map}return t.prototype.addState=function(t){this._statesMap.has(t.name)&&this._statesMap.get(t.name)!=t||(t.setContext(this._context),t.setStateMachine(this),this._statesMap.set(t.name,t))},t.prototype.addInitState=function(t){this.addState(t),this._initState=t},t.prototype.initState=function(){this.changeState(this._initState.name)},t.prototype.changeState=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(this._statesMap.has(t)&&this.getCurrentStateName()!==t)return this._prevState=this._currState,this._currState&&this._currState.onExit&&this._currState.onExit(),this._currState=this._statesMap.get(t),this._currState.onEnter&&(e=this._currState).onEnter.apply(e,o(n)),this._currState},t.prototype.revertToPreviousState=function(){this._prevState&&this.changeState(this._prevState.name)},t.prototype.getCurrentStateName=function(){var t;return null===(t=this._currState)||void 0===t?void 0:t.name},t.prototype.getState=function(t){return this._statesMap.get(t)},t.prototype.execute=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._currState&&this._currState.execute&&(t=this._currState).execute.apply(t,o(e))},t.prototype.update=function(t){this._currState&&this._currState.update&&this._currState.update(t)},t}();n.StateMachine=a,cc._RF.pop()},{}],Terrain:[function(t,e,n){"use strict";cc._RF.push(e,"f4965fWvvRKrZ2gayCNF2Nn","Terrain");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=a(t("../../Utils/Utils")),s=cc._decorator,u=s.ccclass,l=s.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerPos=null,e.guardSpawnPos=null,e.enemySpawnPos=null,e.guardFrontierPos=null,e}return o(e,t),e.prototype.init=function(){c.default.updateAlignmentRecursively(this.node),this.playerPosition=this.playerPos.getPosition(),this.guardSpawnPosition=this.guardSpawnPos.getPosition(),this.guardFrontierY=this.guardFrontierPos.getPosition().y},e.prototype.getRandEnemyPos=function(){for(var t=[],e=0;e<this.enemySpawnPos.children.length;e++){var n=this.enemySpawnPos.children[e],r=n.getPosition(),o=n.getBoundingBox();t.push({position:r,rect:o})}var i=c.default.shuffle(t)[0],a=i.position,s=i.rect.yMin,u=i.rect.yMax;i.rect.width>i.rect.height&&(s=i.rect.xMin,u=i.rect.xMax);var l=c.default.randomRange(s,u);return a.add(cc.v2(l,0))},i([l(cc.Node)],e.prototype,"playerPos",void 0),i([l(cc.Node)],e.prototype,"guardSpawnPos",void 0),i([l(cc.Node)],e.prototype,"enemySpawnPos",void 0),i([l(cc.Node)],e.prototype,"guardFrontierPos",void 0),i([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Utils/Utils":"Utils"}],UpgradeCard:[function(t,e,n){"use strict";cc._RF.push(e,"95657FjVj5BJ6MAMHVoUTVp","UpgradeCard");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Module/ConfigManager"),s=a(t("../Module/Loader")),u=a(t("../Utils/Path")),l=a(t("../Utils/Utils")),f=cc._decorator,p=f.ccclass,h=f.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelName=null,e.labelHeroCost=null,e.showCaseNode=null,e.heroCostNode=null,e.guardImg=null,e._destroyUids=[],e._guardId=null,e._config=null,e._entityManager=null,e.cb=null,e}return o(e,t),e.prototype.init=function(t,e,n){this._entityManager=t,this.cb=n,this._destroyUids=e.destroyUids||[],this._guardId=e.guardId,this._config=c.ConfigManager.instance.getGuardConfig(this._guardId),this.showCaseNode.active=this._destroyUids.length>0;for(var r=0;r<this.showCaseNode.children.length;r++)this.showCaseNode.children[r].active=!1;for(r=0;r<this._destroyUids.length;r++){this.showCaseNode.children[r].active=!0;var o=this._destroyUids[r],i=this.showCaseNode.children[r].getChildByName("imgSlaveAvatar").getComponent(cc.Sprite);this.showGuardImg(o,i)}this.showCardInfo()},e.prototype.showCardInfo=function(){var t=this,e=this._config,n="guard_"+this._guardId+"_name";this.labelName.string=c.ConfigManager.instance.getLanConfig(n),this.heroCostNode.active=e.costHeroSoul&&e.costHeroSoul>0,this.heroCostNode.active&&(this.labelHeroCost.string=""+e.costHeroSoul);var r=u.default.guardImgPath(this._guardId);s.default.loadRes(r,cc.SpriteFrame,function(e){t.guardImg.spriteFrame=e,l.default.scaleImg(t.guardImg.node,e,150)},this)},e.prototype.showGuardImg=function(t,e){var n=t,r=this._entityManager.getGuard(n),o=u.default.guardImgPath(r.id);s.default.loadRes(o,cc.SpriteFrame,function(t){e.spriteFrame=t,l.default.scaleImg(e.node,t,60)},this)},e.prototype.onClick=function(){this.cb&&this.cb()},i([h(cc.Label)],e.prototype,"labelName",void 0),i([h(cc.Label)],e.prototype,"labelHeroCost",void 0),i([h(cc.Node)],e.prototype,"showCaseNode",void 0),i([h(cc.Node)],e.prototype,"heroCostNode",void 0),i([h(cc.Sprite)],e.prototype,"guardImg",void 0),i([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Module/ConfigManager":"ConfigManager","../Module/Loader":"Loader","../Utils/Path":"Path","../Utils/Utils":"Utils"}],UpgradeConfig:[function(t,e,n){"use strict";cc._RF.push(e,"e0f71sHNBZLIaPTV0HDJW7x","UpgradeConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.UpgradeType=void 0,function(t){t[t.SummonGuard=0]="SummonGuard",t[t.UpgradeGuard=1]="UpgradeGuard"}(n.UpgradeType||(n.UpgradeType={})),cc._RF.pop()},{}],UpgradeView:[function(t,e,n){"use strict";cc._RF.push(e,"e8fcemmwG9P7KW4QiDKJxxj","UpgradeView");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Interface/Config/UpgradeConfig"),s=a(t("./UpgradeCard")),u=a(t("../Module/ViewHandler")),l=cc._decorator,f=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.card=null,e.cardNode=null,e.btnRefresh=null,e.labelRefresh=null,e._entityManager=null,e._onClose=null,e}return o(e,t),e.prototype.initiateView=function(t){var e=t.entityManager,n=t.upgradeConfig,r=t.onClose;this._entityManager=e,this._onClose=r,this.initCard(n.upgradeOptions)},e.prototype.initCard=function(t){var e=this;this.cardNode.removeAllChildren();for(var n=function(n){var o=cc.instantiate(r.card);o.parent=r.cardNode;var i=o.getComponent(s.default),a=t[n];i.init(r._entityManager,a,function(){e.selectOption(a,e._entityManager)})},r=this,o=0;o<t.length;o++)n(o)},e.prototype.onRefresh=function(){},e.prototype.selectOption=function(t,e){switch(t.type){case c.UpgradeType.SummonGuard:e.createGuard(t.guardId);break;case c.UpgradeType.UpgradeGuard:e.upgradeGuard(t.guardId,t.destroyUids)}this.close(),this._onClose()},i([p(cc.Prefab)],e.prototype,"card",void 0),i([p(cc.Node)],e.prototype,"cardNode",void 0),i([p(cc.Button)],e.prototype,"btnRefresh",void 0),i([p(cc.Label)],e.prototype,"labelRefresh",void 0),i([f],e)}(u.default);n.default=h,cc._RF.pop()},{"../Interface/Config/UpgradeConfig":"UpgradeConfig","../Module/ViewHandler":"ViewHandler","./UpgradeCard":"UpgradeCard"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"ef620FmdiBJCZjynGPOJQB0","Utils");var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=i(t("./CryptoJsMini")),c=function(){function t(){}return t.ensureStringLength=function(t,e,n){if(t.length>e)return t.slice(0,e);if(t.length<e){for(n=n||"A";t.length<e;)t+=n;return t.length>e?t.slice(0,e):t}return t},t.getAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var r=a.default.enc.Utf8.parse(e),o=a.default.enc.Utf8.parse(n);return a.default.AES.encrypt(t,r,{iv:o,mode:a.default.mode.CBC,padding:a.default.pad.Pkcs7}).toString()},t.getDAesString=function(t,e,n){e=this.ensureStringLength(e,32,"A"),n=this.ensureStringLength(n,16,"B");var r=a.default.enc.Utf8.parse(e),o=a.default.enc.Utf8.parse(n);return a.default.AES.decrypt(t,r,{iv:o,mode:a.default.mode.CBC,padding:a.default.pad.Pkcs7}).toString(a.default.enc.Utf8)},t.getRandomCodeKey=function(t){for(var e="",n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=n.length,o=0;o<(t||8);o++)e+=n.charAt(Math.floor(Math.random()*r));return e},t.encodeShareQuery=function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);var r=e.join("&");return this.getAesString(r,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9")},t.decodeShareQuery=function(t){for(var e={},n=this.getDAesString(t,"SDoisdfh21DGskdjFosdfIU2DFfs234d","126s7o8SdcDg8Rk9").split("&"),o=0;o<n.length;++o)try{var i=r(n[o].split("="),2),a=i[0],c=i[1];e[a]=c}catch(s){}return e},t.encode=function(t){return this.getAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.decode=function(t){return this.getDAesString(t,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","1234567812345678")},t.encodeObject=function(e){var n={};for(var r in e){var o=e[r];n[r]=t.encode(JSON.stringify(o))}return n},t.decodeObject=function(e){var n={};for(var r in e){var o=e[r];if(null!=o){var i=t.decode(o);n[r]=""!=i?JSON.parse(i):null}else n[r]=null}return n},t.directionToAngle=function(t){return cc.misc.radiansToDegrees(cc.Vec2.RIGHT.signAngle(t))},t.randomRangeInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.randomRange=function(t,e){return Math.random()*(e-t)+t},t.shuffle=function(t){for(var e,n=t.length-1;n>0;n--){var o=Math.floor(Math.random()*(n+1));e=r([t[o],t[n]],2),t[n]=e[0],t[o]=e[1]}return t},t.randomSelect=function(t){return 0===t.length?null:t[this.randomRangeInt(0,t.length)]},t.arrayEquals=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.sliceArray=function(t,e){if(0===t.length)return[];for(var n=[],r=Math.ceil(t.length/e),o=0;o<r;++o)n.push(t.slice(o*e,(o+1)*e));return n},t.sortArray=function(t,e){if(0!==t.length){for(var n=[],r=0;r<t.length;++r){var o=t[r],i=e(o);n.push({element:o,key:i})}return n.sort(function(t,e){return t.key-e.key}),n.map(function(t){return t.element})}},t.createMultiMap=function(t,e){var n=new Map;return t.forEach(function(t){var o=r(e(t),2),i=o[0],a=o[1];n.has(i)?n.get(i).push(a):n.set(i,[a])}),n},t.createMap=function(t,e){return new Map(t.map(function(t){return e(t)}))},t.scaleImg=function(t,e,n){var r=n/e.getRect().width,o=n/e.getRect().height,i=Math.min(r,o);t.scale=i;var a=e.getRect().width,c=e.getRect().height;t.width=a,t.height=c},t.gray=function(t,e){var n,r;void 0===e&&(e=!0);var i=t.getComponent(cc.RenderComponent);if(i){var a=cc.Material.getBuiltinMaterial("2d-gray-sprite");i[this.RAW_MAT_PROP]||(i[this.RAW_MAT_PROP]=i.getMaterial(0)),i.setMaterial(0,a)}if(e)try{for(var c=o(t.children),s=c.next();!s.done;s=c.next()){var u=s.value;this.gray(u,!0)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}},t.ungray=function(t,e){var n,r;void 0===e&&(e=!0);var i=t.getComponent(cc.RenderComponent);if(i){var a=i[this.RAW_MAT_PROP];a&&(i.setMaterial(0,a),delete i[this.RAW_MAT_PROP])}if(e)try{for(var c=o(t.children),s=c.next();!s.done;s=c.next()){var u=s.value;this.ungray(u,!0)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}},t.getOrAddComponent=function(t,e){var n=t.getComponent(e);return n||(n=t.addComponent(e)),n},t.getNodePath=function(t){for(var e=[t.name];t.parent;)e.push(t.parent.name),t=t.parent;return e.reverse(),e.join("/")},t.isAncestorOf=function(t,e){for(;e.parent;){if(e.parent===t)return!0;e=e.parent}return!1},t.updateAlignmentRecursively=function(t){var e,n,r;null===(r=t.getComponent(cc.Widget))||void 0===r||r.updateAlignment();try{for(var i=o(t.children),a=i.next();!a.done;a=i.next()){var c=a.value;this.updateAlignmentRecursively(c)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.transformRectTo=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),n.invert(n),e.transformMat4(e,n),e},t.transformRectFrom=function(t,e){var n=new cc.Mat4;return t.getWorldMatrix(n),e.transformMat4(e,n),e},t.getBoundingBoxToNode=function(t,e){var n=t.getBoundingBox();return t.parent&&(n=this.transformRectFrom(t.parent,n)),this.transformRectTo(e,n)},t.convertNodePositionToNode=function(t,e,n){if(cc.isValid(n)&&cc.isValid(t))return n.convertToNodeSpaceAR(t.convertToWorldSpaceAR(e))},t.getWorldPosition=function(t){return t.convertToWorldSpaceAR(cc.Vec2.ZERO)},t.toggleRenderer=function(t,e){var n=t.getComponent(cc.RenderComponent);n&&(n.enabled=e);for(var r=0;r<t.childrenCount;++r)this.toggleRenderer(t.children[r],e)},t.randomPointInRect=function(t){return cc.v2(this.randomRange(t.xMin,t.xMax),this.randomRange(t.yMin,t.yMax))},t.unionRects=function(t){if(!t.length)return null;for(var e=t[0],n=1;n<t.length;++n)e.union(e,t[n]);return e},t.playAnim=function(t,e,n,r){t.play(e).repeatCount=n,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r&&r()},this)},t.playAnims=function(t,e,n){var r=this;0===e.length?n&&n():(t.play(e.shift()).repeatCount=1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r.playAnims(t,e,n)},this))},t.playAnimsWithRepeats=function(t,e,n){var r=this;if(0===e.length)n&&n();else{var o=e.shift(),i=o.name,a=o.repeat;t.play(i).repeatCount=null!=a?a:1,t.targetOff(this),t.once(cc.Animation.EventType.FINISHED,function(){r.playAnimsWithRepeats(t,e,n)},this)}},t.prefixZero=function(t,e){return(Array(e).join("0")+t).slice(-e)},t.formatDate=function(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1,o=r<10?"0"+r:r,i=e.getDate();return n+"-"+o+"-"+(i<10?"0"+i:i)},t.formatSimpleTimeText=function(t){var e=this.formatTime(t),n=e.findIndex(function(t){return t>0});n<0&&(n=3);for(var r=""+e[n],o=n+1;o<=3;++o)r+=":"+this.prefixZero(e[o],2);return r},t.formatTime=function(t){t=Math.floor(.001*t);var e=[],n=Math.floor(t/86400);e.push(n),t-=86400*n;var r=Math.floor(t/3600);e.push(r),t-=3600*r;var o=Math.floor(t/60);return e.push(o),t-=60*o,e.push(t),e},t.formatNumberString=function(t){var e=Math.floor(t).toString();return e.length<=5?e:e.length<=8?(t-t%100)/1e4+"\u4e07":(t-t%1e4)/1e8+"\u4ebf"},t.RAW_MAT_PROP="__raw_mat_before_gray",t}();n.default=c,cc._RF.pop()},{"./CryptoJsMini":"CryptoJsMini"}],ViewHandler:[function(t,e,n){"use strict";cc._RF.push(e,"1c349gomttE/IFM/eGZiW9V","ViewHandler");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c=a(t("./ViewModule")),s=a(t("./FFComponent")),u=a(t("../Enum/ViewType")),l=cc._decorator,f=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewID="",e.viewName="",e.viewType=u.default.Normal,e._clawHandles=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.onDisable=function(){this.hideGuides()},e.prototype.onAnimateFinish=function(){},e.prototype.open=function(t){this.initiateView(t)},e.prototype.close=function(){c.default.instance.popView(this)},e.prototype.message=function(){},e.prototype.hideGuides=function(){this._clawHandles},e.prototype.showGuide=function(t,e,n){void 0===n&&(n=!1)},i([f],e)}(s.default));n.default=p,cc._RF.pop()},{"../Enum/ViewType":"ViewType","./FFComponent":"FFComponent","./ViewModule":"ViewModule"}],ViewMessage:[function(t,e,n){"use strict";cc._RF.push(e,"c37dchY+ppKT5DyjpPNkc0f","ViewMessage"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewMessage=void 0,n.ViewMessage||(n.ViewMessage={}),cc._RF.pop()},{}],ViewModule:[function(t,e,n){"use strict";cc._RF.push(e,"5ed43pn/D5IboXBM/v61rW+","ViewModule");var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t("./Loader")),a=o(t("../Utils/IDGenerator")),c=o(t("./ViewHandler")),s=o(t("../Utils/Path")),u=o(t("./AutoRelease")),l=o(t("../Enum/ViewType")),f=o(t("../Component/View/BusyView/BusyView")),p=function(){function t(){this._activeViews=null,this._keepViews=null,this._loadingMap=null,this._activeViews=cc.js.createMap(!0),this._keepViews=cc.js.createMap(!0),this._loadingMap={},this._idGenerator=new a.default}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype._clearAd=function(){},t.prototype.translateView=function(t,e,n){this._clearActiveViews(),this._clearAd(),(n=this._handleOptions(n)).animate=!1,this.pushView(t,e,n)},t.prototype.pushView=function(t,e,n){n=this._handleOptions(n);var r=this._activeViews[t];if(r)n.onLoaded&&n.onLoaded(r.getComponent(c.default));else if(!n.only||!this._loadingMap[t])if(this._loadingMap[t])this._loadingMap[t].push(e);else if(this._loadingMap[t]=[e],r=this._keepViews[t]){var o=r.getComponent(u.default).prefab;this._loadPrefabSuccess(t,n,o)}else this.loadView(t,n)},t.prototype.loadView=function(t,e){var n=this,r=s.default.viewPath(t);e.bundle&&(r=s.default.getBundlePath(r,e.bundle)),this.showBusy(),i.default.loadRes(r,cc.Prefab,function(r){n._loadPrefabSuccess(t,e,r),n.hideBusy()},null)},t.prototype.showBusy=function(){f.default.show()},t.prototype.hideBusy=function(){f.default.hide()},t.prototype.popView=function(t,e){var n=t.viewID,r=t.viewName,o=this._activeViews[n];delete this._activeViews[n],o&&cc.isValid(o,!0)&&(r in this._keepViews?(o.active=!1,o.removeFromParent()):this._release(t)),e||this._clearAd()},t.prototype.popViewsByName=function(t){var e,n,o=[];for(var i in this._activeViews)(s=this._activeViews[i])&&s.name==t&&o.push(s);try{for(var a=r(o),c=a.next();!c.done;c=a.next()){var s,u=(s=c.value).getComponent(t);this.popView(u)}}catch(l){e={error:l}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},t.prototype.popViewsByType=function(t,e){var n,o,i=[];for(var a in this._activeViews)(l=this._activeViews[a].getComponent(c.default))&&l.viewType==t&&(e&&e.includes(l.viewName)||i.push(l));try{for(var s=r(i),u=s.next();!u.done;u=s.next()){var l=u.value;this.popView(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t.prototype.popInvalidViews=function(){var t,e;try{for(var n=r(Object.keys(this._activeViews)),o=n.next();!o.done;o=n.next()){var i=o.value,a=this._activeViews[i];a&&cc.isValid(a,!0)||delete this._activeViews[i]}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.activeView=function(t){return this._activeViews[t]?this._activeViews[t]:null},t.prototype.getActiveViews=function(){return this._activeViews},t.prototype.activeViewsByName=function(t){var e=[];for(var n in this._activeViews){var r=this._activeViews[n];t==r.getComponent(c.default).viewName&&e.push(r)}return e.length<1&&(e=null),e},t.prototype.isWorkingByName=function(t){return!!(this._loadingMap[t]&&this._loadingMap[t].length>0)||!!this.activeView(t)},t.prototype.clear=function(){this._clearActiveViews(),this._clearCacheViews()},t.prototype.worldRoot=function(){return cc.find("Canvas/World")},t.prototype.lowerUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/LowerUI")},t.prototype.viewRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/View")},t.prototype.topUiRoot=function(){return cc.find("Canvas/MainCamera/UIRoot/TopUI")},t.prototype.loadingRoot=function(){return cc.find("Canvas/MainCamera/Loading")},t.prototype.guideRoot=function(){return cc.find("Canvas/MainCamera/GuideLayer")},t.prototype.toast=function(t,e){this.pushView("ToastView",{text:t,value:e},{keep:!0,only:!0,bundle:s.default.MAIN_BUNDLE,zIndex:1})},t.prototype.sendMessage=function(t,e){for(var n in this._activeViews){var r=this._activeViews[n];r&&""!=r.name&&r.getComponent(c.default).message(t,e)}},t.prototype._clearActiveViews=function(){for(var t in this._activeViews)if("CommonLoadingView"!=t){var e=this._activeViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponent(c.default);this._release(n),delete this._activeViews[t]}}},t.prototype._clearCacheViews=function(){for(var t in this._keepViews){var e=this._keepViews[t];if(e&&cc.isValid(e,!0)){var n=e.getComponentInChildren(c.default);this._release(n)}}this._keepViews=cc.js.createMap(!0)},t.prototype._release=function(t){cc.isValid(t,!0)&&t.node.destroy()},t.prototype._loadPrefabSuccess=function(t,e,n){e.keep&&!this._keepViews[t]&&(this._keepViews[t]=i.default.instantiate(n));for(var r=this._loadingMap[t],o=0;o<r.length;++o){var a=r[o],c=i.default.instantiate(n);c.zIndex=e.zIndex;var s=t;e.only||(s=t+this._idGenerator.getNewId()),this._activeViews[s]=c;var u=c.getComponent(t);if(u||(u=c.addComponent(t)),u.viewID=s,u.viewName=t,c.name=t,c.active=!0,"CommonLoadingView"==c.name)c.parent=this.loadingRoot();else if("GuideTalkView"==c.name)c.parent=this.guideRoot();else if(u.viewType===l.default.World){var f=this.worldRoot(),p=f.getChildByName("Viewport"),h=f.getChildByName("content");c.parent=h,h.setContentSize(c.getContentSize()),h.setAnchorPoint(c.getAnchorPoint()),p.setContentSize(c.getContentSize()),p.setAnchorPoint(c.getAnchorPoint())}else u.viewType===l.default.LowerUI?c.parent=this.lowerUiRoot():u.viewType===l.default.TopUI?c.parent=this.topUiRoot():c.parent=this.viewRoot();u.open(a);var d=c.getChildByName("view");if(d){var y=cc.view.getVisibleSizeInPixel(),_=y.width/y.height>=.74,g=u.viewType===l.default.Normal;_&&g&&(d.scale=.5)}if(e.animate)if(d){var v=d.scale,m=1.05*v;d.scale=.2*v,cc.tween(d).to(.2,{scale:m}).delay(.05).to(.1,{scale:v}).call(u.onAnimateFinish.bind(u)).start()}else u.onAnimateFinish();else u.onAnimateFinish();e.onLoaded&&e.onLoaded(u)}delete this._loadingMap[t]},t.prototype._loadViewFail=function(t,e){console.warn(t+" load fial, err: ",e)},t.prototype._handleOptions=function(t){return t||(t={}),t.zIndex=t.zIndex?t.zIndex:0,t.keep=!!t.keep,"animate"in t||(t.animate=!0),t.only=!("only"in t&&!t.only),t},t._instance=null,t}();n.default=p,cc._RF.pop()},{"../Component/View/BusyView/BusyView":"BusyView","../Enum/ViewType":"ViewType","../Utils/IDGenerator":"IDGenerator","../Utils/Path":"Path","./AutoRelease":"AutoRelease","./Loader":"Loader","./ViewHandler":"ViewHandler"}],ViewType:[function(t,e,n){"use strict";var r;cc._RF.push(e,"9d3a20UkXNP7q7Q1CVDXIqb","ViewType"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.World=0]="World",t[t.LowerUI=1]="LowerUI",t[t.Normal=2]="Normal",t[t.TopUI=3]="TopUI"}(r||(r={})),n.default=r,cc._RF.pop()},{}],Viewport:[function(t,e,n){"use strict";cc._RF.push(e,"fcb8340FNFOmYHC5J0uJjjn","Viewport");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var c,s=t("../../Enum/SceneType"),u=a(t("../../Utils/Utils")),l=cc._decorator,f=l.ccclass,p=l.property;(function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"})(c||(c={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e._cameraNode=null,e._startMove=!1,e._scrollEnabled=!0,e._screenRange=[-1,1],e._screenIndex=0,e._scrollDirection=c.None,e._indexSceneMap=new Map,e}return o(e,t),e.prototype.onLoad=function(){this._indexSceneMap.set(0,s.SceneType.HomeScene),this._cameraNode=cc.find("Canvas/MainCamera")},e.prototype.start=function(){this._initSwitchButtons(),this._registerTouch()},e.prototype._initSwitchButtons=function(){this._refreshSwitchButtons(),this.node.on("screen_switch",this._refreshSwitchButtons,this)},e.prototype._refreshSwitchButtons=function(){},e.prototype.whichScene=function(){return this._indexSceneMap.get(this._screenIndex)},e.prototype.switchScreen=function(t){this._moveToScreen(this._screenIndex+t)},e.prototype.isCurrentScreenLeftBound=function(){return this._screenIndex===this._screenRange[0]},e.prototype.isCurrentScreenRightBound=function(){return this._screenIndex===this._screenRange[1]},e.prototype.refreshRange=function(){var t=this.node.getContentSize(),e=this._cameraNode,n=e.getContentSize(),r=t.height,o=cc.v2(this._getScreenX(this._screenRange[0])-n.width/2,0),i=cc.v2(this._getScreenX(this._screenRange[1])+n.width/2,r);o=u.default.convertNodePositionToNode(this.content,o,e.parent),i=u.default.convertNodePositionToNode(this.content,i,e.parent),o.addSelf(cc.v2(n.width*e.anchorX,n.height*e.anchorY)),i.subSelf(cc.v2(n.width*(1-e.anchorX),n.height*(1-e.anchorY))),this._moveRange=cc.Rect.fromMinMax(o,i),this._jumpToScreen(0)},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.scrollTo=function(t,e,n){var r=this;if(void 0===n&&(n=!1),this._scrollEnabled||n){var o=this._getScreenIndex(t.x);t.x=this._getScreenX(o);var i=u.default.convertNodePositionToNode(this.node.parent,t,this._cameraNode.parent);this._validateCameraPos(i),this._cameraNode.stopAllActions(),e>0?cc.tween(this._cameraNode).to(e,{position:cc.v3(i)}).call(function(){o!=r._screenIndex&&(r._screenIndex=o,r.node.emit("screen_switch",o))}).start():(this._cameraNode.setPosition(i),o!=this._screenIndex&&(this._screenIndex=o,this.node.emit("screen_switch",o)))}},e.prototype.scrollToTop=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMax}).start():this._cameraNode.y=this._moveRange.yMax)},e.prototype.scrollToBottom=function(t,e){void 0===e&&(e=!1),(this._scrollEnabled||e)&&(t>0?cc.tween(this._cameraNode).to(t,{y:this._moveRange.yMin}).start():this._cameraNode.y=this._moveRange.yMin)},e.prototype._registerTouch=function(){var t=this,e=this.node;e.on(cc.Node.EventType.TOUCH_START,function(e){t._scrollEnabled&&(t._startMove=!1,t._scrollDirection=c.None,t._cameraOriginPos=t._cameraNode.getPosition(),t._touchStartPos=e.getLocation(),t._touchStartTs=Date.now(),t._cameraNode.stopAllActions())},null),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(t._scrollEnabled){var n=e.getLocation(),r=t._touchStartPos.sub(n);if(!t._startMove)if(Math.abs(r.y)>=50)t._scrollDirection=c.Vertical,t._startMove=!0;else{if(!(Math.abs(r.x)>=70))return;t._scrollDirection=c.Horizontal,t._startMove=!0}return t._scrollDirection===c.Vertical?t._cameraNode.y=t._cameraOriginPos.y+r.y:t._cameraNode.x=t._cameraOriginPos.x+r.x,t._checkEdge(),!0}},null),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._scrollEnabled&&t._startMove&&t._correctScreen()},null),e.on(cc.Node.EventType.TOUCH_END,function(){t._scrollEnabled&&t._startMove&&t._inertialScroll()},null)},e.prototype._checkEdge=function(){var t=this._cameraNode.getPosition();this._validateCameraPos(t),this._cameraNode.setPosition(t)},e.prototype._validateCameraPos=function(t){t.x=cc.misc.clampf(t.x,this._moveRange.xMin,this._moveRange.xMax),t.y=cc.misc.clampf(t.y,this._moveRange.yMin,this._moveRange.yMax)},e.prototype._correctScreen=function(){var t=this._cameraNode.x/this._cameraNode.width;this._moveToScreen(t)},e.prototype._moveToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);if(this._cameraNode.x!==n){var r=.5*Math.abs(this._cameraNode.x-n)/this._cameraNode.width;cc.tween(this._cameraNode).to(r,{x:n}).start()}this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._jumpToScreen=function(t){var e=Math.round(cc.misc.clampf(t,this._screenRange[0],this._screenRange[1])),n=this._getScreenX(e);this._cameraNode.x=n,this._screenIndex=e,this.node.emit("screen_switch",e)},e.prototype._getScreenX=function(t){return t*(this._cameraNode.width+100)},e.prototype._getScreenIndex=function(t){var e,n=this._cameraNode.width+100;return e=t>=0?Math.floor((t+n/2)/n):Math.ceil((t-n/2)/n),cc.misc.clampf(e,this._screenRange[0],this._screenRange[1])},e.prototype._inertialScroll=function(){if(this._scrollDirection===c.Vertical){var t=Date.now()-this._touchStartTs,e=.5*(i=this._cameraNode.y-this._cameraOriginPos.y),n=this._cameraNode.y+e;if(0!==(n=cc.misc.clampf(n,this._moveRange.yMin,this._moveRange.yMax))){var r=.6*t;r>1&&(r=1),cc.tween(this._cameraNode).to(r,{y:n},{easing:"quadOut"}).start()}}else{var o=this._cameraNode.width,i=this._cameraNode.x-this._cameraOriginPos.x;if(Math.abs(i)>=.3*o){var a=Math.sign(i),s=this._screenIndex+a;this._moveToScreen(s)}else this._correctScreen()}},e.prototype.reset=function(){this._startMove=!1,this._scrollEnabled=!0,this._touchStartPos=cc.Vec2.ZERO,this._cameraOriginPos=cc.Vec2.ZERO,this._scrollDirection=c.None},e.prototype.onTouchBack=function(){var t=this;this._scrollEnabled=!1,cc.tween(this._cameraNode).to(.2,{position:cc.v3(this._cameraOriginPos)}).call(function(){t._startMove=!1,t._scrollEnabled=!0,t._touchStartPos=cc.Vec2.ZERO,t._cameraOriginPos=cc.Vec2.ZERO}).start()},i([p(cc.Node)],e.prototype,"content",void 0),i([p(cc.Button)],e.prototype,"_cameraNode",void 0),i([f],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Enum/SceneType":"SceneType","../../Utils/Utils":"Utils"}],WatchAdStatus:[function(t,e,n){"use strict";cc._RF.push(e,"e5017rTF0RAwJkTA+EmQdjB","WatchAdStatus"),Object.defineProperty(n,"__esModule",{value:!0}),n.WatchAdStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Cancel=1]="Cancel",t[t.Failed=2]="Failed",t[t.NotSupported=3]="NotSupported",t[t.TooFreq=4]="TooFreq",t[t.NetworkError=5]="NetworkError"}(n.WatchAdStatus||(n.WatchAdStatus={})),cc._RF.pop()},{}],eEdit:[function(t,e,n){"use strict";cc._RF.push(e,"a68b7IarHZBIbmX/Y49IFLI","eEdit");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eEdit=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,this.editbox.string=e,n&&(this.callback=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,1);this.editbox.string=""+e},e.prototype.onEditDidEnded=function(t){var e=t.string;this.callback&&this.callback(e)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.EditBox)],e.prototype,"editbox",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component);n.eEdit=l,cc._RF.pop()},{}],eGraph:[function(t,e,n){"use strict";cc._RF.push(e,"8402dhduE5Ov50TfvBqb+zA","eGraph");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGraph=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=(new cc.Vec3,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.LineGraph=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e.positions=[],e._x=100,e._y=18,e._points=10,e._limit=60,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.updateData=function(t){this.positions.length>=this._points&&this.positions.shift(),this.positions.push(t),this.drawLine()},e.prototype.init=function(t,e,n,r){void 0===n&&(n=60),void 0===r&&(r=10),this.node.name=t,this.NameLable.string=t,e&&(this.callback=e);var o=this.LineGraph.node.getContentSize();this._x=o.width,this._y=.85*o.height,this._limit=n,this._points=Math.max(Math.floor(r),3)},e.prototype.drawLine=function(){var t=this.positions.length;if(!(t<2)){this.LineGraph.clear();for(var e=.5*this._x,n=.5*this._y,r=this._y,o=this._x/(this._points-1),i=0;i<t;i++){var a=r*Math.min(this.positions[i]/this._limit,1.05)-n,c=i*o-e;0==i?this.LineGraph.moveTo(c,a):this.LineGraph.lineTo(c,a)}this.LineGraph.stroke()}},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.Graphics)],e.prototype,"LineGraph",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component));n.eGraph=l,cc._RF.pop()},{}],eGroup:[function(t,e,n){"use strict";cc._RF.push(e,"f6ba3QH8TJGU6L91bCnmd0p","eGroup");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eGroup=void 0;var a=t("./eItem"),c=t("./eSlider"),s=t("./eToggle"),u=t("./eEdit"),l=t("./eList"),f=t("./eGraph"),p=cc._decorator,h=p.ccclass,d=p.property,y=new cc.Quat,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrow=null,e.tittle=null,e.menuItem=null,e.sliderItem=null,e.toggleItem=null,e.groupItem=null,e.editItem=null,e.listItem=null,e.graphItem=null,e.nameLabel=null,e._size=new cc.Size(200,30),e._item=null,e._isVisible=!0,e._groupName="",e._time=0,e}var n;return o(e,t),n=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this.setMenuNode()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupName",{set:function(t){this._groupName=t,this.nameLabel.string=t},enumerable:!1,configurable:!0}),e.prototype.getParent=function(){return this.parentComp},e.prototype.onEnable=function(){this.tittle.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_END,this.changeVisible,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this)},e.prototype.onDisable=function(){this.tittle.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.tittle.on(cc.Node.EventType.TOUCH_MOVE,this.dragPos,this),this.tittle.off(cc.Node.EventType.TOUCH_END,this.changeVisible,this)},e.prototype.touchStart=function(){this._time=cc.director.getTotalTime()},e.prototype.dragPos=function(t){if(!(cc.director.getTotalTime()-this._time<90)){var e=this.node.parent,n=t.touch.getLocation();e.parent?e.setPosition(e.parent.convertToNodeSpaceAR(n)):e.setPosition(n.x,n.y)}},e.prototype.addGroup=function(t){var e=cc.instantiate(this.groupItem),r=e.getComponent(n);return r.size=this.size,e.parent=this.node,t&&(r.groupName=t),r.parentComp=this.getParent(),r},e.prototype.addSlider=function(t,e,n,r,o){var i=cc.instantiate(this.sliderItem);i.setContentSize(this._size),i.parent=this.node;var a=i.getComponent(c.eSlider);return a.slider.progress=n,a.editbox.string=""+n,a&&a.init(t,e,r),o&&(o=a),this},e.prototype.addEdit=function(t,e,n){var r=cc.instantiate(this.editItem);r.setContentSize(this._size),r.parent=this.node;var o=r.getComponent(u.eEdit);return o&&o.init(t,e,n),this},e.prototype.addGraph=function(t,e,n,r){void 0===n&&(n=60),void 0===r&&(r=10);var o=cc.instantiate(this.graphItem);o.setContentSize(this._size),o.parent=this.node;var i=o.getComponent(f.eGraph);return i&&i.init(t,e,n,r),this},e.prototype.addItem=function(t,e){var n=cc.instantiate(this.menuItem);n.setContentSize(this._size),n.parent=this.node;var r=n.getComponent(a.eItem);return r&&r.init(t,e),this},e.prototype.addList=function(t,e){var n=cc.instantiate(this.listItem);n.setContentSize(cc.size(this._size.width,n.getContentSize().height)),n.parent=this.node;var r=n.getComponent(l.eList);return r&&r.init(t,e),this},e.prototype.addToggle=function(t,e,n){void 0===n&&(n=!0);var r=cc.instantiate(this.toggleItem);r.setContentSize(this._size),r.parent=this.node;var o=r.getComponent(s.eToggle);return o.toggle.isChecked=n,o&&o.init(t,e),this},e.prototype.setMenuNode=function(){var t=this;this.resetSize(this.node);var e=this.node.children;e.length>0&&e.forEach(function(e){t.resetSize(e)})},e.prototype.resetSize=function(t){t.setContentSize(this._size)},e.prototype.resetItem=function(t){this._item!=t&&this._item&&this._item.onNormal(),this._item=t},e.prototype.changeVisible=function(){this._isVisible=!this._isVisible;var t=this.node.children;this.arrow.rotation=cc.Quat.fromAngleZ(y,this._isVisible?-90:0);for(var e=1;e<t.length;e++)t[e].active=this._isVisible},i([d(cc.Node)],e.prototype,"arrow",void 0),i([d(cc.Node)],e.prototype,"tittle",void 0),i([d(cc.Prefab)],e.prototype,"menuItem",void 0),i([d(cc.Prefab)],e.prototype,"sliderItem",void 0),i([d(cc.Prefab)],e.prototype,"toggleItem",void 0),i([d(cc.Prefab)],e.prototype,"groupItem",void 0),i([d(cc.Prefab)],e.prototype,"editItem",void 0),i([d(cc.Prefab)],e.prototype,"listItem",void 0),i([d(cc.Prefab)],e.prototype,"graphItem",void 0),i([d(cc.Label)],e.prototype,"nameLabel",void 0),n=i([h],e)}(cc.Component);n.eGroup=_,cc._RF.pop()},{"./eEdit":"eEdit","./eGraph":"eGraph","./eItem":"eItem","./eList":"eList","./eSlider":"eSlider","./eToggle":"eToggle"}],eItem:[function(t,e,n){"use strict";cc._RF.push(e,"25493LQs4pHSqAzfHZVO6iA","eItem");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eItem=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.NameLable.string=String(t)||this.NameLable.string)}},i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component);n.eItem=l,cc._RF.pop()},{}],eList:[function(t,e,n){"use strict";cc._RF.push(e,"07308iMMmFGWa0m3+/sDKOp","eList");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eList=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TouchArea=null,e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.ListLabel=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),this.TouchArea.on(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){this.TouchArea.off(cc.Node.EventType.TOUCH_END,this.onClick,this),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){if(this.callback){var t=this.callback();t&&(this.ListLabel.string=String(t)||this.ListLabel.string)}},i([s(cc.Node)],e.prototype,"TouchArea",void 0),i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.Label)],e.prototype,"ListLabel",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component);n.eList=l,cc._RF.pop()},{}],eMenu:[function(t,e,n){"use strict";cc._RF.push(e,"85cb9IBtahOTa27eSlpIePB","eMenu");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eMenu=void 0;var a=t("./eGroup"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GroupPrefab=null,e._size=new cc.Size(200,30),e._groups=new Map,e._isVisible=!0,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemSize",{get:function(){return this._size},set:function(t){this._size=t},enumerable:!1,configurable:!0}),e.prototype.addGroup=function(t){var e=cc.instantiate(this.GroupPrefab),n=e.getComponent(a.eGroup);return t&&(n.groupName=t,this._groups.set(t,e)),n.parentComp=this,n.size=this._size,e.parent=this.node,n},e.prototype.getGroup=function(t){return this._groups.get(t)||null},e.prototype.deleteGroup=function(t){var e=this.getGroup(t);e&&(this._groups.delete(t),e.removeFromParent(),e.destroy())},e.prototype.resetSize=function(t){t.setContentSize(this.MenuItemSize)},i([u(cc.Size)],e.prototype,"MenuItemSize",null),i([u(cc.Prefab)],e.prototype,"GroupPrefab",void 0),i([u({visible:!1})],e.prototype,"_size",void 0),i([s],e)}(cc.Component);n.eMenu=l,cc._RF.pop()},{"./eGroup":"eGroup"}],eSlider:[function(t,e,n){"use strict";cc._RF.push(e,"b79efkp/cJCiL0dI9mTYc6U","eSlider");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eSlider=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.slider=null,e.editbox=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e._scale=1,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e),n&&(this._scale=n)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.setProgress=function(t){var e=cc.clamp(Number(t)||0,0,this._scale);this.slider.progress=e/this._scale,this.editbox.string=""+e},e.prototype.onSliderCallback=function(t){var e=t.progress*this._scale;this.editbox.string=""+e,this.callback&&this.callback(e)},e.prototype.onEditDidEnded=function(t){var e=cc.clamp(Number(t.string)||0,0,this._scale);this.callback&&this.callback(e),this.slider.progress=e/this._scale},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},e.prototype.onClick=function(){this.callback&&this.callback(this.slider.progress)},i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.Slider)],e.prototype,"slider",void 0),i([s(cc.EditBox)],e.prototype,"editbox",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component);n.eSlider=l,cc._RF.pop()},{}],eToggle:[function(t,e,n){"use strict";cc._RF.push(e,"4a275KyfYtI+aBzBrwqJDOW","eToggle");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.eToggle=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,u=new cc.Color,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BgSprite=null,e.SideSprite=null,e.NameLable=null,e.toggle=null,e.BgColor=new cc.Color(40,40,40,255),e.SideColor=new cc.Color(0,130,180,255),e.pressStrenth=.75,e}return o(e,t),Object.defineProperty(e.prototype,"MenuItemBgColor",{get:function(){return this.BgColor},set:function(t){this.BgColor=t,this.onNormal()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MenuItemSideColor",{get:function(){return this.SideColor},set:function(t){this.SideColor=t,this.onNormal()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.node.name=t,this.NameLable.string=t,e&&(this.callback=e)},e.prototype.onEnable=function(){this.onNormal(),cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onDisable=function(){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onPress,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onNormal,this))},e.prototype.onToggleCallback=function(t){this.callback&&this.callback(t.isChecked)},e.prototype.changeColor=function(t){this.BgSprite.node.color=cc.Color.set(u,this.BgColor.r*t,this.BgColor.g*t,this.BgColor.b*t)},e.prototype.onPress=function(){this.changeColor(this.pressStrenth)},e.prototype.onNormal=function(){this.changeColor(1)},i([s(cc.Sprite)],e.prototype,"BgSprite",void 0),i([s(cc.Sprite)],e.prototype,"SideSprite",void 0),i([s(cc.Label)],e.prototype,"NameLable",void 0),i([s(cc.Toggle)],e.prototype,"toggle",void 0),i([s(cc.Color)],e.prototype,"MenuItemBgColor",null),i([s(cc.Color)],e.prototype,"MenuItemSideColor",null),i([s({visible:!1})],e.prototype,"BgColor",void 0),i([s({visible:!1})],e.prototype,"SideColor",void 0),i([c],e)}(cc.Component);n.eToggle=l,cc._RF.pop()},{}]},{},["CollisionWrapper","EntityTag","GameScene","StartScene","Viewport","Terrain","BattleView","BusyCircle","BusyView","HomeWorld","LoadingView","eEdit","eGraph","eGroup","eItem","eList","eMenu","eSlider","eToggle","Profiler","AchievementStatus","ClawGuideType","SceneType","ViewMessage","ViewType","WatchAdStatus","Battle","PlayerData","BattleFlow","BattleStats","EnemyStateMachine","GuardStateMachine","BaseEntity","Bullet","Enemy","EntityManager","Guard","IEntityContext","Player","Game","GameDefine","IBattleContext","BagSystem","BaseSystem","BattleSystem","ISystem","Common","BulletConfig","EnemyConfig","GuardConfig","LanConfig","LevelConfig","UpgradeConfig","BagData","IBaseData","LocalData","Audio","AutoRelease","ConfigManager","Db","DbMap","LocalStorage","RemoteStorage","FFComponent","Loader","Loading","StartSceneLoading","ViewHandler","ViewModule","BattleEndView","BattleUI","SettingView","UpgradeCard","UpgradeView","Action","CryptoJsMini","Heap","IDGenerator","NodePool","Path","Platform","Property","Queue","StateMachine","Utils"]);